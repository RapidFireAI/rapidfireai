{"version":3,"file":"static/js/8226.2b4c3ef8.chunk.js","mappings":"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","sources":["shared/web-shared/model-trace-explorer/ModelTrace.types.ts","common/components/KeyValueTagFullViewModal.tsx","common/components/KeyValueTag.tsx","shared/web-shared/model-trace-explorer/ModelTraceExplorer.tsx","experiment-tracking/components/traces/hooks/useEditExperimentTraceTags.tsx","common/components/TagSelectDropdown.tsx","common/hooks/useEditKeyValueTagsModal.tsx"],"sourcesContent":["import type { TimelineTreeNode } from './timeline-tree';\n\nexport const MLFLOW_TRACE_SCHEMA_VERSION_KEY = 'mlflow.trace_schema.version';\n\n// column name for mlflow trace data in inference tables\nexport const INFERENCE_TABLE_RESPONSE_COLUMN_KEY = 'response';\nexport const INFERENCE_TABLE_TRACE_COLUMN_KEY = 'trace';\n\nexport type ModelTraceExplorerRenderMode = 'default' | 'json';\n\nexport enum ModelSpanType {\n  LLM = 'LLM',\n  CHAIN = 'CHAIN',\n  AGENT = 'AGENT',\n  TOOL = 'TOOL',\n  FUNCTION = 'FUNCTION',\n  CHAT_MODEL = 'CHAT_MODEL',\n  RETRIEVER = 'RETRIEVER',\n  PARSER = 'PARSER',\n  EMBEDDING = 'EMBEDDING',\n  RERANKER = 'RERANKER',\n  MEMORY = 'MEMORY',\n  UNKNOWN = 'UNKNOWN',\n}\n\nexport enum ModelIconType {\n  MODELS = 'models',\n  DOCUMENT = 'document',\n  CONNECT = 'connect',\n  SEARCH = 'search',\n  SORT = 'sort',\n  UNKNOWN = 'unknown',\n  FUNCTION = 'function',\n  CODE = 'code',\n  NUMBERS = 'numbers',\n  WRENCH = 'wrench',\n  AGENT = 'agent',\n  CHAIN = 'chain',\n  USER = 'user',\n  SYSTEM = 'system',\n  SAVE = 'save',\n}\n\n/**\n * Represents a single model trace span.\n * Based on https://github.com/mlflow/mlflow/blob/tracing/mlflow/entities/span.py\n *\n * TODO: clean up all deprecated fields after PrPr customers swap over to\n *       the latest version of mlflow tracing\n */\nexport type ModelTraceSpanV2 = {\n  context: {\n    span_id: string;\n    trace_id: string;\n  };\n  name: string;\n  /* deprecated, renamed to `parent_id` */\n  parent_span_id?: string | null;\n  parent_id?: string | null;\n  /* deprecated, contained in attributes['mlflow.spanType'] */\n  span_type?: ModelSpanType | string;\n  /* deprecated, migrated to `status_code` and `status_message` */\n  status?: ModelTraceStatus;\n  status_code?: string;\n  status_message?: string | null;\n  start_time: number;\n  end_time: number;\n  /* deprecated, contained in attributes['mlflow.spanInputs'] */\n  inputs?: any;\n  /* deprecated, contained in attributes['mlflow.spanOutputs'] */\n  outputs?: any;\n  attributes?: Record<string, any>;\n  events?: ModelTraceEvent[];\n  /* metadata for ui usage logging */\n  type?: ModelSpanType;\n};\n\nexport type ModelTraceSpanV3 = {\n  trace_id: string;\n  span_id: string;\n  // can be empty\n  trace_state: string;\n  // can be empty or null\n  parent_span_id: string | null;\n  name: string;\n  start_time_unix_nano: string;\n  end_time_unix_nano: string;\n  status: {\n    code: ModelSpanStatusCode;\n    message?: string;\n  };\n  attributes: Record<string, any>;\n  events?: ModelTraceEvent[];\n  /* metadata for ui usage logging */\n  type?: ModelSpanType;\n};\n\nexport type ModelTraceSpan = ModelTraceSpanV2 | ModelTraceSpanV3;\n\nexport type ModelTraceEvent = {\n  name: string;\n  /* deprecated as of v3, migrated to `time_unix_nano` */\n  timestamp?: number;\n  time_unix_nano?: number;\n  attributes?: Record<string, any>;\n};\n\nexport type ModelTraceData = {\n  spans: ModelTraceSpan[];\n};\n\n/**\n * Represents a single model trace object.\n * Based on https://github.com/mlflow/mlflow/blob/8e44d102e9568d09d9dc376136d13a5a5d1ab46f/mlflow/tracing/types/model.py#L11\n */\nexport type ModelTrace = {\n  /* deprecated, renamed to `data` */\n  trace_data?: ModelTraceData;\n  /* deprecated, renamed to `info` */\n  trace_info?: ModelTraceInfo;\n  data: ModelTraceData;\n  info: ModelTraceInfoV3 | ModelTraceInfo | NotebookModelTraceInfo;\n};\n\n/**\n * Represents the trace data saved in an inference table.\n * https://github.com/databricks/universe/blob/fb8a572602161aa6387ac32593aa24a91518cc32/rag/serving/python/databricks/rag/unpacking/schemas.py#L133-L141\n */\nexport type ModelTraceInferenceTableData = {\n  app_version_id: string;\n  start_timestamp: string;\n  end_timestamp: string;\n  is_truncated: boolean;\n  [MLFLOW_TRACE_SCHEMA_VERSION_KEY]: number;\n  spans: (Omit<ModelTraceSpan, 'attributes'> & {\n    attributes: string;\n  })[];\n};\n\nexport type ModelTraceInfo = {\n  request_id?: string;\n  experiment_id?: string;\n  timestamp_ms?: number;\n  execution_time_ms?: number;\n  status?: ModelTraceStatus['description'];\n  attributes?: Record<string, any>;\n  request_metadata?: { key: string; value: string }[];\n  tags?: { key: string; value: string }[];\n};\n\n// tags and request_metadata in the notebook view\n// (i.e. displayed directly from the python client)\n// are stored as an object rather than an array.\nexport type NotebookModelTraceInfo = Omit<ModelTraceInfo, 'tags' | 'request_metadata'> & {\n  tags?: { [key: string]: string };\n  request_metadata?: { [key: string]: string };\n};\n\nexport type ModelTraceLocationMlflowExperiment = {\n  type: 'MLFLOW_EXPERIMENT';\n  mlflow_experiment: {\n    experiment_id: string;\n  };\n};\n\nexport type ModelTraceLocationInferenceTable = {\n  type: 'INFERENCE_TABLE';\n  inference_table: {\n    full_table_name: string;\n  };\n};\n\nexport type ModelTraceLocation = ModelTraceLocationMlflowExperiment | ModelTraceLocationInferenceTable;\n\nexport type ModelTraceInfoV3 = {\n  trace_id: string;\n  client_request_id?: string;\n  trace_location: ModelTraceLocation;\n  request_preview?: string;\n  response_preview?: string;\n  // timestamp in a format like \"2025-02-19T09:52:23.140Z\"\n  request_time: string;\n  // formatted duration string like \"32.4s\"\n  execution_duration: string;\n  state: ModelTraceState;\n  trace_metadata: {\n    [key: string]: string;\n  };\n  assessments: Assessment[];\n  tags: {\n    [key: string]: string;\n  };\n};\n\nexport type ModelTraceState = 'STATE_UNSPECIFIED' | 'OK' | 'ERROR' | 'IN_PROGRESS';\n\nexport type ModelSpanStatusCode = 'STATUS_CODE_UNSET' | 'STATUS_CODE_OK' | 'STATUS_CODE_ERROR';\n\nexport type ModelTraceStatusUnset = {\n  description: 'UNSET';\n  status_code: 0;\n};\n\nexport type ModelTraceStatusOk = {\n  description: 'OK';\n  status_code: 1;\n};\n\nexport type ModelTraceStatusError = {\n  description: 'ERROR';\n  status_code: 2;\n};\n\nexport type ModelTraceStatusInProgress = {\n  description: 'IN_PROGRESS';\n  status_code: 3;\n};\n\nexport enum ModelTraceSpanType {\n  LLM = 'LLM',\n  CHAIN = 'CHAIN',\n  AGENT = 'AGENT',\n  TOOL = 'TOOL',\n  CHAT_MODEL = 'CHAT_MODEL',\n  RETRIEVER = 'RETRIEVER',\n  PARSER = 'PARSER',\n  EMBEDDING = 'EMBEDDING',\n  RERANKER = 'RERANKER',\n  MEMORY = 'MEMORY',\n  UNKNOWN = 'UNKNOWN',\n}\n\nexport type ModelTraceStatus =\n  | ModelTraceStatusUnset\n  | ModelTraceStatusOk\n  | ModelTraceStatusError\n  | ModelTraceStatusInProgress;\n\n/**\n * Represents a single node in the model trace tree.\n */\nexport interface ModelTraceSpanNode extends TimelineTreeNode, Pick<ModelTraceSpan, 'attributes' | 'type' | 'events'> {\n  assessments: Assessment[];\n  inputs?: any;\n  outputs?: any;\n  children?: ModelTraceSpanNode[];\n  chatMessages?: ModelTraceChatMessage[];\n  chatTools?: ModelTraceChatTool[];\n  parentId?: string | null;\n  traceId: string;\n}\n\nexport type ModelTraceExplorerTab = 'chat' | 'content' | 'attributes' | 'events';\n\nexport type SearchMatch = {\n  span: ModelTraceSpanNode;\n  section: 'inputs' | 'outputs' | 'attributes' | 'events';\n  key: string;\n  isKeyMatch: boolean;\n  matchIndex: number;\n};\n\nexport type SpanFilterState = {\n  // always show parents regardless of filter state\n  showParents: boolean;\n  // always show exceptions regardless of filter state\n  showExceptions: boolean;\n  // record of span_type: whether to show it\n  spanTypeDisplayState: Record<string, boolean>;\n};\n\nexport interface RetrieverDocument {\n  metadata: {\n    doc_uri: string;\n    chunk_id: string;\n    [key: string]: any;\n  };\n  page_content: string;\n  [key: string]: any;\n}\n\nexport enum CodeSnippetRenderMode {\n  JSON = 'json',\n  TEXT = 'text',\n  MARKDOWN = 'markdown',\n}\n\ntype ModelTraceTextContentPart = {\n  type: 'text' | 'input_text' | 'output_text';\n  text: string;\n};\n\ntype ModelTraceImageUrl = {\n  url: string;\n  detail?: 'auto' | 'low' | 'high';\n};\n\ntype ModelTraceImageContentPart = {\n  type: 'image_url';\n  image_url: ModelTraceImageUrl;\n};\n\ntype ModelTraceInputAudio = {\n  data: string;\n  format: 'wav' | 'mp3';\n};\n\ntype ModelTraceAudioContentPart = {\n  type: 'input_audio';\n  input_audio: ModelTraceInputAudio;\n};\n\nexport type ModelTraceContentParts =\n  | ModelTraceTextContentPart\n  | ModelTraceImageContentPart\n  | ModelTraceAudioContentPart;\n\nexport type ModelTraceContentType = string | ModelTraceContentParts[];\n\n// We treat content as string in the tracing UI.\nexport type ModelTraceChatMessage = {\n  role: 'system' | 'user' | 'assistant' | 'tool' | 'function' | 'developer';\n  name?: string;\n  content?: string | null;\n  tool_calls?: ModelTraceToolCall[];\n  tool_call_id?: string;\n};\n\n// The actual chat message schema of mlflow contains string, null and content part list.\nexport type RawModelTraceChatMessage = Omit<ModelTraceChatMessage, 'content'> & {\n  // there are other types, but we don't support them yet\n  type?: 'message' | 'reasoning';\n  content?: ModelTraceContentType | null;\n};\n\nexport type ModelTraceChatToolParamProperty = {\n  type?: string;\n  description?: string;\n  enum?: string[];\n};\n\nexport type ModelTraceChatTool = {\n  type: 'function';\n  function: {\n    name: string;\n    description?: string;\n    parameters?: {\n      properties: {\n        [key: string]: ModelTraceChatToolParamProperty;\n      };\n      required?: string[];\n    };\n  };\n};\n\nexport type ModelTraceToolCall = {\n  id: string;\n  function: {\n    arguments: string;\n    name: string;\n  };\n};\n\n// aligned to the OpenAI format\nexport type ModelTraceChatResponse = {\n  choices: {\n    message: ModelTraceChatMessage;\n  }[];\n};\n\nexport type ModelTraceChatInput = {\n  messages: RawModelTraceChatMessage[];\n};\n\nexport type AssessmentSourceType = 'SOURCE_TYPE_UNSPECIFIED' | 'HUMAN' | 'LLM_JUDGE' | 'CODE';\n\nexport interface AssessmentSource {\n  source_type: AssessmentSourceType;\n  // Identifier for the source. For example:\n  // - For a human source -> user name\n  // - For an LLM judge -> the judge source (databricks or custom)\n  // - For a code judge -> the function name\n  source_id: string;\n}\n\nexport interface AssessmentError {\n  error_code: string;\n  error_message?: string;\n  stack_trace?: string;\n}\n\nexport type AssessmentValue = string | number | boolean | null | string[];\n\nexport interface Feedback {\n  // can be null / undefined if error is present\n  value?: AssessmentValue;\n  error?: AssessmentError;\n}\n\nexport interface ExpectationValue {\n  value: AssessmentValue;\n}\n\nexport interface ExpectationSerializedValue {\n  serialized_value: {\n    value: string;\n    serialization_format: string;\n  };\n}\n\nexport type Expectation = ExpectationValue | ExpectationSerializedValue;\n\n// should be aligned with `mlflow/api/proto/service.proto`\nexport interface AssessmentBase {\n  assessment_id: string;\n  assessment_name: string;\n  trace_id: string;\n  source: AssessmentSource;\n  span_id?: string;\n\n  // the time fields are in the form of a string timestamp\n  // e.g. \"2025-04-18T04:01:20.159Z\"\n  create_time: string;\n  last_update_time: string;\n\n  rationale?: string;\n  metadata?: Record<string, string>;\n\n  // if false, the assessment is not valid and should not be displayed\n  // undefined and true should be considered valid.\n  valid?: boolean;\n\n  // the assessment_id of the assessment that this assessment overrides\n  overrides?: string;\n\n  // UI only field to store the overridden assessment object for easier display\n  overriddenAssessment?: Assessment;\n}\n\nexport interface FeedbackAssessment extends AssessmentBase {\n  feedback: Feedback;\n}\n\nexport interface ExpectationAssessment extends AssessmentBase {\n  expectation: Expectation;\n}\n\nexport type Assessment = FeedbackAssessment | ExpectationAssessment;\n","import React from 'react';\nimport { Modal, Typography, CopyIcon, useDesignSystemTheme } from '@databricks/design-system';\nconst { Paragraph } = Typography;\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\n\nexport interface KeyValueTagFullViewModalProps {\n  tagKey: string;\n  tagValue: string;\n  setIsKeyValueTagFullViewModalVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  isKeyValueTagFullViewModalVisible: boolean;\n}\n\nexport const KeyValueTagFullViewModal = React.memo((props: KeyValueTagFullViewModalProps) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <Modal\n      componentId=\"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17\"\n      title={'Tag: ' + props.tagKey}\n      visible={props.isKeyValueTagFullViewModalVisible}\n      onCancel={() => props.setIsKeyValueTagFullViewModalVisible(false)}\n    >\n      <div css={{ display: 'flex' }}>\n        <Paragraph css={{ flexGrow: 1 }}>\n          <pre\n            css={{\n              backgroundColor: theme.colors.backgroundPrimary,\n              marginTop: theme.spacing.sm,\n              whiteSpace: 'pre-wrap',\n              wordBreak: 'break-all',\n            }}\n          >\n            {props.tagValue}\n          </pre>\n        </Paragraph>\n        <div\n          css={{\n            marginTop: theme.spacing.sm,\n          }}\n        >\n          <CopyButton copyText={props.tagValue} showLabel={false} icon={<CopyIcon />} aria-label=\"Copy\" />\n        </div>\n      </div>\n    </Modal>\n  );\n});\n","import { Tag, LegacyTooltip, Typography } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\nimport React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { KeyValueTagFullViewModal } from './KeyValueTagFullViewModal';\nimport { Interpolation, Theme } from '@emotion/react';\n\n/**\n * An arbitrary number that is used to determine if a tag is too\n * long and should be truncated. We want to avoid short keys or values\n * in a long tag to be truncated\n * */\nconst TRUNCATE_ON_CHARS_LENGTH = 30;\n\nfunction getTruncatedStyles(shouldTruncate = true): Interpolation<Theme> {\n  return shouldTruncate\n    ? {\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        textWrap: 'nowrap',\n        whiteSpace: 'nowrap' as const,\n      }\n    : { whiteSpace: 'nowrap' as const };\n}\n\n/**\n * A <Tag /> wrapper used for displaying key-value entity\n */\nexport const KeyValueTag = ({\n  isClosable = false,\n  onClose,\n  tag,\n  enableFullViewModal = false,\n  charLimit = TRUNCATE_ON_CHARS_LENGTH,\n  maxWidth = 300,\n  className,\n}: {\n  isClosable?: boolean;\n  onClose?: () => void;\n  tag: KeyValueEntity;\n  enableFullViewModal?: boolean;\n  charLimit?: number;\n  maxWidth?: number;\n  className?: string;\n}) => {\n  const intl = useIntl();\n\n  const [isKeyValueTagFullViewModalVisible, setIsKeyValueTagFullViewModalVisible] = useState(false);\n\n  const { shouldTruncateKey, shouldTruncateValue } = getKeyAndValueComplexTruncation(tag, charLimit);\n  const allowFullViewModal = enableFullViewModal && (shouldTruncateKey || shouldTruncateValue);\n\n  const fullViewModalLabel = intl.formatMessage({\n    defaultMessage: 'Click to see more',\n    description: 'Run page > Overview > Tags cell > Tag',\n  });\n\n  return (\n    <div>\n      <Tag\n        componentId=\"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60\"\n        closable={isClosable}\n        onClose={onClose}\n        title={tag.key}\n        className={className}\n      >\n        <LegacyTooltip title={allowFullViewModal ? fullViewModalLabel : ''}>\n          <span\n            css={{ maxWidth, display: 'inline-flex' }}\n            onClick={() => (allowFullViewModal ? setIsKeyValueTagFullViewModalVisible(true) : undefined)}\n          >\n            <Typography.Text bold title={tag.key} css={getTruncatedStyles(shouldTruncateKey)}>\n              {tag.key}\n            </Typography.Text>\n            {tag.value && (\n              <Typography.Text title={tag.value} css={getTruncatedStyles(shouldTruncateValue)}>\n                : {tag.value}\n              </Typography.Text>\n            )}\n          </span>\n        </LegacyTooltip>\n      </Tag>\n      <div>\n        {isKeyValueTagFullViewModalVisible && (\n          <KeyValueTagFullViewModal\n            tagKey={tag.key}\n            tagValue={tag.value}\n            isKeyValueTagFullViewModalVisible={isKeyValueTagFullViewModalVisible}\n            setIsKeyValueTagFullViewModalVisible={setIsKeyValueTagFullViewModalVisible}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport function getKeyAndValueComplexTruncation(\n  tag: KeyValueEntity,\n  charLimit = TRUNCATE_ON_CHARS_LENGTH,\n): { shouldTruncateKey: boolean; shouldTruncateValue: boolean } {\n  const { key, value } = tag;\n  const fullLength = key.length + value.length;\n  const isKeyLonger = key.length > value.length;\n  const shorterLength = isKeyLonger ? value.length : key.length;\n\n  // No need to truncate if tag is short enough\n  if (fullLength <= charLimit) return { shouldTruncateKey: false, shouldTruncateValue: false };\n  // If the shorter string is too long, truncate both key and value.\n  if (shorterLength > charLimit / 2) return { shouldTruncateKey: true, shouldTruncateValue: true };\n\n  // Otherwise truncate the longer string\n  return {\n    shouldTruncateKey: isKeyLonger,\n    shouldTruncateValue: !isKeyLonger,\n  };\n}\n","import { useEffect, useState } from 'react';\nimport { ErrorBoundary } from 'react-error-boundary';\n\nimport { Tabs, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from '@databricks/i18n';\n\nimport { shouldEnableSummaryView } from './FeatureUtils';\nimport type { ModelTrace } from './ModelTrace.types';\nimport { getModelTraceId } from './ModelTraceExplorer.utils';\nimport { ModelTraceExplorerDetailView } from './ModelTraceExplorerDetailView';\nimport { ModelTraceExplorerErrorState } from './ModelTraceExplorerErrorState';\nimport { ModelTraceExplorerSkeleton } from './ModelTraceExplorerSkeleton';\nimport {\n  ModelTraceExplorerViewStateProvider,\n  useModelTraceExplorerViewState,\n} from './ModelTraceExplorerViewStateContext';\nimport { useGetModelTraceInfoV3 } from './hooks/useGetModelTraceInfoV3';\nimport { ModelTraceExplorerSummaryView } from './summary-view/ModelTraceExplorerSummaryView';\nimport { ModelTraceHeaderDetails } from './ModelTraceHeaderDetails';\n\nconst ModelTraceExplorerImpl = ({\n  modelTrace,\n  className,\n  selectedSpanId,\n  onSelectSpan,\n}: {\n  modelTrace: ModelTrace;\n  className?: string;\n  selectedSpanId?: string;\n  onSelectSpan?: (selectedSpanId?: string) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const enableSummaryView = shouldEnableSummaryView();\n  const { activeView, setActiveView } = useModelTraceExplorerViewState();\n\n  if (!enableSummaryView) {\n    return (\n      <div css={{ display: 'flex', flexDirection: 'column', height: '100%', overflow: 'hidden' }}>\n        <ModelTraceExplorerDetailView\n          modelTrace={modelTrace}\n          className={className}\n          selectedSpanId={selectedSpanId}\n          onSelectSpan={onSelectSpan}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <Tabs.Root\n      componentId=\"model-trace-explorer\"\n      value={activeView}\n      onValueChange={(value) => setActiveView(value as 'summary' | 'detail')}\n      css={{\n        '& > div:first-of-type': {\n          marginBottom: 0,\n          flexShrink: 0,\n        },\n        display: 'flex',\n        flexDirection: 'column',\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      <div css={{ paddingLeft: theme.spacing.md, paddingBottom: theme.spacing.md }}>\n        <ModelTraceHeaderDetails modelTrace={modelTrace} />\n      </div>\n      <Tabs.List css={{ paddingLeft: theme.spacing.md, flexShrink: 0 }}>\n        <Tabs.Trigger value=\"summary\">\n          <FormattedMessage\n            defaultMessage=\"Summary\"\n            description=\"Label for the summary view tab in the model trace explorer\"\n          />\n        </Tabs.Trigger>\n        <Tabs.Trigger value=\"detail\">\n          <FormattedMessage\n            defaultMessage=\"Details & Timeline\"\n            description=\"Label for the details & timeline view tab in the model trace explorer\"\n          />\n        </Tabs.Trigger>\n      </Tabs.List>\n      <Tabs.Content\n        value=\"summary\"\n        css={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n          minHeight: 0,\n        }}\n      >\n        <ModelTraceExplorerSummaryView modelTrace={modelTrace} />\n      </Tabs.Content>\n      <Tabs.Content\n        value=\"detail\"\n        css={{\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n          minHeight: 0,\n        }}\n      >\n        <ModelTraceExplorerDetailView\n          modelTrace={modelTrace}\n          className={className}\n          selectedSpanId={selectedSpanId}\n          onSelectSpan={onSelectSpan}\n        />\n      </Tabs.Content>\n    </Tabs.Root>\n  );\n};\n\nconst ContextProviders = ({ children }: { traceId: string; children: React.ReactNode }) => {\n  return <ErrorBoundary fallbackRender={ModelTraceExplorerErrorState}>{children}</ErrorBoundary>;\n};\n\nexport const ModelTraceExplorer = ({\n  modelTrace: initialModelTrace,\n  className,\n  initialActiveView = 'summary',\n  selectedSpanId,\n  onSelectSpan,\n}: {\n  modelTrace: ModelTrace;\n  className?: string;\n  initialActiveView?: 'summary' | 'detail';\n  selectedSpanId?: string;\n  onSelectSpan?: (selectedSpanId?: string) => void;\n}) => {\n  const [modelTrace, setModelTrace] = useState(initialModelTrace);\n  const [assessmentsPaneEnabled, setAssessmentsPaneEnabled] = useState(true);\n  const traceId = getModelTraceId(initialModelTrace);\n\n  useGetModelTraceInfoV3({\n    traceId,\n    setModelTrace,\n    setAssessmentsPaneEnabled,\n  });\n\n  useEffect(() => {\n    setModelTrace(initialModelTrace);\n    // reset the model trace when the traceId changes\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [traceId]);\n\n  return (\n    <ContextProviders traceId={traceId}>\n      <ModelTraceExplorerViewStateProvider\n        modelTrace={modelTrace}\n        initialActiveView={initialActiveView}\n        selectedSpanIdOnRender={selectedSpanId}\n        assessmentsPaneEnabled={assessmentsPaneEnabled}\n      >\n        <ModelTraceExplorerImpl\n          modelTrace={modelTrace}\n          className={className}\n          selectedSpanId={selectedSpanId}\n          onSelectSpan={onSelectSpan}\n        />\n      </ModelTraceExplorerViewStateProvider>\n    </ContextProviders>\n  );\n};\n\nModelTraceExplorer.Skeleton = ModelTraceExplorerSkeleton;\n","import { type ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\nimport { useEditKeyValueTagsModal } from '../../../../common/hooks/useEditKeyValueTagsModal';\nimport { MlflowService } from '../../../sdk/MlflowService';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { useCallback } from 'react';\nimport { MLFLOW_INTERNAL_PREFIX } from '../../../../common/utils/TagUtils';\n\ntype EditedModelTrace = {\n  traceRequestId: string;\n  tags: KeyValueEntity[];\n};\n\nexport const useEditExperimentTraceTags = ({\n  onSuccess,\n  existingTagKeys = [],\n  useV3Apis,\n}: {\n  onSuccess?: () => void;\n  existingTagKeys?: string[];\n  useV3Apis?: boolean;\n}) => {\n  const { showEditTagsModal, EditTagsModal } = useEditKeyValueTagsModal<EditedModelTrace>({\n    saveTagsHandler: async (editedEntity, existingTags, newTags) => {\n      if (!editedEntity.traceRequestId) {\n        return;\n      }\n      const requestId = editedEntity.traceRequestId;\n      // First, determine new tags to be added\n      const addedOrModifiedTags = newTags.filter(\n        ({ key: newTagKey, value: newTagValue }) =>\n          !existingTags.some(\n            ({ key: existingTagKey, value: existingTagValue }) =>\n              existingTagKey === newTagKey && newTagValue === existingTagValue,\n          ),\n      );\n\n      // Next, determine those to be deleted\n      const deletedTags = existingTags.filter(\n        ({ key: existingTagKey }) => !newTags.some(({ key: newTagKey }) => existingTagKey === newTagKey),\n      );\n\n      // Fire all requests at once\n      const updateRequests = Promise.all([\n        ...addedOrModifiedTags.map(({ key, value }) =>\n          useV3Apis\n            ? MlflowService.setExperimentTraceTagV3(requestId, key, value)\n            : MlflowService.setExperimentTraceTag(requestId, key, value),\n        ),\n        ...deletedTags.map(({ key }) =>\n          useV3Apis\n            ? MlflowService.deleteExperimentTraceTagV3(requestId, key)\n            : MlflowService.deleteExperimentTraceTag(requestId, key),\n        ),\n      ]);\n\n      return updateRequests;\n    },\n    valueRequired: true,\n    allAvailableTags: existingTagKeys.filter((tagKey) => tagKey && !tagKey.startsWith(MLFLOW_INTERNAL_PREFIX)),\n    onSuccess: onSuccess,\n  });\n\n  const showEditTagsModalForTrace = useCallback(\n    (trace: ModelTraceInfo) => {\n      if (!trace.request_id) {\n        return;\n      }\n      const visibleTags = trace.tags?.filter(({ key }) => key && !key.startsWith(MLFLOW_INTERNAL_PREFIX)) || [];\n      showEditTagsModal({\n        traceRequestId: trace.request_id,\n        tags: visibleTags || [],\n      });\n    },\n    [showEditTagsModal],\n  );\n\n  return {\n    showEditTagsModalForTrace,\n    EditTagsModal,\n  };\n};\n","import { sortedIndexOf } from 'lodash';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { Control, useController } from 'react-hook-form';\nimport { useIntl } from 'react-intl';\n\nimport { PlusIcon, LegacySelect, LegacyTooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\n\n/**\n * Will show an extra row at the bottom of the dropdown menu to create a new tag when\n * The user has typed something in the search input\n * and either\n * 1. The search input is not an exact match for an existing tag name\n * 2. There are no tags available based on search input\n */\n\nfunction DropdownMenu(menu: React.ReactElement, allAvailableTags: string[]) {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n  const searchValue = menu.props.searchValue.toLowerCase();\n\n  const resolvedMenu = useMemo(() => {\n    if (!searchValue) return menu;\n\n    const doesTagExists = sortedIndexOf(allAvailableTags, searchValue) >= 0;\n    if (doesTagExists) return menu;\n\n    const isValidTagKey = /^[^,.:/=\\-\\s]+$/.test(searchValue);\n\n    // Overriding the menu to add a new option at the top\n    return React.cloneElement(menu, {\n      flattenOptions: [\n        {\n          data: {\n            value: searchValue,\n            disabled: !isValidTagKey,\n            style: {\n              color: isValidTagKey ? theme.colors.actionTertiaryTextDefault : theme.colors.actionDisabledText,\n            },\n            children: (\n              <LegacyTooltip\n                title={\n                  isValidTagKey\n                    ? undefined\n                    : intl.formatMessage({\n                        defaultMessage: ', . : / - = and blank spaces are not allowed',\n                        description:\n                          'Key-value tag editor modal > Tag dropdown Manage Modal > Invalid characters error',\n                      })\n                }\n                placement=\"right\"\n              >\n                <span css={{ display: 'block' }}>\n                  <PlusIcon css={{ marginRight: theme.spacing.sm }} />\n                  {intl.formatMessage(\n                    {\n                      defaultMessage: 'Add tag \"{tagKey}\"',\n                      description: 'Key-value tag editor modal > Tag dropdown Manage Modal > Add new tag button',\n                    },\n                    {\n                      tagKey: searchValue,\n                    },\n                  )}\n                </span>\n              </LegacyTooltip>\n            ),\n          },\n          key: searchValue,\n          groupOption: false,\n        },\n        ...menu.props.flattenOptions,\n      ],\n    });\n  }, [allAvailableTags, menu, searchValue, intl, theme]);\n\n  return resolvedMenu;\n}\n\nfunction getDropdownMenu(allAvailableTags: string[]) {\n  return (menu: React.ReactElement) => DropdownMenu(menu, allAvailableTags);\n}\n\n/**\n * Used in tag edit feature, allows selecting existing / adding new tag value\n */\nexport function TagKeySelectDropdown({\n  allAvailableTags,\n  control,\n  onKeyChangeCallback,\n}: {\n  allAvailableTags: string[];\n  control: Control<KeyValueEntity>;\n  onKeyChangeCallback?: (key?: string) => void;\n}) {\n  const intl = useIntl();\n  const [isOpen, setIsOpen] = useState(false);\n  const selectRef = useRef<{ blur: () => void; focus: () => void }>(null);\n\n  const { field, fieldState } = useController({\n    control: control,\n    name: 'key',\n    rules: {\n      required: {\n        message: intl.formatMessage({\n          defaultMessage: 'A tag key is required',\n          description: 'Key-value tag editor modal > Tag dropdown > Tag key required error message',\n        }),\n        value: true,\n      },\n    },\n  });\n\n  const handleDropdownVisibleChange = (visible: boolean) => {\n    setIsOpen(visible);\n  };\n\n  const handleClear = () => {\n    field.onChange(undefined);\n    onKeyChangeCallback?.(undefined);\n  };\n\n  const handleSelect = (key: string) => {\n    field.onChange(key);\n    onKeyChangeCallback?.(key);\n  };\n\n  return (\n    <LegacySelect\n      allowClear\n      ref={selectRef}\n      dangerouslySetAntdProps={{\n        showSearch: true,\n        dropdownRender: getDropdownMenu(allAvailableTags),\n      }}\n      css={{ width: '100%' }}\n      placeholder={intl.formatMessage({\n        defaultMessage: 'Type a key',\n        description: 'Key-value tag editor modal > Tag dropdown > Tag input placeholder',\n      })}\n      value={field.value}\n      defaultValue={field.value}\n      open={isOpen}\n      onDropdownVisibleChange={handleDropdownVisibleChange}\n      filterOption={(input, option) => option?.value.toLowerCase().includes(input.toLowerCase())}\n      onSelect={handleSelect}\n      onClear={handleClear}\n      validationState={fieldState.error ? 'error' : undefined}\n    >\n      {allAvailableTags.map((tag) => (\n        <LegacySelect.Option value={tag} key={tag}>\n          {tag}\n        </LegacySelect.Option>\n      ))}\n    </LegacySelect>\n  );\n}\n","import { isEqual, sortBy } from 'lodash';\nimport { useCallback, useMemo, useRef, useState } from 'react';\nimport { truncate } from 'lodash';\n\nimport {\n  Button,\n  FormUI,\n  Modal,\n  PlusIcon,\n  Popover,\n  RHFControlledComponents,\n  RestoreAntDDefaultClsPrefix,\n  LegacyTooltip,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { Typography } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useForm } from 'react-hook-form';\nimport { TagKeySelectDropdown } from '../components/TagSelectDropdown';\nimport { KeyValueTag } from '../components/KeyValueTag';\nimport { ErrorWrapper } from '../utils/ErrorWrapper';\n\nfunction getTagsMap(tags: KeyValueEntity[]) {\n  return new Map(tags.map((tag) => [tag.key, tag]));\n}\n\n/**\n * Provides methods to initialize and display modal used to add and remove tags from any compatible entity\n */\nexport const useEditKeyValueTagsModal = <T extends { tags?: KeyValueEntity[] }>({\n  onSuccess,\n  saveTagsHandler,\n  allAvailableTags,\n  valueRequired = false,\n  title,\n}: {\n  onSuccess?: () => void;\n  saveTagsHandler: (editedEntity: T, existingTags: KeyValueEntity[], newTags: KeyValueEntity[]) => Promise<any>;\n  allAvailableTags?: string[];\n  valueRequired?: boolean;\n  title?: React.ReactNode;\n}) => {\n  const editedEntityRef = useRef<T>();\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const { theme } = useDesignSystemTheme();\n\n  const [initialTags, setInitialTags] = useState<Map<string, KeyValueEntity>>(new Map());\n  const [finalTags, setFinalTags] = useState<Map<string, KeyValueEntity>>(new Map());\n\n  const [showModal, setShowModal] = useState(false);\n\n  const form = useForm<KeyValueEntity>({\n    defaultValues: {\n      key: undefined,\n      value: '',\n    },\n  });\n\n  const hideModal = () => setShowModal(false);\n\n  /**\n   * Function used to invoke the modal and start editing tags of the particular model version\n   */\n  const showEditTagsModal = useCallback(\n    (editedEntity: T) => {\n      editedEntityRef.current = editedEntity;\n      setInitialTags(getTagsMap(editedEntity.tags || []));\n      setFinalTags(getTagsMap(editedEntity.tags || []));\n      form.reset();\n\n      setShowModal(true);\n    },\n    [form],\n  );\n\n  const saveTags = async () => {\n    if (!editedEntityRef.current) {\n      return;\n    }\n    setErrorMessage('');\n    setIsLoading(true);\n    saveTagsHandler(editedEntityRef.current, Array.from(initialTags.values()), Array.from(finalTags.values()))\n      .then(() => {\n        hideModal();\n        onSuccess?.();\n        setIsLoading(false);\n      })\n      .catch((e: ErrorWrapper | Error) => {\n        setIsLoading(false);\n        setErrorMessage(e instanceof ErrorWrapper ? e.getUserVisibleError()?.message : e.message);\n      });\n  };\n\n  const intl = useIntl();\n  const formValues = form.watch();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const hasNewValues = useMemo(\n    () => !isEqual(sortBy(Array.from(initialTags.values()), 'key'), sortBy(Array.from(finalTags.values()), 'key')),\n    [initialTags, finalTags],\n  );\n  const isDirty = formValues.key || formValues.value;\n  const showPopoverMessage = hasNewValues && isDirty;\n\n  const onKeyChangeCallback = (key: string | undefined) => {\n    const tag = key ? finalTags.get(key) : undefined;\n    /**\n     * If a tag value exists for provided key, set the value to the existing tag value\n     */\n    form.setValue('value', tag?.value ?? '');\n  };\n\n  const handleTagDelete = ({ key }: KeyValueEntity) => {\n    setFinalTags((currentFinalTags) => {\n      currentFinalTags.delete(key);\n      return new Map(currentFinalTags);\n    });\n  };\n\n  const onSubmit = () => {\n    // Do not accept form if no value provided while it's required\n    if (valueRequired && !formValues.value.trim()) {\n      return;\n    }\n\n    // Add new tag to existing tags leaving only one tag per key value\n    const newEntries = new Map(finalTags);\n    newEntries.set(formValues.key, formValues);\n\n    setFinalTags(newEntries);\n    form.reset();\n  };\n\n  const EditTagsModal = (\n    <Modal\n      componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135\"\n      destroyOnClose\n      visible={showModal}\n      title={\n        title ?? (\n          <FormattedMessage\n            defaultMessage=\"Add/Edit tags\"\n            description=\"Key-value tag editor modal > Title of the update tags modal\"\n          />\n        )\n      }\n      onCancel={hideModal}\n      footer={\n        <RestoreAntDDefaultClsPrefix>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147\"\n            dangerouslyUseFocusPseudoClass\n            onClick={hideModal}\n            /**\n             * Hack: The footer will remove the margin to the save tags button\n             * if the button if wrapped on another component.\n             */\n            css={{ marginRight: !hasNewValues ? theme.spacing.sm : 0 }}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Cancel',\n              description: 'Key-value tag editor modal > Manage Tag cancel button',\n            })}\n          </Button>\n          {showPopoverMessage ? (\n            <UnsavedTagPopoverTrigger formValues={formValues} isLoading={isLoading} onSaveTask={saveTags} />\n          ) : (\n            <LegacyTooltip\n              title={\n                !hasNewValues\n                  ? intl.formatMessage({\n                      defaultMessage: 'Please add or remove one or more tags before saving',\n                      description: 'Key-value tag editor modal > Tag disabled message',\n                    })\n                  : undefined\n              }\n            >\n              <Button\n                componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174\"\n                dangerouslyUseFocusPseudoClass\n                disabled={!hasNewValues}\n                loading={isLoading}\n                type=\"primary\"\n                onClick={saveTags}\n              >\n                {intl.formatMessage({\n                  defaultMessage: 'Save tags',\n                  description: 'Key-value tag editor modal > Manage Tag save button',\n                })}\n              </Button>\n            </LegacyTooltip>\n          )}\n        </RestoreAntDDefaultClsPrefix>\n      }\n    >\n      <form\n        onSubmit={form.handleSubmit(onSubmit)}\n        css={{ display: 'flex', alignItems: 'flex-end', gap: theme.spacing.md }}\n      >\n        <div css={{ minWidth: 0, display: 'flex', gap: theme.spacing.md, flex: 1 }}>\n          <div css={{ flex: 1 }}>\n            <FormUI.Label htmlFor=\"key\">\n              {intl.formatMessage({\n                defaultMessage: 'Key',\n                description: 'Key-value tag editor modal > Key input label',\n              })}\n            </FormUI.Label>\n            <TagKeySelectDropdown\n              allAvailableTags={allAvailableTags || []}\n              control={form.control}\n              onKeyChangeCallback={onKeyChangeCallback}\n            />\n          </div>\n          <div css={{ flex: 1 }}>\n            <FormUI.Label htmlFor=\"value\">\n              {valueRequired\n                ? intl.formatMessage({\n                    defaultMessage: 'Value',\n                    description: 'Key-value tag editor modal > Value input label (required)',\n                  })\n                : intl.formatMessage({\n                    defaultMessage: 'Value (optional)',\n                    description: 'Key-value tag editor modal > Value input label',\n                  })}\n            </FormUI.Label>\n            <RHFControlledComponents.Input\n              componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223\"\n              name=\"value\"\n              control={form.control}\n              aria-label={\n                valueRequired\n                  ? intl.formatMessage({\n                      defaultMessage: 'Value',\n                      description: 'Key-value tag editor modal > Value input label (required)',\n                    })\n                  : intl.formatMessage({\n                      defaultMessage: 'Value (optional)',\n                      description: 'Key-value tag editor modal > Value input label',\n                    })\n              }\n              placeholder={intl.formatMessage({\n                defaultMessage: 'Type a value',\n                description: 'Key-value tag editor modal > Value input placeholder',\n              })}\n            />\n          </div>\n        </div>\n        <LegacyTooltip\n          title={intl.formatMessage({\n            defaultMessage: 'Add tag',\n            description: 'Key-value tag editor modal > Add tag button',\n          })}\n        >\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248\"\n            htmlType=\"submit\"\n            aria-label={intl.formatMessage({\n              defaultMessage: 'Add tag',\n              description: 'Key-value tag editor modal > Add tag button',\n            })}\n          >\n            <PlusIcon />\n          </Button>\n        </LegacyTooltip>\n      </form>\n      {errorMessage && <FormUI.Message type=\"error\" message={errorMessage} />}\n      <div\n        css={{\n          display: 'flex',\n          rowGap: theme.spacing.xs,\n          flexWrap: 'wrap',\n          marginTop: theme.spacing.sm,\n        }}\n      >\n        {Array.from(finalTags.values()).map((tag) => (\n          <KeyValueTag isClosable tag={tag} onClose={() => handleTagDelete(tag)} key={tag.key} />\n        ))}\n      </div>\n    </Modal>\n  );\n\n  return { EditTagsModal, showEditTagsModal, isLoading };\n};\n\nfunction UnsavedTagPopoverTrigger({\n  isLoading,\n  formValues,\n  onSaveTask,\n}: {\n  isLoading: boolean;\n  formValues: any;\n  onSaveTask: () => void;\n}) {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  const tagKeyDisplay = `${truncate(formValues.key, { length: 20 }) || '_'}`;\n  const tagValueDisplay = formValues.value ? `:${truncate(formValues.value, { length: 20 })}` : '';\n  const fullTagDisplay = `${tagKeyDisplay}${tagValueDisplay}`;\n\n  const shownText = intl.formatMessage(\n    {\n      defaultMessage: 'Are you sure you want to save and close without adding \"{tag}\"',\n      description: 'Key-value tag editor modal > Unsaved tag message',\n    },\n    {\n      tag: fullTagDisplay,\n    },\n  );\n  return (\n    <Popover.Root componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309\">\n      <Popover.Trigger asChild>\n        <Button\n          componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306\"\n          dangerouslyUseFocusPseudoClass\n          loading={isLoading}\n          type=\"primary\"\n        >\n          {intl.formatMessage({\n            defaultMessage: 'Save tags',\n            description: 'Key-value tag editor modal > Manage Tag save button',\n          })}\n        </Button>\n      </Popover.Trigger>\n      <Popover.Content align=\"end\" aria-label={shownText}>\n        <Typography.Paragraph css={{ maxWidth: 400 }}>{shownText}</Typography.Paragraph>\n        <Popover.Close asChild>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316\"\n            onClick={onSaveTask}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Yes, save and close',\n              description: 'Key-value tag editor modal > Unsaved tag message > Yes, save and close button',\n            })}\n          </Button>\n        </Popover.Close>\n        <Popover.Close asChild>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324\"\n            type=\"primary\"\n            css={{ marginLeft: theme.spacing.sm }}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Cancel',\n              description: 'Key-value tag editor modal > Unsaved tag message > cancel button',\n            })}\n          </Button>\n        </Popover.Close>\n        <Popover.Arrow />\n      </Popover.Content>\n    </Popover.Root>\n  );\n}\n"],"names":["ModelSpanType","ModelIconType","ModelTraceSpanType","CodeSnippetRenderMode","Paragraph","Typography","_ref","name","styles","_ref2","KeyValueTagFullViewModal","React","props","theme","useDesignSystemTheme","_jsx","Modal","componentId","title","tagKey","visible","isKeyValueTagFullViewModalVisible","onCancel","setIsKeyValueTagFullViewModalVisible","children","_jsxs","css","_css","backgroundColor","colors","backgroundPrimary","marginTop","spacing","sm","whiteSpace","wordBreak","tagValue","CopyButton","copyText","showLabel","icon","CopyIcon","getTruncatedStyles","shouldTruncate","overflow","textOverflow","textWrap","KeyValueTag","isClosable","onClose","tag","enableFullViewModal","charLimit","maxWidth","className","intl","useIntl","useState","shouldTruncateKey","shouldTruncateValue","key","value","fullLength","length","isKeyLonger","shorterLength","getKeyAndValueComplexTruncation","allowFullViewModal","fullViewModalLabel","formatMessage","id","defaultMessage","Tag","closable","LegacyTooltip","display","onClick","undefined","Text","bold","_ref3","_ref4","ModelTraceExplorerImpl","modelTrace","selectedSpanId","onSelectSpan","enableSummaryView","shouldEnableSummaryView","activeView","setActiveView","useModelTraceExplorerViewState","Tabs","Root","onValueChange","paddingLeft","md","paddingBottom","ModelTraceHeaderDetails","List","flexShrink","Trigger","FormattedMessage","Content","ModelTraceExplorerSummaryView","ModelTraceExplorerDetailView","ContextProviders","ErrorBoundary","fallbackRender","ModelTraceExplorerErrorState","ModelTraceExplorer","initialModelTrace","initialActiveView","setModelTrace","assessmentsPaneEnabled","setAssessmentsPaneEnabled","traceId","getModelTraceId","useGetModelTraceInfoV3","useEffect","ModelTraceExplorerViewStateProvider","selectedSpanIdOnRender","Skeleton","ModelTraceExplorerSkeleton","useEditExperimentTraceTags","onSuccess","existingTagKeys","useV3Apis","showEditTagsModal","EditTagsModal","useEditKeyValueTagsModal","saveTagsHandler","async","editedEntity","existingTags","newTags","traceRequestId","requestId","addedOrModifiedTags","filter","newTagKey","newTagValue","some","existingTagKey","existingTagValue","deletedTags","Promise","all","map","MlflowService","setExperimentTraceTagV3","setExperimentTraceTag","deleteExperimentTraceTagV3","deleteExperimentTraceTag","valueRequired","allAvailableTags","startsWith","MLFLOW_INTERNAL_PREFIX","showEditTagsModalForTrace","useCallback","trace","_trace$tags","request_id","visibleTags","tags","getDropdownMenu","menu","searchValue","toLowerCase","useMemo","sortedIndexOf","isValidTagKey","test","flattenOptions","data","disabled","style","color","actionTertiaryTextDefault","actionDisabledText","placement","PlusIcon","marginRight","groupOption","DropdownMenu","TagKeySelectDropdown","control","onKeyChangeCallback","isOpen","setIsOpen","selectRef","useRef","field","fieldState","useController","rules","required","message","LegacySelect","allowClear","ref","dangerouslySetAntdProps","showSearch","dropdownRender","placeholder","defaultValue","open","onDropdownVisibleChange","filterOption","input","option","includes","onSelect","onChange","onClear","handleClear","validationState","error","Option","getTagsMap","Map","editedEntityRef","errorMessage","setErrorMessage","initialTags","setInitialTags","finalTags","setFinalTags","showModal","setShowModal","form","useForm","defaultValues","hideModal","current","reset","saveTags","setIsLoading","Array","from","values","then","catch","e","_e$getUserVisibleErro","ErrorWrapper","getUserVisibleError","formValues","watch","isLoading","hasNewValues","isEqual","sortBy","isDirty","showPopoverMessage","destroyOnClose","footer","RestoreAntDDefaultClsPrefix","Button","dangerouslyUseFocusPseudoClass","UnsavedTagPopoverTrigger","onSaveTask","loading","type","onSubmit","handleSubmit","trim","newEntries","set","alignItems","gap","minWidth","flex","FormUI","Label","htmlFor","_tag$value","get","setValue","RHFControlledComponents","Input","htmlType","Message","rowGap","xs","flexWrap","handleTagDelete","currentFinalTags","delete","fullTagDisplay","truncate","shownText","Popover","asChild","align","Close","marginLeft","Arrow"],"ignoreList":[],"sourceRoot":""}