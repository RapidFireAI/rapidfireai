{"version":3,"file":"static/js/6279.7305773a.chunk.js","mappings":"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","sources":["experiment-tracking/components/traces/quickstart/TracesViewTableNoTracesQuickstartContext.tsx","experiment-tracking/components/traces/quickstart/TraceTableQuickstart.utils.tsx","experiment-tracking/components/traces/quickstart/TraceTableGenericQuickstart.tsx","experiment-tracking/components/traces/quickstart/TracesViewTableNoTracesQuickstart.tsx","experiment-tracking/components/traces/TracesView.utils.ts","experiment-tracking/components/traces/hooks/useExperimentTraces.tsx","experiment-tracking/components/traces/TracesViewTableTagCell.tsx","experiment-tracking/components/traces/TracesViewTableStatusCell.tsx","experiment-tracking/components/traces/TracesViewTablePreviewCell.tsx","experiment-tracking/components/traces/TracesViewTableSourceCell.tsx","experiment-tracking/components/traces/TracesViewTable.utils.ts","experiment-tracking/components/traces/TracesViewTableRow.tsx","experiment-tracking/components/traces/TracesViewTableTimestampCell.tsx","experiment-tracking/components/traces/TracesViewTableHeaderCheckbox.tsx","experiment-tracking/components/traces/TracesViewTableCellCheckbox.tsx","experiment-tracking/components/traces/TracesViewTable.tsx","experiment-tracking/components/traces/hooks/useExperimentTraceInfo.tsx","experiment-tracking/components/traces/TraceDataDrawer.tsx","experiment-tracking/components/traces/hooks/useExperimentTraceData.tsx","experiment-tracking/components/traces/TracesViewDeleteTraceModal.tsx","experiment-tracking/components/traces/TracesViewControlsActions.tsx","experiment-tracking/components/traces/TracesViewControls.tsx","experiment-tracking/components/traces/hooks/useExperimentViewTracesUIState.tsx","experiment-tracking/components/traces/hooks/useActiveExperimentTrace.tsx","experiment-tracking/components/traces/hooks/useActiveExperimentSpan.tsx","experiment-tracking/components/traces/TracesView.tsx"],"sourcesContent":["import React, { createContext, type ReactNode, useContext } from 'react';\n\nconst TracesViewTableNoTracesQuickstartContext = createContext<{\n  introductionText?: ReactNode;\n  displayVersionWarnings?: boolean;\n}>({});\n\n/**\n * Allows to alter default behavior of a quickstart tutorial for logging traces\n */\nexport const TracesViewTableNoTracesQuickstartContextProvider = ({\n  children,\n  introductionText,\n  displayVersionWarnings,\n}: {\n  children: ReactNode;\n  introductionText?: ReactNode;\n  displayVersionWarnings?: boolean;\n}) => {\n  return (\n    <TracesViewTableNoTracesQuickstartContext.Provider value={{ introductionText, displayVersionWarnings }}>\n      {children}\n    </TracesViewTableNoTracesQuickstartContext.Provider>\n  );\n};\n\nexport const useTracesViewTableNoTracesQuickstartContext = () => useContext(TracesViewTableNoTracesQuickstartContext);\n","import { Typography } from '@databricks/design-system';\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\n\nexport type QUICKSTART_FLAVOR =\n  | 'openai'\n  | 'langchain'\n  | 'llama_index'\n  | 'dspy'\n  | 'crewai'\n  | 'autogen'\n  | 'anthropic'\n  | 'bedrock'\n  | 'litellm'\n  | 'gemini'\n  | 'custom';\n\nexport const QUICKSTART_CONTENT: Record<\n  QUICKSTART_FLAVOR,\n  {\n    minVersion: string;\n    getContent: (baseComponentId?: string) => React.ReactNode;\n    getCodeSource: () => string;\n  }\n> = {\n  openai: {\n    minVersion: '2.15.1',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for OpenAI API calls by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the OpenAI package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.openai.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () =>\n      `from openai import OpenAI\n\nmlflow.openai.autolog()\n\n# Ensure that the \"OPENAI_API_KEY\" environment variable is set\nclient = OpenAI()\n\nmessages = [\n  {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n  {\"role\": \"user\", \"content\": \"Hello!\"}\n]\n\n# Inputs and outputs of the API request will be logged in a trace\nclient.chat.completions.create(model=\"gpt-4o-mini\", messages=messages)`,\n  },\n  langchain: {\n    // the autologging integration was really introduced in\n    // 2.14.0, but it does not support newer versions of langchain\n    // so effectively that version will not work with the code snippet\n    minVersion: '2.17.2',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for LangChain or LangGraph invocations by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the LangChain/LangGraph package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.langchain.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () =>\n      `from langchain_openai import OpenAI\nfrom langchain_core.prompts import PromptTemplate\n\nmlflow.langchain.autolog()\n\n# Ensure that the \"OPENAI_API_KEY\" environment variable is set\nllm = OpenAI()\nprompt = PromptTemplate.from_template(\"Answer the following question: {question}\")\nchain = prompt | llm\n\n# Invoking the chain will cause a trace to be logged\nchain.invoke(\"What is MLflow?\")`,\n  },\n  llama_index: {\n    minVersion: '2.15.1',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for LlamaIndex queries by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the LlamaIndex package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.llama_index.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () =>\n      `from llama_index.core import Document, VectorStoreIndex\n\nmlflow.llama_index.autolog()\n\n# Ensure that the \"OPENAI_API_KEY\" environment variable is set\nindex = VectorStoreIndex.from_documents([Document.example()])\nquery_engine = index.as_query_engine()\n\n# Querying the engine will cause a trace to be logged\nquery_engine.query(\"What is LlamaIndex?\")`,\n  },\n  dspy: {\n    minVersion: '2.18.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for DSPy executions by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the DSPy package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.dspy.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () =>\n      `import dspy\n\nmlflow.dspy.autolog()\n\n# Configure the LLM to use. Please ensure that\n# the OPENAI_API_KEY environment variable is set\nlm = dspy.LM(\"openai/gpt-4o-mini\")\ndspy.configure(lm=lm)\n\n# Define a simple chain-of-thought model and run it\nmath = dspy.ChainOfThought(\"question -> answer: float\")\nquestion = \"Two dice are tossed. What is the probability that the sum equals two?\"\n\n# All intermediate outputs from the execution will be logged\nmath(question=question)`,\n  },\n  crewai: {\n    minVersion: '2.19.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for CrewAI executions by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the CrewAI package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.crewai.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () => `from crewai import Agent, Crew, Process, Task\n\nmlflow.crewai.autolog()\n\ncity_selection_agent = Agent(\n    role=\"City selection expert\",\n    goal=\"Select the best city based on weather, season, and prices\",\n    backstory=\"An expert in analyzing travel data to pick ideal destinations\",\n    allow_delegation=True,\n    verbose=True,\n)\n\nlocal_expert = Agent(\n    role=\"Local expert\",\n    goal=\"Provide the best insights about the selected city\",\n    backstory=\"A local guide with extensive information about the city\",\n    verbose=True,\n)\n  \nplan_trip = Task(\n    name=\"Plan a trip\",\n    description=\"\"\"Plan a trip to a city based on weather, prices, and best local attractions. \n    Please consult with a local expert when researching things to do.\"\"\",\n    expected_output=\"A short summary of the trip destination and key things to do\",\n    agent=city_selection_agent,\n)\n\ncrew = Crew(\n  agents=[\n    city_selection_agent,\n    local_expert,\n  ],\n  tasks=[plan_trip],\n  process=Process.sequential\n)\n\n# Ensure the \"OPENAI_API_KEY\" environment variable is set\n# before kicking off the crew. All intermediate agent outputs\n# will be logged in the resulting trace.\ncrew.kickoff()`,\n  },\n  autogen: {\n    minVersion: '2.16.2',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for AutoGen conversations by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the AutoGen package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.autogen.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () =>\n      `import os\nfrom autogen import AssistantAgent, UserProxyAgent\n\nmlflow.autogen.autolog()\n\n# Ensure that the \"OPENAI_API_KEY\" environment variable is set\nllm_config = { \"model\": \"gpt-4o-mini\", \"api_key\": os.environ[\"OPENAI_API_KEY\"] }\nassistant = AssistantAgent(\"assistant\", llm_config = llm_config)\nuser_proxy = UserProxyAgent(\"user_proxy\", code_execution_config = False)\n\n# All intermediate executions within the chat session will be logged\nuser_proxy.initiate_chat(assistant, message = \"What is MLflow?\", max_turns = 1)`,\n  },\n  anthropic: {\n    minVersion: '2.19.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for Anthropic API calls by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the Anthropic package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.anthropic.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () => `import os\nimport anthropic\n\n# Enable auto-tracing for Anthropic\nmlflow.anthropic.autolog()\n\n# Configure your API key (please ensure that the \"ANTHROPIC_API_KEY\" environment variable is set)\nclient = anthropic.Anthropic(api_key=os.environ[\"ANTHROPIC_API_KEY\"])\n\n# Inputs and outputs of API calls will be logged as a trace\nmessage = client.messages.create(\n    model=\"claude-3-5-sonnet-20241022\",\n    max_tokens=1024,\n    messages=[\n        {\"role\": \"user\", \"content\": \"Hello, Claude\"},\n    ],\n)`,\n  },\n  bedrock: {\n    minVersion: '2.20.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for Bedrock conversations by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the Bedrock package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.bedrock.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () => `import boto3\n\nmlflow.bedrock.autolog()\n\n# Ensure that your boto3 client has the necessary auth information\nbedrock = boto3.client(\n    service_name=\"bedrock-runtime\",\n    region_name=\"<REPLACE_WITH_YOUR_AWS_REGION>\",\n)\n\nmodel = \"anthropic.claude-3-5-sonnet-20241022-v2:0\"\nmessages = [{ \"role\": \"user\", \"content\": [{\"text\": \"Hello!\"}]}]\n\n# All intermediate executions within the chat session will be logged\nbedrock.converse(modelId=model, messages=messages)`,\n  },\n  litellm: {\n    minVersion: '2.18.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for LiteLLM API calls by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for the LiteLLM package using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.litellm.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () => `import litellm\n\nmlflow.litellm.autolog()\n\n# Ensure that the \"OPENAI_API_KEY\" environment variable is set\nmessages = [{\"role\": \"user\", \"content\": \"Hello!\"}]\n\n# Inputs and outputs of the API request will be logged in a trace\nlitellm.completion(model=\"gpt-4o-mini\", messages=messages)`,\n  },\n  gemini: {\n    minVersion: '2.18.0',\n    getContent: () => (\n      <FormattedMessage\n        defaultMessage=\"Automatically log traces for Gemini conversations by calling the {code} function. For example:\"\n        description=\"Description of how to log traces for API calls to Google's Gemini API using MLflow autologging. This message is followed by a code example.\"\n        values={{\n          code: <code>mlflow.gemini.autolog()</code>,\n        }}\n      />\n    ),\n    getCodeSource: () => `import google.genai as genai\n\nmlflow.gemini.autolog()\n\n# Replace \"GEMINI_API_KEY\" with your API key\nclient = genai.Client(api_key=\"GEMINI_API_KEY\")\n\n# Inputs and outputs of the API request will be logged in a trace\nclient.models.generate_content(model=\"gemini-1.5-flash\", contents=\"Hello!\")`,\n  },\n  custom: {\n    minVersion: '2.14.3',\n    getContent: (baseComponentId) => (\n      <>\n        <Typography.Paragraph css={{ maxWidth: 800 }}>\n          <FormattedMessage\n            defaultMessage=\"To manually instrument your own traces, the most convenient method is to use the {code} function decorator. This will cause the inputs and outputs of the function to be captured in the trace.\"\n            description=\"Description of how to log custom code traces using MLflow. This message is followed by a code example.\"\n            values={{\n              code: <code>@mlflow.trace</code>,\n            }}\n          />\n        </Typography.Paragraph>\n        <Typography.Paragraph css={{ maxWidth: 800 }}>\n          <FormattedMessage\n            defaultMessage=\"For more complex use cases, MLflow also provides granular APIs that can be used to control tracing behavior. For more information, please visit the <a>official documentation</a> on fluent and client APIs for MLflow Tracing.\"\n            description=\"Explanation of alternative APIs for custom tracing in MLflow. The link leads to the MLflow documentation for the user to learn more.\"\n            values={{\n              a: (text: string) => (\n                <Typography.Link\n                  title=\"official documentation\"\n                  componentId={`${baseComponentId}.traces_table.custom_tracing_docs_link`}\n                  href=\"https://mlflow.org/docs/latest/llms/tracing/index.html#tracing-fluent-apis\"\n                  openInNewTab\n                >\n                  {text}\n                </Typography.Link>\n              ),\n            }}\n          />\n        </Typography.Paragraph>\n      </>\n    ),\n    getCodeSource: () =>\n      `@mlflow.trace\ndef foo(a):\nreturn a + bar(a)\n\n# Various attributes can be passed to the decorator\n# to modify the information contained in the span\n@mlflow.trace(name = \"custom_name\", attributes = { \"key\": \"value\" })\ndef bar(b):\nreturn b + 1\n\n# Invoking the traced function will cause a trace to be logged\nfoo(1)`,\n  },\n};\n","import { CopyIcon, Typography, useDesignSystemTheme, Alert } from '@databricks/design-system';\nimport { CodeSnippet } from '@databricks/web-shared/snippet';\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\n\nimport { QUICKSTART_CONTENT } from './TraceTableQuickstart.utils';\nimport { FormattedMessage } from 'react-intl';\nimport { useTracesViewTableNoTracesQuickstartContext } from './TracesViewTableNoTracesQuickstartContext';\n\nexport const TraceTableGenericQuickstart = ({\n  flavorName,\n  baseComponentId,\n}: {\n  flavorName: keyof typeof QUICKSTART_CONTENT;\n  baseComponentId: string;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { getContent, getCodeSource, minVersion } = QUICKSTART_CONTENT[flavorName];\n  const { displayVersionWarnings = true } = useTracesViewTableNoTracesQuickstartContext();\n  const content = getContent(baseComponentId);\n  const versionCheck = `import mlflow\nfrom packaging.version import Version\n\nassert Version(mlflow.__version__) >= Version(\"${minVersion}\"), (\n  \"This feature requires MLflow version ${minVersion} or newer. \"\n  \"Please run '%pip install -U mlflow' in a notebook cell, \"\n  \"and restart the kernel when the command finishes.\"\n)\n\n`;\n\n  const code = versionCheck + getCodeSource();\n\n  const alertContent = (\n    <FormattedMessage\n      defaultMessage=\"This example requires MLflow version {minVersion} or newer. Please run {installCommand} in a notebook cell if your MLflow version is older than this, and restart the kernel when the command finishes.\"\n      description=\"Alert description informing the user of how to upgrade MLflow to the minimum required version\"\n      values={{\n        minVersion,\n        installCommand: <Typography.Text code>%pip install -U mlflow</Typography.Text>,\n      }}\n    />\n  );\n\n  return (\n    <div>\n      {displayVersionWarnings && (\n        <Alert\n          componentId={`${baseComponentId}.traces_table.${flavorName}_quickstart_alert`}\n          css={{ marginBottom: theme.spacing.md, maxWidth: 800 }}\n          closable={false}\n          message={\n            <FormattedMessage\n              defaultMessage=\"Requires MLflow >= {minVersion}\"\n              description=\"Alert title informing the user of the minimum required MLflow version to run the code example\"\n              values={{ minVersion }}\n            />\n          }\n          description={alertContent}\n          type=\"info\"\n        />\n      )}\n      <Typography.Text css={{ maxWidth: 800 }}>{content}</Typography.Text>\n      <div css={{ position: 'relative', width: 'min-content' }}>\n        <CopyButton\n          componentId={`${baseComponentId}.traces_table.${flavorName}_quickstart_snippet_copy`}\n          css={{ zIndex: 1, position: 'absolute', top: theme.spacing.xs, right: theme.spacing.xs }}\n          showLabel={false}\n          copyText={code}\n          icon={<CopyIcon />}\n        />\n        <CodeSnippet\n          showLineNumbers\n          theme={theme.isDarkMode ? 'duotoneDark' : 'light'}\n          style={{\n            padding: `${theme.spacing.sm}px ${theme.spacing.md}px`,\n            marginTop: theme.spacing.md,\n          }}\n          language=\"python\"\n        >\n          {code}\n        </CodeSnippet>\n      </div>\n    </div>\n  );\n};\n","import { Header, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { isNil } from 'lodash';\nimport { TraceTableGenericQuickstart } from './TraceTableGenericQuickstart';\nimport { useTracesViewTableNoTracesQuickstartContext } from './TracesViewTableNoTracesQuickstartContext';\n\nexport const TracesViewTableNoTracesQuickstart = ({\n  baseComponentId,\n  runUuid,\n}: {\n  baseComponentId: string;\n  runUuid?: string;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { introductionText } = useTracesViewTableNoTracesQuickstartContext();\n\n  return (\n    <div css={{ overflow: 'auto', paddingBottom: theme.spacing.lg }}>\n      <Header\n        title={\n          <FormattedMessage\n            defaultMessage=\"No traces recorded\"\n            description=\"Message displayed when there are no traces logged to the experiment\"\n          />\n        }\n        titleElementLevel={3}\n      />\n      <Typography.Text\n        css={{\n          display: 'block',\n          marginTop: theme.spacing.md,\n          marginBottom: theme.spacing.md,\n          maxWidth: 800,\n        }}\n      >\n        {introductionText ? (\n          introductionText\n        ) : (\n          <FormattedMessage\n            defaultMessage=\"This tab displays all the traces logged to this {isRun, select, true {run} other {experiment}}. Follow the steps below to log your first trace. For more information about MLflow Tracing, visit the <a>MLflow documentation</a>.\"\n            description=\"Message that explains the function of the 'Traces' tab in the MLflow UI. This message is followed by a tutorial explaining how to get started with MLflow Tracing.\"\n            values={{\n              isRun: !isNil(runUuid),\n              a: (text: string) => (\n                <Typography.Link\n                  componentId={`${baseComponentId}.traces_table.quickstart_docs_link`}\n                  href=\"https://mlflow.org/docs/latest/llms/tracing/index.html\"\n                  openInNewTab\n                >\n                  {text}\n                </Typography.Link>\n              ),\n            }}\n          />\n        )}\n      </Typography.Text>\n      <TraceTableGenericQuickstart flavorName=\"custom\" baseComponentId={baseComponentId} />\n    </div>\n  );\n};\n","import { type ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\nimport { type MessageDescriptor, defineMessage } from 'react-intl';\nimport { isNil } from 'lodash';\n\nconst TRACE_METADATA_FIELD_RUN_ID = 'mlflow.sourceRun';\nconst TRACE_METADATA_FIELD_TOTAL_TOKENS = 'total_tokens';\nconst TRACE_METADATA_FIELD_INPUTS = 'mlflow.traceInputs';\nconst TRACE_METADATA_FIELD_OUTPUTS = 'mlflow.traceOutputs';\nexport const TRACE_TAG_NAME_TRACE_NAME = 'mlflow.traceName';\n\n// Truncation limit for tracing metadata, taken from:\n// https://github.com/mlflow/mlflow/blob/2b457f2b46fc135a3fba77aefafe2319a899fc08/mlflow/tracing/constant.py#L23\nconst MAX_CHARS_IN_TRACE_INFO_METADATA_AND_TAGS = 250;\n\nconst getTraceMetadataField = (traceInfo: ModelTraceInfo, field: string) => {\n  return traceInfo.request_metadata?.find(({ key }) => key === field)?.value;\n};\n\nexport const isTraceMetadataPossiblyTruncated = (traceMetadata: string) => {\n  return traceMetadata.length >= MAX_CHARS_IN_TRACE_INFO_METADATA_AND_TAGS;\n};\n\nexport const getTraceInfoRunId = (traceInfo: ModelTraceInfo) =>\n  getTraceMetadataField(traceInfo, TRACE_METADATA_FIELD_RUN_ID);\n\nexport const getTraceInfoTotalTokens = (traceInfo: ModelTraceInfo) =>\n  getTraceMetadataField(traceInfo, TRACE_METADATA_FIELD_TOTAL_TOKENS);\n\nexport const getTraceInfoInputs = (traceInfo: ModelTraceInfo) => {\n  const inputs = getTraceMetadataField(traceInfo, TRACE_METADATA_FIELD_INPUTS);\n  if (isNil(inputs)) {\n    return undefined;\n  }\n  try {\n    return JSON.stringify(JSON.parse(inputs)); // unescape non-ascii characters\n  } catch (e) {\n    return inputs;\n  }\n};\n\nexport const getTraceInfoOutputs = (traceInfo: ModelTraceInfo) => {\n  const outputs = getTraceMetadataField(traceInfo, TRACE_METADATA_FIELD_OUTPUTS);\n  if (isNil(outputs)) {\n    return undefined;\n  }\n  try {\n    return JSON.stringify(JSON.parse(outputs)); // unescape non-ascii characters\n  } catch (e) {\n    return outputs;\n  }\n};\n\nexport const getTraceTagValue = (traceInfo: ModelTraceInfo, tagName: string) => {\n  if (Array.isArray(traceInfo.tags)) {\n    return traceInfo.tags?.find(({ key }) => key === tagName)?.value;\n  }\n\n  return traceInfo.tags?.[tagName];\n};\n\nexport const getTraceDisplayName = (traceInfo: ModelTraceInfo) => {\n  return getTraceTagValue(traceInfo, TRACE_TAG_NAME_TRACE_NAME) || traceInfo.request_id;\n};\n\nexport const EXPERIMENT_TRACES_SORTABLE_COLUMNS = ['timestamp_ms'];\n\n// defining a separate const for this column as\n// we don't users to be able to control its visibility\nexport const TRACE_TABLE_CHECKBOX_COLUMN_ID = 'select';\n\nexport enum ExperimentViewTracesTableColumns {\n  requestId = 'request_id',\n  traceName = 'traceName',\n  timestampMs = 'timestamp_ms',\n  inputs = 'inputs',\n  outputs = 'outputs',\n  runName = 'runName',\n  totalTokens = 'total_tokens',\n  source = 'source',\n  latency = 'latency',\n  tags = 'tags',\n  status = 'status',\n}\n\nexport const ExperimentViewTracesTableColumnLabels: Record<ExperimentViewTracesTableColumns, MessageDescriptor> = {\n  [ExperimentViewTracesTableColumns.requestId]: defineMessage({\n    defaultMessage: 'Request ID',\n    description: 'Experiment page > traces table > request id column header',\n  }),\n  [ExperimentViewTracesTableColumns.traceName]: defineMessage({\n    defaultMessage: 'Trace name',\n    description: 'Experiment page > traces table > trace name column header',\n  }),\n  [ExperimentViewTracesTableColumns.timestampMs]: defineMessage({\n    defaultMessage: 'Time created',\n    description: 'Experiment page > traces table > time created column header',\n  }),\n  [ExperimentViewTracesTableColumns.status]: defineMessage({\n    defaultMessage: 'Status',\n    description: 'Experiment page > traces table > status column header',\n  }),\n  [ExperimentViewTracesTableColumns.inputs]: defineMessage({\n    defaultMessage: 'Request',\n    description: 'Experiment page > traces table > input column header',\n  }),\n  [ExperimentViewTracesTableColumns.outputs]: defineMessage({\n    defaultMessage: 'Response',\n    description: 'Experiment page > traces table > output column header',\n  }),\n  [ExperimentViewTracesTableColumns.runName]: defineMessage({\n    defaultMessage: 'Run name',\n    description: 'Experiment page > traces table > run name column header',\n  }),\n  [ExperimentViewTracesTableColumns.totalTokens]: defineMessage({\n    defaultMessage: 'Tokens',\n    description: 'Experiment page > traces table > tokens column header',\n  }),\n  [ExperimentViewTracesTableColumns.source]: defineMessage({\n    defaultMessage: 'Source',\n    description: 'Experiment page > traces table > source column header',\n  }),\n  [ExperimentViewTracesTableColumns.latency]: defineMessage({\n    defaultMessage: 'Execution time',\n    description: 'Experiment page > traces table > latency column header',\n  }),\n  [ExperimentViewTracesTableColumns.tags]: defineMessage({\n    defaultMessage: 'Tags',\n    description: 'Experiment page > traces table > tags column header',\n  }),\n};\n\nexport const ExperimentViewTracesStatusLabels = {\n  UNSET: null,\n  IN_PROGRESS: defineMessage({\n    defaultMessage: 'In progress',\n    description: 'Experiment page > traces table > status label > in progress',\n  }),\n  OK: defineMessage({\n    defaultMessage: 'OK',\n    description: 'Experiment page > traces table > status label > ok',\n  }),\n  ERROR: defineMessage({\n    defaultMessage: 'Error',\n    description: 'Experiment page > traces table > status label > error',\n  }),\n};\n","import { type ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { MlflowService } from '../../../sdk/MlflowService';\nimport { EXPERIMENT_TRACES_SORTABLE_COLUMNS, getTraceInfoRunId } from '../TracesView.utils';\nimport { ViewType } from '../../../sdk/MlflowEnums';\nimport { first, uniq, values } from 'lodash';\nimport { RunEntity } from '../../../types';\n\n// A filter expression used to filter traces by run ID\nconst RUN_ID_FILTER_EXPRESSION = 'request_metadata.`mlflow.sourceRun`';\nconst LOGGED_MODEL_ID_FILTER_EXPRESSION = 'request_metadata.`mlflow.modelId`';\n\nconst createRunIdsFilterExpression = (runUuids: string[]) => {\n  const runIdsInQuotes = runUuids.map((runId: any) => `'${runId}'`);\n  return `run_id IN (${runIdsInQuotes.join(',')})`;\n};\n\n/**\n * Utility function that fetches run names for traces.\n */\nconst fetchRunNamesForTraces = async (experimentIds: string[], traces: ModelTraceInfo[]) => {\n  const traceIdToRunIdMap = traces.reduce<Record<string, string>>((acc, trace) => {\n    const traceId = trace.request_id;\n    const runId = getTraceInfoRunId(trace);\n    if (!traceId || !runId) {\n      return acc;\n    }\n    return { ...acc, [traceId]: runId };\n  }, {});\n\n  const runUuids = uniq(values(traceIdToRunIdMap));\n  if (runUuids.length < 1) {\n    return {};\n  }\n  const runResponse = (await MlflowService.searchRuns({\n    experiment_ids: experimentIds,\n    filter: createRunIdsFilterExpression(runUuids),\n    run_view_type: ViewType.ALL,\n  })) as { runs?: RunEntity[] };\n\n  const runs = runResponse.runs;\n\n  const runIdsToRunNames = (runs || []).reduce<Record<string, string>>((acc, run) => {\n    return { ...acc, [run.info.runUuid]: run.info.runName };\n  }, {});\n\n  const traceIdsToRunNames = traces.reduce<Record<string, string>>((acc, trace) => {\n    const traceId = trace.request_id;\n    if (!traceId) {\n      return acc;\n    }\n    const runId = traceIdToRunIdMap[traceId];\n\n    return { ...acc, [traceId]: runIdsToRunNames[runId] || runId };\n  }, {});\n\n  return traceIdsToRunNames;\n};\n\nexport interface ModelTraceInfoWithRunName extends ModelTraceInfo {\n  runName?: string;\n}\n\nexport const useExperimentTraces = ({\n  experimentIds,\n  sorting,\n  filter = '',\n  runUuid,\n  loggedModelId,\n}: {\n  experimentIds: string[];\n  sorting: {\n    id: string;\n    desc: boolean;\n  }[];\n  filter?: string;\n  runUuid?: string;\n  loggedModelId?: string;\n}) => {\n  const [traces, setTraces] = useState<ModelTraceInfoWithRunName[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<Error | undefined>(undefined);\n\n  // Backend currently only supports ordering by timestamp\n  const orderByString = useMemo(() => {\n    const firstOrderByColumn = first(sorting);\n    if (firstOrderByColumn && EXPERIMENT_TRACES_SORTABLE_COLUMNS.includes(firstOrderByColumn.id)) {\n      return `${firstOrderByColumn.id} ${firstOrderByColumn.desc ? 'DESC' : 'ASC'}`;\n    }\n    return 'timestamp_ms DESC';\n  }, [sorting]);\n\n  const filterString = useMemo(() => {\n    if (!runUuid && !loggedModelId) {\n      return filter;\n    }\n\n    if (loggedModelId) {\n      if (filter) {\n        return `${filter} AND ${LOGGED_MODEL_ID_FILTER_EXPRESSION}='${loggedModelId}'`;\n      }\n      return `${LOGGED_MODEL_ID_FILTER_EXPRESSION}='${loggedModelId}'`;\n    }\n\n    if (filter) {\n      return `${filter} AND ${RUN_ID_FILTER_EXPRESSION}='${runUuid}'`;\n    }\n\n    return `${RUN_ID_FILTER_EXPRESSION}='${runUuid}'`;\n  }, [filter, runUuid, loggedModelId]);\n\n  const [pageTokens, setPageTokens] = useState<Record<string, string | undefined>>({ 0: undefined });\n  const [currentPage, setCurrentPage] = useState(0);\n  const currentPageToken = pageTokens[currentPage];\n\n  const fetchTraces = useCallback(\n    async ({\n      experimentIds,\n      currentPage = 0,\n      pageToken,\n      silent,\n      orderByString = '',\n      filterString = '',\n    }: {\n      experimentIds: string[];\n      currentPage?: number;\n      pageToken?: string;\n      filterString?: string;\n      orderByString?: string;\n      silent?: boolean;\n    }) => {\n      if (!silent) {\n        setLoading(true);\n      }\n      setError(undefined);\n\n      try {\n        const response = await MlflowService.getExperimentTraces(experimentIds, orderByString, pageToken, filterString);\n\n        if (!response.traces) {\n          setTraces([]);\n          return;\n        }\n\n        const runNamesForTraces = await fetchRunNamesForTraces(experimentIds, response.traces);\n        const tracesWithRunNames = response.traces.map((trace) => {\n          const traceId = trace.request_id;\n          if (!traceId) {\n            return { ...trace };\n          }\n          const runName = runNamesForTraces[traceId];\n          return { ...trace, runName };\n        });\n\n        setTraces(tracesWithRunNames);\n        setPageTokens((prevPages) => {\n          return { ...prevPages, [currentPage + 1]: response.next_page_token };\n        });\n      } catch (e: any) {\n        setError(e);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [],\n  );\n\n  const hasNextPage = !loading && pageTokens[currentPage + 1] !== undefined;\n  const hasPreviousPage = !loading && (currentPage === 1 || pageTokens[currentPage - 1] !== undefined);\n\n  useEffect(() => {\n    fetchTraces({ experimentIds, filterString, orderByString });\n  }, [fetchTraces, filterString, experimentIds, orderByString]);\n\n  const reset = useCallback(() => {\n    setTraces([]);\n    setPageTokens({ 0: undefined });\n    setCurrentPage(0);\n    fetchTraces({ experimentIds });\n  }, [fetchTraces, experimentIds]);\n\n  const fetchNextPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage + 1);\n    fetchTraces({\n      experimentIds,\n      currentPage: currentPage + 1,\n      pageToken: pageTokens[currentPage + 1],\n      filterString,\n      orderByString,\n    });\n  }, [experimentIds, currentPage, fetchTraces, pageTokens, filterString, orderByString]);\n\n  const fetchPrevPage = useCallback(() => {\n    setCurrentPage((prevPage) => prevPage - 1);\n    fetchTraces({\n      experimentIds,\n      currentPage: currentPage - 1,\n      pageToken: pageTokens[currentPage - 1],\n      filterString,\n      orderByString,\n    });\n  }, [experimentIds, currentPage, fetchTraces, pageTokens, filterString, orderByString]);\n\n  const refreshCurrentPage = useCallback(\n    (silent = false) => {\n      return fetchTraces({\n        experimentIds,\n        currentPage,\n        pageToken: currentPageToken,\n        silent,\n        filterString,\n        orderByString,\n      });\n    },\n    [experimentIds, currentPage, fetchTraces, currentPageToken, filterString, orderByString],\n  );\n\n  return {\n    traces,\n    loading,\n    error,\n    hasNextPage,\n    hasPreviousPage,\n    fetchNextPage,\n    fetchPrevPage,\n    refreshCurrentPage,\n    reset,\n  };\n};\n","import { Button, PencilIcon, SpeechBubblePlusIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { MLFLOW_INTERNAL_PREFIX } from '../../../common/utils/TagUtils';\nimport { KeyValueTag } from '../../../common/components/KeyValueTag';\nimport { FormattedMessage } from 'react-intl';\n\nexport const TracesViewTableTagCell = ({\n  onAddEditTags,\n  tags,\n  baseComponentId,\n}: {\n  tags: { key: string; value: string }[];\n  onAddEditTags: () => void;\n  baseComponentId: string;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const visibleTagList = tags?.filter(({ key }) => key && !key.startsWith(MLFLOW_INTERNAL_PREFIX)) || [];\n  const containsTags = visibleTagList.length > 0;\n  return (\n    <div\n      css={{\n        display: 'flex',\n        alignItems: 'center',\n        flexWrap: 'wrap',\n        columnGap: theme.spacing.xs,\n        rowGap: theme.spacing.xs,\n      }}\n    >\n      {visibleTagList.map((tag) => (\n        <KeyValueTag\n          key={tag.key}\n          tag={tag}\n          css={{ marginRight: 0 }}\n          charLimit={20}\n          maxWidth={150}\n          enableFullViewModal\n        />\n      ))}{' '}\n      <Button\n        componentId={`${baseComponentId}.traces_table.edit_tag`}\n        size=\"small\"\n        icon={!containsTags ? undefined : <PencilIcon />}\n        onClick={onAddEditTags}\n        children={\n          !containsTags ? (\n            <FormattedMessage\n              defaultMessage=\"Add tags\"\n              description=\"Button text to add tags to a trace in the experiment traces table\"\n            />\n          ) : undefined\n        }\n        css={{\n          flexShrink: 0,\n          opacity: 0,\n          '[role=row]:hover &': {\n            opacity: 1,\n          },\n          '[role=row]:focus-within &': {\n            opacity: 1,\n          },\n        }}\n        type=\"tertiary\"\n      />\n    </div>\n  );\n};\n","import type { CellContext, ColumnDefTemplate } from '@tanstack/react-table';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { CheckCircleIcon, ClockIcon, XCircleIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { ExperimentViewTracesStatusLabels } from './TracesView.utils';\nimport { useIntl } from 'react-intl';\nimport type { Theme } from '@emotion/react';\n\nconst getIcon = (status: ModelTraceInfoWithRunName['status'], theme: Theme) => {\n  if (status === 'IN_PROGRESS') {\n    return <ClockIcon css={{ color: theme.colors.textValidationWarning }} />;\n  }\n\n  if (status === 'OK') {\n    return <CheckCircleIcon css={{ color: theme.colors.textValidationSuccess }} />;\n  }\n\n  if (status === 'ERROR') {\n    return <XCircleIcon css={{ color: theme.colors.textValidationDanger }} />;\n  }\n\n  return null;\n};\n\nexport const TracesViewTableStatusCell: ColumnDefTemplate<CellContext<ModelTraceInfoWithRunName, unknown>> = ({\n  row: { original },\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n\n  const labelDescriptor = ExperimentViewTracesStatusLabels[original.status || 'UNSET'];\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.xs, alignItems: 'center' }}>\n      {getIcon(original.status, theme)}\n      {labelDescriptor ? intl.formatMessage(labelDescriptor) : ''}\n    </div>\n  );\n};\n","import { Button, ChevronDownIcon, ChevronRightIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { isString } from 'lodash';\nimport { useCallback, useMemo, useState } from 'react';\nimport { MlflowService } from '../../sdk/MlflowService';\nimport Utils from '../../../common/utils/Utils';\nimport { ErrorWrapper } from '../../../common/utils/ErrorWrapper';\nimport type { CellContext, ColumnDefTemplate } from '@tanstack/react-table';\nimport type { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { getTraceInfoInputs, getTraceInfoOutputs, isTraceMetadataPossiblyTruncated } from './TracesView.utils';\nimport { CodeSnippet } from '@databricks/web-shared/snippet';\nimport { css } from '@emotion/react';\n\nconst clampedLinesCss = css`\n  display: -webkit-box;\n  -webkit-line-clamp: 3;\n  -webkit-box-orient: vertical;\n`;\n\nconst TracesViewTablePreviewCell = ({\n  value,\n  traceId,\n  previewFieldName,\n}: {\n  value: string;\n  traceId: string;\n  previewFieldName: 'request' | 'response';\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [fullData, setFullData] = useState<string | null>(null);\n\n  const [loading, setLoading] = useState<boolean>(false);\n\n  const fetchFullData = useCallback(async () => {\n    setLoading(true);\n    try {\n      const response = await MlflowService.getExperimentTraceData<{\n        request?: any;\n        response?: any;\n      }>(traceId);\n\n      if (previewFieldName in response) {\n        const previewValue = response[previewFieldName];\n        const requestData = isString(previewValue) ? previewValue : JSON.stringify(previewValue);\n        setFullData(requestData);\n      }\n    } catch (e: any) {\n      const errorMessage = e instanceof ErrorWrapper ? e.getUserVisibleError() : e.message;\n      Utils.logErrorAndNotifyUser(`Error fetching response: ${errorMessage}`);\n    }\n    setLoading(false);\n  }, [previewFieldName, traceId]);\n\n  const valuePossiblyTruncated = isTraceMetadataPossiblyTruncated(value);\n\n  const expand = useCallback(async () => {\n    if (!fullData && valuePossiblyTruncated) {\n      await fetchFullData();\n    }\n    setIsExpanded(true);\n  }, [fullData, fetchFullData, valuePossiblyTruncated]);\n\n  const collapse = useCallback(() => {\n    setIsExpanded(false);\n  }, []);\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.xs }}>\n      <Button\n        // it's difficult to distinguish between run and experiment page\n        // in this component due to how the data is passed to the table,\n        // so the base component ID here is simply `mlflow.traces`\n        componentId=\"mlflow.traces.traces_table.expand_cell_preview\"\n        size=\"small\"\n        icon={isExpanded ? <ChevronDownIcon /> : <ChevronRightIcon />}\n        onClick={isExpanded ? collapse : expand}\n        css={{ flexShrink: 0 }}\n        loading={loading}\n        type=\"primary\"\n      />\n      <div\n        title={value}\n        css={[\n          {\n            overflow: 'hidden',\n            textOverflow: 'ellipsis',\n          },\n          !isExpanded && clampedLinesCss,\n        ]}\n      >\n        {isExpanded ? <ExpandedParamCell value={fullData ?? value} /> : value}\n      </div>\n    </div>\n  );\n};\n\nconst ExpandedParamCell = ({ value }: { value: string }) => {\n  const { theme } = useDesignSystemTheme();\n\n  const structuredJSONValue = useMemo(() => {\n    // Attempts to parse the value as JSON and returns a pretty printed version if successful.\n    // If JSON structure is not found, returns null.\n    try {\n      const objectData = JSON.parse(value);\n      return JSON.stringify(objectData, null, 2);\n    } catch (e) {\n      return null;\n    }\n  }, [value]);\n  return (\n    <div\n      css={{\n        whiteSpace: 'pre-wrap',\n        wordBreak: 'break-word',\n        fontFamily: structuredJSONValue ? 'monospace' : undefined,\n      }}\n    >\n      <CodeSnippet\n        language=\"json\"\n        wrapLongLines\n        style={{\n          padding: theme.spacing.sm,\n        }}\n        theme={theme.isDarkMode ? 'duotoneDark' : 'light'}\n      >\n        {structuredJSONValue || value}\n      </CodeSnippet>\n    </div>\n  );\n};\n\nexport const TracesViewTableRequestPreviewCell: ColumnDefTemplate<CellContext<ModelTraceInfoWithRunName, unknown>> = ({\n  row: { original },\n}) => (\n  <TracesViewTablePreviewCell\n    previewFieldName=\"request\"\n    traceId={original.request_id || ''}\n    value={getTraceInfoInputs(original) || ''}\n  />\n);\n\nexport const TracesViewTableResponsePreviewCell: ColumnDefTemplate<CellContext<ModelTraceInfoWithRunName, unknown>> = ({\n  row: { original },\n}) => (\n  <TracesViewTablePreviewCell\n    previewFieldName=\"response\"\n    traceId={original.request_id || ''}\n    value={getTraceInfoOutputs(original) || ''}\n  />\n);\n","import type { CellContext, ColumnDefTemplate } from '@tanstack/react-table';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { keyBy } from 'lodash';\nimport { SourceCellRenderer } from '../experiment-page/components/runs/cells/SourceCellRenderer';\n\nexport const TracesViewTableSourceCell: ColumnDefTemplate<CellContext<ModelTraceInfoWithRunName, unknown>> = ({\n  row: { original },\n}) => <SourceCellRenderer value={keyBy(original.tags, 'key')} />;\n","import { ColumnDef } from '@tanstack/react-table';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { Interpolation, Theme } from '@emotion/react';\n\nexport type TracesColumnDef = ColumnDef<ModelTraceInfoWithRunName> & {\n  meta?: {\n    styles?: Interpolation<Theme>;\n    multiline?: boolean;\n  };\n};\n\nexport const getHeaderSizeClassName = (id: string) => `--header-${id}-size`;\nexport const getColumnSizeClassName = (id: string) => `--col-${id}-size`;\n","import React from 'react';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { Row, flexRender } from '@tanstack/react-table';\nimport { useDesignSystemTheme } from '@databricks/design-system';\nimport { TracesColumnDef, getColumnSizeClassName } from './TracesViewTable.utils';\nimport { TRACE_TABLE_CHECKBOX_COLUMN_ID } from './TracesView.utils';\nimport { isEqual } from 'lodash';\n\ntype TracesViewTableRowProps = {\n  row: Row<ModelTraceInfoWithRunName>;\n  // used only for memoization updates\n  selected: boolean;\n  columns: TracesColumnDef[];\n};\n\nexport const TracesViewTableRow = React.memo(\n  ({ row }: TracesViewTableRowProps) => {\n    const { theme } = useDesignSystemTheme();\n\n    return (\n      <div\n        role=\"row\"\n        key={row.id}\n        data-testid=\"endpoints-list-table-rows\"\n        css={{\n          minHeight: theme.general.buttonHeight,\n          display: 'flex',\n          flexDirection: 'row',\n          ':hover': {\n            backgroundColor: 'var(--table-row-hover)',\n          },\n          paddingRight: '32px', // width of the column selector defined in TableRowActionStyles\n          borderBottom: `1px solid var(--table-separator-color)`,\n        }}\n      >\n        {row.getAllCells().map((cell) => {\n          const multiline = (cell.column.columnDef as TracesColumnDef).meta?.multiline;\n          const isSelect = cell.column.id === TRACE_TABLE_CHECKBOX_COLUMN_ID;\n          const padding = isSelect ? theme.spacing.sm : `${theme.spacing.sm}px ${theme.spacing.xs}px`;\n\n          return (\n            <div\n              role=\"cell\"\n              css={[\n                {\n                  '--table-row-vertical-padding': `${theme.spacing.sm}px`,\n                  flex: `calc(var(${getColumnSizeClassName(cell.column.id)}) / 100)`,\n                  overflow: 'hidden',\n                  whiteSpace: multiline ? 'pre-wrap' : 'nowrap',\n                  textOverflow: multiline ? 'ellipsis' : undefined,\n                  padding,\n                },\n                (cell.column.columnDef as TracesColumnDef).meta?.styles,\n              ]}\n              key={cell.id}\n            >\n              {flexRender(cell.column.columnDef.cell, cell.getContext())}\n            </div>\n          );\n        })}\n      </div>\n    );\n  },\n  (prev, next) => {\n    return (\n      prev.columns === next.columns &&\n      prev.selected === next.selected &&\n      isEqual(prev.row.original.tags, next.row.original.tags)\n    );\n  },\n);\n","import { CellContext, ColumnDefTemplate } from '@tanstack/react-table';\nimport React from 'react';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { LegacyTooltip } from '@databricks/design-system';\nimport Utils from '@mlflow/mlflow/src/common/utils/Utils';\n\nexport const TracesViewTableTimestampCell: ColumnDefTemplate<CellContext<ModelTraceInfoWithRunName, unknown>> =\n  React.memo(\n    ({ row: { original } }) => {\n      if (!original.timestamp_ms) {\n        return null;\n      }\n      return (\n        <LegacyTooltip\n          title={new Date(original.timestamp_ms).toLocaleString(navigator.language, {\n            timeZoneName: 'short',\n          })}\n          placement=\"right\"\n        >\n          <span>{Utils.timeSinceStr(original.timestamp_ms)}</span>\n        </LegacyTooltip>\n      );\n    },\n    () => true,\n  );\n","import React from 'react';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { Table } from '@tanstack/react-table';\nimport { Checkbox } from '@databricks/design-system';\n\ntype TracesViewTableCheckboxProps = {\n  table: Table<ModelTraceInfoWithRunName>;\n};\n\nexport const TracesViewTableHeaderCheckbox = ({ table }: TracesViewTableCheckboxProps) => {\n  const isChecked = table.getIsAllRowsSelected() || (table.getIsSomeRowsSelected() ? null : false);\n\n  return (\n    <Checkbox\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewtableheadercheckbox.tsx_14\"\n      data-testid=\"trace-table-header-checkbox\"\n      isChecked={isChecked}\n      wrapperStyle={{ padding: 0, margin: 0 }}\n      onChange={table.toggleAllRowsSelected}\n    />\n  );\n};\n","import React from 'react';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { Row } from '@tanstack/react-table';\nimport { Checkbox } from '@databricks/design-system';\n\ntype TracesViewCellCheckboxProps = {\n  row: Row<ModelTraceInfoWithRunName>;\n};\n\nexport const TracesViewTableCellCheckbox = ({ row }: TracesViewCellCheckboxProps) => {\n  return (\n    <Checkbox\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewtablecellcheckbox.tsx_12\"\n      data-testid={`trace-table-cell-checkbox-${row.id}`}\n      disabled={!row.getCanSelect()}\n      isChecked={row.getIsSelected()}\n      wrapperStyle={{ padding: 0, margin: 0 }}\n      onChange={() => row.toggleSelected()}\n    />\n  );\n};\n","import {\n  CursorPagination,\n  DangerIcon,\n  Empty,\n  Table,\n  TableHeader,\n  TableRow,\n  TableSkeletonRows,\n  Typography,\n  useDesignSystemTheme,\n  Button,\n  DropdownMenu,\n  TableRowAction,\n  ColumnsIcon,\n} from '@databricks/design-system';\nimport { SortingState, flexRender, getCoreRowModel, getSortedRowModel, useReactTable } from '@tanstack/react-table';\nimport React, { useMemo } from 'react';\nimport { isNil, entries } from 'lodash';\nimport Utils from '../../../common/utils/Utils';\nimport { Link } from '../../../common/utils/RoutingUtils';\nimport { ErrorWrapper } from '../../../common/utils/ErrorWrapper';\nimport Routes from '../../routes';\nimport {\n  ExperimentViewTracesTableColumnLabels,\n  ExperimentViewTracesTableColumns,\n  TRACE_TABLE_CHECKBOX_COLUMN_ID,\n  TRACE_TAG_NAME_TRACE_NAME,\n  getTraceInfoRunId,\n  getTraceInfoTotalTokens,\n  getTraceTagValue,\n} from './TracesView.utils';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { type ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\nimport { TracesViewTableTagCell } from './TracesViewTableTagCell';\nimport type { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\nimport { TracesViewTableStatusCell } from './TracesViewTableStatusCell';\nimport { TracesViewTableRequestPreviewCell, TracesViewTableResponsePreviewCell } from './TracesViewTablePreviewCell';\nimport { TracesViewTableSourceCell } from './TracesViewTableSourceCell';\nimport { TracesColumnDef, getColumnSizeClassName, getHeaderSizeClassName } from './TracesViewTable.utils';\nimport { TracesViewTableRow } from './TracesViewTableRow';\nimport { TracesViewTableTimestampCell } from './TracesViewTableTimestampCell';\nimport { TracesViewTableHeaderCheckbox } from './TracesViewTableHeaderCheckbox';\nimport { TracesViewTableCellCheckbox } from './TracesViewTableCellCheckbox';\nimport { TracesViewTableNoTracesQuickstart } from './quickstart/TracesViewTableNoTracesQuickstart';\nimport { isUnstableNestedComponentsMigrated } from '@mlflow/mlflow/src/common/utils/FeatureUtils';\n\nexport interface TracesViewTableProps {\n  experimentIds: string[];\n  runUuid?: string;\n  traces: ModelTraceInfoWithRunName[];\n  onTraceClicked?: (trace: ModelTraceInfo) => void;\n  onTraceTagsEdit?: (trace: ModelTraceInfo) => void;\n  onTagsUpdated?: () => void;\n  loading: boolean;\n  error?: Error;\n  usingFilters?: boolean;\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n  onNextPage: () => void;\n  onPreviousPage: () => void;\n  onResetFilters: () => void;\n  sorting: SortingState;\n  setSorting: React.Dispatch<React.SetStateAction<SortingState>>;\n  rowSelection: { [id: string]: boolean };\n  setRowSelection: React.Dispatch<React.SetStateAction<{ [id: string]: boolean }>>;\n  hiddenColumns?: string[];\n  disableTokenColumn?: boolean;\n  baseComponentId: string;\n  toggleHiddenColumn: (columnId: string) => void;\n  disabledColumns?: string[];\n}\n\ntype TracesViewTableMeta = {\n  baseComponentId: string;\n  onTraceClicked?: TracesViewTableProps['onTraceClicked'];\n  onTraceTagsEdit?: TracesViewTableProps['onTraceTagsEdit'];\n};\n\nconst RequestIdCell: TracesColumnDef['cell'] = ({\n  row: { original },\n  table: {\n    options: { meta },\n  },\n}) => {\n  const { baseComponentId, onTraceClicked } = meta as TracesViewTableMeta;\n  return (\n    <Typography.Link\n      componentId={`${baseComponentId}.traces_table.request_id_link`}\n      ellipsis\n      css={{ maxWidth: '100%', textOverflow: 'ellipsis' }}\n      onClick={() => {\n        onTraceClicked?.(original);\n      }}\n    >\n      {original.request_id}\n    </Typography.Link>\n  );\n};\n\nconst TraceNameCell: TracesColumnDef['cell'] = ({\n  row: { original },\n  table: {\n    options: { meta },\n  },\n}) => {\n  const { baseComponentId, onTraceClicked } = meta as TracesViewTableMeta;\n  return (\n    <Typography.Link\n      componentId={`${baseComponentId}.traces_table.trace_name_link`}\n      ellipsis\n      css={{ maxWidth: '100%', textOverflow: 'ellipsis' }}\n      onClick={() => {\n        onTraceClicked?.(original);\n      }}\n    >\n      {getTraceTagValue(original, TRACE_TAG_NAME_TRACE_NAME)}\n    </Typography.Link>\n  );\n};\n\nconst RunNameCell: TracesColumnDef['cell'] = ({ row: { original } }) => {\n  const runId = getTraceInfoRunId(original);\n  if (!runId || !original.experiment_id) {\n    return null;\n  }\n  const label = original.runName || runId;\n  return (\n    <Link\n      css={{\n        maxWidth: '100%',\n        textOverflow: 'ellipsis',\n        display: 'inline-block',\n        overflow: 'hidden',\n      }}\n      to={Routes.getRunPageRoute(original.experiment_id, runId)}\n    >\n      {label}\n    </Link>\n  );\n};\n\nconst TraceTagsCell: TracesColumnDef['cell'] = ({\n  row: { original },\n  table: {\n    options: { meta },\n  },\n}) => {\n  const { onTraceTagsEdit, baseComponentId } = meta as TracesViewTableMeta;\n  return (\n    <TracesViewTableTagCell\n      tags={original.tags || []}\n      onAddEditTags={() => onTraceTagsEdit?.(original)}\n      baseComponentId={baseComponentId}\n    />\n  );\n};\n\ntype ColumnListItem = {\n  key: string;\n  label: string;\n};\n\nexport const TracesViewTable = React.memo(\n  ({\n    experimentIds,\n    runUuid,\n    traces,\n    loading,\n    error,\n    onTraceClicked,\n    onTraceTagsEdit,\n    hasNextPage,\n    hasPreviousPage,\n    onNextPage,\n    onPreviousPage,\n    usingFilters,\n    onResetFilters,\n    sorting,\n    setSorting,\n    rowSelection,\n    setRowSelection,\n    hiddenColumns = [],\n    disableTokenColumn,\n    baseComponentId,\n    toggleHiddenColumn,\n    disabledColumns = [],\n  }: TracesViewTableProps) => {\n    const intl = useIntl();\n    const { theme } = useDesignSystemTheme();\n\n    const showQuickStart = !loading && traces.length === 0 && !usingFilters && !error;\n\n    const useStaticColumnsCells = isUnstableNestedComponentsMigrated();\n\n    const allColumnsList = useMemo<ColumnListItem[]>(() => {\n      return entries(ExperimentViewTracesTableColumnLabels)\n        .map(([key, label]) => ({\n          key,\n          label: intl.formatMessage(label),\n        }))\n        .filter(({ key }) => !disabledColumns.includes(key));\n    }, [intl, disabledColumns]);\n\n    const columns = useMemo<TracesColumnDef[]>(() => {\n      if (showQuickStart) {\n        return [];\n      }\n\n      const columns: TracesColumnDef[] = [\n        {\n          id: TRACE_TABLE_CHECKBOX_COLUMN_ID,\n          header: TracesViewTableHeaderCheckbox,\n          enableResizing: false,\n          enableSorting: false,\n          cell: TracesViewTableCellCheckbox,\n          meta: { styles: { minWidth: 32, maxWidth: 32 } },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.requestId]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.requestId,\n          cell: useStaticColumnsCells\n            ? RequestIdCell\n            : ({ row: { original } }) => {\n                return (\n                  <Typography.Link\n                    componentId={`${baseComponentId}.traces_table.request_id_link`}\n                    ellipsis\n                    css={{ maxWidth: '100%', textOverflow: 'ellipsis' }}\n                    onClick={() => {\n                      onTraceClicked?.(original);\n                    }}\n                  >\n                    {original.request_id}\n                  </Typography.Link>\n                );\n              },\n          meta: { styles: { minWidth: 200 } },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.traceName]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.traceName,\n          cell: useStaticColumnsCells\n            ? TraceNameCell\n            : ({ row: { original } }) => {\n                return (\n                  <Typography.Link\n                    componentId={`${baseComponentId}.traces_table.trace_name_link`}\n                    ellipsis\n                    css={{ maxWidth: '100%', textOverflow: 'ellipsis' }}\n                    onClick={() => {\n                      onTraceClicked?.(original);\n                    }}\n                  >\n                    {getTraceTagValue(original, TRACE_TAG_NAME_TRACE_NAME)}\n                  </Typography.Link>\n                );\n              },\n          meta: { styles: { minWidth: 150 } },\n        },\n        {\n          header: intl.formatMessage(\n            ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.timestampMs],\n          ),\n          id: ExperimentViewTracesTableColumns.timestampMs,\n          accessorFn: (data) => data.timestamp_ms,\n          enableSorting: true,\n          enableResizing: true,\n          cell: TracesViewTableTimestampCell,\n          meta: { styles: { minWidth: 100 } },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.status]),\n          id: ExperimentViewTracesTableColumns.status,\n          enableSorting: false,\n          enableResizing: true,\n          cell: TracesViewTableStatusCell,\n          meta: { styles: { minWidth: 100 } },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.inputs]),\n          id: ExperimentViewTracesTableColumns.inputs,\n          enableSorting: false,\n          enableResizing: true,\n          cell: TracesViewTableRequestPreviewCell,\n          meta: { multiline: true },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.outputs]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.outputs,\n          cell: TracesViewTableResponsePreviewCell,\n          meta: { multiline: true },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.runName]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.runName,\n          cell: useStaticColumnsCells\n            ? RunNameCell\n            : ({ row: { original } }) => {\n                const runId = getTraceInfoRunId(original);\n                if (!runId || !original.experiment_id) {\n                  return null;\n                }\n                const label = original.runName || runId;\n                return (\n                  <Link\n                    css={{\n                      maxWidth: '100%',\n                      textOverflow: 'ellipsis',\n                      display: 'inline-block',\n                      overflow: 'hidden',\n                    }}\n                    to={Routes.getRunPageRoute(original.experiment_id, runId)}\n                  >\n                    {label}\n                  </Link>\n                );\n              },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.source]),\n          enableSorting: true,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.source,\n          cell: TracesViewTableSourceCell,\n          meta: { styles: { minWidth: 100 } },\n        },\n      ];\n\n      if (!disableTokenColumn) {\n        columns.push({\n          header: intl.formatMessage(\n            ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.totalTokens],\n          ),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.totalTokens,\n          accessorFn: (data) => getTraceInfoTotalTokens(data),\n          meta: { styles: { minWidth: 80, maxWidth: 80 } },\n        });\n      }\n      columns.push(\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.latency]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.latency,\n          accessorFn: (data) => {\n            if (isNil(data.execution_time_ms) || !isFinite(data.execution_time_ms)) {\n              return null;\n            }\n            return Utils.formatDuration(data.execution_time_ms);\n          },\n          meta: { styles: { minWidth: 100 } },\n        },\n        {\n          header: intl.formatMessage(ExperimentViewTracesTableColumnLabels[ExperimentViewTracesTableColumns.tags]),\n          enableSorting: false,\n          enableResizing: true,\n          id: ExperimentViewTracesTableColumns.tags,\n          cell: useStaticColumnsCells\n            ? TraceTagsCell\n            : ({ row: { original } }) => {\n                return (\n                  <TracesViewTableTagCell\n                    tags={original.tags || []}\n                    onAddEditTags={() => onTraceTagsEdit?.(original)}\n                    baseComponentId={baseComponentId}\n                  />\n                );\n              },\n        },\n      );\n\n      return columns.filter((column) => column.id && !hiddenColumns.includes(column.id));\n    }, [\n      intl,\n      onTraceClicked,\n      onTraceTagsEdit,\n      disableTokenColumn,\n      hiddenColumns,\n      baseComponentId,\n      useStaticColumnsCells,\n      showQuickStart,\n    ]);\n\n    const table = useReactTable<ModelTraceInfoWithRunName>({\n      columns,\n      data: showQuickStart ? [] : traces,\n      state: { sorting, rowSelection },\n      getCoreRowModel: getCoreRowModel(),\n      getRowId: (row, index) => row.request_id || index.toString(),\n      getSortedRowModel: getSortedRowModel(),\n      onSortingChange: setSorting,\n      onRowSelectionChange: setRowSelection,\n      enableColumnResizing: true,\n      enableRowSelection: true,\n      columnResizeMode: 'onChange',\n      meta: { baseComponentId, onTraceClicked, onTraceTagsEdit } satisfies TracesViewTableMeta,\n    });\n\n    const getEmptyState = () => {\n      if (error) {\n        const errorMessage = error instanceof ErrorWrapper ? error.getMessageField() : error.message;\n        return (\n          <Empty\n            image={<DangerIcon />}\n            description={errorMessage}\n            title={\n              <FormattedMessage\n                defaultMessage=\"Error\"\n                description=\"Experiment page > traces table > error state title\"\n              />\n            }\n          />\n        );\n      }\n      if (!loading && traces.length === 0 && usingFilters) {\n        return (\n          <Empty\n            description={\n              <FormattedMessage\n                defaultMessage=\"No traces found with the current filter query. <button>Reset filters</button> to see all traces.\"\n                description=\"Experiment page > traces table > no traces recorded\"\n                values={{\n                  button: (chunks: any) => (\n                    <Typography.Link\n                      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewtable.tsx_289\"\n                      onClick={onResetFilters}\n                    >\n                      {chunks}\n                    </Typography.Link>\n                  ),\n                }}\n              />\n            }\n            title={\n              <FormattedMessage\n                defaultMessage=\"No traces found\"\n                description=\"Experiment page > traces table > no traces recorded\"\n              />\n            }\n          />\n        );\n      }\n      return null;\n    };\n\n    // to improve performance, we pass the column sizes as inline styles to the table\n    const columnSizeInfo = table.getState().columnSizingInfo;\n    const columnSizeVars = React.useMemo(() => {\n      if (showQuickStart) {\n        return {};\n      }\n      const headers = table.getFlatHeaders();\n      const colSizes: { [key: string]: number } = {};\n      headers.forEach((header) => {\n        colSizes[getHeaderSizeClassName(header.id)] = header.getSize();\n        colSizes[getColumnSizeClassName(header.column.id)] = header.column.getSize();\n      });\n      return colSizes;\n      // we need to recompute this whenever columns get resized or changed\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [columnSizeInfo, columns, table, showQuickStart]);\n\n    if (showQuickStart) {\n      return <TracesViewTableNoTracesQuickstart baseComponentId={baseComponentId} runUuid={runUuid} />;\n    }\n\n    return (\n      <Table\n        scrollable\n        empty={getEmptyState()}\n        style={columnSizeVars}\n        pagination={\n          <CursorPagination\n            componentId={`${baseComponentId}.traces_table.pagination`}\n            hasNextPage={hasNextPage}\n            hasPreviousPage={hasPreviousPage}\n            onNextPage={onNextPage}\n            onPreviousPage={onPreviousPage}\n          />\n        }\n      >\n        <TableRow isHeader>\n          {table.getLeafHeaders().map((header) => {\n            return (\n              <TableHeader\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewtable.tsx_365\"\n                key={header.id}\n                css={(header.column.columnDef as TracesColumnDef).meta?.styles}\n                sortable={header.column.getCanSort()}\n                sortDirection={header.column.getIsSorted() || 'none'}\n                onToggleSort={header.column.getToggleSortingHandler()}\n                header={header}\n                column={header.column}\n                setColumnSizing={table.setColumnSizing}\n                isResizing={header.column.getIsResizing()}\n                style={{\n                  flex: `calc(var(${getHeaderSizeClassName(header.id)}) / 100)`,\n                }}\n              >\n                {flexRender(header.column.columnDef.header, header.getContext())}\n              </TableHeader>\n            );\n          })}\n          <TableRowAction>\n            <DropdownMenu.Root>\n              <DropdownMenu.Trigger asChild>\n                <Button\n                  componentId={`${baseComponentId}.traces_table.column_selector_dropdown`}\n                  icon={<ColumnsIcon />}\n                  size=\"small\"\n                  aria-label={intl.formatMessage({\n                    defaultMessage: 'Select columns',\n                    description: 'Experiment page > traces table > column selector dropdown aria label',\n                  })}\n                />\n              </DropdownMenu.Trigger>\n              <DropdownMenu.Content align=\"end\">\n                {allColumnsList.map(({ key, label }) => (\n                  <DropdownMenu.CheckboxItem\n                    key={key}\n                    componentId={`${baseComponentId}.traces_table.column_toggle_button`}\n                    checked={!hiddenColumns.includes(key)}\n                    onClick={() => toggleHiddenColumn(key)}\n                  >\n                    <DropdownMenu.ItemIndicator />\n                    {label}\n                  </DropdownMenu.CheckboxItem>\n                ))}\n              </DropdownMenu.Content>\n            </DropdownMenu.Root>\n          </TableRowAction>\n        </TableRow>\n        {loading && <TableSkeletonRows table={table} />}\n        {!loading &&\n          !error &&\n          table\n            .getRowModel()\n            .rows.map((row) => (\n              <TracesViewTableRow key={row.id} row={row} columns={columns} selected={rowSelection[row.id]} />\n            ))}\n      </Table>\n    );\n  },\n);\n","import { type ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\nimport { useCallback, useEffect, useState } from 'react';\nimport { MlflowService } from '../../../sdk/MlflowService';\n\n/**\n * Fetches single trace info object for a given trace request ID.\n */\nexport const useExperimentTraceInfo = (requestId: string, enabled = true) => {\n  const [traceInfo, setTraceInfoData] = useState<ModelTraceInfo | undefined>(undefined);\n  const [loading, setLoading] = useState<boolean>(enabled);\n  const [error, setError] = useState<Error | undefined>(undefined);\n\n  const fetchTraceInfo = useCallback(async () => {\n    if (!enabled) {\n      return;\n    }\n    setError(undefined);\n\n    try {\n      const response = await MlflowService.getExperimentTraceInfo(requestId);\n\n      if (!response.trace_info) {\n        setTraceInfoData(undefined);\n        return;\n      }\n\n      setTraceInfoData(response.trace_info);\n    } catch (e: any) {\n      setError(e);\n    } finally {\n      setLoading(false);\n    }\n  }, [enabled, requestId]);\n\n  useEffect(() => {\n    fetchTraceInfo();\n  }, [fetchTraceInfo]);\n\n  return {\n    traceInfo,\n    loading,\n    error,\n  };\n};\n","import {\n  DangerIcon,\n  Drawer,\n  Empty,\n  Spacer,\n  TableSkeleton,\n  TitleSkeleton,\n  Typography,\n  WarningIcon,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { getTraceDisplayName } from './TracesView.utils';\nimport { useExperimentTraceData } from './hooks/useExperimentTraceData';\nimport { ModelTraceInfo, ModelTraceExplorer } from '@databricks/web-shared/model-trace-explorer';\nimport { useMemo } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useExperimentTraceInfo } from './hooks/useExperimentTraceInfo';\n\nexport const TraceDataDrawer = ({\n  requestId,\n  traceInfo,\n  loadingTraceInfo,\n  onClose,\n  selectedSpanId,\n  onSelectSpan,\n}: {\n  requestId: string;\n  traceInfo?: ModelTraceInfo;\n  loadingTraceInfo?: boolean;\n  onClose: () => void;\n  selectedSpanId?: string;\n  onSelectSpan?: (selectedSpanId?: string) => void;\n}) => {\n  const {\n    traceData,\n    loading: loadingTraceData,\n    error,\n  } = useExperimentTraceData(\n    requestId,\n    // skip fetching trace data if trace is in progress\n    traceInfo?.status === 'IN_PROGRESS',\n  );\n  const { theme } = useDesignSystemTheme();\n\n  // Usually, we rely on the parent component to provide trace info object (when clicked in a table row).\n  // But in some cases it's not available (e.g. when deep linking to a trace when the entity is not on the same page)\n  // and then we fetch it independently here.\n  const shouldFetchTraceInfo = !loadingTraceInfo && !traceInfo;\n\n  const { traceInfo: internalTraceInfo, loading: loadingInternalTracingInfo } = useExperimentTraceInfo(\n    requestId,\n    shouldFetchTraceInfo,\n  );\n\n  const traceInfoToUse = traceInfo || internalTraceInfo;\n\n  const title = useMemo(() => {\n    if (loadingTraceInfo || loadingInternalTracingInfo) {\n      return <TitleSkeleton />;\n    }\n    if (traceInfoToUse) {\n      return (\n        <Typography.Title level={2} withoutMargins>\n          {getTraceDisplayName(traceInfoToUse as ModelTraceInfo)}\n        </Typography.Title>\n      );\n    }\n    return requestId;\n  }, [\n    // Memo dependency list\n    loadingTraceInfo,\n    loadingInternalTracingInfo,\n    traceInfoToUse,\n    requestId,\n  ]);\n\n  // Construct the model trace object with the trace info and trace data\n  const combinedModelTrace = useMemo(\n    () =>\n      traceData\n        ? {\n            info: traceInfoToUse || {},\n            data: traceData,\n          }\n        : undefined,\n    [traceData, traceInfoToUse],\n  );\n\n  const containsSpans = (traceData?.spans || []).length > 0;\n\n  const renderContent = () => {\n    if (loadingTraceData || loadingTraceInfo || loadingInternalTracingInfo) {\n      return <ModelTraceExplorer.Skeleton />;\n    }\n    if (traceInfo?.status === 'IN_PROGRESS') {\n      return (\n        <>\n          <Spacer size=\"lg\" />\n          <Empty\n            image={<WarningIcon />}\n            description={\n              <FormattedMessage\n                defaultMessage=\"Trace data is not available for in-progress traces. Please wait for the trace to complete.\"\n                description=\"Experiment page > traces data drawer > in-progress description\"\n              />\n            }\n            title={\n              <FormattedMessage\n                defaultMessage=\"Trace data not available\"\n                description=\"Experiment page > traces data drawer > in-progress title\"\n              />\n            }\n          />\n        </>\n      );\n    }\n    if (error) {\n      return (\n        <>\n          <Spacer size=\"lg\" />\n          <Empty\n            image={<DangerIcon />}\n            description={\n              <FormattedMessage\n                defaultMessage=\"An error occurred while attempting to fetch the trace data. Please wait a moment and try again.\"\n                description=\"Experiment page > traces data drawer > error state description\"\n              />\n            }\n            title={\n              <FormattedMessage\n                defaultMessage=\"Error\"\n                description=\"Experiment page > traces data drawer > error state title\"\n              />\n            }\n          />\n        </>\n      );\n    }\n    if (!containsSpans) {\n      return (\n        <>\n          <Spacer size=\"lg\" />\n          <Empty\n            description={null}\n            title={\n              <FormattedMessage\n                defaultMessage=\"No trace data recorded\"\n                description=\"Experiment page > traces data drawer > no trace data recorded empty state\"\n              />\n            }\n          />\n        </>\n      );\n    }\n    if (combinedModelTrace) {\n      return (\n        <div\n          css={{\n            height: '100%',\n            marginLeft: -theme.spacing.lg,\n            marginRight: -theme.spacing.lg,\n            marginBottom: -theme.spacing.lg,\n          }}\n          // This is required for mousewheel scrolling within `Drawer`\n          onWheel={(e) => e.stopPropagation()}\n        >\n          <ModelTraceExplorer\n            modelTrace={combinedModelTrace}\n            selectedSpanId={selectedSpanId}\n            onSelectSpan={onSelectSpan}\n          />\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <Drawer.Root\n      modal\n      open\n      onOpenChange={(open) => {\n        if (!open) {\n          onClose();\n        }\n      }}\n    >\n      <Drawer.Content\n        componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracedatadrawer.tsx_222\"\n        width=\"90vw\"\n        title={title}\n        expandContentToFullHeight\n      >\n        {renderContent()}\n      </Drawer.Content>\n    </Drawer.Root>\n  );\n};\n","import { useCallback, useEffect, useState } from 'react';\nimport { MlflowService } from '../../../sdk/MlflowService';\nimport { ModelTraceStatus, type ModelTraceData } from '@databricks/web-shared/model-trace-explorer';\nimport Utils from '../../../../common/utils/Utils';\n\nexport const useExperimentTraceData = (traceId?: string, skip = false) => {\n  const [traceData, setTraceData] = useState<ModelTraceData | undefined>(undefined);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [error, setError] = useState<Error | undefined>(undefined);\n\n  const fetchTraceData = useCallback(async (traceId: string) => {\n    setLoading(true);\n    try {\n      const response = await MlflowService.getExperimentTraceData(traceId);\n\n      if (Array.isArray(response.spans)) {\n        setTraceData(response);\n      } else {\n        // Not a showstopper, but we should log this error and notify the user.\n        Utils.logErrorAndNotifyUser('Invalid trace data response: ' + JSON.stringify(response?.toString()));\n      }\n    } catch (e: any) {\n      setError(e);\n    }\n    setLoading(false);\n  }, []);\n\n  useEffect(() => {\n    if (traceId && !skip) {\n      fetchTraceData(traceId);\n    }\n  }, [fetchTraceData, traceId, skip]);\n\n  return { traceData, loading, error };\n};\n","import Utils from '@mlflow/mlflow/src/common/utils/Utils';\nimport { keys, pickBy } from 'lodash';\nimport React, { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { MlflowService } from '../../sdk/MlflowService';\nimport { Modal, Typography } from '@databricks/design-system';\n\nexport const TracesViewDeleteTraceModal = ({\n  experimentIds,\n  visible,\n  rowSelection,\n  setRowSelection,\n  handleClose,\n  refreshTraces,\n}: {\n  experimentIds: string[];\n  visible: boolean;\n  rowSelection: { [id: string]: boolean };\n  setRowSelection: (rowSelection: { [id: string]: boolean }) => void;\n  handleClose: () => void;\n  refreshTraces: () => void;\n}) => {\n  const intl = useIntl();\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const [isLoading, setIsLoading] = useState(false);\n  const tracesToDelete = keys(pickBy(rowSelection, (value) => value));\n\n  const submitDeleteTraces = async () => {\n    try {\n      // TODO: Add support for deleting traces from multiple experiments\n      // The trace data contains the experiment ID, so we simply need to\n      // pass the trace data instead of just the trace IDs.\n      await MlflowService.deleteTraces(experimentIds[0] ?? '', tracesToDelete);\n\n      // reset row selection and refresh traces\n      setRowSelection({});\n      refreshTraces();\n      handleClose();\n    } catch (e: any) {\n      setErrorMessage(\n        intl.formatMessage({\n          defaultMessage: 'An error occured while attempting to delete traces. Please refresh the page and try again.',\n          description: 'Experiment page > traces view controls > Delete traces modal > Error message',\n        }),\n      );\n    }\n    setIsLoading(false);\n  };\n\n  const handleOk = () => {\n    submitDeleteTraces();\n    setIsLoading(true);\n  };\n\n  return (\n    <Modal\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewdeletetracemodal.tsx_62\"\n      title={\n        <FormattedMessage\n          defaultMessage=\"{count, plural, one {Delete Trace} other {Delete Traces}}\"\n          description=\"Experiment page > traces view controls > Delete traces modal > Title\"\n          values={{ count: tracesToDelete.length }}\n        />\n      }\n      visible={visible}\n      onCancel={handleClose}\n      okText={\n        <FormattedMessage\n          defaultMessage=\"Delete {count, plural, one { # trace } other { # traces }}\"\n          description=\"Experiment page > traces view controls > Delete traces modal > Delete button\"\n          values={{ count: tracesToDelete.length }}\n        />\n      }\n      onOk={handleOk}\n      okButtonProps={{ loading: isLoading, danger: true }}\n    >\n      {errorMessage && <Typography.Paragraph color=\"error\">{errorMessage}</Typography.Paragraph>}\n      <Typography.Paragraph>\n        <Typography.Text bold>\n          <FormattedMessage\n            defaultMessage=\"{count, plural, one { # trace } other { # traces }} will be deleted.\"\n            description=\"Experiment page > traces view controls > Delete traces modal > Confirmation message title\"\n            values={{\n              count: tracesToDelete.length,\n            }}\n          />\n        </Typography.Text>\n      </Typography.Paragraph>\n      <Typography.Paragraph>\n        <FormattedMessage\n          defaultMessage=\"Deleted traces cannot be restored. Are you sure you want to proceed?\"\n          description=\"Experiment page > traces view controls > Delete traces modal > Confirmation message\"\n        />\n      </Typography.Paragraph>\n    </Modal>\n  );\n};\n","import { Button, useDesignSystemTheme } from '@databricks/design-system';\nimport React, { useCallback, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { TracesViewDeleteTraceModal } from './TracesViewDeleteTraceModal';\n\nexport const TracesViewControlsActions = ({\n  experimentIds,\n  rowSelection,\n  setRowSelection,\n  refreshTraces,\n  baseComponentId,\n}: {\n  experimentIds: string[];\n  rowSelection: { [id: string]: boolean };\n  setRowSelection: (rowSelection: { [id: string]: boolean }) => void;\n  refreshTraces: () => void;\n  baseComponentId: string;\n}) => {\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const { theme } = useDesignSystemTheme();\n\n  const openModal = useCallback(() => {\n    setIsModalOpen(true);\n  }, [setIsModalOpen]);\n\n  const closeModal = useCallback(() => {\n    setIsModalOpen(false);\n  }, [setIsModalOpen]);\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexDirection: 'row',\n        alignItems: 'center',\n        gap: theme.spacing.sm,\n      }}\n    >\n      <Button componentId={`${baseComponentId}.traces_table.delete_traces`} onClick={openModal} danger>\n        <FormattedMessage\n          defaultMessage=\"Delete\"\n          description=\"Experiment page > traces view controls > Delete button\"\n        />\n      </Button>\n      <TracesViewDeleteTraceModal\n        experimentIds={experimentIds}\n        visible={isModalOpen}\n        rowSelection={rowSelection}\n        handleClose={closeModal}\n        refreshTraces={refreshTraces}\n        setRowSelection={setRowSelection}\n      />\n    </div>\n  );\n};\n","import {\n  Button,\n  InfoSmallIcon,\n  Input,\n  Popover,\n  SearchIcon,\n  TableFilterLayout,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { TracesViewControlsActions } from './TracesViewControlsActions';\nimport { ModelTraceInfoWithRunName } from './hooks/useExperimentTraces';\n\nconst InputTooltip = ({ baseComponentId }: { baseComponentId: string }) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <Popover.Root\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_traces_tracesviewcontrols.tsx_28\"\n      modal={false}\n    >\n      <Popover.Trigger asChild>\n        <Button\n          size=\"small\"\n          type=\"link\"\n          icon={\n            <InfoSmallIcon\n              css={{\n                svg: { width: 16, height: 16, color: theme.colors.textSecondary },\n              }}\n            />\n          }\n          componentId={`${baseComponentId}.traces_table.filter_tooltip`}\n        />\n      </Popover.Trigger>\n      <Popover.Content>\n        <Popover.Arrow />\n        <Typography.Paragraph>\n          <FormattedMessage\n            defaultMessage=\"Search traces using a simplified version of the SQL {whereBold} clause.\"\n            description=\"Tooltip string to explain how to search runs from the experiments table\"\n            values={{ whereBold: <b>WHERE</b> }}\n          />\n        </Typography.Paragraph>\n        <FormattedMessage defaultMessage=\"Examples:\" description=\"Text header for examples of mlflow search syntax\" />\n        <ul>\n          <li>\n            <code>tags.some_tag = \"abc\"</code>\n          </li>\n        </ul>\n      </Popover.Content>\n    </Popover.Root>\n  );\n};\n\nexport const TracesViewControls = ({\n  experimentIds,\n  filter,\n  onChangeFilter,\n  rowSelection,\n  setRowSelection,\n  refreshTraces,\n  baseComponentId,\n  runUuid,\n  traces,\n}: {\n  experimentIds: string[];\n  filter: string;\n  onChangeFilter: (newFilter: string) => void;\n  rowSelection: { [id: string]: boolean };\n  setRowSelection: (newSelection: { [id: string]: boolean }) => void;\n  refreshTraces: () => void;\n  baseComponentId: string;\n  runUuid?: string;\n  traces: ModelTraceInfoWithRunName[];\n}) => {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  // Internal filter value state, used to control the input value\n  const [filterValue, setFilterValue] = useState<string | undefined>(filter || undefined);\n  const [isEvaluateTracesModalOpen, setEvaluateTracesModalOpen] = useState(false);\n\n  const displayedFilterValue = filterValue ?? filter;\n\n  const selectedRequestIds = Object.entries(rowSelection)\n    .filter(([, isSelected]) => isSelected)\n    .map(([id]) => id);\n  const showActionButtons = selectedRequestIds.length > 0;\n\n  const searchOrDeleteControls = showActionButtons ? (\n    <TracesViewControlsActions\n      experimentIds={experimentIds}\n      rowSelection={rowSelection}\n      setRowSelection={setRowSelection}\n      refreshTraces={refreshTraces}\n      baseComponentId={baseComponentId}\n    />\n  ) : (\n    <TableFilterLayout css={{ marginBottom: 0 }}>\n      <Input\n        componentId={`${baseComponentId}.traces_table.search_filter`}\n        placeholder={intl.formatMessage({\n          defaultMessage: 'Search traces',\n          description: 'Experiment page > traces view filters > filter string input placeholder',\n        })}\n        value={displayedFilterValue}\n        // Matches runs filter input width\n        css={{ width: 430 }}\n        onChange={(e) => setFilterValue(e.target.value)}\n        prefix={<SearchIcon />}\n        suffix={<InputTooltip baseComponentId={baseComponentId} />}\n        allowClear\n        onClear={() => {\n          onChangeFilter('');\n          setFilterValue(undefined);\n        }}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            onChangeFilter(displayedFilterValue);\n            setFilterValue(undefined);\n          }\n        }}\n      />\n    </TableFilterLayout>\n  );\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.xs }}>\n      {/* Search and delete controls */}\n      {searchOrDeleteControls}\n    </div>\n  );\n};\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport LocalStorageUtils from '../../../../common/utils/LocalStorageUtils';\nimport { isObject, sortBy } from 'lodash';\nimport { ExperimentViewTracesTableColumns } from '../TracesView.utils';\n\ntype LocalStorageStore = ReturnType<typeof LocalStorageUtils.getStoreForComponent>;\n\nexport interface ExperimentViewTracesUIState {\n  hiddenColumns?: string[];\n}\n\nconst defaultExperimentViewTracesUIState: ExperimentViewTracesUIState = {\n  hiddenColumns: [ExperimentViewTracesTableColumns.traceName, ExperimentViewTracesTableColumns.source],\n};\n\nconst loadExperimentViewTracesUIState = (localStore: LocalStorageStore): ExperimentViewTracesUIState => {\n  try {\n    const uiStateRaw = localStore.getItem('uiState');\n    const uiState = JSON.parse(uiStateRaw);\n    if (!isObject(uiState)) {\n      return defaultExperimentViewTracesUIState;\n    }\n    return uiState;\n  } catch (e) {\n    return defaultExperimentViewTracesUIState;\n  }\n};\n\nexport const useExperimentViewTracesUIState = (experimentIds: string[]) => {\n  const localStore = useMemo(() => {\n    const persistenceIdentifier = JSON.stringify(experimentIds.slice().sort());\n    return LocalStorageUtils.getStoreForComponent('ExperimentViewTraces', persistenceIdentifier);\n  }, [experimentIds]);\n\n  const [uiState, setUIState] = useState<ExperimentViewTracesUIState>(() =>\n    loadExperimentViewTracesUIState(localStore),\n  );\n\n  const toggleHiddenColumn = useCallback((columnId: string) => {\n    setUIState((prevUIState) => {\n      const hiddenColumns = prevUIState.hiddenColumns || [];\n      return {\n        hiddenColumns: hiddenColumns.includes(columnId)\n          ? hiddenColumns.filter((id) => id !== columnId)\n          : [...hiddenColumns, columnId],\n      };\n    });\n  }, []);\n\n  useEffect(() => {\n    localStore.setItem('uiState', JSON.stringify(uiState));\n  }, [localStore, uiState]);\n\n  return { uiState, toggleHiddenColumn };\n};\n","import { useCallback } from 'react';\nimport { useSearchParams } from '../../../../common/utils/RoutingUtils';\n\nconst QUERY_PARAM_KEY = 'selectedTraceId';\n\n/**\n * Query param-powered hook that returns the currently selected trace ID and a function to set the selected trace ID.\n * To be used in traces page components.\n */\nexport const useActiveExperimentTrace = () => {\n  // TODO(ML-40722): Create separate UI route for traces page and use route params instead of search params\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const selectedTraceId = searchParams.get(QUERY_PARAM_KEY) ?? undefined;\n\n  const setSelectedTraceId = useCallback(\n    (selectedTraceId: string | undefined) => {\n      setSearchParams((params) => {\n        if (selectedTraceId === undefined) {\n          params.delete(QUERY_PARAM_KEY);\n          return params;\n        }\n        params.set(QUERY_PARAM_KEY, selectedTraceId);\n        return params;\n      });\n    },\n    [setSearchParams],\n  );\n\n  return [selectedTraceId, setSelectedTraceId] as const;\n};\n","import { useCallback } from 'react';\nimport { useSearchParams } from '../../../../common/utils/RoutingUtils';\n\nconst QUERY_PARAM_KEY = 'selectedSpanId';\n\n/**\n * Query param-powered hook that returns the currently selected span ID and a function to set the selected span ID.\n * To be used in traces page components.\n */\nexport const useActiveExperimentSpan = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const selectedSpanId = searchParams.get(QUERY_PARAM_KEY) ?? undefined;\n\n  const setSelectedSpanId = useCallback(\n    (selectedSpanId: string | undefined) => {\n      setSearchParams(\n        (params) => {\n          if (selectedSpanId === undefined) {\n            params.delete(QUERY_PARAM_KEY);\n            return params;\n          }\n          params.set(QUERY_PARAM_KEY, selectedSpanId);\n          return params;\n        },\n        { replace: true },\n      );\n    },\n    [setSearchParams],\n  );\n\n  return [selectedSpanId, setSelectedSpanId] as const;\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\n\nimport { useExperimentTraces } from './hooks/useExperimentTraces';\nimport { TracesViewTable } from './TracesViewTable';\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { TraceDataDrawer } from './TraceDataDrawer';\nimport { useEditExperimentTraceTags } from './hooks/useEditExperimentTraceTags';\nimport { TracesViewControls } from './TracesViewControls';\nimport { SortingState } from '@tanstack/react-table';\nimport { compact, isFunction, isNil, uniq } from 'lodash';\nimport { useExperimentViewTracesUIState } from './hooks/useExperimentViewTracesUIState';\nimport { ExperimentViewTracesTableColumns, getTraceInfoTotalTokens } from './TracesView.utils';\nimport { useActiveExperimentTrace } from './hooks/useActiveExperimentTrace';\nimport { useActiveExperimentSpan } from './hooks/useActiveExperimentSpan';\nimport { ModelTraceInfo } from '@databricks/web-shared/model-trace-explorer';\n\nexport const TRACE_AUTO_REFRESH_INTERVAL = 30000;\n\nconst defaultSorting: SortingState = [{ id: ExperimentViewTracesTableColumns.timestampMs, desc: true }];\n\nexport const TracesView = ({\n  experimentIds,\n  runUuid,\n  loggedModelId,\n  disabledColumns,\n  baseComponentId = runUuid ? 'mlflow.run.traces' : 'mlflow.experiment_page.traces',\n}: {\n  experimentIds: string[];\n  /**\n   * If `runUuid` is provided, the traces will be filtered to only show traces from that run.\n   */\n  runUuid?: string;\n  /**\n   * If `loggedModelId` is provided, the traces will be filtered to only show traces from that logged model.\n   */\n  loggedModelId?: string;\n  /**\n   * Columns that should be disabled in the table.\n   * Disabled columns are hidden and are not available to be toggled at all.\n   */\n  disabledColumns?: ExperimentViewTracesTableColumns[];\n  /**\n   * The base component ID for the traces view. If not provided, will be inferred from the other props.\n   */\n  baseComponentId?: string;\n}) => {\n  const timeoutRef = useRef<number | undefined>(undefined);\n  const [filter, setFilter] = useState<string>('');\n  const [sorting, setSorting] = useState<SortingState>(defaultSorting);\n  const [rowSelection, setRowSelection] = useState<{ [id: string]: boolean }>({});\n\n  const [selectedTraceId, setSelectedTraceId] = useActiveExperimentTrace();\n  const [selectedSpanId, setSelectedSpanId] = useActiveExperimentSpan();\n\n  const { traces, loading, error, hasNextPage, hasPreviousPage, fetchNextPage, fetchPrevPage, refreshCurrentPage } =\n    useExperimentTraces({\n      experimentIds,\n      sorting,\n      filter,\n      runUuid,\n      loggedModelId,\n    });\n\n  const onTraceClicked = useCallback(\n    ({ request_id }: ModelTraceInfo) => setSelectedTraceId(request_id),\n    [setSelectedTraceId],\n  );\n\n  // clear row selections when the page changes.\n  // the backend specifies a max of 100 deletions,\n  // plus it's confusing to have selections on a\n  // page that the user can't see\n  const onNextPage = useCallback(() => {\n    fetchNextPage();\n    setRowSelection({});\n  }, [fetchNextPage]);\n\n  const onPreviousPage = useCallback(() => {\n    fetchPrevPage();\n    setRowSelection({});\n  }, [fetchPrevPage]);\n\n  // auto-refresh traces\n  useEffect(() => {\n    // if the hook reruns, clear the current timeout, since we'll be scheduling another\n    window.clearTimeout(timeoutRef.current);\n\n    const scheduleRefresh = async () => {\n      // only refresh if the user is on the first page\n      // otherwise it might mess with browsing old traces\n      if (loading || hasPreviousPage) return;\n\n      await refreshCurrentPage(true);\n\n      window.clearTimeout(timeoutRef.current);\n      timeoutRef.current = window.setTimeout(scheduleRefresh, TRACE_AUTO_REFRESH_INTERVAL);\n    };\n\n    timeoutRef.current = window.setTimeout(scheduleRefresh, TRACE_AUTO_REFRESH_INTERVAL);\n    return () => window.clearTimeout(timeoutRef.current);\n  }, [refreshCurrentPage, loading, hasPreviousPage]);\n\n  const { theme } = useDesignSystemTheme();\n\n  // Try to find the trace info for the currently selected trace id\n  const selectedTraceInfo = useMemo(() => {\n    if (!selectedTraceId) return undefined;\n    return traces.find((trace) => trace.request_id === selectedTraceId);\n  }, [selectedTraceId, traces]);\n\n  const {\n    // hiddenColumns is a list of columns that are hidden by the user.\n    uiState,\n    toggleHiddenColumn,\n  } = useExperimentViewTracesUIState(experimentIds);\n\n  const existingTagKeys = useMemo(\n    () => uniq(compact(traces.flatMap((trace) => trace.tags?.map((tag) => tag.key)))),\n    [traces],\n  );\n\n  const { showEditTagsModalForTrace, EditTagsModal } = useEditExperimentTraceTags({\n    onSuccess: () => refreshCurrentPage(true),\n    existingTagKeys,\n  });\n\n  const usingFilters = filter !== '';\n\n  const anyTraceContainsTokenCount = traces.some((trace) => !isNil(getTraceInfoTotalTokens(trace)));\n\n  // Automatically disabled columns: hide the token count column if there's no trace that contains token count information.\n  const autoDisabledColumns = useMemo(\n    () => (!anyTraceContainsTokenCount ? [ExperimentViewTracesTableColumns.totalTokens] : []),\n    [anyTraceContainsTokenCount],\n  );\n\n  // Combine columns that are disabled by parent component and columns that are disabled automatically.\n  const allDisabledColumns = useMemo(\n    () => [...(disabledColumns ?? []), ...autoDisabledColumns],\n    [disabledColumns, autoDisabledColumns],\n  );\n\n  const allHiddenColumns = useMemo(\n    () => [...(uiState.hiddenColumns ?? []), ...allDisabledColumns],\n    [uiState, allDisabledColumns],\n  );\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexDirection: 'column',\n        gap: theme.spacing.sm,\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      <TracesViewControls\n        experimentIds={experimentIds}\n        filter={filter}\n        onChangeFilter={setFilter}\n        rowSelection={rowSelection}\n        setRowSelection={setRowSelection}\n        refreshTraces={refreshCurrentPage}\n        baseComponentId={baseComponentId}\n        runUuid={runUuid}\n        traces={traces}\n      />\n      <TracesViewTable\n        experimentIds={experimentIds}\n        runUuid={runUuid}\n        traces={traces}\n        loading={loading}\n        error={error}\n        onTraceClicked={onTraceClicked}\n        onTraceTagsEdit={showEditTagsModalForTrace}\n        hasNextPage={hasNextPage}\n        hasPreviousPage={hasPreviousPage}\n        onPreviousPage={onPreviousPage}\n        onNextPage={onNextPage}\n        onTagsUpdated={refreshCurrentPage}\n        usingFilters={usingFilters}\n        onResetFilters={() => setFilter('')}\n        hiddenColumns={allHiddenColumns}\n        disableTokenColumn={!anyTraceContainsTokenCount}\n        disabledColumns={allDisabledColumns}\n        setSorting={(sortingSetter) => {\n          // If header is clicked enough times, tanstack table switches to \"no sort\" mode.\n          // In that case, we should just reverse the direction of the current sort instead.\n          if (isFunction(sortingSetter)) {\n            return setSorting((currentState) => {\n              const newState = sortingSetter(currentState);\n              const currentSortBy = currentState[0];\n              if ((!newState || newState.length === 0) && currentSortBy) {\n                return [{ id: currentSortBy.id, desc: !currentSortBy.desc }];\n              }\n              return newState;\n            });\n          }\n        }}\n        sorting={sorting}\n        rowSelection={rowSelection}\n        setRowSelection={setRowSelection}\n        baseComponentId={baseComponentId}\n        toggleHiddenColumn={toggleHiddenColumn}\n      />\n      {selectedTraceId && (\n        <TraceDataDrawer\n          traceInfo={selectedTraceInfo}\n          loadingTraceInfo={loading}\n          requestId={selectedTraceId}\n          onClose={() => setSelectedTraceId(undefined)}\n          selectedSpanId={selectedSpanId}\n          onSelectSpan={setSelectedSpanId}\n        />\n      )}\n      {EditTagsModal}\n    </div>\n  );\n};\n"],"names":["TracesViewTableNoTracesQuickstartContext","createContext","TracesViewTableNoTracesQuickstartContextProvider","children","introductionText","displayVersionWarnings","_jsx","Provider","value","useTracesViewTableNoTracesQuickstartContext","useContext","_ref","name","styles","_ref2","QUICKSTART_CONTENT","openai","minVersion","getContent","FormattedMessage","id","defaultMessage","values","code","getCodeSource","langchain","llama_index","dspy","crewai","autogen","anthropic","bedrock","litellm","gemini","custom","baseComponentId","_jsxs","_Fragment","Typography","Paragraph","css","a","text","Link","title","componentId","href","openInNewTab","TraceTableGenericQuickstart","flavorName","theme","useDesignSystemTheme","content","alertContent","installCommand","Text","Alert","_css","marginBottom","spacing","md","maxWidth","closable","message","description","type","CopyButton","zIndex","position","top","xs","right","showLabel","copyText","icon","CopyIcon","CodeSnippet","showLineNumbers","isDarkMode","style","padding","sm","marginTop","language","TracesViewTableNoTracesQuickstart","runUuid","overflow","paddingBottom","lg","Header","titleElementLevel","display","isRun","isNil","TRACE_TAG_NAME_TRACE_NAME","getTraceMetadataField","traceInfo","field","_traceInfo$request_me","_traceInfo$request_me2","request_metadata","find","key","getTraceInfoRunId","getTraceInfoTotalTokens","getTraceInfoInputs","inputs","JSON","stringify","parse","e","getTraceInfoOutputs","outputs","getTraceTagValue","tagName","_traceInfo$tags2","_traceInfo$tags","_traceInfo$tags$find","Array","isArray","tags","getTraceDisplayName","request_id","EXPERIMENT_TRACES_SORTABLE_COLUMNS","TRACE_TABLE_CHECKBOX_COLUMN_ID","ExperimentViewTracesTableColumns","ExperimentViewTracesTableColumnLabels","requestId","defineMessage","traceName","timestampMs","status","runName","totalTokens","source","latency","ExperimentViewTracesStatusLabels","UNSET","IN_PROGRESS","OK","ERROR","RUN_ID_FILTER_EXPRESSION","LOGGED_MODEL_ID_FILTER_EXPRESSION","createRunIdsFilterExpression","runUuids","map","runId","join","useExperimentTraces","experimentIds","sorting","filter","loggedModelId","traces","setTraces","useState","loading","setLoading","error","setError","undefined","orderByString","useMemo","firstOrderByColumn","first","includes","desc","filterString","pageTokens","setPageTokens","currentPage","setCurrentPage","currentPageToken","fetchTraces","useCallback","async","pageToken","silent","response","MlflowService","getExperimentTraces","runNamesForTraces","traceIdToRunIdMap","reduce","acc","trace","traceId","uniq","length","runIdsToRunNames","searchRuns","experiment_ids","run_view_type","ViewType","ALL","runs","run","info","fetchRunNamesForTraces","tracesWithRunNames","prevPages","next_page_token","hasNextPage","hasPreviousPage","useEffect","reset","fetchNextPage","prevPage","fetchPrevPage","refreshCurrentPage","TracesViewTableTagCell","onAddEditTags","visibleTagList","startsWith","MLFLOW_INTERNAL_PREFIX","containsTags","alignItems","flexWrap","columnGap","rowGap","tag","KeyValueTag","charLimit","enableFullViewModal","Button","size","PencilIcon","onClick","getIcon","ClockIcon","color","colors","textValidationWarning","CheckCircleIcon","textValidationSuccess","XCircleIcon","textValidationDanger","TracesViewTableStatusCell","row","original","intl","useIntl","labelDescriptor","gap","formatMessage","clampedLinesCss","TracesViewTablePreviewCell","previewFieldName","isExpanded","setIsExpanded","fullData","setFullData","fetchFullData","getExperimentTraceData","previewValue","requestData","isString","errorMessage","ErrorWrapper","getUserVisibleError","Utils","logErrorAndNotifyUser","valuePossiblyTruncated","expand","collapse","ChevronDownIcon","ChevronRightIcon","ExpandedParamCell","structuredJSONValue","objectData","whiteSpace","wordBreak","fontFamily","wrapLongLines","TracesViewTableRequestPreviewCell","TracesViewTableResponsePreviewCell","TracesViewTableSourceCell","SourceCellRenderer","keyBy","getHeaderSizeClassName","getColumnSizeClassName","TracesViewTableRow","React","role","minHeight","general","buttonHeight","flexDirection","backgroundColor","paddingRight","borderBottom","getAllCells","cell","_meta","_meta2","multiline","column","columnDef","meta","flex","textOverflow","flexRender","getContext","prev","next","columns","selected","isEqual","TracesViewTableTimestampCell","timestamp_ms","LegacyTooltip","Date","toLocaleString","navigator","timeZoneName","placement","timeSinceStr","TracesViewTableHeaderCheckbox","table","isChecked","getIsAllRowsSelected","getIsSomeRowsSelected","Checkbox","wrapperStyle","margin","onChange","toggleAllRowsSelected","TracesViewTableCellCheckbox","disabled","getCanSelect","getIsSelected","toggleSelected","RequestIdCell","options","onTraceClicked","ellipsis","TraceNameCell","_ref3","RunNameCell","experiment_id","label","to","Routes","getRunPageRoute","TraceTagsCell","onTraceTagsEdit","_ref4","_ref5","_ref6","TracesViewTable","onNextPage","onPreviousPage","usingFilters","onResetFilters","setSorting","rowSelection","setRowSelection","hiddenColumns","disableTokenColumn","toggleHiddenColumn","disabledColumns","showQuickStart","useStaticColumnsCells","isUnstableNestedComponentsMigrated","allColumnsList","entries","header","enableResizing","enableSorting","minWidth","accessorFn","data","push","execution_time_ms","isFinite","formatDuration","useReactTable","state","getCoreRowModel","getRowId","index","toString","getSortedRowModel","onSortingChange","onRowSelectionChange","enableColumnResizing","enableRowSelection","columnResizeMode","columnSizeInfo","getState","columnSizingInfo","columnSizeVars","headers","getFlatHeaders","colSizes","forEach","getSize","Table","scrollable","empty","getEmptyState","getMessageField","Empty","image","DangerIcon","button","chunks","pagination","CursorPagination","TableRow","isHeader","getLeafHeaders","TableHeader","sortable","getCanSort","sortDirection","getIsSorted","onToggleSort","getToggleSortingHandler","setColumnSizing","isResizing","getIsResizing","TableRowAction","DropdownMenu","Root","Trigger","asChild","ColumnsIcon","Content","align","CheckboxItem","checked","ItemIndicator","TableSkeletonRows","getRowModel","rows","TraceDataDrawer","loadingTraceInfo","onClose","selectedSpanId","onSelectSpan","traceData","loadingTraceData","useExperimentTraceData","skip","setTraceData","fetchTraceData","spans","shouldFetchTraceInfo","internalTraceInfo","loadingInternalTracingInfo","useExperimentTraceInfo","enabled","setTraceInfoData","fetchTraceInfo","getExperimentTraceInfo","trace_info","traceInfoToUse","TitleSkeleton","Title","level","withoutMargins","combinedModelTrace","containsSpans","Drawer","modal","open","onOpenChange","width","expandContentToFullHeight","ModelTraceExplorer","Skeleton","Spacer","WarningIcon","height","marginLeft","marginRight","onWheel","stopPropagation","modelTrace","TracesViewDeleteTraceModal","visible","handleClose","refreshTraces","setErrorMessage","isLoading","setIsLoading","tracesToDelete","keys","pickBy","Modal","count","onCancel","okText","onOk","handleOk","_experimentIds$","deleteTraces","submitDeleteTraces","okButtonProps","danger","bold","TracesViewControlsActions","isModalOpen","setIsModalOpen","openModal","closeModal","InputTooltip","Popover","InfoSmallIcon","svg","textSecondary","Arrow","whereBold","TracesViewControls","onChangeFilter","filterValue","setFilterValue","isEvaluateTracesModalOpen","setEvaluateTracesModalOpen","displayedFilterValue","searchOrDeleteControls","Object","isSelected","TableFilterLayout","Input","placeholder","target","prefix","SearchIcon","suffix","allowClear","onClear","onKeyDown","defaultExperimentViewTracesUIState","useExperimentViewTracesUIState","localStore","persistenceIdentifier","slice","sort","LocalStorageUtils","getStoreForComponent","uiState","setUIState","uiStateRaw","getItem","isObject","loadExperimentViewTracesUIState","columnId","prevUIState","setItem","QUERY_PARAM_KEY","defaultSorting","TracesView","timeoutRef","useRef","setFilter","selectedTraceId","setSelectedTraceId","useActiveExperimentTrace","_searchParams$get","searchParams","setSearchParams","useSearchParams","get","params","delete","set","setSelectedSpanId","useActiveExperimentSpan","replace","window","clearTimeout","current","scheduleRefresh","setTimeout","selectedTraceInfo","existingTagKeys","compact","flatMap","_trace$tags","showEditTagsModalForTrace","EditTagsModal","useEditExperimentTraceTags","onSuccess","anyTraceContainsTokenCount","some","autoDisabledColumns","allDisabledColumns","allHiddenColumns","_uiState$hiddenColumn","onTagsUpdated","sortingSetter","isFunction","currentState","newState","currentSortBy"],"ignoreList":[],"sourceRoot":""}