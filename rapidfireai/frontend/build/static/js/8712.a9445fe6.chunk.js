(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8712],{23106:function(){},13567:function(e,n,t){"use strict";t(27793);var r=t(50590),i=t(45532),s=t(80979),a=t(4859),o=t(23091),u=t(56340),l=t(77660),c=t(93411),h=t(19322),d=t(25503),f=t(4070),m=t(67986),g=function(e){var n=[],t=1e3,r=function(){},i=function(){},s=function e(n){n&&e.data(n),r(),i(),e.render()};return s.render=function(){var i=!0;r=s.invalidate=function(){i=!1},function r(){if(!i)return!0;n.splice(0,t).map(e),requestAnimationFrame(r)}()},s.data=function(e){return r(),n=e.slice(0),s},s.add=function(e){n=n.concat(e)},s.rate=function(e){return arguments.length?(t=e,s):t},s.remaining=function(){return n.length},s.clear=function(e){return arguments.length?(i=e,s):(i(),s)},s.invalidate=r,s},v=function(e){return e.width-e.margin.right-e.margin.left},p=function(e,n){return null===n?[]:"undefined"===typeof n.invert?function(e,n){if(0===e.length)return[];var t=n.domain(),r=n.range(),i=[];return r.forEach((function(n,r){n>=e[0]&&n<=e[1]&&i.push(t[r])})),i}(e,n):e.map((function(e){return n.invert(e)}))},y=function(e,n,t){return function(i){var s=e.brushes,a=e.brushNodes;if("undefined"===typeof i)return Object.keys(n.dimensions).reduce((function(e,t){var r=s[t];if(void 0!==r&&null!==(0,o.ZR)(a[t])){var i=(0,o.ZR)(a[t]),u=n.dimensions[t].yscale,l=p(i,u);e[t]={extent:r.extent(),selection:{raw:i,scaled:l}}}return e}),{});var u={};return t.g().selectAll(".brush").each((function(e){u[e]=(0,r.A)(this)})),Object.keys(n.dimensions).forEach((function(e){if(void 0!==i[e]){var t=s[e];if(void 0!==t){var r=n.dimensions[e],a=i[e].map(r.yscale);u[e].call(t).call(t.move,a.reverse())}}})),t.renderBrushed(),t}},b=function(e,n,t){return function(){var r=e.brushNodes,i=Object.keys(n.dimensions).filter((function(e){return r[e]&&null!==(0,o.ZR)(r[e])})),s=i.map((function(e){var t=(0,o.ZR)(r[e]);return"function"===typeof n.dimensions[e].yscale.invert?[n.dimensions[e].yscale.invert(t[1]),n.dimensions[e].yscale.invert(t[0])]:t}));if(0===i.length)return n.data;var a={date:function(e,t,r){return"function"===typeof n.dimensions[t].yscale.bandwidth?s[r][0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=s[r][1]:s[r][0]<=e[t]&&e[t]<=s[r][1]},number:function(e,t,r){return"function"===typeof n.dimensions[t].yscale.bandwidth?s[r][0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=s[r][1]:s[r][0]<=e[t]&&e[t]<=s[r][1]},string:function(e,t,r){return s[r][0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=s[r][1]}};return n.data.filter((function(e){switch(t.predicate){case"AND":return i.every((function(t,r){return a[n.dimensions[t].type](e,t,r)}));case"OR":return i.some((function(t,r){return a[n.dimensions[t].type](e,t,r)}));default:throw new Error("Unknown brush predicate "+n.brushPredicate)}}))}},x=function(e,n,t,r){return function(i){e.brushed=i,t.call("brush",n,e.brushed,r),n.renderBrushed()}},w=function(e,n,t,s,a){return function(){t.g()||t.createAxes();var u=t.g().append("svg:g").attr("class","brush").each((function(u){(0,r.A)(this).call(function(e,n,t,r,s){return function(a,u){if(!n.dimensions.hasOwnProperty(a))return function(){};var l="string"===n.dimensions[a].type?n.dimensions[a].yscale.range()[n.dimensions[a].yscale.range().length-1]:n.dimensions[a].yscale.range()[0],c=(0,o.g2)(u).extent([[-15,0],[15,l]]),h=function(e){var t=Array.prototype.slice.call(e),r=t[0],i=(0,o.ZR)(t[2][0])||[],s=null;n.dimensions.hasOwnProperty(r)&&(s=n.dimensions[r].yscale);var a=p(i,s);return{axis:t[0],node:t[2][0],selection:{raw:i,scaled:a}}};return c.on("start",(function(){null!==i.f0.sourceEvent&&(r.call("brushstart",t,n.brushed,h(arguments)),"function"===typeof i.f0.sourceEvent.stopPropagation&&i.f0.sourceEvent.stopPropagation())})).on("brush",(function(){x(n,t,r,h(arguments))(b(e,n,s)())})).on("end",(function(){x(n,t,r)(b(e,n,s)()),r.call("brushend",t,n.brushed,h(arguments))})),e.brushes[a]=c,e.brushNodes[a]=u.node(),c}}(e,n,t,s,a)(u,(0,r.A)(this)))}));return u.selectAll("rect").style("visibility",null).attr("x",-15).attr("width",30),u.selectAll("rect.background").style("fill","transparent"),u.selectAll("rect.extent").style("fill","rgba(255,255,255,0.25)").style("stroke","rgba(0,0,0,0.6)"),u.selectAll(".resize rect").style("fill","rgba(0,0,0,0.1)"),t.brushExtents=y(e,n,t),t.brushReset=function(e,n,t){return function(i){var s=e.brushes;void 0===i?(n.brushed=!1,void 0!==t.g()&&null!==t.g()&&(t.g().selectAll(".brush").each((function(e){void 0!==s[e]&&(0,r.A)(this).call(s[e].move,null)})),t.renderBrushed())):(n.brushed=!1,void 0!==t.g()&&null!==t.g()&&(t.g().selectAll(".brush").each((function(e){e===i&&((0,r.A)(this).call(s[e].move,null),"function"===typeof s[e].type&&s[e].event((0,r.A)(this)))})),t.renderBrushed()))}}(e,n,t),t}},A=function(e,n){return function(){void 0!==n.g()&&null!==n.g()&&n.g().selectAll(".brush").remove(),e.brushes={},delete n.brushExtents,delete n.brushReset}},O=function(e,n,t,i,s){var a=s.selectAll(".brush").data(e,(function(e){return e.id}));a.enter().insert("g",".brush").attr("class","brush").attr("dimension",i).attr("id",(function(e){return"brush-"+Object.keys(n.dimensions).indexOf(i)+"-"+e.id})).each((function(e){e.brush((0,r.A)(this))})),a.each((function(n){(0,r.A)(this).attr("class","brush").selectAll(".overlay").style("pointer-events",(function(){var t=n.brush;return n.id===e.length-1&&void 0!==t?"all":"none"}))})),a.exit().remove()},M=function(e,n,t,r,i){var s=e.brushes,a=Object.keys(n.dimensions).filter((function(e,n){for(var t=s[e],r=0;r<t.length;r++){var i=document.getElementById("brush-"+n+"-"+r);if(i&&null!==(0,o.ZR)(i))return!0}return!1})),u=a.map((function(e){return s[e].filter((function(e){return!t.hideAxis().includes(e)})).map((function(t,r){return(0,o.ZR)(document.getElementById("brush-"+Object.keys(n.dimensions).indexOf(e)+"-"+r))})).map((function(t,r){return null===t||void 0===t?null:"function"===typeof n.dimensions[e].yscale.invert?[n.dimensions[e].yscale.invert(t[1]),n.dimensions[e].yscale.invert(t[0])]:t}))}));if(0===a.length)return n.data;var l={date:function(e,t,r){var i=u[r];if("function"===typeof n.dimensions[t].yscale.bandwidth){var s=!0,a=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;if(null!==h&&void 0!==h&&(h[0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=h[1]))return!0}}catch(y){a=!0,o=y}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}var d=!0,f=!1,m=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(null!==p&&void 0!==p&&(p[0]<=e[t]&&e[t]<=p[1]))return!0}}catch(y){f=!0,m=y}finally{try{!d&&v.return&&v.return()}finally{if(f)throw m}}return!1},number:function(e,t,r){var i=u[r];if("function"===typeof n.dimensions[t].yscale.bandwidth){var s=!0,a=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;if(null!==h&&void 0!==h&&(h[0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=h[1]))return!0}}catch(y){a=!0,o=y}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}var d=!0,f=!1,m=void 0;try{for(var g,v=i[Symbol.iterator]();!(d=(g=v.next()).done);d=!0){var p=g.value;if(null!==p&&void 0!==p&&(p[0]<=e[t]&&e[t]<=p[1]))return!0}}catch(y){f=!0,m=y}finally{try{!d&&v.return&&v.return()}finally{if(f)throw m}}return!1},string:function(e,t,r){var i=u[r],s=!0,a=!1,o=void 0;try{for(var l,c=i[Symbol.iterator]();!(s=(l=c.next()).done);s=!0){var h=l.value;if(null!==h&&void 0!==h&&(h[0]<=n.dimensions[t].yscale(e[t])&&n.dimensions[t].yscale(e[t])<=h[1]))return!0}}catch(d){a=!0,o=d}finally{try{!s&&c.return&&c.return()}finally{if(a)throw o}}return!1}};return n.data.filter((function(e){switch(i.predicate){case"AND":return a.every((function(t,r){return l[n.dimensions[t].type](e,t,r)}));case"OR":return a.some((function(t,r){return l[n.dimensions[t].type](e,t,r)}));default:throw new Error("Unknown brush predicate "+n.brushPredicate)}}))},_=function(e,n,t){return function(r){e.brushed=r,t.call("brush",n,e.brushed),n.renderBrushed()}},R=function e(n,t,r,s,a){return function(u,l){var c=n.brushes,h=n.brushNodes,d="string"===t.dimensions[u].type?t.dimensions[u].yscale.range()[t.dimensions[u].yscale.range().length-1]:t.dimensions[u].yscale.range()[0],f=(0,o.g2)().extent([[-15,0],[15,d]]),m=c[u]?c[u].length:0,g="brush-"+Object.keys(t.dimensions).indexOf(u)+"-"+m;return c[u]?c[u].push({id:m,brush:f,node:g}):c[u]=[{id:m,brush:f,node:g}],h[u]?h[u].push({id:m,node:g}):h[u]=[{id:m,node:g}],f.on("start",(function(){null!==i.f0.sourceEvent&&(s.call("brushstart",r,t.brushed),"function"===typeof i.f0.sourceEvent.stopPropagation&&i.f0.sourceEvent.stopPropagation())})).on("brush",(function(e){_(t,r,s)(M(n,t,r,0,a))})).on("end",(function(){var h=c[u][c[u].length-1].id,d=document.getElementById("brush-"+Object.keys(t.dimensions).indexOf(u)+"-"+h),f=(0,o.ZR)(d);void 0!==f&&null!==f&&f[0]!==f[1]?(e(n,t,r,s,a)(u,l),O(c[u],t,0,u,l),_(t,r,s)(M(n,t,r,0,a))):i.f0.sourceEvent&&"[object MouseEvent]"===i.f0.sourceEvent.toString()&&null===i.f0.selection&&r.brushReset(u),s.call("brushend",r,t.brushed)})),f}},S=function(e,n,t,i,s){return function(a){var u=e.brushes,l=t.hideAxis();return"undefined"===typeof a?Object.keys(n.dimensions).filter((function(e){return!l.includes(e)})).reduce((function(e,t,r){var i=u[t];return e[t]=void 0===i||null===i?[]:i.reduce((function(e,i,s){var a=(0,o.ZR)(document.getElementById("brush-"+r+"-"+s));if(a){var u=n.dimensions[t].yscale,l=p(a,u);e.push({extent:i.brush.extent(),selection:{raw:a,scaled:l}})}return e}),[]),e}),{}):(Object.keys(n.dimensions).forEach((function(o,l){if(void 0!==a[o]&&null!==a[o]){var c=n.dimensions[o],h=a[o].map((function(e){return e.map(c.yscale)})).map((function(a,u){var c=R(e,n,t,i,s)(o,(0,r.A)("#brush-group-"+l));return c.extent([[-15,a[1]],[15,a[0]]]),{id:u,brush:c,ext:a}}));u[o]=h,O(h,n,0,o,(0,r.A)("#brush-group-"+l)),h.forEach((function(e,n){(0,r.A)("#brush-"+l+"-"+n).call(e.brush).call(e.brush.move,e.ext.reverse())}))}})),t.renderBrushed(),t)}},E=function(e,n,t,i,s){return function(){t.g()||t.createAxes();var a=t.hideAxis();return t.g().append("svg:g").attr("id",(function(e,n){return"brush-group-"+n})).attr("class","brush-group").attr("dimension",(function(e){return e})).each((function(o){a.includes(o)||function(e,n,t,r,i){return function(s,a){var o=e.brushes;R(e,n,t,r,i)(s,a),O(o[s],n,0,s,a)}}(e,n,t,i,s)(o,(0,r.A)(this))})),t.brushExtents=S(e,n,t,i,s),t.brushReset=function(e,n,t){return function(i){var s=e.brushes;if(void 0===i)void 0!==t.g()&&null!==t.g()&&(Object.keys(n.dimensions).forEach((function(e,n){var r=s[e];r&&r.forEach((function(e,r){var i=document.getElementById("brush-"+n+"-"+r);i&&null!==(0,o.ZR)(i)&&t.g().select("#brush-"+n+"-"+r).call(e.brush.move,null)}))})),t.renderBrushed());else if(void 0!==t.g()&&null!==t.g()){var a=s[i],u=Object.keys(n.dimensions).indexOf(i);a&&a.forEach((function(e,n){var i=document.getElementById("brush-"+u+"-"+n);null!==(0,o.ZR)(i)&&(t.g().select("#brush-"+u+"-"+n).call(e.brush.move,null),"function"===typeof e.event&&e.event((0,r.A)("#brush-"+u+"-"+n)))})),t.renderBrushed()}}}(e,n,t),t}},D=function(e,n){return function(){void 0!==n.g()&&null!==n.g()&&n.g().selectAll(".brush-group").remove(),e.brushes={},delete n.brushExtents,delete n.brushReset}},j=function(e,n){return function(){n.selection.select("svg").select("g#strums").remove(),n.selection.select("svg").select("rect#strum-events").remove(),n.on("axesreorder.strums",void 0),delete n.brushReset,e.strumRect=void 0}},P=function(e,n){return function(t,r){var i=e.strums[r],s=function(e,n){return function(t){var r=[e.p1[0]-e.minX,e.p1[1]-e.minX],i=[e.p2[0]-e.minX,e.p2[1]-e.minX],s=1-n/r[0],a=r[1]*(1-s),o=1-n/i[0],u=i[1]*(1-o),l=t[0],c=t[1],h=s*l+a,d=o*l+u;return c>Math.min(h,d)&&c<Math.max(h,d)}}(i,e.strums.width(r)),a=i.dims.left,o=i.dims.right,u=n.dimensions[a].yscale,l=n.dimensions[o].yscale;return s([u(t[a])-i.minX,l(t[o])-i.minX])}},T=function(e,n,t){var r=Object.getOwnPropertyNames(n.strums).filter((function(e){return!isNaN(e)})),i=t.data;if(0===r.length)return i;var s=P(n,t);return i.filter((function(n){switch(e.predicate){case"AND":return r.every((function(e){return s(n,e)}));case"OR":return r.some((function(e){return s(n,e)}));default:throw new Error("Unknown brush predicate "+t.brushPredicate)}}))},N=function(e,n){var t=e.strums[e.strums.active],r=n.selection.select("svg").select("g#strums");delete e.strums[e.strums.active],r.selectAll("line#strum-"+t.dims.i).remove(),r.selectAll("circle#strum-"+t.dims.i).remove()},C=function(e,n,t,r,i){return function(){var s=n.strums[n.strums.active];s&&s.p1[0]===s.p2[0]&&s.p1[1]===s.p2[1]&&N(n,r);var a=T(e,n,t);n.strums.active=void 0,t.brushed=a,r.renderBrushed(),i.call("brushend",r,t.brushed)}},I=function e(n,t,s,a,o,l,c){var h=a.selection.select("svg").select("g#strums"),d=l.dims.i,f=[l.p1,l.p2],m=h.selectAll("line#strum-"+d).data([l]),g=h.selectAll("circle#strum-"+d).data(f),v=(0,u.A)();m.enter().append("line").attr("id","strum-"+d).attr("class","strum"),m.attr("x1",(function(e){return e.p1[0]})).attr("y1",(function(e){return e.p1[1]})).attr("x2",(function(e){return e.p2[0]})).attr("y2",(function(e){return e.p2[1]})).attr("stroke","black").attr("stroke-width",2),v.on("drag",(function(r,u){var c=i.f0;l["p"+(u+=1)][0]=Math.min(Math.max(l.minX+1,c.x),l.maxX),l["p"+u][1]=Math.min(Math.max(l.minY,c.y),l.maxY),e(n,t,s,a,o,l,u-1)})).on("end",C(n,t,s,a,o)),g.enter().append("circle").attr("id","strum-"+d).attr("class","strum"),g.attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",5).style("opacity",(function(e,n){return void 0!==c&&n===c?.8:0})).on("mouseover",(function(){(0,r.A)(this).style("opacity",.8)})).on("mouseout",(function(){(0,r.A)(this).style("opacity",0)})).call(v)},X=function(e,n,t,r,s){return function(){var a=i.f0,o=n.strums[n.strums.active];o.p2[0]=Math.min(Math.max(o.minX+1,a.x-t.margin.left),o.maxX),o.p2[1]=Math.min(Math.max(o.minY,a.y-t.margin.top),o.maxY),I(e,n,t,r,s,o,1)}},B=function(e){return e.height-e.margin.top-e.margin.bottom},q=function(e,n,t,r){var i={i:-1,left:void 0,right:void 0};return Object.keys(e.dimensions).some((function(s,a){return!(t(s)<r[0])||(i.i=a,i.left=s,i.right=Object.keys(e.dimensions)[n.getOrderedDimensionKeys().indexOf(s)+1],!1)})),void 0===i.left?(i.i=0,i.left=n.getOrderedDimensionKeys()[0],i.right=n.getOrderedDimensionKeys()[1]):void 0===i.right&&(i.i=Object.keys(e.dimensions).length-1,i.right=i.left,i.left=n.getOrderedDimensionKeys()[Object.keys(e.dimensions).length-2]),i},z=function(e){return function(n,t){var r=Object.keys(e);return r.some((function(i,s){return i===n&&(s+s<r.length&&e[s+1]===t)}))}},V=function(e,n,t,r,i,a){return function(){void 0!==r.g()&&null!==r.g()||r.createAxes();var o=(0,u.A)();n.strums.active=void 0,n.strums.width=function(e){return void 0===n.strums[e]?void 0:n.strums[e].maxX-n.strums[e].minX},r.on("axesreorder.strums",(function(){var s=Object.getOwnPropertyNames(n.strums).filter((function(e){return!isNaN(e)}));s.length>0&&(s.forEach((function(e){var i=n.strums[e].dims;n.strums.active=e,z(t.dimensions)(i.left,i.right)||N(n,r)})),C(e,n,t,r,i)())})),r.selection.select("svg").append("g").attr("id","strums").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),r.brushReset=function(e,n,t,r,i){return function(){Object.getOwnPropertyNames(n.strums).filter((function(e){return!isNaN(e)})).forEach((function(e){n.strums.active=e,N(n,r)})),C(e,n,t,r,i)()}}(e,n,t,r,i),o.on("start",function(e,n,t,r){return function(){var i=(0,s.A)(e.strumRect.node());i[0]=i[0]-n.margin.left,i[1]=i[1]-n.margin.top;var a=q(n,t,r,i),o={p1:i,dims:a,minX:r(a.left),maxX:r(a.right),minY:0,maxY:B(n)};o.p1[0]=Math.min(Math.max(o.minX,i[0]),o.maxX),o.p2=o.p1.slice(),e.strums[a.i]=o,e.strums.active=a.i}}(n,t,r,a)).on("drag",X(e,n,t,r,i)).on("end",C(e,n,t,r,i)),n.strumRect=r.selection.select("svg").insert("rect","g#strums").attr("id","strum-events").attr("x",t.margin.left).attr("y",t.margin.top).attr("width",v(t)).attr("height",B(t)+2).style("opacity",0).call(o)}},F=function(e,n){return function(){n.selection.select("svg").select("g#arcs").remove(),n.selection.select("svg").select("rect#arc-events").remove(),n.on("axesreorder.arcs",void 0),delete n.brushReset,e.strumRect=void 0}},Z=function(e,n){return Math.sqrt(e*e+n*n)},L=function(e){return e>Math.PI?1.5*Math.PI-e:.5*Math.PI-e},K=function(e,n){return function(t,r){var i=e.arcs[r],s=function(e){return function(n){var t=L(e.startAngle),r=L(e.endAngle);if(t>r){var i=t;t=r,r=i}return n>=t&&n<=r}}(i),a=i.dims.left,o=i.dims.right,u=n.dimensions[a].yscale,l=n.dimensions[o].yscale,c=e.arcs.width(r),h=u(t[a])-l(t[o]),d=Z(c,h);return s(Math.asin(h/d))}},Y=function(e,n,t){var r=Object.getOwnPropertyNames(n.arcs).filter((function(e){return!isNaN(e)})),i=t.data;if(0===r.length)return i;var s=K(n,t);return i.filter((function(n){switch(e.predicate){case"AND":return r.every((function(e){return s(n,e)}));case"OR":return r.some((function(e){return s(n,e)}));default:throw new Error("Unknown brush predicate "+t.brushPredicate)}}))},W=function(e,n){var t=e.arcs[e.arcs.active],r=n.selection.select("svg").select("g#arcs");delete e.arcs[e.arcs.active],e.arcs.active=void 0,r.selectAll("line#arc-"+t.dims.i).remove(),r.selectAll("circle#arc-"+t.dims.i).remove(),r.selectAll("path#arc-"+t.dims.i).remove()},U=function(e,n,t,r,i){return function(){var s=n.arcs[n.arcs.active];if(s&&s.p1[0]===s.p2[0]&&s.p1[1]===s.p2[1]&&W(n,r),s){var a=n.arcs.startAngle(n.arcs.active);s.startAngle=a,s.endAngle=a,s.arc.outerRadius(n.arcs.length(n.arcs.active)).startAngle(a).endAngle(a)}n.arcs.active=void 0,t.brushed=Y(e,n,t),r.renderBrushed(),i.call("brushend",r,t.brushed)}},H=function e(n,t,s,a,o,l,c){var h=a.selection.select("svg").select("g#arcs"),d=l.dims.i,f=[l.p2,l.p3],m=h.selectAll("line#arc-"+d).data([{p1:l.p1,p2:l.p2},{p1:l.p1,p2:l.p3}]),g=h.selectAll("circle#arc-"+d).data(f),v=(0,u.A)(),p=h.selectAll("path#arc-"+d).data([l]);p.enter().append("path").attr("id","arc-"+d).attr("class","arc").style("fill","orange").style("opacity",.5),p.attr("d",l.arc).attr("transform","translate("+l.p1[0]+","+l.p1[1]+")"),m.enter().append("line").attr("id","arc-"+d).attr("class","arc"),m.attr("x1",(function(e){return e.p1[0]})).attr("y1",(function(e){return e.p1[1]})).attr("x2",(function(e){return e.p2[0]})).attr("y2",(function(e){return e.p2[1]})).attr("stroke","black").attr("stroke-width",2),v.on("drag",(function(r,u){var c=i.f0;l["p"+(u+=2)][0]=Math.min(Math.max(l.minX+1,c.x),l.maxX),l["p"+u][1]=Math.min(Math.max(l.minY,c.y),l.maxY);var h=3===u?t.arcs.startAngle(d):t.arcs.endAngle(d);(l.startAngle<Math.PI&&l.endAngle<Math.PI&&h<Math.PI||l.startAngle>=Math.PI&&l.endAngle>=Math.PI&&h>=Math.PI)&&(2===u?(l.endAngle=h,l.arc.endAngle(h)):3===u&&(l.startAngle=h,l.arc.startAngle(h))),e(n,t,s,a,o,l,u-2)})).on("end",U(n,t,s,a,o)),g.enter().append("circle").attr("id","arc-"+d).attr("class","arc"),g.attr("cx",(function(e){return e[0]})).attr("cy",(function(e){return e[1]})).attr("r",5).style("opacity",(function(e,n){return void 0!==c&&n===c?.8:0})).on("mouseover",(function(){(0,r.A)(this).style("opacity",.8)})).on("mouseout",(function(){(0,r.A)(this).style("opacity",0)})).call(v)},G=function(e,n,t,r,s){return function(){var a=i.f0,o=n.arcs[n.arcs.active];o.p2[0]=Math.min(Math.max(o.minX+1,a.x-t.margin.left),o.maxX),o.p2[1]=Math.min(Math.max(o.minY,a.y-t.margin.top),o.maxY),o.p3=o.p2.slice(),H(e,n,t,r,s,o,1)}},J=function(e,n){var t=e[0]-n[0],r=e[1]-n[1],i=Z(t,r);return Math.asin(r/i)},Q=function(e,n,t,r,i,a){return function(){r.g()||r.createAxes();var o=(0,u.A)();n.arcs.active=void 0,n.arcs.width=function(e){var t=n.arcs[e];return void 0===t?void 0:t.maxX-t.minX},n.arcs.endAngle=function(e){return function(n){var t=e.arcs[n];if(void 0!==t){var r=-J(t.p1,t.p2)+Math.PI/2;return t.p1[0]>t.p2[0]&&(r=2*Math.PI-r),r}}}(n),n.arcs.startAngle=function(e){return function(n){var t=e.arcs[n];if(void 0!==t){var r=-J(t.p1,t.p3)+Math.PI/2;return t.p1[0]>t.p3[0]&&(r=2*Math.PI-r),r}}}(n),n.arcs.length=function(e){return function(n){var t=e.arcs[n];if(void 0!==t){var r=t.p1[0]-t.p2[0],i=t.p1[1]-t.p2[1];return Z(r,i)}}}(n),r.on("axesreorder.arcs",(function(){var s=Object.getOwnPropertyNames(arcs).filter((function(e){return!isNaN(e)}));s.length>0&&(s.forEach((function(e){var t=arcs[e].dims;n.arcs.active=e,z(t)(t.left,t.right)||W(n,r)})),U(e,n,t,r,i)())})),r.selection.select("svg").append("g").attr("id","arcs").attr("transform","translate("+t.margin.left+","+t.margin.top+")"),r.brushReset=function(e,n,t,r,i){return function(){Object.getOwnPropertyNames(n.arcs).filter((function(e){return!isNaN(e)})).forEach((function(e){n.arcs.active=e,W(n,r)})),U(e,n,t,r,i)()}}(e,n,t,r,i),o.on("start",function(e,n,t,r){return function(){var i=(0,s.A)(e.strumRect.node());i[0]=i[0]-n.margin.left,i[1]=i[1]-n.margin.top;var a=q(n,t,r,i),o={p1:i,dims:a,minX:r(a.left),maxX:r(a.right),minY:0,maxY:B(n),startAngle:void 0,endAngle:void 0,arc:(0,l.A)().innerRadius(0)};o.p1[0]=Math.min(Math.max(o.minX,i[0]),o.maxX),o.p2=o.p1.slice(),o.p3=o.p1.slice(),e.arcs[a.i]=o,e.arcs.active=a.i}}(n,t,r,a)).on("drag",G(e,n,t,r,i)).on("end",U(e,n,t,r,i)),n.strumRect=r.selection.select("svg").insert("rect","g#arcs").attr("id","arc-events").attr("x",t.margin.left).attr("y",t.margin.top).attr("width",v(t)).attr("height",B(t)+2).style("opacity",0).call(o)}},$=function(e,n,t,r){return{x:((e.x*n.y-e.y*n.x)*(t.x-r.x)-(e.x-n.x)*(t.x*r.y-t.y*r.x))/((e.x-n.x)*(t.y-r.y)-(e.y-n.y)*(t.x-r.x)),y:((e.x*n.y-e.y*n.x)*(t.y-r.y)-(e.y-n.y)*(t.x*r.y-t.y*r.x))/((e.x-n.x)*(t.y-r.y)-(e.y-n.y)*(t.x-r.x))}},ee=function(e,n,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===r)return e.mode;if(-1===t.brushModes().indexOf(r))throw new Error("pc.brushmode: Unsupported brush mode: "+r);return r!==e.mode&&("None"!==e.mode&&t.brushReset(),e.modes[e.mode].uninstall(t),e.mode=r,e.modes[e.mode].install(),"None"===r?delete t.brushPredicate:t.brushPredicate=function(e,n,t){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===r)return e.predicate;if("AND"!==(r=String(r).toUpperCase())&&"OR"!==r)throw new Error("Invalid predicate "+r);return e.predicate=r,n.brushed=e.currentMode().selected(),t.renderBrushed(),t}}(e,n,t)),t}},ne=function(e){return function(n){return e.dimensions[n].title?e.dimensions[n].title:n}},te=function(e,n,t){return function(r){n.flip(r),n.brushReset(r),n.selection.select("svg").selectAll("g.axis").filter((function(e){return e===r})).transition().duration(e.animationTime).call(t.scale(e.dimensions[r].yscale)),n.render()}},re=function(e,n){if(e.rotateLabels){var t=i.f0.deltaY;t=(t=t<0?-5:t)>0?5:t,e.dimensionTitleRotation+=t,n.svg.selectAll("text.label").attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),i.f0.preventDefault()}},ie=function(e){var n=e.height-e.margin.top-e.margin.bottom;return"bottom"==e.nullValueSeparator?[n+1-e.nullValueSeparatorPadding.bottom-e.nullValueSeparatorPadding.top,1]:"top"==e.nullValueSeparator?[n+1,1+e.nullValueSeparatorPadding.bottom+e.nullValueSeparatorPadding.top]:[n+1,1]},se=function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")},ae=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),oe=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ue=function(e){return null!==e&&void 0!==e},le=function(e,n){var t=void 0;switch(n.orient){case"left":default:t=(0,f.V4)(n.yscale);break;case"right":t=(0,f.eH)(n.yscale);break;case"top":t=(0,f.tl)(n.yscale);break;case"bottom":t=(0,f.l7)(n.yscale)}return t.ticks(n.ticks).tickValues(n.tickValues).tickSizeInner(n.innerTickSize).tickSizeOuter(n.outerTickSize).tickPadding(n.tickPadding).tickFormat(n.tickFormat),t},ce=function(e,n){if(e.brushed&&e.brushed.length!==e.data.length)return!0;var t=n.currentMode().brushState();for(var r in t)if(t.hasOwnProperty(r))return!0;return!1},he=1e-6,de=function(){function e(n){se(this,e),this.setElements(n)}return ae(e,[{key:"e",value:function(e,n){return e<1||e>this.elements.length||n<1||n>this.elements[0].length?null:this.elements[e-1][n-1]}},{key:"row",value:function(e){return e>this.elements.length?null:new fe(this.elements[e-1])}},{key:"col",value:function(e){if(0===this.elements.length)return null;if(e>this.elements[0].length)return null;for(var n=[],t=this.elements.length,r=0;r<t;r++)n.push(this.elements[r][e-1]);return new fe(n)}},{key:"dimensions",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return{rows:this.elements.length,cols:e}}},{key:"rows",value:function(){return this.elements.length}},{key:"cols",value:function(){return 0===this.elements.length?0:this.elements[0].length}},{key:"eql",value:function(n){var t=n.elements||n;if(t[0]&&"undefined"!==typeof t[0][0]||(t=new e(t).elements),0===this.elements.length||0===t.length)return this.elements.length===t.length;if(this.elements.length!==t.length)return!1;if(this.elements[0].length!==t[0].length)return!1;for(var r,i=this.elements.length,s=this.elements[0].length;i--;)for(r=s;r--;)if(Math.abs(this.elements[i][r]-t[i][r])>he)return!1;return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(n,t){if(0===this.elements.length)return new e([]);for(var r,i=[],s=this.elements.length,a=this.elements[0].length;s--;)for(r=a,i[s]=[];r--;)i[s][r]=n.call(t,this.elements[s][r],s+1,r+1);return new e(i)}},{key:"isSameSizeAs",value:function(n){var t=n.elements||n;return"undefined"===typeof t[0][0]&&(t=new e(t).elements),0===this.elements.length?0===t.length:this.elements.length===t.length&&this.elements[0].length===t[0].length}},{key:"add",value:function(n){if(0===this.elements.length)return this.map((function(e){return e}));var t=n.elements||n;return"undefined"===typeof t[0][0]&&(t=new e(t).elements),this.isSameSizeAs(t)?this.map((function(e,n,r){return e+t[n-1][r-1]})):null}},{key:"subtract",value:function(n){if(0===this.elements.length)return this.map((function(e){return e}));var t=n.elements||n;return"undefined"===typeof t[0][0]&&(t=new e(t).elements),this.isSameSizeAs(t)?this.map((function(e,n,r){return e-t[n-1][r-1]})):null}},{key:"canMultiplyFromLeft",value:function(n){if(0===this.elements.length)return!1;var t=n.elements||n;return"undefined"===typeof t[0][0]&&(t=new e(t).elements),this.elements[0].length===t.length}},{key:"multiply",value:function(n){if(0===this.elements.length)return null;if(!n.elements)return this.map((function(e){return e*n}));var t=!!n.modulus;if("undefined"===typeof(c=n.elements||n)[0][0]&&(c=new e(c).elements),!this.canMultiplyFromLeft(c))return null;for(var r,i,s,a=this.elements.length,o=c[0].length,u=this.elements[0].length,l=[];a--;)for(r=o,l[a]=[];r--;){for(i=u,s=0;i--;)s+=this.elements[a][i]*c[i][r];l[a][r]=s}var c=new e(l);return t?c.col(1):c}},{key:"minor",value:function(n,t,r,i){if(0===this.elements.length)return null;for(var s,a,o,u=[],l=r,c=this.elements.length,h=this.elements[0].length;l--;)for(u[s=r-l-1]=[],a=i;a--;)o=i-a-1,u[s][o]=this.elements[(n+s-1)%c][(t+o-1)%h];return new e(u)}},{key:"transpose",value:function(){if(0===this.elements.length)return new e([]);for(var n,t=this.elements.length,r=[],i=this.elements[0].length;i--;)for(n=t,r[i]=[];n--;)r[i][n]=this.elements[n][i];return new e(r)}},{key:"isSquare",value:function(){var e=0===this.elements.length?0:this.elements[0].length;return this.elements.length===e}},{key:"max",value:function(){if(0===this.elements.length)return null;for(var e,n=0,t=this.elements.length,r=this.elements[0].length;t--;)for(e=r;e--;)Math.abs(this.elements[t][e])>Math.abs(n)&&(n=this.elements[t][e]);return n}},{key:"indexOf",value:function(e){if(0===this.elements.length)return null;var n,t,r=this.elements.length,i=this.elements[0].length;for(n=0;n<r;n++)for(t=0;t<i;t++)if(this.elements[n][t]===e)return{i:n+1,j:t+1};return null}},{key:"diagonal",value:function(){if(!this.isSquare)return null;for(var e=[],n=this.elements.length,t=0;t<n;t++)e.push(this.elements[t][t]);return new fe(e)}},{key:"toRightTriangular",value:function(){if(0===this.elements.length)return new e([]);var n,t,r,i,s=this.dup(),a=this.elements.length,o=this.elements[0].length;for(t=0;t<a;t++){if(0===s.elements[t][t])for(r=t+1;r<a;r++)if(0!==s.elements[r][t]){for(n=[],i=0;i<o;i++)n.push(s.elements[t][i]+s.elements[r][i]);s.elements[t]=n;break}if(0!==s.elements[t][t])for(r=t+1;r<a;r++){var u=s.elements[r][t]/s.elements[t][t];for(n=[],i=0;i<o;i++)n.push(i<=t?0:s.elements[r][i]-s.elements[t][i]*u);s.elements[r]=n}}return s}},{key:"determinant",value:function(){if(0===this.elements.length)return 1;if(!this.isSquare())return null;for(var e=this.toRightTriangular(),n=e.elements[0][0],t=e.elements.length,r=1;r<t;r++)n*=e.elements[r][r];return n}},{key:"isSingular",value:function(){return this.isSquare()&&0===this.determinant()}},{key:"trace",value:function(){if(0===this.elements.length)return 0;if(!this.isSquare())return null;for(var e=this.elements[0][0],n=this.elements.length,t=1;t<n;t++)e+=this.elements[t][t];return e}},{key:"rank",value:function(){if(0===this.elements.length)return 0;for(var e,n=this.toRightTriangular(),t=0,r=this.elements.length,i=this.elements[0].length;r--;)for(e=i;e--;)if(Math.abs(n.elements[r][e])>he){t++;break}return t}},{key:"augment",value:function(n){if(0===this.elements.length)return this.dup();var t=n.elements||n;"undefined"===typeof t[0][0]&&(t=new e(t).elements);var r,i=this.dup(),s=i.elements[0].length,a=i.elements.length,o=t[0].length;if(a!==t.length)return null;for(;a--;)for(r=o;r--;)i.elements[a][s+r]=t[a][r];return i}},{key:"inverse",value:function(){if(0===this.elements.length)return null;if(!this.isSquare()||this.isSingular())return null;for(var n,t,r,i,s,a=this.elements.length,o=a,u=this.augment(e.I(a)).toRightTriangular(),l=u.elements[0].length,c=[];o--;){for(r=[],c[o]=[],i=u.elements[o][o],t=0;t<l;t++)s=u.elements[o][t]/i,r.push(s),t>=a&&c[o].push(s);for(u.elements[o]=r,n=o;n--;){for(r=[],t=0;t<l;t++)r.push(u.elements[n][t]-u.elements[o][t]*u.elements[n][o]);u.elements[n]=r}}return new e(c)}},{key:"round",value:function(){return this.map((function(e){return Math.round(e)}))}},{key:"snapTo",value:function(e){return this.map((function(n){return Math.abs(n-e)<=he?e:n}))}},{key:"inspect",value:function(){var e=[],n=this.elements.length;if(0===n)return"[]";for(var t=0;t<n;t++)e.push(new fe(this.elements[t]).inspect());return e.join("\n")}},{key:"setElements",value:function(e){var n,t,r=e.elements||e;if(r[0]&&"undefined"!==typeof r[0][0]){for(n=r.length,this.elements=[];n--;)for(t=r[n].length,this.elements[n]=[];t--;)this.elements[n][t]=r[n][t];return this}var i=r.length;for(this.elements=[],n=0;n<i;n++)this.elements.push([r[n]]);return this}},{key:"flatten",value:function(){var e=[];if(0==this.elements.length)return[];for(var n=0;n<this.elements[0].length;n++)for(var t=0;t<this.elements.length;t++)e.push(this.elements[t][n]);return e}},{key:"ensure4x4",value:function(){if(4==this.elements.length&&4==this.elements[0].length)return this;if(this.elements.length>4||this.elements[0].length>4)return null;for(var e=0;e<this.elements.length;e++)for(var n=this.elements[e].length;n<4;n++)e==n?this.elements[e].push(1):this.elements[e].push(0);for(e=this.elements.length;e<4;e++)0==e?this.elements.push([1,0,0,0]):1==e?this.elements.push([0,1,0,0]):2==e?this.elements.push([0,0,1,0]):3==e&&this.elements.push([0,0,0,1]);return this}},{key:"make3x3",value:function(){return 4!=this.elements.length||4!=this.elements[0].length?null:new e([[this.elements[0][0],this.elements[0][1],this.elements[0][2]],[this.elements[1][0],this.elements[1][1],this.elements[1][2]],[this.elements[2][0],this.elements[2][1],this.elements[2][2]]])}}]),e}();de.I=function(e){for(var n,t=[],r=e;r--;)for(n=e,t[r]=[];n--;)t[r][n]=r===n?1:0;return new de(t)},de.Diagonal=function(e){for(var n=e.length,t=de.I(n);n--;)t.elements[n][n]=e[n];return t},de.Rotation=function(e,n){if(!n)return new de([[Math.cos(e),-Math.sin(e)],[Math.sin(e),Math.cos(e)]]);var t=n.dup();if(3!==t.elements.length)return null;var r=t.modulus(),i=t.elements[0]/r,s=t.elements[1]/r,a=t.elements[2]/r,o=Math.sin(e),u=Math.cos(e),l=1-u;return new de([[l*i*i+u,l*i*s-o*a,l*i*a+o*s],[l*i*s+o*a,l*s*s+u,l*s*a-o*i],[l*i*a-o*s,l*s*a+o*i,l*a*a+u]])},de.RotationX=function(e){var n=Math.cos(e),t=Math.sin(e);return new de([[1,0,0],[0,n,-t],[0,t,n]])},de.RotationY=function(e){var n=Math.cos(e),t=Math.sin(e);return new de([[n,0,t],[0,1,0],[-t,0,n]])},de.RotationZ=function(e){var n=Math.cos(e),t=Math.sin(e);return new de([[n,-t,0],[t,n,0],[0,0,1]])},de.Random=function(e,n){return de.Zero(e,n).map((function(){return Math.random()}))},de.Translation=function(e){var n;if(2==e.elements.length)return(n=de.I(3)).elements[2][0]=e.elements[0],n.elements[2][1]=e.elements[1],n;if(3==e.elements.length)return(n=de.I(4)).elements[0][3]=e.elements[0],n.elements[1][3]=e.elements[1],n.elements[2][3]=e.elements[2],n;throw"Invalid length for Translation"},de.Zero=function(e,n){for(var t,r=[],i=e;i--;)for(t=n,r[i]=[];t--;)r[i][t]=0;return new de(r)},de.prototype.toUpperTriangular=de.prototype.toRightTriangular,de.prototype.det=de.prototype.determinant,de.prototype.tr=de.prototype.trace,de.prototype.rk=de.prototype.rank,de.prototype.inv=de.prototype.inverse,de.prototype.x=de.prototype.multiply;var fe=function(){function e(n){se(this,e),this.setElements(n)}return ae(e,[{key:"e",value:function(e){return e<1||e>this.elements.length?null:this.elements[e-1]}},{key:"dimensions",value:function(){return this.elements.length}},{key:"modulus",value:function(){return Math.sqrt(this.dot(this))}},{key:"eql",value:function(e){var n=this.elements.length,t=e.elements||e;if(n!==t.length)return!1;for(;n--;)if(Math.abs(this.elements[n]-t[n])>he)return!1;return!0}},{key:"dup",value:function(){return new e(this.elements)}},{key:"map",value:function(n,t){var r=[];return this.each((function(e,i){r.push(n.call(t,e,i))})),new e(r)}},{key:"forEach",value:function(e,n){for(var t=this.elements.length,r=0;r<t;r++)e.call(n,this.elements[r],r+1)}},{key:"toUnitVector",value:function(){var e=this.modulus();return 0===e?this.dup():this.map((function(n){return n/e}))}},{key:"angleFrom",value:function(e){var n=e.elements||e;if(this.elements.length!==n.length)return null;var t=0,r=0,i=0;if(this.each((function(e,s){t+=e*n[s-1],r+=e*e,i+=n[s-1]*n[s-1]})),r=Math.sqrt(r),i=Math.sqrt(i),r*i===0)return null;var s=t/(r*i);return s<-1&&(s=-1),s>1&&(s=1),Math.acos(s)}},{key:"isParallelTo",value:function(e){var n=this.angleFrom(e);return null===n?null:n<=he}},{key:"isAntiparallelTo",value:function(e){var n=this.angleFrom(e);return null===n?null:Math.abs(n-Math.PI)<=he}},{key:"isPerpendicularTo",value:function(e){var n=this.dot(e);return null===n?null:Math.abs(n)<=he}},{key:"add",value:function(e){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,t){return e+n[t-1]}))}},{key:"subtract",value:function(e){var n=e.elements||e;return this.elements.length!==n.length?null:this.map((function(e,t){return e-n[t-1]}))}},{key:"multiply",value:function(e){return this.map((function(n){return n*e}))}},{key:"dot",value:function(e){var n=e.elements||e,t=0,r=this.elements.length;if(r!==n.length)return null;for(;r--;)t+=this.elements[r]*n[r];return t}},{key:"cross",value:function(n){var t=n.elements||n;if(3!==this.elements.length||3!==t.length)return null;var r=this.elements;return new e([r[1]*t[2]-r[2]*t[1],r[2]*t[0]-r[0]*t[2],r[0]*t[1]-r[1]*t[0]])}},{key:"max",value:function(){for(var e=0,n=this.elements.length;n--;)Math.abs(this.elements[n])>Math.abs(e)&&(e=this.elements[n]);return e}},{key:"indexOf",value:function(e){for(var n=null,t=this.elements.length,r=0;r<t;r++)null===n&&this.elements[r]===e&&(n=r+1);return n}},{key:"toDiagonalMatrix",value:function(){return de.Diagonal(this.elements)}},{key:"round",value:function(){return this.map((function(e){return Math.round(e)}))}},{key:"snapTo",value:function(e){return this.map((function(n){return Math.abs(n-e)<=he?e:n}))}},{key:"distanceFrom",value:function(e){if(e.anchor||e.start&&e.end)return e.distanceFrom(this);var n=e.elements||e;if(n.length!==this.elements.length)return null;var t,r=0;return this.each((function(e,i){t=e-n[i-1],r+=t*t})),Math.sqrt(r)}},{key:"liesOn",value:function(e){return e.contains(this)}},{key:"liesIn",value:function(e){return e.contains(this)}},{key:"rotate",value:function(n,t){var r,i,s,a,o=null;switch(n.determinant&&(o=n.elements),this.elements.length){case 2:return 2!==(r=t.elements||t).length?null:(o||(o=de.Rotation(n).elements),i=this.elements[0]-r[0],s=this.elements[1]-r[1],new e([r[0]+o[0][0]*i+o[0][1]*s,r[1]+o[1][0]*i+o[1][1]*s]));case 3:if(!t.direction)return null;var u=t.pointClosestTo(this).elements;return o||(o=de.Rotation(n,t.direction).elements),i=this.elements[0]-u[0],s=this.elements[1]-u[1],a=this.elements[2]-u[2],new e([u[0]+o[0][0]*i+o[0][1]*s+o[0][2]*a,u[1]+o[1][0]*i+o[1][1]*s+o[1][2]*a,u[2]+o[2][0]*i+o[2][1]*s+o[2][2]*a]);default:return null}}},{key:"reflectionIn",value:function(n){if(n.anchor){var t=this.elements.slice(),r=n.pointClosestTo(t).elements;return new e([r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1]),r[2]+(r[2]-(t[2]||0))])}var i=n.elements||n;return this.elements.length!==i.length?null:this.map((function(e,n){return i[n-1]+(i[n-1]-e)}))}},{key:"to3D",value:function(){var e=this.dup();switch(e.elements.length){case 3:break;case 2:e.elements.push(0);break;default:return null}return e}},{key:"inspect",value:function(){return"["+this.elements.join(", ")+"]"}},{key:"setElements",value:function(e){return this.elements=(e.elements||e).slice(),this}},{key:"flatten",value:function(){return this.elements}}]),e}();fe.Random=function(e){for(var n=[];e--;)n.push(Math.random());return new fe(n)},fe.Zero=function(e){for(var n=[];e--;)n.push(0);return new fe(n)},fe.prototype.x=fe.prototype.multiply,fe.prototype.each=fe.prototype.forEach,fe.i=new fe([1,0,0]),fe.j=new fe([0,1,0]),fe.k=new fe([0,0,1]);var me=function(e,n,t,r){var i=function(e,n,t){for(var r=[],i=Object.keys(e.dimensions),s=i.length,a=0;a<s;++a){var o=n(i[a]),u=e.dimensions[i[a]].yscale(t[i[a]]);if(r.push(new fe([o,u])),a<s-1){var l=o+.5*(n(i[a+1])-o),c=u+.5*(e.dimensions[i[a+1]].yscale(t[i[a+1]])-u);if(null!==e.bundleDimension){var h=.5*(e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(t[e.bundleDimension])).get(i[a])+e.clusterCentroids.get(e.dimensions[e.bundleDimension].yscale(t[e.bundleDimension])).get(i[a+1]));c=h+(1-e.bundlingStrength)*(c-h)}r.push(new fe([l,c]))}}return r}(e,n,t),s=function(e,n){var t=n.length,r=e,i=[];i.push(n[0]),i.push(new fe([n[0].e(1)+2*r*(n[1].e(1)-n[0].e(1)),n[0].e(2)]));for(var s=1;s<t-1;++s){var a=n[s],o=n[s-1],u=n[s+1],l=o.subtract(u);i.push(a.add(l.x(r))),i.push(a),i.push(a.subtract(l.x(r)))}return i.push(new fe([n[t-1].e(1)+2*r*(n[t-2].e(1)-n[t-1].e(1)),n[t-1].e(2)])),i.push(n[t-1]),i}(e.smoothness,i);r.moveTo(s[0].e(1),s[0].e(2));for(var a=1;a<s.length;a+=3){if(e.showControlPoints)for(var o=0;o<3;o++)r.fillRect(s[a+o].e(1),s[a+o].e(2),2,2);r.bezierCurveTo(s[a].e(1),s[a].e(2),s[a+1].e(1),s[a+1].e(2),s[a+2].e(1),s[a+2].e(2))}},ge=function(e){return"bottom"===e.nullValueSeparator?B(e)+1:"top"===e.nullValueSeparator?1:(console.log("A value is NULL, but nullValueSeparator is not set; set it to 'bottom' or 'top'."),B(e)+1)},ve=function(e,n,t,r){r.beginPath(),null!==e.bundleDimension&&e.bundlingStrength>0||e.smoothness>0?me(e,n,t,r):function(e,n,t,r){Object.keys(e.dimensions).map((function(r){return[n(r),void 0===t[r]?ge(e):e.dimensions[r].yscale(t[r])]})).sort((function(e,n){return e[0]-n[0]})).forEach((function(e,n){0===n?r.moveTo(e[0],e[1]):r.lineTo(e[0],e[1])}))}(e,n,t,r),r.stroke()},pe=function(e){return"function"===typeof e?e:function(){return e}},ye=function(e,n,t){return function(r,i){return n.marked.strokeStyle=pe(e.color)(r,i),ve(e,t,r,n.marked)}},be=function(e,n,t){return function(r,i){return null!==e.brushedColor?n.brushed.strokeStyle=pe(e.brushedColor)(r,i):n.brushed.strokeStyle=pe(e.color)(r,i),ve(e,t,r,n.brushed)}},ke=function(e){return{}.toString.call(e).match(/\s([a-zA-Z]+)/)[1].toLowerCase()},xe=function(e){for(var n=[],t=0;t<e.length-1;t++)n.push([e[t],e[t+1]]);return n},we=function(e,n,t,r,i,s){return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===o?e.highlighted:(e.highlighted=o,n.clear("highlight"),(0,a.A)([t.foreground,t.brushed]).classed("faded",!0),o.forEach(function(e,n,t){return function(r,i){return n.highlight.strokeStyle=pe(e.color)(r,i),ve(e,t,r,n.highlight)}}(e,i,s)),r.call("highlight",this,o),this)}},Ae=function(e,n,t){return function(r,i){return n.foreground.strokeStyle=pe(e.color)(r,i),ve(e,t,r,n.foreground)}},Oe=function(e){return parseFloat(e)==e&&null!==e?"number":ke(e)},Me=function(e){return Object.keys(e[0]).reduce((function(n,t){return n[isNaN(Number(t))?t:parseInt(t)]=Oe(e[0][t]),n}),{})},_e={data:[],highlighted:[],marked:[],dimensions:{},dimensionTitleRotation:0,brushes:[],brushed:!1,brushedColor:null,alphaOnBrushed:0,lineWidth:1.4,highlightedLineWidth:3,mode:"default",markedLineWidth:3,markedShadowColor:"#ffffff",markedShadowBlur:10,rate:20,width:600,height:300,margin:{top:24,right:20,bottom:12,left:20},nullValueSeparator:"undefined",nullValueSeparatorPadding:{top:8,right:0,bottom:8,left:0},color:"#069",composite:"source-over",alpha:.7,bundlingStrength:.5,bundleDimension:null,smoothness:0,showControlPoints:!1,hideAxis:[],flipAxes:[],animationTime:1100,rotateLabels:!1},Re=function(e,n,t,r,i,s,a,o,u){return m.A.apply(undefined,Object.keys(e)).on("composite",(function(e){n.foreground.globalCompositeOperation=e.value,n.brushed.globalCompositeOperation=e.value})).on("alpha",(function(e){n.foreground.globalAlpha=e.value,n.brushed.globalAlpha=e.value})).on("brushedColor",(function(e){n.brushed.strokeStyle=e.value})).on("width",(function(e){return t.resize()})).on("height",(function(e){return t.resize()})).on("margin",(function(e){return t.resize()})).on("rate",(function(e){a.rate(e.value),o.rate(e.value),u.rate(e.value)})).on("dimensions",(function(n){e.dimensions=t.applyDimensionDefaults(Object.keys(n.value)),r.domain(t.getOrderedDimensionKeys()),t.sortDimensions(),s.interactive&&t.render().updateAxes()})).on("bundleDimension",(function(n){Object.keys(e.dimensions).length||t.detectDimensions(),t.autoscale(),"number"===typeof n.value?n.value<Object.keys(e.dimensions).length?e.bundleDimension=e.dimensions[n.value]:n.value<e.hideAxis.length&&(e.bundleDimension=e.hideAxis[n.value]):e.bundleDimension=n.value,e.clusterCentroids=function(e,n){var t=new Map,r=new Map;return e.data.forEach((function(t){var i=e.dimensions[n].yscale(t[n]);r.has(i)||r.set(i,0);var s=r.get(i);r.set(i,s+1)})),e.data.forEach((function(i){Object.keys(e.dimensions).map((function(s){var a=e.dimensions[n].yscale(i[n]);if(!t.has(a)){var o=new Map;t.set(a,o)}t.get(a).has(s)||t.get(a).set(s,0);var u=t.get(a).get(s);u+=e.dimensions[s].yscale(i[s])/r.get(a),t.get(a).set(s,u)}))})),t}(e,e.bundleDimension),s.interactive&&t.render()})).on("hideAxis",(function(n){var r;t.brushReset(),t.dimensions(t.applyDimensionDefaults()),t.dimensions((r=e.dimensions,n.value.forEach((function(e){delete r[e]})),r)),t.render()})).on("flipAxes",(function(n){n.value&&n.value.length&&(n.value.forEach((function(n){te(e,t,i)(n)})),t.updateAxes(0))}))},Se=function(e,n,t){return e[t]=function(e,n,t){return function(){var r=t.apply(n,arguments);return r===n?e:r}}(e,n,n[t]),e},Ee=function(e,n,t,r,i,s,a,o,u,l){!function(e,n,t,r){Object.keys(n).forEach((function(i){e[i]=function(s){if(!arguments.length)return n[i];"dimensions"===i&&"[object Array]"===Object.prototype.toString.call(s)&&(console.warn("pc.dimensions([]) is deprecated, use pc.dimensions({})"),s=e.applyDimensionDefaults(s));var a=n[i];return n[i]=s,r.call(i,e,{value:s,previous:a}),t.call(i,e,{value:s,previous:a}),e}}))}(t,e,u,Re(e,n,t,r,l,i,s,a,o)),Se(t,u,"on"),Se(t,l,"ticks")};n.A=function(e){var n=function(e){var n=Object.assign({},_e,e);e&&e.dimensionTitles&&(console.warn("dimensionTitles passed in userConfig is deprecated. Add title to dimension object."),(0,d.jO)(e.dimensionTitles).forEach((function(e){n.dimensions[e.key]?n.dimensions[e.key].title=n.dimensions[e.key].title?n.dimensions[e.key].title:e.value:n.dimensions[e.key]={title:e.value}})));var t=["render","resize","highlight","mark","brush","brushend","brushstart","axesreorder"].concat((0,d.HP)(n)),r=m.A.apply(void 0,t),i=(0,c.hq)(),s=(0,f.V4)().ticks(5);return{config:n,events:r,eventTypes:t,flags:{brushable:!1,reorderable:!1,axes:!1,interactive:!1,debug:!1},xscale:i,dragging:{},axis:s,ctx:{},canvas:{},brush:{modes:{None:{install:function(e){},uninstall:function(e){},selected:function(){return[]},brushState:function(){return{}}}},mode:"None",predicate:"AND",currentMode:function(){return this.modes[this.mode]}}}}(e),t=n.config,s=n.events,l=n.flags,p=n.xscale,x=n.dragging,O=n.axis,_=n.ctx,R=n.canvas,P=n.brush,N=function(e,n,t){return function i(s){return s=i.selection=(0,r.A)(s),e.width=s.node().clientWidth,e.height=s.node().clientHeight,["dots","foreground","brushed","marked","highlight"].forEach((function(e){n[e]=s.append("canvas").attr("class",e).node(),t[e]=n[e].getContext("2d")})),i.svg=s.append("svg").attr("width",e.width).attr("height",e.height).style("font","14px sans-serif").style("position","absolute").append("svg:g").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),i}}(t,R,_),C=function(e){return 0===p.range().length&&p.range([0,v(t)],1),null==x[e]?p(e):x[e]},I=g(be(t,_,C)).rate(50).clear((function(){return N.clear("brushed")})),X=g(ye(t,_,C)).rate(50).clear((function(){return N.clear("marked")})),q=g(Ae(t,_,C)).rate(50).clear((function(){N.clear("foreground"),N.clear("highlight")}));return Ee(t,_,N,p,l,I,X,q,s,O),N.state=t,N.flags=l,N.autoscale=function(e,n,t,r){return function(){var i={date:function(n){var t=(0,h.Xx)(e.data,(function(e){return e[n]?e[n].getTime():null}));return t[0]===t[1]?(0,c.hq)().domain(t).range(ie(e)):(e.flipAxes.includes(n)&&(t=t.map((function(e){return tempDate.unshift(e)}))),(0,c.w7)().domain(t).range(ie(e)))},number:function(n){var t=(0,h.Xx)(e.data,(function(e){return+e[n]}));return t[0]===t[1]?(0,c.hq)().domain(t).range(ie(e)):(e.flipAxes.includes(n)&&(t=t.map((function(e){return tempDate.unshift(e)}))),(0,c.m4)().domain(t).range(ie(e)))},string:function(n){var t={},r=[];if(e.data.map((function(r){if(void 0===r[n]&&"undefined"!==e.nullValueSeparator)return null;void 0===t[r[n]]?t[r[n]]=1:t[r[n]]=t[r[n]]+1})),e.flipAxes.includes(n))r=Object.getOwnPropertyNames(t).sort();else for(var i=Object.getOwnPropertyNames(t).sort(),s=0;s<Object.getOwnPropertyNames(t).length;s++)r.push(i.pop());var a=[];1===r.length&&(r=[" ",r[0]," "]);for(var o=ie(e)[0]/(r.length-1),u=0;u<r.length;u++)0!==a.length?a.push(a[u-1]+o):a.push(0);return(0,c.UM)().domain(r).range(a)}};Object.keys(e.dimensions).forEach((function(n){void 0!==e.dimensions[n].yscale&&null!==e.dimensions[n].yscale||(e.dimensions[n].yscale=i[e.dimensions[n].type](n))})),t.range([0,v(e)]).padding(.2);var s=window.devicePixelRatio||1;return n.selection.selectAll("canvas").style("margin-top",e.margin.top+"px").style("margin-left",e.margin.left+"px").style("width",v(e)+2+"px").style("height",B(e)+2+"px").attr("width",(v(e)+2)*s).attr("height",(B(e)+2)*s),r.foreground.strokeStyle=e.color,r.foreground.lineWidth=e.lineWidth,r.foreground.globalCompositeOperation=e.composite,r.foreground.globalAlpha=e.alpha,r.foreground.scale(s,s),r.brushed.strokeStyle=e.brushedColor,r.brushed.lineWidth=e.lineWidth,r.brushed.globalCompositeOperation=e.composite,r.brushed.globalAlpha=e.alpha,r.brushed.scale(s,s),r.highlight.lineWidth=e.highlightedLineWidth,r.highlight.scale(s,s),r.marked.lineWidth=e.markedLineWidth,r.marked.shadowColor=e.markedShadowColor,r.marked.shadowBlur=e.markedShadowBlur,r.marked.scale(s,s),this}}(t,N,p,_),N.scale=function(e,n){return function(t,r){return e.dimensions[t].yscale.domain(r),n.render.default(),n.updateAxes(),this}}(t,N),N.flip=function(e){return function(n){return e.dimensions[n].yscale.domain(e.dimensions[n].yscale.domain().reverse()),this}}(t),N.commonScale=function(e,n){return function(t,r){var i=r||"number";"undefined"===typeof t&&(t=!0),Object.keys(e.dimensions).length||n.detectDimensions(),n.autoscale();var s=Object.keys(e.dimensions).filter((function(n){return e.dimensions[n].type==i}));if(t){var a=(0,h.Xx)(s.map((function(n){return e.dimensions[n].yscale.domain()})).reduce((function(e,n){return e.concat(n)})));s.forEach((function(n){e.dimensions[n].yscale.domain(a)}))}else s.forEach((function(n){e.dimensions[n].yscale.domain((0,h.Xx)(e.data,(function(e){return+e[k]})))}));return null!==e.bundleDimension&&n.bundleDimension(e.bundleDimension),this}}(t,N),N.detectDimensions=function(e){return function(){return e.dimensions(e.applyDimensionDefaults()),this}}(N),N.detectDimensionTypes=Me,N.applyDimensionDefaults=function(e,n){return function(t){var r=n.detectDimensionTypes(e.data);return(t=t||Object.keys(r)).reduce((function(n,t,i){var s=e.dimensions[t]?e.dimensions[t]:{};return n[t]=oe({},s,{orient:ue(s.orient)?s.orient:"left",ticks:ue(s.ticks)?s.ticks:5,innerTickSize:ue(s.innerTickSize)?s.innerTickSize:6,outerTickSize:ue(s.outerTickSize)?s.outerTickSize:0,tickPadding:ue(s.tickPadding)?s.tickPadding:3,type:ue(s.type)?s.type:r[t],index:ue(s.index)?s.index:i}),n}),{})}}(t,N),N.getOrderedDimensionKeys=function(e){return function(){return Object.keys(e.dimensions).sort((function(n,t){return(0,h.V_)(e.dimensions[n].index,e.dimensions[t].index)}))}}(t),N.render=function(e,n,t){return function(){return Object.keys(e.dimensions).length||n.detectDimensions(),n.autoscale(),n.render[e.mode](),t.call("render",this),this}}(t,N,s),N.renderBrushed=function(e,n,t){return function(){return Object.keys(e.dimensions).length||n.detectDimensions(),n.renderBrushed[e.mode](),t.call("render",this),this}}(t,N,s),N.renderMarked=function(e,n,t){return function(){return Object.keys(e.dimensions).length||n.detectDimensions(),n.renderMarked[e.mode](),t.call("render",this),this}}(t,N,s),N.render.default=function(e,n,t,r){return function(){n.clear("foreground"),n.clear("highlight"),n.renderBrushed.default(),n.renderMarked.default(),e.data.forEach(Ae(e,t,r))}}(t,N,_,C),N.render.queue=function(e,n,t){return function(){n.renderBrushed.queue(),n.renderMarked.queue(),t(e.data)}}(t,N,q),N.renderBrushed.default=function(e,n,t,r,i){return function(){r.clear("brushed"),ce(e,i)&&!1!==e.brushed&&e.brushed.forEach(be(e,n,t))}}(t,_,C,N,P),N.renderBrushed.queue=function(e,n,t){return function(){ce(e,n)?t(e.brushed):t([])}}(t,P,I),N.renderMarked.default=function(e,n,t,r){return function(){n.clear("marked"),e.marked.length&&e.marked.forEach(ye(e,t,r))}}(t,N,_,C),N.renderMarked.queue=function(e,n){return function(){e.marked?n(e.marked):n([])}}(t,X),N.compute_real_centroids=function(e,n){return function(t){return Object.keys(e.dimensions).map((function(r){return[n(r),e.dimensions[r].yscale(t[r])]}))}}(t,C),N.shadows=function(e,n){return function(){return e.shadows=!0,n.alphaOnBrushed(.1),n.render(),this}}(l,N),N.axisDots=function(e,n,t){return function(r){var i=r||.1,s=n.ctx.dots,a=2*Math.PI;s.globalAlpha=(0,h.jk)([1/Math.pow(e.data.length,.5),1]),e.data.forEach((function(n){(0,d.jO)(e.dimensions).forEach((function(r,o){s.beginPath(),s.arc(t(r),e.dimensions[r.key].yscale(n[r]),i,0,a),s.stroke(),s.fill()}))}))}}(t,N,C),N.clear=function(e,n,t,r){return function(i){return t[i].clearRect(0,0,v(e)+2,B(e)+2),"brushed"===i&&ce(e,r)&&(t.brushed.fillStyle=n.selection.style("background-color"),t.brushed.globalAlpha=1-e.alphaOnBrushed,t.brushed.fillRect(0,0,v(e)+2,B(e)+2),t.brushed.globalAlpha=e.alpha),this}}(t,N,_,P),N.createAxes=function(e,n,t,i,s){return function(){return void 0!==n.g()&&n.removeAxes(),n._g=n.svg.selectAll(".dimension").data(n.getOrderedDimensionKeys(),(function(e){return e})).enter().append("svg:g").attr("class","dimension").attr("transform",(function(e){return"translate("+t(e)+")"})),n._g.append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each((function(t){var i=(0,r.A)(this).call(n.applyAxisConfig(s,e.dimensions[t]));i.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),i.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")})).append("svg:text").attr("text-anchor","middle").attr("y",0).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")").attr("x",0).attr("class","label").text(ne(e)).on("dblclick",te(e,n,s)).on("wheel",re(e,n)),"top"===e.nullValueSeparator?n.svg.append("line").attr("x1",0).attr("y1",1+e.nullValueSeparatorPadding.top).attr("x2",v(e)).attr("y2",1+e.nullValueSeparatorPadding.top).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"):"bottom"===e.nullValueSeparator&&n.svg.append("line").attr("x1",0).attr("y1",B(e)+1-e.nullValueSeparatorPadding.bottom).attr("x2",v(e)).attr("y2",B(e)+1-e.nullValueSeparatorPadding.bottom).attr("stroke-width",1).attr("stroke","#777").attr("fill","none").attr("shape-rendering","crispEdges"),i.axes=!0,this}}(t,N,p,l,O),N.removeAxes=function(e){return function(){return e._g.remove(),delete e._g,this}}(N),N.updateAxes=function(e,n,t,i,s){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===a&&(a=e.animationTime);var o=n.svg.selectAll(".dimension").data(n.getOrderedDimensionKeys());if(o.enter().append("svg:g").attr("class","dimension").attr("transform",(function(e){return"translate("+t(e)+")"})).style("opacity",0).append("svg:g").attr("class","axis").attr("transform","translate(0,0)").each((function(t){var s=(0,r.A)(this).call(n.applyAxisConfig(i,e.dimensions[t]));s.selectAll("path").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges"),s.selectAll("line").style("fill","none").style("stroke","#222").style("shape-rendering","crispEdges")})).append("svg:text").attr("text-anchor","middle").attr("class","label").attr("x",0).attr("y",0).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")").text(ne(e)).on("dblclick",te(e,n,i)).on("wheel",re(e,n)),o.attr("opacity",0),o.select(".axis").transition().duration(a).each((function(t){(0,r.A)(this).call(n.applyAxisConfig(i,e.dimensions[t]))})),o.select(".label").transition().duration(a).text(ne(e)).attr("transform","translate(0,-5) rotate("+e.dimensionTitleRotation+")"),o.exit().remove(),n.svg.selectAll(".dimension").transition().duration(a).attr("transform",(function(e){return"translate("+t(e)+")"})).style("opacity",1),n.svg.selectAll(".axis").transition().duration(a).each((function(t){(0,r.A)(this).call(n.applyAxisConfig(i,e.dimensions[t]))})),s.brushable&&n.brushable(),s.reorderable&&n.reorderable(),"None"!==n.brushMode()){var u=n.brushMode();n.brushMode("None"),n.brushMode(u)}}}(t,N,C,O,l),N.applyAxisConfig=le,N.brushable=function(e,n,t){return function(){return n.g()||n.createAxes(),n.g().append("svg:g").attr("class","brush").each((function(t){void 0!==e.dimensions[t]&&(e.dimensions[t].brush=(0,o.g2)((0,r.A)(this)).extent([[-15,0],[15,e.dimensions[t].yscale.range()[0]]]),(0,r.A)(this).call(e.dimensions[t].brush.on("start",(function(){null===i.f0.sourceEvent||i.f0.sourceEvent.ctrlKey||n.brushReset()})).on("brush",(function(){i.f0.sourceEvent.ctrlKey||n.brush()})).on("end",(function(){if(i.f0.sourceEvent.ctrlKey){var s=(0,r.A)(this).select(".selection").nodes()[0].outerHTML;s=s.replace('class="selection"','class="selection dummy selection-'+e.brushes.length+'"');var a=(0,r.A)(this).nodes()[0].__data__,u={id:e.brushes.length,extent:(0,o.ZR)(this),html:s,data:a};e.brushes.push(u),(0,r.A)((0,r.A)(this).nodes()[0].parentNode).select(".axis").nodes()[0].outerHTML+=s,n.brush(),e.dimensions[t].brush.move((0,r.A)(this,null)),(0,r.A)(this).select(".selection").attr("style","display:none"),n.brushable()}else n.brush()}))),(0,r.A)(this).on("dblclick",(function(){n.brushReset(t)})))})),t.brushable=!0,this}}(t,N,l),N.brushReset=function(e,n){return function(t){for(var i=[],s=0;s<e.brushes.length;s++)e.brushes[s].data!==t&&i.push(e.brushes[s]);if(e.brushes=i,e.brushed=!1,void 0!==n.g())for(var a=n.g().selectAll(".brush").nodes(),o=0;o<a.length;o++)a[o].__data__===t&&((0,r.A)((0,r.A)(a[o]).nodes()[0].parentNode).selectAll(".dummy").remove(),e.dimensions[t].brush.move((0,r.A)(a[o],null)));return this}}(t,N),N.selected=function(e,n){return function(){var t=[],r=[],i={};if(0===e.brushes.length){for(var s=n.g().selectAll(".brush").nodes(),a=0;a<s.length;a++)if(null!==(0,o.ZR)(s[a])){t.push(s[a].__data__);var u=[],l=(0,o.ZR)(s[a]);if("number"===typeof e.dimensions[s[a].__data__].yscale.domain()[0]){for(var c=0;c<l.length;c++)t.includes(s[a].__data__)&&e.flipAxes.includes(s[a].__data__)?u.push(e.dimensions[s[a].__data__].yscale.invert(l[c])):1!==e.dimensions[s[a].__data__].yscale()&&u.unshift(e.dimensions[s[a].__data__].yscale.invert(l[c]));r.push(u);for(var h=0;h<r.length;h++)0===r[h].length&&(r[h]=[1,1])}else{i[s[a].__data__]=(0,o.ZR)(s[a]);for(var d=e.dimensions[s[a].__data__].yscale.range(),f=(e.dimensions[s[a].__data__].yscale.domain(),0);f<d.length;f++)d[f]>=l[0]&&d[f]<=l[1]&&t.includes(s[a].__data__)&&e.flipAxes.includes(s[a].__data__)?u.push(d[f]):d[f]>=l[0]&&d[f]<=l[1]&&u.unshift(d[f]);r.push(u);for(var m=0;m<r.length;m++)0===r[m].length&&(r[m]=[1,1])}}var g={date:function(n,t,r){var s=n[t],a=e.dimensions[t].yscale.domain().indexOf(s),o=e.dimensions[t].yscale.range()[a];return o>=i[t][0]&&o<=i[t][1]},number:function(e,n,t){return r[t][0]<=e[n]&&e[n]<=r[t][1]},string:function(n,t,r){var s=n[t],a=e.dimensions[t].yscale.domain().indexOf(s),o=e.dimensions[t].yscale.range()[a];return o>=i[t][0]&&o<=i[t][1]}};return e.data.filter((function(n){return t.every((function(t,r){return g[e.dimensions[t].type](n,t,r)}))}))}for(var v=[],p=function(n){var t=e.brushes[n],s=[],a=t.extent,o=[t.data];if("number"===typeof e.dimensions[t.data].yscale.domain()[0]){for(var u=0;u<a.length;u++)o.includes(t.data)&&e.flipAxes.includes(t.data)?s.push(e.dimensions[t.data].yscale.invert(a[u])):1!==e.dimensions[t.data].yscale()&&s.unshift(e.dimensions[t.data].yscale.invert(a[u]));r.push(s);for(var l=0;l<r.length;l++)0===r[l].length&&(r[l]=[1,1])}else{i[t.data]=t.extent;for(var c=e.dimensions[t.data].yscale.range(),h=(e.dimensions[t.data].yscale.domain(),0);h<c.length;h++)c[h]>=a[0]&&c[h]<=a[1]&&o.includes(t.data)&&e.flipAxes.includes(t.data)?s.push(c[h]):c[h]>=a[0]&&c[h]<=a[1]&&s.unshift(c[h]);r.push(s);for(var d=0;d<r.length;d++)0===r[d].length&&(r[d]=[1,1])}for(var f={date:function(n,t,r){var s=n[t],a=e.dimensions[t].yscale.domain().indexOf(s),o=e.dimensions[t].yscale.range()[a];return o>=i[t][0]&&o<=i[t][1]},number:function(e,t,i){return r[n][0]<=e[t]&&e[t]<=r[n][1]},string:function(n,t,r){var s=n[t],a=e.dimensions[t].yscale.domain().indexOf(s),o=e.dimensions[t].yscale.range()[a];return o>=i[t][0]&&o<=i[t][1]}},m=e.data.filter((function(n){return o.every((function(t,r){return f[e.dimensions[t].type](n,t,r)}))})),g=0;g<m.length;g++)v.push(m[g]);o=[],i={}},y=0;y<e.brushes.length;y++)p(y);return v}}(t,N),N.reorderable=function(e,n,t,s,a,o){return function(){void 0===n.g()&&n.createAxes();var l=n.g();return l.style("cursor","move").call((0,u.A)().on("start",(function(e){a[e]=this.__origin__=t(e)})).on("drag",(function(r){a[r]=Math.min(v(e),Math.max(0,this.__origin__+=i.f0.dx)),n.sortDimensions(),t.domain(n.getOrderedDimensionKeys()),n.render(),l.attr("transform",(function(e){return"translate("+s(e)+")"}))})).on("end",(function(e){delete this.__origin__,delete a[e],(0,r.A)(this).transition().attr("transform","translate("+t(e)+")"),n.render(),n.renderMarked()}))),o.reorderable=!0,this}}(t,N,p,C,x,l),N.reorder=function(e,n,t){return function(r){var i=n.getOrderedDimensionKeys()[0];if(n.sortDimensionsByRowData(r),i!==n.getOrderedDimensionKeys()[0]){t.domain(n.getOrderedDimensionKeys());var s=e.highlighted.slice(0);n.unhighlight();var a=e.marked.slice(0);n.unmark(),n.g().transition().duration(1500).attr("transform",(function(e){return"translate("+t(e)+")"})),n.render(),0!==s.length&&n.highlight(s),0!==a.length&&n.mark(a)}}}(t,N,p),N.sortDimensionsByRowData=function(e){return function(n){var t=Object.assign({},e.dimensions),r=Object.keys(e.dimensions).sort((function(t,r){var i=e.dimensions[t].yscale(n[t])-e.dimensions[r].yscale(n[r]);return 0===i?t.localeCompare(r):i}));e.dimensions={},r.forEach((function(n,r){e.dimensions[n]=t[n],e.dimensions[n].index=r}))}}(t),N.sortDimensions=function(e,n){return function(){var t=Object.assign({},e.dimensions),r=Object.keys(e.dimensions).sort((function(e,t){return n(e)-n(t)===0?1:n(e)-n(t)}));e.dimensions={},r.forEach((function(n,r){e.dimensions[n]=t[n],e.dimensions[n].index=r}))}}(t,C),N.adjacent_pairs=xe,N.interactive=function(e){return function(){return e.interactive=!0,this}}(l),N.xscale=p,N.ctx=_,N.canvas=R,N.g=function(){return N._g},N.resize=function(e,n,t,r){return function(){return n.selection.select("svg").attr("width",e.width).attr("height",e.height),n.svg.attr("transform","translate("+e.margin.left+","+e.margin.top+")"),t.brushable&&n.brushReset(),n.autoscale(),n.g()&&n.createAxes(),t.brushable&&n.brushable(),t.reorderable&&n.reorderable(),r.call("resize",this,{width:e.width,height:e.height,margin:e.margin}),this}}(t,N,l,s),N.highlight=we(t,N,R,s,_,C),N.unhighlight=function(e,n,t){return function(){return e.highlighted=[],n.clear("highlight"),(0,a.A)([t.foreground,t.brushed]).classed("faded",!1),this}}(t,N,R),N.mark=function(e,n,t,r,i,s){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===n?e.marked:(e.marked=e.marked.concat(n),(0,a.A)([t.foreground,t.brushed]).classed("dimmed",!0),n.forEach(ye(e,i,s)),r.call("mark",this,n),this)}}(t,0,R,s,_,C),N.unmark=function(e,n,t){return function(){return e.marked=[],n.clear("marked"),(0,a.A)([t.foreground,t.brushed]).classed("dimmed",!1),this}}(t,N,R),N.intersection=$,N.mergeParcoords=function(e){return function(n){var t=window.devicePixelRatio||1,i=document.createElement("canvas"),s=e.canvas.foreground,a=Number(s.style.marginLeft.replace("px","")),o=Number(s.style.marginTop.replace("px",""))+15,u=(s.clientWidth+a)*t,l=(s.clientHeight+o)*t;i.width=u+50,i.height=l+30,i.style.width=i.width/t+"px",i.style.height=i.height/t+"px";var c=i.getContext("2d");for(var h in c.fillStyle="#ffffff",c.fillRect(0,0,i.width,i.height),e.canvas)c.drawImage(e.canvas[h],a*t,o*t,u-a*t,l-o*t);window.URL||window.webkitURL||window;var d=new XMLSerializer,f=e.selection.select("svg").node().cloneNode(!0);f.setAttribute("transform","translate(0,15)"),f.setAttribute("height",f.getAttribute("height")+15),(0,r.A)(f).selectAll("text").attr("fill","black");var m=d.serializeToString(f),g="data:image/svg+xml;base64,"+window.btoa(m),v=new Image;v.onload=function(){c.drawImage(v,0,0,v.width*t,v.height*t),"function"===typeof n&&n(i)},v.src=g}}(N),N.brushModes=function(){return Object.getOwnPropertyNames(P.modes)},N.brushMode=ee(P,t,N),function(e,n,t,r){var i={brushes:{},brushNodes:{}};e.modes["1D-axes"]={install:w(i,n,t,r,e),uninstall:A(i,t),selected:b(i,n,e),brushState:y(i,n,t)}}(P,t,N,s),function(e,n,t,r,i){var s={strums:{},strumRect:{}};e.modes["2D-strums"]={install:V(e,s,n,t,r,i),uninstall:j(s,t),selected:T(e,s,n),brushState:function(){return s.strums}}}(P,t,N,s,p),function(e,n,t,r,i){var s={arcs:{},strumRect:{}};e.modes.angular={install:Q(e,s,n,t,r,i),uninstall:F(s,t),selected:Y(e,s,n),brushState:function(){return s.arcs}}}(P,t,N,s,p),function(e,n,t,r){var i={brushes:{},brushNodes:{}};e.modes["1D-axes-multi"]={install:E(i,n,t,r,e),uninstall:D(i,t),selected:M(i,n,e),brushState:S(i,n,t)}}(P,t,N,s),N.version="2.2.10",N.toString=function(e){return function(){return"Parallel Coordinates: "+Object.keys(e.dimensions).length+" dimensions ("+Object.keys(e.data[0]).length+" total) , "+e.data.length+" rows"}}(t),N.toType=ke,N.toTypeCoerceNumbers=Oe,N}},27793:function(e,n,t){var r,i;i=window,function(){if(!i.requestAnimationFrame){if(i.webkitRequestAnimationFrame)return i.requestAnimationFrame=i.webkitRequestAnimationFrame,void(i.cancelAnimationFrame=i.webkitCancelAnimationFrame||i.webkitCancelRequestAnimationFrame);var e=0;i.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-e)),s=i.setTimeout((function(){n(t+r)}),r);return e=t+r,s},i.cancelAnimationFrame=function(e){clearTimeout(e)}}}(),void 0===(r=function(){return i.requestAnimationFrame}.call(n,t,n,e))||(e.exports=r)}}]);