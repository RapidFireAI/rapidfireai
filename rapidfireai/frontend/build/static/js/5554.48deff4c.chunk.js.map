{"version":3,"file":"static/js/5554.48deff4c.chunk.js","mappings":"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","sources":["common/components/KeyValueTagFullViewModal.tsx","common/components/KeyValueTag.tsx","model-registry/components/aliases/ModelVersionTableAliasesCell.tsx","common/utils/StringUtils.ts","shared/building_blocks/CopyButton.tsx","common/utils/LocalStorageUtils.ts","common/components/TagSelectDropdown.tsx","common/hooks/useEditKeyValueTagsModal.tsx","common/components/KeyValueTagsEditorCell.tsx","model-registry/components/ModelVersionTable.tsx","model-registry/components/ModelView.tsx","model-registry/components/ModelPage.tsx"],"sourcesContent":["import React from 'react';\nimport { Modal, Typography, CopyIcon, useDesignSystemTheme } from '@databricks/design-system';\nconst { Paragraph } = Typography;\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\n\nexport interface KeyValueTagFullViewModalProps {\n  tagKey: string;\n  tagValue: string;\n  setIsKeyValueTagFullViewModalVisible: React.Dispatch<React.SetStateAction<boolean>>;\n  isKeyValueTagFullViewModalVisible: boolean;\n}\n\nexport const KeyValueTagFullViewModal = React.memo((props: KeyValueTagFullViewModalProps) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <Modal\n      componentId=\"codegen_mlflow_app_src_common_components_keyvaluetagfullviewmodal.tsx_17\"\n      title={'Tag: ' + props.tagKey}\n      visible={props.isKeyValueTagFullViewModalVisible}\n      onCancel={() => props.setIsKeyValueTagFullViewModalVisible(false)}\n    >\n      <div css={{ display: 'flex' }}>\n        <Paragraph css={{ flexGrow: 1 }}>\n          <pre\n            css={{\n              backgroundColor: theme.colors.backgroundPrimary,\n              marginTop: theme.spacing.sm,\n              whiteSpace: 'pre-wrap',\n              wordBreak: 'break-all',\n            }}\n          >\n            {props.tagValue}\n          </pre>\n        </Paragraph>\n        <div\n          css={{\n            marginTop: theme.spacing.sm,\n          }}\n        >\n          <CopyButton copyText={props.tagValue} showLabel={false} icon={<CopyIcon />} aria-label=\"Copy\" />\n        </div>\n      </div>\n    </Modal>\n  );\n});\n","import { Tag, LegacyTooltip, Typography } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\nimport React, { useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { KeyValueTagFullViewModal } from './KeyValueTagFullViewModal';\nimport { Interpolation, Theme } from '@emotion/react';\n\n/**\n * An arbitrary number that is used to determine if a tag is too\n * long and should be truncated. We want to avoid short keys or values\n * in a long tag to be truncated\n * */\nconst TRUNCATE_ON_CHARS_LENGTH = 30;\n\nfunction getTruncatedStyles(shouldTruncate = true): Interpolation<Theme> {\n  return shouldTruncate\n    ? {\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        textWrap: 'nowrap',\n        whiteSpace: 'nowrap' as const,\n      }\n    : { whiteSpace: 'nowrap' as const };\n}\n\n/**\n * A <Tag /> wrapper used for displaying key-value entity\n */\nexport const KeyValueTag = ({\n  isClosable = false,\n  onClose,\n  tag,\n  enableFullViewModal = false,\n  charLimit = TRUNCATE_ON_CHARS_LENGTH,\n  maxWidth = 300,\n  className,\n}: {\n  isClosable?: boolean;\n  onClose?: () => void;\n  tag: KeyValueEntity;\n  enableFullViewModal?: boolean;\n  charLimit?: number;\n  maxWidth?: number;\n  className?: string;\n}) => {\n  const intl = useIntl();\n\n  const [isKeyValueTagFullViewModalVisible, setIsKeyValueTagFullViewModalVisible] = useState(false);\n\n  const { shouldTruncateKey, shouldTruncateValue } = getKeyAndValueComplexTruncation(tag, charLimit);\n  const allowFullViewModal = enableFullViewModal && (shouldTruncateKey || shouldTruncateValue);\n\n  const fullViewModalLabel = intl.formatMessage({\n    defaultMessage: 'Click to see more',\n    description: 'Run page > Overview > Tags cell > Tag',\n  });\n\n  return (\n    <div>\n      <Tag\n        componentId=\"codegen_mlflow_app_src_common_components_keyvaluetag.tsx_60\"\n        closable={isClosable}\n        onClose={onClose}\n        title={tag.key}\n        className={className}\n      >\n        <LegacyTooltip title={allowFullViewModal ? fullViewModalLabel : ''}>\n          <span\n            css={{ maxWidth, display: 'inline-flex' }}\n            onClick={() => (allowFullViewModal ? setIsKeyValueTagFullViewModalVisible(true) : undefined)}\n          >\n            <Typography.Text bold title={tag.key} css={getTruncatedStyles(shouldTruncateKey)}>\n              {tag.key}\n            </Typography.Text>\n            {tag.value && (\n              <Typography.Text title={tag.value} css={getTruncatedStyles(shouldTruncateValue)}>\n                : {tag.value}\n              </Typography.Text>\n            )}\n          </span>\n        </LegacyTooltip>\n      </Tag>\n      <div>\n        {isKeyValueTagFullViewModalVisible && (\n          <KeyValueTagFullViewModal\n            tagKey={tag.key}\n            tagValue={tag.value}\n            isKeyValueTagFullViewModalVisible={isKeyValueTagFullViewModalVisible}\n            setIsKeyValueTagFullViewModalVisible={setIsKeyValueTagFullViewModalVisible}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport function getKeyAndValueComplexTruncation(\n  tag: KeyValueEntity,\n  charLimit = TRUNCATE_ON_CHARS_LENGTH,\n): { shouldTruncateKey: boolean; shouldTruncateValue: boolean } {\n  const { key, value } = tag;\n  const fullLength = key.length + value.length;\n  const isKeyLonger = key.length > value.length;\n  const shorterLength = isKeyLonger ? value.length : key.length;\n\n  // No need to truncate if tag is short enough\n  if (fullLength <= charLimit) return { shouldTruncateKey: false, shouldTruncateValue: false };\n  // If the shorter string is too long, truncate both key and value.\n  if (shorterLength > charLimit / 2) return { shouldTruncateKey: true, shouldTruncateValue: true };\n\n  // Otherwise truncate the longer string\n  return {\n    shouldTruncateKey: isKeyLonger,\n    shouldTruncateValue: !isKeyLonger,\n  };\n}\n","import { Button, PencilIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { AliasTag } from '../../../common/components/AliasTag';\nimport { FormattedMessage } from 'react-intl';\n\ninterface ModelVersionTableAliasesCellProps {\n  aliases?: string[];\n  modelName: string;\n  version: string;\n  onAddEdit: () => void;\n  className?: string;\n}\n\nexport const ModelVersionTableAliasesCell = ({\n  aliases = [],\n  onAddEdit,\n  className,\n}: ModelVersionTableAliasesCellProps) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <div\n      css={{\n        maxWidth: 300,\n        display: 'flex',\n        flexWrap: 'wrap',\n        alignItems: 'flex-start',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        rowGap: theme.spacing.xs / 2,\n        columnGap: theme.spacing.xs,\n      }}\n      className={className}\n    >\n      {aliases.length < 1 ? (\n        <Button\n          componentId=\"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_30\"\n          size=\"small\"\n          type=\"link\"\n          onClick={onAddEdit}\n        >\n          <FormattedMessage\n            defaultMessage=\"Add\"\n            description=\"Model registry > model version table > aliases column > 'add' button label\"\n          />\n        </Button>\n      ) : (\n        <>\n          {aliases.map((alias) => (\n            <AliasTag value={alias} key={alias} css={{ marginTop: theme.spacing.xs / 2 }} />\n          ))}\n          <Button\n            componentId=\"codegen_mlflow_app_src_model-registry_components_aliases_modelversiontablealiasescell.tsx_41\"\n            size=\"small\"\n            icon={<PencilIcon />}\n            onClick={onAddEdit}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n","import _ from 'lodash';\n// Import pako lazily to reduce bundle size\nconst lazyPako = () => import('pako');\n\nexport const truncateToFirstLineWithMaxLength = (str: string, maxLength: number): string => {\n  const truncated = _.truncate(str, {\n    length: maxLength,\n  });\n  return _.takeWhile(truncated, (char) => char !== '\\n').join('');\n};\n\nexport const capitalizeFirstChar = (str: unknown) => {\n  if (!str || typeof str !== 'string' || str.length < 1) {\n    return str;\n  }\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n};\n\nexport const middleTruncateStr = (str: string, maxLen: number) => {\n  if (str.length > maxLen) {\n    const firstPartLen = Math.floor((maxLen - 3) / 2);\n    const lastPartLen = maxLen - 3 - firstPartLen;\n    return str.substring(0, firstPartLen) + '...' + str.substring(str.length - lastPartLen, str.length);\n  } else {\n    return str;\n  }\n};\n\nconst capitalizeFirstLetter = (string: string) => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/* eslint-disable no-bitwise */\n/**\n * UTF-8 safe version of base64 encoder\n * Source: http://www.webtoolkit.info/javascript_base64.html\n *\n * @param {string} input - Text to encode\n */\nexport const btoaUtf8 = (input: string) => {\n  let output = '';\n  let i = 0;\n\n  const result = _utf8_encode(input);\n\n  while (i < result.length) {\n    const chr1 = result.charCodeAt(i++);\n    const chr2 = result.charCodeAt(i++);\n    const chr3 = result.charCodeAt(i++);\n\n    const enc1 = chr1 >> 2;\n    const enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    let enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    let enc4 = chr3 & 63;\n\n    if (isNaN(chr2)) {\n      enc4 = 64;\n      enc3 = enc4;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n\n    output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n  }\n\n  return output;\n};\n\n/**\n * UTF-8 safe version of base64 decoder\n * Source: http://www.webtoolkit.info/javascript_base64.html\n *\n * @param {string} input - Text to decode\n */\nexport const atobUtf8 = (input: string) => {\n  let output = '';\n  let i = 0;\n\n  const result = input?.replace(/[^A-Za-z0-9+/=]/g, '') || '';\n\n  while (i < result.length) {\n    const enc1 = _keyStr.indexOf(result.charAt(i++));\n    const enc2 = _keyStr.indexOf(result.charAt(i++));\n    const enc3 = _keyStr.indexOf(result.charAt(i++));\n    const enc4 = _keyStr.indexOf(result.charAt(i++));\n\n    const chr1 = (enc1 << 2) | (enc2 >> 4);\n    const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n    const chr3 = ((enc3 & 3) << 6) | enc4;\n\n    output += String.fromCharCode(chr1);\n\n    if (enc3 !== 64) {\n      output += String.fromCharCode(chr2);\n    }\n\n    if (enc4 !== 64) {\n      output += String.fromCharCode(chr3);\n    }\n  }\n\n  return _utf8_decode(output);\n};\n\n/**\n * (private method) does a UTF-8 encoding\n *\n * @private\n * @param {string} string - Text to encode\n */\nconst _utf8_encode = (string = '') => {\n  const result = string.replace(/\\r\\n/g, '\\n');\n  let utftext = '';\n\n  for (let n = 0; n < result.length; n++) {\n    const c = result.charCodeAt(n);\n\n    if (c < 128) {\n      utftext += String.fromCharCode(c);\n    } else if (c > 127 && c < 2048) {\n      utftext += String.fromCharCode((c >> 6) | 192) + String.fromCharCode((c & 63) | 128);\n    } else {\n      utftext +=\n        String.fromCharCode((c >> 12) | 224) +\n        String.fromCharCode(((c >> 6) & 63) | 128) +\n        String.fromCharCode((c & 63) | 128);\n    }\n  }\n\n  return utftext;\n};\n\n/**\n * (private method) does a UTF-8 decoding\n *\n * @private\n * @param {string} utftext - UTF-8 text to dencode\n */\nconst _utf8_decode = (utftext = '') => {\n  let string = '';\n  let i = 0;\n\n  while (i < utftext.length) {\n    const c = utftext.charCodeAt(i);\n\n    if (c < 128) {\n      string += String.fromCharCode(c);\n      i++;\n    } else if (c > 191 && c < 224) {\n      const c2 = utftext.charCodeAt(i + 1);\n      string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n      i += 2;\n    } else {\n      const c2 = utftext.charCodeAt(i + 1);\n      const c3 = utftext.charCodeAt(i + 2);\n      string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n      i += 3;\n    }\n  }\n  return string;\n};\n/* eslint-enable no-bitwise */\n\n/**\n * Returns a SHA256 hash of the input string\n */\nexport const getStringSHA256 = (input: string) => {\n  return crypto.subtle.digest('SHA-256', new TextEncoder().encode(input)).then((arrayBuffer) => {\n    return Array.prototype.map.call(new Uint8Array(arrayBuffer), (x) => ('00' + x.toString(16)).slice(-2)).join('');\n  });\n};\n\nconst COMPRESSED_TEXT_DEFLATE_PREFIX = 'deflate;';\n\nexport const textCompressDeflate = async (text: string) => {\n  const pako = await lazyPako();\n  const binaryData = pako.deflate(text);\n\n  // Buffer-based implementation\n  if (typeof Buffer !== 'undefined') {\n    const b64encoded = Buffer.from(binaryData).toString('base64');\n    return `${COMPRESSED_TEXT_DEFLATE_PREFIX}${b64encoded}`;\n  }\n\n  // btoa-based implementation\n  const binaryString = Array.from(binaryData, (byte) => String.fromCodePoint(byte)).join('');\n  return `${COMPRESSED_TEXT_DEFLATE_PREFIX}${btoa(binaryString)}`;\n};\n\nexport const textDecompressDeflate = async (compressedText: string) => {\n  const pako = await lazyPako();\n  if (!compressedText.startsWith(COMPRESSED_TEXT_DEFLATE_PREFIX)) {\n    throw new Error('Invalid compressed text, payload header invalid');\n  }\n  const compressedTextWithoutPrefix = compressedText.slice(COMPRESSED_TEXT_DEFLATE_PREFIX.length);\n\n  // Buffer-based implementation\n  if (typeof Buffer !== 'undefined') {\n    const binaryString = Buffer.from(compressedTextWithoutPrefix, 'base64');\n    return pako.inflate(\n      // This doesn't fail in Mlflow-Copybara-Tester-Pr. TODO: check why.\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore [FEINF-4084] No overload matches this call.\n      binaryString,\n      { to: 'string' },\n    );\n  }\n\n  // atob-based implementation\n  const binaryString = atob(compressedTextWithoutPrefix);\n  return pako.inflate(\n    Uint8Array.from(binaryString, (m) => m.codePointAt(0) ?? 0),\n    { to: 'string' },\n  );\n};\n\nexport const isTextCompressedDeflate = (text: string) => text.startsWith(COMPRESSED_TEXT_DEFLATE_PREFIX);\n","import React, { useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { Button, type ButtonProps, LegacyTooltip } from '@databricks/design-system';\n\ninterface CopyButtonProps extends Partial<ButtonProps> {\n  copyText: string;\n  showLabel?: React.ReactNode;\n  componentId?: string;\n}\n\nexport const CopyButton = ({ copyText, showLabel = true, componentId, ...buttonProps }: CopyButtonProps) => {\n  const [showTooltip, setShowTooltip] = useState(false);\n\n  const handleClick = () => {\n    navigator.clipboard.writeText(copyText);\n    setShowTooltip(true);\n    setTimeout(() => {\n      setShowTooltip(false);\n    }, 3000);\n  };\n\n  const handleMouseLeave = () => {\n    setShowTooltip(false);\n  };\n\n  return (\n    <LegacyTooltip\n      title={\n        <FormattedMessage defaultMessage=\"Copied\" description=\"Tooltip text shown when copy operation completes\" />\n      }\n      dangerouslySetAntdProps={{\n        visible: showTooltip,\n      }}\n    >\n      <Button\n        componentId={componentId ?? 'mlflow.shared.copy_button'}\n        type=\"primary\"\n        onClick={handleClick}\n        onMouseLeave={handleMouseLeave}\n        css={{ 'z-index': 1 }}\n        // Define children as a explicit prop so it can be easily overrideable\n        children={\n          showLabel ? <FormattedMessage defaultMessage=\"Copy\" description=\"Button text for copy button\" /> : undefined\n        }\n        {...buttonProps}\n      />\n    </LegacyTooltip>\n  );\n};\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\n/**\n * Utils for working with local storage.\n */\n// eslint-disable-next-line @typescript-eslint/no-extraneous-class -- TODO(FEINF-4274)\nexport default class LocalStorageUtils {\n  /**\n   * Protocol version of MLflow's local storage. Should be incremented on any breaking change in how\n   * data persisted in local storage is used, to prevent old (invalid) cached data from being loaded\n   * and breaking the application.\n   */\n  static version = '1.1';\n\n  /**\n   * Return a LocalStorageStore corresponding to the specified component and ID, where the ID\n   * can be used to disambiguate between multiple instances of cached data for the same component\n   * (e.g. cached data for multiple experiments).\n   */\n  static getStoreForComponent(componentName: any, id: any) {\n    return new LocalStorageStore([componentName, id].join('-'), 'localStorage');\n  }\n\n  static getSessionScopedStoreForComponent(componentName: any, id: any) {\n    return new LocalStorageStore([componentName, id].join('-'), 'sessionStorage');\n  }\n}\n\n/**\n * Interface to browser local storage that allows for setting key-value pairs under the specified\n * \"scope\".\n */\nclass LocalStorageStore {\n  constructor(scope: any, type: any) {\n    this.scope = scope;\n    if (type === 'localStorage') {\n      this.storageObj = window.localStorage;\n    } else {\n      this.storageObj = window.sessionStorage;\n    }\n  }\n  static reactComponentStateKey = 'ReactComponentState';\n\n  scope: any;\n  storageObj: any;\n\n  /**\n   * Loads React component state cached in local storage into a vanilla JS object.\n   */\n  loadComponentState() {\n    const storedVal = this.getItem(LocalStorageStore.reactComponentStateKey);\n    if (storedVal) {\n      return JSON.parse(storedVal);\n    }\n    return {};\n  }\n\n  /**\n   * Save React component state in local storage.\n   * @param stateRecord: Immutable.Record instance or plain object containing component state.\n   */\n  saveComponentState(stateRecord: any) {\n    const targetValue = typeof stateRecord.toJSON === 'function' ? stateRecord.toJSON() : stateRecord;\n    this.setItem(LocalStorageStore.reactComponentStateKey, JSON.stringify(targetValue));\n  }\n\n  /**\n   * Helper method for constructing a scoped key to use for setting/getting values in\n   * local storage.\n   */\n  withScopePrefix(key: any) {\n    return ['MLflowLocalStorage', LocalStorageUtils.version, this.scope, key].join('-');\n  }\n\n  /** Save the specified key-value pair in local storage. */\n  setItem(key: any, value: any) {\n    this.storageObj.setItem(this.withScopePrefix(key), value);\n  }\n\n  /** Fetch the value corresponding to the passed-in key from local storage. */\n  getItem(key: any) {\n    return this.storageObj.getItem(this.withScopePrefix(key));\n  }\n}\n","import { sortedIndexOf } from 'lodash';\nimport React, { useMemo, useRef, useState } from 'react';\nimport { Control, useController } from 'react-hook-form';\nimport { useIntl } from 'react-intl';\n\nimport { PlusIcon, LegacySelect, LegacyTooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\n\n/**\n * Will show an extra row at the bottom of the dropdown menu to create a new tag when\n * The user has typed something in the search input\n * and either\n * 1. The search input is not an exact match for an existing tag name\n * 2. There are no tags available based on search input\n */\n\nfunction DropdownMenu(menu: React.ReactElement, allAvailableTags: string[]) {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n  const searchValue = menu.props.searchValue.toLowerCase();\n\n  const resolvedMenu = useMemo(() => {\n    if (!searchValue) return menu;\n\n    const doesTagExists = sortedIndexOf(allAvailableTags, searchValue) >= 0;\n    if (doesTagExists) return menu;\n\n    const isValidTagKey = /^[^,.:/=\\-\\s]+$/.test(searchValue);\n\n    // Overriding the menu to add a new option at the top\n    return React.cloneElement(menu, {\n      flattenOptions: [\n        {\n          data: {\n            value: searchValue,\n            disabled: !isValidTagKey,\n            style: {\n              color: isValidTagKey ? theme.colors.actionTertiaryTextDefault : theme.colors.actionDisabledText,\n            },\n            children: (\n              <LegacyTooltip\n                title={\n                  isValidTagKey\n                    ? undefined\n                    : intl.formatMessage({\n                        defaultMessage: ', . : / - = and blank spaces are not allowed',\n                        description:\n                          'Key-value tag editor modal > Tag dropdown Manage Modal > Invalid characters error',\n                      })\n                }\n                placement=\"right\"\n              >\n                <span css={{ display: 'block' }}>\n                  <PlusIcon css={{ marginRight: theme.spacing.sm }} />\n                  {intl.formatMessage(\n                    {\n                      defaultMessage: 'Add tag \"{tagKey}\"',\n                      description: 'Key-value tag editor modal > Tag dropdown Manage Modal > Add new tag button',\n                    },\n                    {\n                      tagKey: searchValue,\n                    },\n                  )}\n                </span>\n              </LegacyTooltip>\n            ),\n          },\n          key: searchValue,\n          groupOption: false,\n        },\n        ...menu.props.flattenOptions,\n      ],\n    });\n  }, [allAvailableTags, menu, searchValue, intl, theme]);\n\n  return resolvedMenu;\n}\n\nfunction getDropdownMenu(allAvailableTags: string[]) {\n  return (menu: React.ReactElement) => DropdownMenu(menu, allAvailableTags);\n}\n\n/**\n * Used in tag edit feature, allows selecting existing / adding new tag value\n */\nexport function TagKeySelectDropdown({\n  allAvailableTags,\n  control,\n  onKeyChangeCallback,\n}: {\n  allAvailableTags: string[];\n  control: Control<KeyValueEntity>;\n  onKeyChangeCallback?: (key?: string) => void;\n}) {\n  const intl = useIntl();\n  const [isOpen, setIsOpen] = useState(false);\n  const selectRef = useRef<{ blur: () => void; focus: () => void }>(null);\n\n  const { field, fieldState } = useController({\n    control: control,\n    name: 'key',\n    rules: {\n      required: {\n        message: intl.formatMessage({\n          defaultMessage: 'A tag key is required',\n          description: 'Key-value tag editor modal > Tag dropdown > Tag key required error message',\n        }),\n        value: true,\n      },\n    },\n  });\n\n  const handleDropdownVisibleChange = (visible: boolean) => {\n    setIsOpen(visible);\n  };\n\n  const handleClear = () => {\n    field.onChange(undefined);\n    onKeyChangeCallback?.(undefined);\n  };\n\n  const handleSelect = (key: string) => {\n    field.onChange(key);\n    onKeyChangeCallback?.(key);\n  };\n\n  return (\n    <LegacySelect\n      allowClear\n      ref={selectRef}\n      dangerouslySetAntdProps={{\n        showSearch: true,\n        dropdownRender: getDropdownMenu(allAvailableTags),\n      }}\n      css={{ width: '100%' }}\n      placeholder={intl.formatMessage({\n        defaultMessage: 'Type a key',\n        description: 'Key-value tag editor modal > Tag dropdown > Tag input placeholder',\n      })}\n      value={field.value}\n      defaultValue={field.value}\n      open={isOpen}\n      onDropdownVisibleChange={handleDropdownVisibleChange}\n      filterOption={(input, option) => option?.value.toLowerCase().includes(input.toLowerCase())}\n      onSelect={handleSelect}\n      onClear={handleClear}\n      validationState={fieldState.error ? 'error' : undefined}\n    >\n      {allAvailableTags.map((tag) => (\n        <LegacySelect.Option value={tag} key={tag}>\n          {tag}\n        </LegacySelect.Option>\n      ))}\n    </LegacySelect>\n  );\n}\n","import { isEqual, sortBy } from 'lodash';\nimport { useCallback, useMemo, useRef, useState } from 'react';\nimport { truncate } from 'lodash';\n\nimport {\n  Button,\n  FormUI,\n  Modal,\n  PlusIcon,\n  Popover,\n  RHFControlledComponents,\n  RestoreAntDDefaultClsPrefix,\n  LegacyTooltip,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { Typography } from '@databricks/design-system';\nimport { KeyValueEntity } from '../types';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { useForm } from 'react-hook-form';\nimport { TagKeySelectDropdown } from '../components/TagSelectDropdown';\nimport { KeyValueTag } from '../components/KeyValueTag';\nimport { ErrorWrapper } from '../utils/ErrorWrapper';\n\nfunction getTagsMap(tags: KeyValueEntity[]) {\n  return new Map(tags.map((tag) => [tag.key, tag]));\n}\n\n/**\n * Provides methods to initialize and display modal used to add and remove tags from any compatible entity\n */\nexport const useEditKeyValueTagsModal = <T extends { tags?: KeyValueEntity[] }>({\n  onSuccess,\n  saveTagsHandler,\n  allAvailableTags,\n  valueRequired = false,\n  title,\n}: {\n  onSuccess?: () => void;\n  saveTagsHandler: (editedEntity: T, existingTags: KeyValueEntity[], newTags: KeyValueEntity[]) => Promise<any>;\n  allAvailableTags?: string[];\n  valueRequired?: boolean;\n  title?: React.ReactNode;\n}) => {\n  const editedEntityRef = useRef<T>();\n  const [errorMessage, setErrorMessage] = useState<string>('');\n  const { theme } = useDesignSystemTheme();\n\n  const [initialTags, setInitialTags] = useState<Map<string, KeyValueEntity>>(new Map());\n  const [finalTags, setFinalTags] = useState<Map<string, KeyValueEntity>>(new Map());\n\n  const [showModal, setShowModal] = useState(false);\n\n  const form = useForm<KeyValueEntity>({\n    defaultValues: {\n      key: undefined,\n      value: '',\n    },\n  });\n\n  const hideModal = () => setShowModal(false);\n\n  /**\n   * Function used to invoke the modal and start editing tags of the particular model version\n   */\n  const showEditTagsModal = useCallback(\n    (editedEntity: T) => {\n      editedEntityRef.current = editedEntity;\n      setInitialTags(getTagsMap(editedEntity.tags || []));\n      setFinalTags(getTagsMap(editedEntity.tags || []));\n      form.reset();\n\n      setShowModal(true);\n    },\n    [form],\n  );\n\n  const saveTags = async () => {\n    if (!editedEntityRef.current) {\n      return;\n    }\n    setErrorMessage('');\n    setIsLoading(true);\n    saveTagsHandler(editedEntityRef.current, Array.from(initialTags.values()), Array.from(finalTags.values()))\n      .then(() => {\n        hideModal();\n        onSuccess?.();\n        setIsLoading(false);\n      })\n      .catch((e: ErrorWrapper | Error) => {\n        setIsLoading(false);\n        setErrorMessage(e instanceof ErrorWrapper ? e.getUserVisibleError()?.message : e.message);\n      });\n  };\n\n  const intl = useIntl();\n  const formValues = form.watch();\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const hasNewValues = useMemo(\n    () => !isEqual(sortBy(Array.from(initialTags.values()), 'key'), sortBy(Array.from(finalTags.values()), 'key')),\n    [initialTags, finalTags],\n  );\n  const isDirty = formValues.key || formValues.value;\n  const showPopoverMessage = hasNewValues && isDirty;\n\n  const onKeyChangeCallback = (key: string | undefined) => {\n    const tag = key ? finalTags.get(key) : undefined;\n    /**\n     * If a tag value exists for provided key, set the value to the existing tag value\n     */\n    form.setValue('value', tag?.value ?? '');\n  };\n\n  const handleTagDelete = ({ key }: KeyValueEntity) => {\n    setFinalTags((currentFinalTags) => {\n      currentFinalTags.delete(key);\n      return new Map(currentFinalTags);\n    });\n  };\n\n  const onSubmit = () => {\n    // Do not accept form if no value provided while it's required\n    if (valueRequired && !formValues.value.trim()) {\n      return;\n    }\n\n    // Add new tag to existing tags leaving only one tag per key value\n    const newEntries = new Map(finalTags);\n    newEntries.set(formValues.key, formValues);\n\n    setFinalTags(newEntries);\n    form.reset();\n  };\n\n  const EditTagsModal = (\n    <Modal\n      componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_135\"\n      destroyOnClose\n      visible={showModal}\n      title={\n        title ?? (\n          <FormattedMessage\n            defaultMessage=\"Add/Edit tags\"\n            description=\"Key-value tag editor modal > Title of the update tags modal\"\n          />\n        )\n      }\n      onCancel={hideModal}\n      footer={\n        <RestoreAntDDefaultClsPrefix>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_147\"\n            dangerouslyUseFocusPseudoClass\n            onClick={hideModal}\n            /**\n             * Hack: The footer will remove the margin to the save tags button\n             * if the button if wrapped on another component.\n             */\n            css={{ marginRight: !hasNewValues ? theme.spacing.sm : 0 }}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Cancel',\n              description: 'Key-value tag editor modal > Manage Tag cancel button',\n            })}\n          </Button>\n          {showPopoverMessage ? (\n            <UnsavedTagPopoverTrigger formValues={formValues} isLoading={isLoading} onSaveTask={saveTags} />\n          ) : (\n            <LegacyTooltip\n              title={\n                !hasNewValues\n                  ? intl.formatMessage({\n                      defaultMessage: 'Please add or remove one or more tags before saving',\n                      description: 'Key-value tag editor modal > Tag disabled message',\n                    })\n                  : undefined\n              }\n            >\n              <Button\n                componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_174\"\n                dangerouslyUseFocusPseudoClass\n                disabled={!hasNewValues}\n                loading={isLoading}\n                type=\"primary\"\n                onClick={saveTags}\n              >\n                {intl.formatMessage({\n                  defaultMessage: 'Save tags',\n                  description: 'Key-value tag editor modal > Manage Tag save button',\n                })}\n              </Button>\n            </LegacyTooltip>\n          )}\n        </RestoreAntDDefaultClsPrefix>\n      }\n    >\n      <form\n        onSubmit={form.handleSubmit(onSubmit)}\n        css={{ display: 'flex', alignItems: 'flex-end', gap: theme.spacing.md }}\n      >\n        <div css={{ minWidth: 0, display: 'flex', gap: theme.spacing.md, flex: 1 }}>\n          <div css={{ flex: 1 }}>\n            <FormUI.Label htmlFor=\"key\">\n              {intl.formatMessage({\n                defaultMessage: 'Key',\n                description: 'Key-value tag editor modal > Key input label',\n              })}\n            </FormUI.Label>\n            <TagKeySelectDropdown\n              allAvailableTags={allAvailableTags || []}\n              control={form.control}\n              onKeyChangeCallback={onKeyChangeCallback}\n            />\n          </div>\n          <div css={{ flex: 1 }}>\n            <FormUI.Label htmlFor=\"value\">\n              {valueRequired\n                ? intl.formatMessage({\n                    defaultMessage: 'Value',\n                    description: 'Key-value tag editor modal > Value input label (required)',\n                  })\n                : intl.formatMessage({\n                    defaultMessage: 'Value (optional)',\n                    description: 'Key-value tag editor modal > Value input label',\n                  })}\n            </FormUI.Label>\n            <RHFControlledComponents.Input\n              componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_223\"\n              name=\"value\"\n              control={form.control}\n              aria-label={\n                valueRequired\n                  ? intl.formatMessage({\n                      defaultMessage: 'Value',\n                      description: 'Key-value tag editor modal > Value input label (required)',\n                    })\n                  : intl.formatMessage({\n                      defaultMessage: 'Value (optional)',\n                      description: 'Key-value tag editor modal > Value input label',\n                    })\n              }\n              placeholder={intl.formatMessage({\n                defaultMessage: 'Type a value',\n                description: 'Key-value tag editor modal > Value input placeholder',\n              })}\n            />\n          </div>\n        </div>\n        <LegacyTooltip\n          title={intl.formatMessage({\n            defaultMessage: 'Add tag',\n            description: 'Key-value tag editor modal > Add tag button',\n          })}\n        >\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_248\"\n            htmlType=\"submit\"\n            aria-label={intl.formatMessage({\n              defaultMessage: 'Add tag',\n              description: 'Key-value tag editor modal > Add tag button',\n            })}\n          >\n            <PlusIcon />\n          </Button>\n        </LegacyTooltip>\n      </form>\n      {errorMessage && <FormUI.Message type=\"error\" message={errorMessage} />}\n      <div\n        css={{\n          display: 'flex',\n          rowGap: theme.spacing.xs,\n          flexWrap: 'wrap',\n          marginTop: theme.spacing.sm,\n        }}\n      >\n        {Array.from(finalTags.values()).map((tag) => (\n          <KeyValueTag isClosable tag={tag} onClose={() => handleTagDelete(tag)} key={tag.key} />\n        ))}\n      </div>\n    </Modal>\n  );\n\n  return { EditTagsModal, showEditTagsModal, isLoading };\n};\n\nfunction UnsavedTagPopoverTrigger({\n  isLoading,\n  formValues,\n  onSaveTask,\n}: {\n  isLoading: boolean;\n  formValues: any;\n  onSaveTask: () => void;\n}) {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  const tagKeyDisplay = `${truncate(formValues.key, { length: 20 }) || '_'}`;\n  const tagValueDisplay = formValues.value ? `:${truncate(formValues.value, { length: 20 })}` : '';\n  const fullTagDisplay = `${tagKeyDisplay}${tagValueDisplay}`;\n\n  const shownText = intl.formatMessage(\n    {\n      defaultMessage: 'Are you sure you want to save and close without adding \"{tag}\"',\n      description: 'Key-value tag editor modal > Unsaved tag message',\n    },\n    {\n      tag: fullTagDisplay,\n    },\n  );\n  return (\n    <Popover.Root componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_309\">\n      <Popover.Trigger asChild>\n        <Button\n          componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_306\"\n          dangerouslyUseFocusPseudoClass\n          loading={isLoading}\n          type=\"primary\"\n        >\n          {intl.formatMessage({\n            defaultMessage: 'Save tags',\n            description: 'Key-value tag editor modal > Manage Tag save button',\n          })}\n        </Button>\n      </Popover.Trigger>\n      <Popover.Content align=\"end\" aria-label={shownText}>\n        <Typography.Paragraph css={{ maxWidth: 400 }}>{shownText}</Typography.Paragraph>\n        <Popover.Close asChild>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_316\"\n            onClick={onSaveTask}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Yes, save and close',\n              description: 'Key-value tag editor modal > Unsaved tag message > Yes, save and close button',\n            })}\n          </Button>\n        </Popover.Close>\n        <Popover.Close asChild>\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_hooks_useeditkeyvaluetagsmodal.tsx_324\"\n            type=\"primary\"\n            css={{ marginLeft: theme.spacing.sm }}\n          >\n            {intl.formatMessage({\n              defaultMessage: 'Cancel',\n              description: 'Key-value tag editor modal > Unsaved tag message > cancel button',\n            })}\n          </Button>\n        </Popover.Close>\n        <Popover.Arrow />\n      </Popover.Content>\n    </Popover.Root>\n  );\n}\n","import { Button, PencilIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { KeyValueEntity } from '../types';\nimport { KeyValueTag } from './KeyValueTag';\n\ninterface KeyValueTagsEditorCellProps {\n  tags?: KeyValueEntity[];\n  onAddEdit: () => void;\n}\n\n/**\n * A cell renderer used in tables, displaying a list of key-value tags with button for editing those\n */\nexport const KeyValueTagsEditorCell = ({ tags = [], onAddEdit }: KeyValueTagsEditorCellProps) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexWrap: 'wrap',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        gap: theme.spacing.xs,\n      }}\n    >\n      {tags.length < 1 ? (\n        <Button\n          componentId=\"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_29\"\n          size=\"small\"\n          type=\"link\"\n          onClick={onAddEdit}\n        >\n          <FormattedMessage defaultMessage=\"Add\" description=\"Key-value tag table cell > 'add' button label\" />\n        </Button>\n      ) : (\n        <>\n          {tags.map((tag) => (\n            <KeyValueTag tag={tag} key={`${tag.key}-${tag.value}`} />\n          ))}\n          <Button\n            componentId=\"codegen_mlflow_app_src_common_components_keyvaluetagseditorcell.tsx_37\"\n            size=\"small\"\n            icon={<PencilIcon />}\n            onClick={onAddEdit}\n          />\n        </>\n      )}\n    </div>\n  );\n};\n","import {\n  Empty,\n  PlusIcon,\n  Table,\n  TableCell,\n  TableHeader,\n  TableRow,\n  TableRowSelectCell,\n  LegacyTooltip,\n  Typography,\n  useDesignSystemTheme,\n  TableSkeletonRows,\n} from '@databricks/design-system';\nimport {\n  ColumnDef,\n  RowSelectionState,\n  SortingState,\n  ColumnSort,\n  flexRender,\n  getCoreRowModel,\n  getSortedRowModel,\n  useReactTable,\n} from '@tanstack/react-table';\nimport { ModelEntity, ModelVersionInfoEntity, ModelAliasMap } from '../../experiment-tracking/types';\nimport { KeyValueEntity } from '../../common/types';\nimport { useEffect, useMemo, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { RegisteringModelDocUrl } from '../../common/constants';\nimport {\n  ACTIVE_STAGES,\n  EMPTY_CELL_PLACEHOLDER,\n  ModelVersionStatusIcons,\n  StageTagComponents,\n  mlflowAliasesLearnMoreLink,\n  modelVersionStatusIconTooltips,\n} from '../constants';\nimport { Link } from '../../common/utils/RoutingUtils';\nimport { ModelRegistryRoutes } from '../routes';\nimport Utils from '../../common/utils/Utils';\nimport { KeyValueTagsEditorCell } from '../../common/components/KeyValueTagsEditorCell';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from '../../redux-types';\nimport { useEditKeyValueTagsModal } from '../../common/hooks/useEditKeyValueTagsModal';\nimport { useEditAliasesModal } from '../../common/hooks/useEditAliasesModal';\nimport { updateModelVersionTagsApi } from '../actions';\nimport { ModelVersionTableAliasesCell } from './aliases/ModelVersionTableAliasesCell';\nimport { Interpolation, Theme } from '@emotion/react';\nimport { truncateToFirstLineWithMaxLength } from '../../common/utils/StringUtils';\nimport ExpandableList from '../../common/components/ExpandableList';\nimport { setModelVersionAliasesApi } from '../actions';\n\ntype ModelVersionTableProps = {\n  isLoading: boolean;\n  modelName: string;\n  pagination: React.ReactElement;\n  orderByKey: string;\n  orderByAsc: boolean;\n  modelVersions?: ModelVersionInfoEntity[];\n  activeStageOnly?: boolean;\n  onChange: (selectedRowKeys: string[], selectedRows: ModelVersionInfoEntity[]) => void;\n  getSortFieldName: (columnId: string) => string | null;\n  onSortChange: (params: { sorter: ColumnSort }) => void;\n  modelEntity?: ModelEntity;\n  onMetadataUpdated: () => void;\n  usingNextModelsUI: boolean;\n  aliases?: ModelAliasMap;\n};\n\ntype ModelVersionColumnDef = ColumnDef<ModelVersionInfoEntity> & {\n  meta?: { styles?: Interpolation<Theme>; multiline?: boolean; className?: string };\n};\n\nenum COLUMN_IDS {\n  STATUS = 'status',\n  VERSION = 'version',\n  CREATION_TIMESTAMP = 'creation_timestamp',\n  USER_ID = 'user_id',\n  TAGS = 'tags',\n  STAGE = 'current_stage',\n  DESCRIPTION = 'description',\n  ALIASES = 'aliases',\n}\n\nconst getAliasesModalTitle = (version: string) => (\n  <FormattedMessage\n    defaultMessage=\"Add/Edit alias for model version {version}\"\n    description=\"Model registry > model version alias editor > Title of the update alias modal\"\n    values={{ version }}\n  />\n);\n\nexport const ModelVersionTable = ({\n  modelName,\n  modelVersions,\n  activeStageOnly,\n  orderByAsc,\n  orderByKey,\n  onSortChange,\n  onChange,\n  getSortFieldName,\n  modelEntity,\n  onMetadataUpdated,\n  usingNextModelsUI,\n  aliases,\n  pagination,\n  isLoading,\n}: ModelVersionTableProps) => {\n  const aliasesByVersion = useMemo(() => {\n    const result: Record<string, string[]> = {};\n    aliases?.forEach(({ alias, version }) => {\n      if (!result[version]) {\n        result[version] = [];\n      }\n      result[version].push(alias);\n    });\n    return result;\n  }, [aliases]);\n  const versions = useMemo(\n    () =>\n      activeStageOnly\n        ? (modelVersions || []).filter(({ current_stage }) => ACTIVE_STAGES.includes(current_stage))\n        : modelVersions,\n    [activeStageOnly, modelVersions],\n  );\n\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n\n  const allTagsKeys = useMemo(() => {\n    const allTagsList: KeyValueEntity[] = versions?.map((modelVersion) => modelVersion?.tags || []).flat() || [];\n\n    // Extract keys, remove duplicates and sort the\n    return Array.from(new Set(allTagsList.map(({ key }) => key))).sort();\n  }, [versions]);\n\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  const { EditTagsModal, showEditTagsModal } = useEditKeyValueTagsModal<ModelVersionInfoEntity>({\n    allAvailableTags: allTagsKeys,\n    saveTagsHandler: async (modelVersion, existingTags, newTags) =>\n      dispatch(updateModelVersionTagsApi(modelVersion, existingTags, newTags)),\n    onSuccess: onMetadataUpdated,\n  });\n\n  const { EditAliasesModal, showEditAliasesModal } = useEditAliasesModal({\n    aliases: modelEntity?.aliases ?? [],\n    onSuccess: onMetadataUpdated,\n    onSave: async (currentlyEditedVersion: string, existingAliases: string[], draftAliases: string[]) =>\n      dispatch(setModelVersionAliasesApi(modelName, currentlyEditedVersion, existingAliases, draftAliases)),\n    getTitle: getAliasesModalTitle,\n    description: (\n      <FormattedMessage\n        defaultMessage=\"Aliases allow you to assign a mutable, named reference to a particular model version. <link>Learn more</link>\"\n        description=\"Explanation of registered model aliases\"\n        values={{\n          link: (chunks) => (\n            <a href={mlflowAliasesLearnMoreLink} rel=\"noreferrer\" target=\"_blank\">\n              {chunks}\n            </a>\n          ),\n        }}\n      />\n    ),\n  });\n\n  const [rowSelection, setRowSelection] = useState<RowSelectionState>({});\n\n  useEffect(() => {\n    const selectedVersions = (versions || []).filter(({ version }) => rowSelection[version]);\n    const selectedVersionNumbers = selectedVersions.map(({ version }) => version);\n    onChange(selectedVersionNumbers, selectedVersions);\n  }, [rowSelection, onChange, versions]);\n\n  const tableColumns = useMemo(() => {\n    const columns: ModelVersionColumnDef[] = [\n      {\n        id: COLUMN_IDS.STATUS,\n        enableSorting: false,\n        header: '', // Status column does not have title\n        meta: { styles: { flexBasis: theme.general.heightSm, flexGrow: 0 } },\n        cell: ({ row: { original } }) => {\n          const { status, status_message } = original || {};\n          return (\n            <LegacyTooltip title={status_message || modelVersionStatusIconTooltips[status]}>\n              <Typography.Text>{ModelVersionStatusIcons[status]}</Typography.Text>\n            </LegacyTooltip>\n          );\n        },\n      },\n    ];\n    columns.push(\n      {\n        id: COLUMN_IDS.VERSION,\n        enableSorting: false,\n        header: intl.formatMessage({\n          defaultMessage: 'Version',\n          description: 'Column title text for model version in model version table',\n        }),\n        meta: { className: 'model-version' },\n        accessorKey: 'version',\n        cell: ({ getValue }) => (\n          <FormattedMessage\n            defaultMessage=\"<link>Version {versionNumber}</link>\"\n            description=\"Link to model version in the model version table\"\n            values={{\n              link: (chunks) => (\n                <Link to={ModelRegistryRoutes.getModelVersionPageRoute(modelName, String(getValue()))}>{chunks}</Link>\n              ),\n              versionNumber: getValue(),\n            }}\n          />\n        ),\n      },\n      {\n        id: COLUMN_IDS.CREATION_TIMESTAMP,\n        enableSorting: true,\n        meta: { styles: { minWidth: 200 } },\n        header: intl.formatMessage({\n          defaultMessage: 'Registered at',\n          description: 'Column title text for created at timestamp in model version table',\n        }),\n        accessorKey: 'creation_timestamp',\n        cell: ({ getValue }) => Utils.formatTimestamp(getValue(), intl),\n      },\n\n      {\n        id: COLUMN_IDS.USER_ID,\n        enableSorting: false,\n        meta: { styles: { minWidth: 100 } },\n        header: intl.formatMessage({\n          defaultMessage: 'Created by',\n          description: 'Column title text for creator username in model version table',\n        }),\n        accessorKey: 'user_id',\n        cell: ({ getValue }) => <span>{getValue()}</span>,\n      },\n    );\n\n    if (usingNextModelsUI) {\n      // Display tags and aliases columns only when \"new models UI\" is flipped\n      columns.push(\n        {\n          id: COLUMN_IDS.TAGS,\n          enableSorting: false,\n          header: intl.formatMessage({\n            defaultMessage: 'Tags',\n            description: 'Column title text for model version tags in model version table',\n          }),\n          meta: { styles: { flex: 2 } },\n          accessorKey: 'tags',\n          cell: ({ getValue, row: { original } }) => {\n            return (\n              <KeyValueTagsEditorCell\n                tags={getValue() as KeyValueEntity[]}\n                onAddEdit={() => {\n                  showEditTagsModal?.(original);\n                }}\n              />\n            );\n          },\n        },\n        {\n          id: COLUMN_IDS.ALIASES,\n          accessorKey: 'aliases',\n          enableSorting: false,\n          header: intl.formatMessage({\n            defaultMessage: 'Aliases',\n            description: 'Column title text for model version aliases in model version table',\n          }),\n          meta: { styles: { flex: 2 }, multiline: true },\n          cell: ({ getValue, row: { original } }) => {\n            const mvAliases = aliasesByVersion[original.version] || [];\n            return (\n              <ModelVersionTableAliasesCell\n                modelName={modelName}\n                version={original.version}\n                aliases={mvAliases}\n                onAddEdit={() => {\n                  showEditAliasesModal?.(original.version);\n                }}\n              />\n            );\n          },\n        },\n      );\n    } else {\n      // If not, display legacy \"Stage\" columns\n      columns.push({\n        id: COLUMN_IDS.STAGE,\n        enableSorting: false,\n        header: intl.formatMessage({\n          defaultMessage: 'Stage',\n          description: 'Column title text for model version stage in model version table',\n        }),\n        accessorKey: 'current_stage',\n        cell: ({ getValue }) => {\n          return StageTagComponents[getValue() as string];\n        },\n      });\n    }\n    columns.push({\n      id: COLUMN_IDS.DESCRIPTION,\n      enableSorting: false,\n      header: intl.formatMessage({\n        defaultMessage: 'Description',\n        description: 'Column title text for description in model version table',\n      }),\n      meta: { styles: { flex: 2 } },\n      accessorKey: 'description',\n      cell: ({ getValue }) => truncateToFirstLineWithMaxLength(getValue() as string, 32),\n    });\n    return columns;\n  }, [theme, intl, modelName, showEditTagsModal, showEditAliasesModal, usingNextModelsUI, aliasesByVersion]);\n\n  const sorting: SortingState = [{ id: orderByKey, desc: !orderByAsc }];\n\n  const setSorting = (stateUpdater: SortingState | ((state: SortingState) => SortingState)) => {\n    const [newSortState] = typeof stateUpdater === 'function' ? stateUpdater(sorting) : stateUpdater;\n    if (newSortState) {\n      onSortChange({ sorter: newSortState });\n    }\n  };\n\n  const table = useReactTable<ModelVersionInfoEntity>({\n    data: versions || [],\n    columns: tableColumns,\n    state: {\n      rowSelection,\n      sorting,\n    },\n    getCoreRowModel: getCoreRowModel(),\n    getSortedRowModel: getSortedRowModel(),\n    getRowId: ({ version }) => version,\n    onRowSelectionChange: setRowSelection,\n    onSortingChange: setSorting,\n  });\n\n  const isEmpty = () => table.getRowModel().rows.length === 0;\n\n  const getLearnMoreLinkUrl = () => {\n    return RegisteringModelDocUrl;\n  };\n\n  const emptyComponent = (\n    <Empty\n      description={\n        <FormattedMessage\n          defaultMessage=\"No models versions are registered yet. <link>Learn more</link> about how to\n          register a model version.\"\n          description=\"Message text when no model versions are registered\"\n          values={{\n            link: (chunks) => (\n              <Typography.Link\n                componentId=\"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_425\"\n                target=\"_blank\"\n                href={getLearnMoreLinkUrl()}\n              >\n                {chunks}\n              </Typography.Link>\n            ),\n          }}\n        />\n      }\n      image={<PlusIcon />}\n    />\n  );\n  return (\n    <>\n      <Table\n        data-testid=\"model-version-table\"\n        pagination={pagination}\n        scrollable\n        empty={isEmpty() ? emptyComponent : undefined}\n        someRowsSelected={table.getIsSomeRowsSelected() || table.getIsAllRowsSelected()}\n      >\n        <TableRow isHeader>\n          <TableRowSelectCell\n            componentId=\"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_450\"\n            checked={table.getIsAllRowsSelected()}\n            indeterminate={table.getIsSomeRowsSelected()}\n            onChange={table.getToggleAllRowsSelectedHandler()}\n          />\n          {table.getLeafHeaders().map((header) => (\n            <TableHeader\n              componentId=\"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_458\"\n              multiline={false}\n              key={header.id}\n              sortable={header.column.getCanSort()}\n              sortDirection={header.column.getIsSorted() || 'none'}\n              onToggleSort={() => {\n                const [currentSortColumn] = sorting;\n                const changingDirection = header.column.id === currentSortColumn.id;\n                const sortDesc = changingDirection ? !currentSortColumn.desc : false;\n                header.column.toggleSorting(sortDesc);\n              }}\n              css={(header.column.columnDef as ModelVersionColumnDef).meta?.styles}\n            >\n              {flexRender(header.column.columnDef.header, header.getContext())}\n            </TableHeader>\n          ))}\n        </TableRow>\n        {isLoading ? (\n          <TableSkeletonRows table={table} />\n        ) : (\n          table.getRowModel().rows.map((row) => (\n            <TableRow\n              key={row.id}\n              css={{\n                '.table-row-select-cell': {\n                  alignItems: 'flex-start',\n                },\n              }}\n            >\n              <TableRowSelectCell\n                componentId=\"codegen_mlflow_app_src_model-registry_components_modelversiontable.tsx_477\"\n                checked={row.getIsSelected()}\n                onChange={row.getToggleSelectedHandler()}\n              />\n              {row.getAllCells().map((cell) => (\n                <TableCell\n                  className={(cell.column.columnDef as ModelVersionColumnDef).meta?.className}\n                  multiline={(cell.column.columnDef as ModelVersionColumnDef).meta?.multiline}\n                  key={cell.id}\n                  css={(cell.column.columnDef as ModelVersionColumnDef).meta?.styles}\n                >\n                  {flexRender(cell.column.columnDef.cell, cell.getContext())}\n                </TableCell>\n              ))}\n            </TableRow>\n          ))\n        )}\n      </Table>\n      {EditTagsModal}\n      {EditAliasesModal}\n    </>\n  );\n};\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport _ from 'lodash';\nimport { ModelVersionTable } from './ModelVersionTable';\nimport Utils from '../../common/utils/Utils';\nimport { Link, NavigateFunction } from '../../common/utils/RoutingUtils';\nimport { ModelRegistryRoutes } from '../routes';\nimport { ACTIVE_STAGES, MODEL_VERSIONS_PER_PAGE_COMPACT, MODEL_VERSIONS_SEARCH_TIMESTAMP_FIELD } from '../constants';\nimport { CollapsibleSection } from '../../common/components/CollapsibleSection';\nimport { EditableNote } from '../../common/components/EditableNote';\nimport { EditableTagsTableView } from '../../common/components/EditableTagsTableView';\nimport { getRegisteredModelTags } from '../reducers';\nimport { setRegisteredModelTagApi, deleteRegisteredModelTagApi } from '../actions';\nimport { connect } from 'react-redux';\nimport { OverflowMenu, PageHeader } from '../../shared/building_blocks/PageHeader';\nimport { FormattedMessage, type IntlShape, injectIntl } from 'react-intl';\nimport {\n  Button,\n  SegmentedControlGroup,\n  SegmentedControlButton,\n  DangerModal,\n  CursorPagination,\n} from '@databricks/design-system';\nimport { KeyValueEntity } from '../../common/types';\nimport { Descriptions } from '../../common/components/Descriptions';\nimport { TagList } from '../../common/components/TagList';\nimport { ModelVersionInfoEntity, type ModelEntity } from '../../experiment-tracking/types';\nimport { shouldShowModelsNextUI, shouldUseSharedTaggingUI } from '../../common/utils/FeatureUtils';\nimport { ModelsNextUIToggleSwitch } from './ModelsNextUIToggleSwitch';\nimport { withNextModelsUIContext } from '../hooks/useNextModelsUI';\nimport { ErrorWrapper } from '../../common/utils/ErrorWrapper';\nimport { ColumnSort } from '@tanstack/react-table';\n\nconst CREATION_TIMESTAMP_COLUMN_INDEX = 'creation_timestamp';\n\nexport const StageFilters = {\n  ALL: 'ALL',\n  ACTIVE: 'ACTIVE',\n};\n\ntype ModelViewImplProps = {\n  model?: ModelEntity;\n  modelVersions?: ModelVersionInfoEntity[];\n  handleEditDescription: (...args: any[]) => any;\n  handleDelete: (...args: any[]) => any;\n  navigate: NavigateFunction;\n  showEditPermissionModal: (...args: any[]) => any;\n  activePane?: any; // TODO: PropTypes.oneOf(Object.values(PANES))\n  emailSubscriptionStatus?: string;\n  userLevelEmailSubscriptionStatus?: string;\n  handleEmailNotificationPreferenceChange?: (...args: any[]) => any;\n  tags: any;\n  setRegisteredModelTagApi: (...args: any[]) => any;\n  deleteRegisteredModelTagApi: (...args: any[]) => any;\n  intl: IntlShape;\n  onMetadataUpdated: () => void;\n  usingNextModelsUI: boolean;\n  orderByKey: string;\n  orderByAsc: boolean;\n  currentPage: number;\n  nextPageToken: string | null;\n  onClickNext: () => void;\n  onClickPrev: () => void;\n  onClickSortableColumn: (fieldName: string | null, isDescending: boolean) => void;\n  onSetMaxResult: (key: number) => void;\n  maxResultValue: number;\n  loading?: boolean;\n};\n\ntype ModelViewImplState = any;\n\nexport class ModelViewImpl extends React.Component<ModelViewImplProps, ModelViewImplState> {\n  constructor(props: ModelViewImplProps) {\n    super(props);\n    this.onCompare = this.onCompare.bind(this);\n  }\n\n  state = {\n    maxResultsSelection: MODEL_VERSIONS_PER_PAGE_COMPACT,\n    stageFilter: StageFilters.ALL,\n    showDescriptionEditor: false,\n    isDeleteModalVisible: false,\n    isDeleteModalConfirmLoading: false,\n    runsSelected: {},\n    isTagsRequestPending: false,\n    updatingEmailPreferences: false,\n    isTagAssignmentModalVisible: false,\n    isSavingTags: false,\n    tagSavingError: undefined,\n  };\n\n  formRef = React.createRef();\n\n  sharedTaggingUIEnabled = shouldUseSharedTaggingUI();\n\n  componentDidMount() {\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const pageTitle = `${this.props.model.name} - MLflow Model`;\n    Utils.updatePageTitle(pageTitle);\n  }\n\n  handleSetMaxResult = ({ key }: { key: number }) => {\n    this.props.onSetMaxResult(key);\n  };\n\n  getSortFieldName = (column: any) => {\n    switch (column) {\n      case CREATION_TIMESTAMP_COLUMN_INDEX:\n        return MODEL_VERSIONS_SEARCH_TIMESTAMP_FIELD;\n      default:\n        return null;\n    }\n  };\n\n  handleSortChange = (params: { sorter: ColumnSort }) => {\n    const sorter = params.sorter;\n    this.props.onClickSortableColumn(this.getSortFieldName(sorter.id), sorter.desc);\n  };\n\n  handleStageFilterChange = (e: any) => {\n    this.setState({ stageFilter: e.target.value });\n  };\n\n  getActiveVersionsCount() {\n    const { modelVersions } = this.props;\n    return modelVersions ? modelVersions.filter((v) => ACTIVE_STAGES.includes(v.current_stage)).length : 0;\n  }\n\n  handleCancelEditDescription = () => {\n    this.setState({ showDescriptionEditor: false });\n  };\n\n  handleSubmitEditDescription = (description: any) => {\n    return this.props.handleEditDescription(description).then(() => {\n      this.setState({ showDescriptionEditor: false });\n    });\n  };\n\n  startEditingDescription = (e: any) => {\n    e.stopPropagation();\n    this.setState({ showDescriptionEditor: true });\n  };\n\n  getOverflowMenuItems() {\n    const menuItems = [\n      {\n        id: 'delete',\n        itemName: (\n          <FormattedMessage\n            defaultMessage=\"Delete\"\n            // eslint-disable-next-line max-len\n            description=\"Text for disabled delete button due to active versions on model view page header\"\n          />\n        ),\n        onClick: this.showDeleteModal,\n        disabled: this.getActiveVersionsCount() > 0,\n      },\n    ];\n\n    return menuItems;\n  }\n\n  showDeleteModal = () => {\n    this.setState({ isDeleteModalVisible: true });\n  };\n\n  hideDeleteModal = () => {\n    this.setState({ isDeleteModalVisible: false });\n  };\n\n  showConfirmLoading = () => {\n    this.setState({ isDeleteModalConfirmLoading: true });\n  };\n\n  hideConfirmLoading = () => {\n    this.setState({ isDeleteModalConfirmLoading: false });\n  };\n\n  handleDeleteConfirm = () => {\n    const { navigate } = this.props;\n    this.showConfirmLoading();\n    this.props\n      .handleDelete()\n      .then(() => {\n        navigate(ModelRegistryRoutes.modelListPageRoute);\n      })\n      .catch((e: any) => {\n        this.hideConfirmLoading();\n        Utils.logErrorAndNotifyUser(e);\n      });\n  };\n\n  getTags = () =>\n    _.sortBy(\n      Utils.getVisibleTagValues(this.props.tags).map((values) => ({\n        key: values[0],\n        name: values[0],\n        value: values[1],\n      })),\n      'name',\n    );\n\n  handleEditTags = () => {\n    this.setState({ isTagAssignmentModalVisible: true, tagSavingError: undefined });\n  };\n\n  handleCloseTagAssignmentModal = () => {\n    this.setState({ isTagAssignmentModalVisible: false, tagSavingError: undefined });\n  };\n\n  handleAddTag = (values: any) => {\n    const form = this.formRef.current;\n    const { model } = this.props;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n    this.setState({ isTagsRequestPending: true });\n    this.props\n      .setRegisteredModelTagApi(modelName, values.name, values.value)\n      .then(() => {\n        this.setState({ isTagsRequestPending: false });\n        (form as any).resetFields();\n      })\n      .catch((ex: ErrorWrapper | Error) => {\n        this.setState({ isTagsRequestPending: false });\n        // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n        console.error(ex);\n        const message = ex instanceof ErrorWrapper ? ex.getMessageField() : ex.message;\n        Utils.displayGlobalErrorNotification('Failed to add tag. Error: ' + message);\n      });\n  };\n\n  handleSaveEdit = ({ name, value }: any) => {\n    const { model } = this.props;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n    return this.props.setRegisteredModelTagApi(modelName, name, value).catch((ex: ErrorWrapper | Error) => {\n      // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n      console.error(ex);\n      const message = ex instanceof ErrorWrapper ? ex.getMessageField() : ex.message;\n      Utils.displayGlobalErrorNotification('Failed to set tag. Error: ' + message);\n    });\n  };\n\n  handleDeleteTag = ({ name }: any) => {\n    const { model } = this.props;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n    return this.props.deleteRegisteredModelTagApi(modelName, name).catch((ex: ErrorWrapper | Error) => {\n      // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n      console.error(ex);\n      const message = ex instanceof ErrorWrapper ? ex.getMessageField() : ex.message;\n      Utils.displayGlobalErrorNotification('Failed to delete tag. Error: ' + message);\n    });\n  };\n\n  handleSaveTags = (newTags: KeyValueEntity[], deletedTags: KeyValueEntity[]): Promise<void> => {\n    this.setState({ isSavingTags: true });\n    const { model } = this.props;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n\n    const newTagsToSet = newTags.map(({ key, value }) => this.props.setRegisteredModelTagApi(modelName, key, value));\n\n    const deletedTagsToDelete = deletedTags.map(({ key }) => this.props.deleteRegisteredModelTagApi(modelName, key));\n\n    return Promise.all([...newTagsToSet, ...deletedTagsToDelete])\n      .then(() => {\n        this.setState({ isSavingTags: false });\n      })\n      .catch((error: ErrorWrapper | Error) => {\n        const message = error instanceof ErrorWrapper ? error.getMessageField() : error.message;\n\n        this.setState({ isSavingTags: false, tagSavingError: message });\n      });\n  };\n\n  onChange = (selectedRowKeys: any, selectedRows: any) => {\n    const newState = Object.assign({}, this.state);\n    newState.runsSelected = {};\n    selectedRows.forEach((row: any) => {\n      newState.runsSelected = {\n        ...newState.runsSelected,\n        [row.version]: row.run_id,\n      };\n    });\n    this.setState(newState);\n  };\n\n  onCompare() {\n    if (!this.props.model) {\n      return;\n    }\n    this.props.navigate(\n      ModelRegistryRoutes.getCompareModelVersionsPageRoute(this.props.model.name, this.state.runsSelected),\n    );\n  }\n\n  renderDescriptionEditIcon() {\n    return (\n      <Button\n        componentId=\"codegen_mlflow_app_src_model-registry_components_modelview.tsx_467\"\n        data-test-id=\"descriptionEditButton\"\n        type=\"link\"\n        css={styles.editButton}\n        onClick={this.startEditingDescription}\n      >\n        <FormattedMessage\n          defaultMessage=\"Edit\"\n          description=\"Text for the edit button next to the description section title on\n             the model view page\"\n        />\n      </Button>\n    );\n  }\n\n  renderDetails = () => {\n    const { model, modelVersions, tags, currentPage, nextPageToken } = this.props;\n    const {\n      stageFilter,\n      showDescriptionEditor,\n      isDeleteModalVisible,\n      isDeleteModalConfirmLoading,\n      isTagsRequestPending,\n    } = this.state;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n    const compareDisabled = Object.keys(this.state.runsSelected).length < 2;\n    return (\n      <div css={styles.wrapper}>\n        {/* Metadata List */}\n        <Descriptions columns={3} data-testid=\"model-view-metadata\">\n          <Descriptions.Item\n            data-testid=\"model-view-metadata-item\"\n            label={this.props.intl.formatMessage({\n              defaultMessage: 'Created Time',\n              description: 'Label name for the created time under details tab on the model view page',\n            })}\n          >\n            {/* @ts-expect-error TS(2532): Object is possibly 'undefined'. */}\n            {Utils.formatTimestamp(model.creation_timestamp, this.props.intl)}\n          </Descriptions.Item>\n          <Descriptions.Item\n            data-testid=\"model-view-metadata-item\"\n            label={this.props.intl.formatMessage({\n              defaultMessage: 'Last Modified',\n              description: 'Label name for the last modified time under details tab on the model view page',\n            })}\n          >\n            {/* @ts-expect-error TS(2532): Object is possibly 'undefined'. */}\n            {Utils.formatTimestamp(model.last_updated_timestamp, this.props.intl)}\n          </Descriptions.Item>\n          {/* Reported during ESLint upgrade */}\n          {/* eslint-disable-next-line react/prop-types */}\n          {(model as any).user_id && (\n            <Descriptions.Item\n              data-testid=\"model-view-metadata-item\"\n              label={this.props.intl.formatMessage({\n                defaultMessage: 'Creator',\n                description: 'Lable name for the creator under details tab on the model view page',\n              })}\n            >\n              {/* eslint-disable-next-line react/prop-types */}\n              <div>{(model as any).user_id}</div>\n            </Descriptions.Item>\n          )}\n        </Descriptions>\n        {this.sharedTaggingUIEnabled && (\n          <Descriptions columns={1} data-testid=\"model-view-tags\">\n            <Descriptions.Item label=\"Tags\">\n              <TagList tags={this.getTags()} onEdit={this.handleEditTags} />\n            </Descriptions.Item>\n          </Descriptions>\n        )}\n        {/* Page Sections */}\n        <CollapsibleSection\n          css={styles.collapsiblePanel}\n          title={\n            <span>\n              <FormattedMessage\n                defaultMessage=\"Description\"\n                description=\"Title text for the description section under details tab on the model\n                   view page\"\n              />{' '}\n              {!showDescriptionEditor ? this.renderDescriptionEditIcon() : null}\n            </span>\n          }\n          forceOpen={showDescriptionEditor}\n          // Reported during ESLint upgrade\n          // eslint-disable-next-line react/prop-types\n          defaultCollapsed={!(model as any).description}\n          data-test-id=\"model-description-section\"\n        >\n          <EditableNote\n            defaultMarkdown={(model as any).description}\n            onSubmit={this.handleSubmitEditDescription}\n            onCancel={this.handleCancelEditDescription}\n            showEditor={showDescriptionEditor}\n          />\n        </CollapsibleSection>\n        {!this.sharedTaggingUIEnabled && (\n          <div data-test-id=\"tags-section\">\n            <CollapsibleSection\n              css={styles.collapsiblePanel}\n              title={\n                <FormattedMessage\n                  defaultMessage=\"Tags\"\n                  description=\"Title text for the tags section under details tab on the model view\n                   page\"\n                />\n              }\n              defaultCollapsed={Utils.getVisibleTagValues(tags).length === 0}\n              data-test-id=\"model-tags-section\"\n            >\n              <EditableTagsTableView\n                // @ts-expect-error TS(2322): Type '{ innerRef: RefObject<unknown>; handleAddTag... Remove this comment to see the full error message\n                innerRef={this.formRef}\n                handleAddTag={this.handleAddTag}\n                handleDeleteTag={this.handleDeleteTag}\n                handleSaveEdit={this.handleSaveEdit}\n                tags={tags}\n                isRequestPending={isTagsRequestPending}\n              />\n            </CollapsibleSection>\n          </div>\n        )}\n        <CollapsibleSection\n          css={styles.collapsiblePanel}\n          title={\n            <>\n              <div css={styles.versionsTabButtons}>\n                <span>\n                  <FormattedMessage\n                    defaultMessage=\"Versions\"\n                    description=\"Title text for the versions section under details tab on the\n                       model view page\"\n                  />\n                </span>\n                {!this.props.usingNextModelsUI && (\n                  <SegmentedControlGroup\n                    componentId=\"codegen_mlflow_app_src_model-registry_components_modelview.tsx_600\"\n                    name=\"stage-filter\"\n                    value={this.state.stageFilter}\n                    onChange={(e) => this.handleStageFilterChange(e)}\n                    css={{ fontWeight: 'normal' }}\n                  >\n                    <SegmentedControlButton value={StageFilters.ALL}>\n                      <FormattedMessage\n                        defaultMessage=\"All\"\n                        description=\"Tab text to view all versions under details tab on the model view page\"\n                      />\n                    </SegmentedControlButton>\n                    <SegmentedControlButton value={StageFilters.ACTIVE}>\n                      <FormattedMessage\n                        defaultMessage=\"Active\"\n                        description=\"Tab text to view active versions under details tab\n                                on the model view page\"\n                      />{' '}\n                      {this.getActiveVersionsCount()}\n                    </SegmentedControlButton>\n                  </SegmentedControlGroup>\n                )}\n                <Button\n                  componentId=\"codegen_mlflow_app_src_model-registry_components_modelview.tsx_619\"\n                  data-testid=\"compareButton\"\n                  disabled={compareDisabled}\n                  onClick={this.onCompare}\n                >\n                  <FormattedMessage\n                    defaultMessage=\"Compare\"\n                    description=\"Text for compare button to compare versions under details tab\n                       on the model view page\"\n                  />\n                </Button>\n              </div>\n            </>\n          }\n          data-test-id=\"model-versions-section\"\n        >\n          {shouldShowModelsNextUI() && (\n            <div\n              css={{\n                marginBottom: 8,\n                display: 'flex',\n                justifyContent: 'flex-end',\n              }}\n            >\n              <ModelsNextUIToggleSwitch />\n            </div>\n          )}\n          <ModelVersionTable\n            isLoading={this.props.loading || false}\n            activeStageOnly={stageFilter === StageFilters.ACTIVE && !this.props.usingNextModelsUI}\n            modelName={modelName}\n            modelVersions={modelVersions}\n            modelEntity={model}\n            onChange={this.onChange}\n            onMetadataUpdated={this.props.onMetadataUpdated}\n            usingNextModelsUI={this.props.usingNextModelsUI}\n            aliases={model?.aliases}\n            orderByKey={this.props.orderByKey}\n            orderByAsc={this.props.orderByAsc}\n            onSortChange={this.handleSortChange}\n            getSortFieldName={this.getSortFieldName}\n            pagination={\n              <div\n                data-testid=\"model-view-pagination-section\"\n                css={{ width: '100%', alignItems: 'center', display: 'flex' }}\n              >\n                <div css={{ display: 'flex', justifyContent: 'flex-end', marginTop: 8 }}>\n                  <CursorPagination\n                    componentId=\"codegen_mlflow_app_src_model-registry_components_modelview.tsx_646\"\n                    hasNextPage={Boolean(nextPageToken)}\n                    hasPreviousPage={currentPage > 1}\n                    onNextPage={this.props.onClickNext}\n                    onPreviousPage={this.props.onClickPrev}\n                    pageSizeSelect={{\n                      onChange: (num) => this.handleSetMaxResult({ key: num }),\n                      default: this.props.maxResultValue,\n                      options: [10, 25, 50, 100],\n                    }}\n                  />\n                </div>\n              </div>\n            }\n          />\n        </CollapsibleSection>\n\n        {/* Delete Model Dialog */}\n        <DangerModal\n          componentId=\"codegen_mlflow_app_src_model-registry_components_modelview.tsx_662\"\n          data-testid=\"mlflow-input-modal\"\n          title={this.props.intl.formatMessage({\n            defaultMessage: 'Delete Model',\n            description: 'Title text for delete model modal on model view page',\n          })}\n          visible={isDeleteModalVisible}\n          confirmLoading={isDeleteModalConfirmLoading}\n          onOk={this.handleDeleteConfirm}\n          okText={this.props.intl.formatMessage({\n            defaultMessage: 'Delete',\n            description: 'OK text for delete model modal on model view page',\n          })}\n          cancelText={this.props.intl.formatMessage({\n            defaultMessage: 'Cancel',\n            description: 'Cancel text for delete model modal on model view page',\n          })}\n          onCancel={this.hideDeleteModal}\n        >\n          <span>\n            <FormattedMessage\n              defaultMessage=\"Are you sure you want to delete {modelName}? This cannot be undone.\"\n              description=\"Confirmation message for delete model modal on model view page\"\n              values={{ modelName: modelName }}\n            />\n          </span>\n        </DangerModal>\n      </div>\n    );\n  };\n\n  renderMainPanel() {\n    return this.renderDetails();\n  }\n\n  render() {\n    const { model } = this.props;\n    // @ts-expect-error TS(2532): Object is possibly 'undefined'.\n    const modelName = model.name;\n\n    const breadcrumbs = [\n      <Link to={ModelRegistryRoutes.modelListPageRoute}>\n        <FormattedMessage\n          defaultMessage=\"Registered Models\"\n          description=\"Text for link back to model page under the header on the model view page\"\n        />\n      </Link>,\n    ];\n    return (\n      <div>\n        <PageHeader title={modelName} breadcrumbs={breadcrumbs}>\n          <OverflowMenu menu={this.getOverflowMenuItems()} />\n        </PageHeader>\n        {this.renderMainPanel()}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n  const modelName = ownProps.model.name;\n  const tags = getRegisteredModelTags(modelName, state);\n  return { tags };\n};\nconst mapDispatchToProps = { setRegisteredModelTagApi, deleteRegisteredModelTagApi };\n\nconst styles = {\n  emailNotificationPreferenceDropdown: (theme: any) => ({\n    width: 300,\n    marginBottom: theme.spacing.md,\n  }),\n  emailNotificationPreferenceTip: (theme: any) => ({\n    paddingLeft: theme.spacing.sm,\n    paddingRight: theme.spacing.sm,\n  }),\n  collapsiblePanel: (theme: any) => ({\n    marginBottom: theme.spacing.md,\n  }),\n  wrapper: (theme: any) => ({\n    /**\n     * This seems to be a best and most stable method to catch\n     * antd's collapsible section buttons without hacks\n     * and using class names.\n     */\n    'div[role=\"button\"][aria-expanded]': {\n      height: theme.general.buttonHeight,\n    },\n  }),\n  editButton: (theme: any) => ({\n    marginLeft: theme.spacing.md,\n  }),\n  versionsTabButtons: (theme: any) => ({\n    display: 'flex',\n    gap: theme.spacing.md,\n    alignItems: 'center',\n  }),\n};\n\nexport const ModelView = connect(\n  mapStateToProps,\n  mapDispatchToProps,\n)(withNextModelsUIContext(injectIntl(ModelViewImpl)));\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport {\n  searchModelVersionsApi,\n  getRegisteredModelApi,\n  updateRegisteredModelApi,\n  deleteRegisteredModelApi,\n} from '../actions';\nimport { ModelView } from './ModelView';\nimport { getModelVersions } from '../reducers';\nimport LocalStorageUtils from '../../common/utils/LocalStorageUtils';\nimport { MODEL_VERSIONS_SEARCH_TIMESTAMP_FIELD, MODEL_VERSIONS_PER_PAGE_COMPACT } from '../constants';\nimport { PageContainer } from '../../common/components/PageContainer';\nimport RequestStateWrapper, { triggerError } from '../../common/components/RequestStateWrapper';\nimport { Spinner } from '../../common/components/Spinner';\nimport { ErrorView } from '../../common/components/ErrorView';\nimport { ModelRegistryRoutes } from '../routes';\nimport Utils from '../../common/utils/Utils';\nimport { getUUID } from '../../common/utils/ActionUtils';\nimport { injectIntl } from 'react-intl';\nimport { withRouterNext } from '../../common/utils/withRouterNext';\nimport type { WithRouterNextProps } from '../../common/utils/withRouterNext';\nimport { withErrorBoundary } from '../../common/utils/withErrorBoundary';\nimport ErrorUtils from '../../common/utils/ErrorUtils';\nimport { ErrorCodes } from '../../common/constants';\n\ntype ModelPageImplState = {\n  maxResultsSelection: number;\n  pageTokens: Record<number, string | null>;\n  loading: boolean;\n  error: Error | undefined;\n};\n\ntype ModelPageImplProps = WithRouterNextProps<{ subpage: string }> & {\n  modelName: string;\n  model?: any;\n  modelVersions?: any[];\n  emailSubscriptionStatus?: string;\n  userLevelEmailSubscriptionStatus?: string;\n  searchModelVersionsApi: (...args: any[]) => any;\n  getRegisteredModelApi: (...args: any[]) => any;\n  updateRegisteredModelApi: (...args: any[]) => any;\n  deleteRegisteredModelApi: (...args: any[]) => any;\n  setEmailSubscriptionStatusApi: (...args: any[]) => any;\n  getEmailSubscriptionStatusApi: (...args: any[]) => any;\n  getUserLevelEmailSubscriptionStatusApi: (...args: any[]) => any;\n  searchEndpointsByModelNameApi: (...args: any[]) => any;\n  searchParams: URLSearchParams;\n  setSearchParams: (params: URLSearchParams | ((prev: URLSearchParams) => URLSearchParams)) => void;\n  intl?: any;\n};\n\n/**\n * Returns a LocalStorageStore instance that can be used to persist data associated with the\n * ModelRegistry component.\n */\nfunction getModelPageSessionStore(key: any) {\n  return LocalStorageUtils.getSessionScopedStoreForComponent('ModelPage', key);\n}\n\nexport function getOrderByExpr(orderByKey: string, orderByAsc: boolean): string {\n  return orderByKey ? `${orderByKey} ${orderByAsc ? 'ASC' : 'DESC'}` : '';\n}\n\nexport class ModelPageImpl extends React.Component<ModelPageImplProps, ModelPageImplState> {\n  constructor(props: ModelPageImplProps) {\n    super(props);\n    const persistedPageTokens = this.getPersistedPageTokens();\n    const maxResultsForTokens = this.getPersistedMaxResults();\n\n    this.state = {\n      maxResultsSelection: maxResultsForTokens,\n      pageTokens: persistedPageTokens,\n      loading: true,\n      error: undefined,\n    };\n  }\n  modelPageStoreKey = 'ModelPageStore';\n  defaultPersistedPageTokens = { 1: null };\n\n  initSearchModelVersionsApiRequestId = getUUID();\n  initgetRegisteredModelApiRequestId = getUUID();\n  updateRegisteredModelApiId = getUUID();\n  deleteRegisteredModelApiId = getUUID();\n\n  criticalInitialRequestIds = [this.initSearchModelVersionsApiRequestId, this.initgetRegisteredModelApiRequestId];\n\n  componentDidMount() {\n    this.loadModelVersions(true);\n  }\n\n  updateUrlWithState(orderByKey: string, orderByAsc: boolean, page: number): Promise<void> {\n    return new Promise((resolve) => {\n      const newParams = new URLSearchParams(this.props.searchParams);\n      if (orderByKey) newParams.set('orderByKey', orderByKey);\n      if (orderByAsc !== undefined) newParams.set('orderByAsc', String(orderByAsc));\n      if (page) newParams.set('page', String(page));\n      this.props.setSearchParams(newParams);\n      resolve();\n    });\n  }\n\n  resetHistoryState() {\n    this.setState((prevState: any) => ({\n      pageTokens: this.defaultPersistedPageTokens,\n    }));\n    this.setPersistedPageTokens(this.defaultPersistedPageTokens);\n  }\n\n  isEmptyPageResponse = (value: any) => {\n    return !value || !value.model_versions || !value.next_page_token;\n  };\n\n  // Loads the initial set of model versions.\n  loadModelVersions(isInitialLoading = true) {\n    this.loadPage(this.currentPage, isInitialLoading, true);\n  }\n  get currentPage() {\n    const urlPage = parseInt(this.props.searchParams.get('page') || '1', 10);\n    return isNaN(urlPage) ? 1 : urlPage;\n  }\n\n  get orderByKey() {\n    return this.props.searchParams.get('orderByKey') ?? MODEL_VERSIONS_SEARCH_TIMESTAMP_FIELD;\n  }\n\n  get orderByAsc() {\n    return this.props.searchParams.get('orderByAsc') === 'true';\n  }\n\n  getPersistedPageTokens() {\n    const store = getModelPageSessionStore(this.modelPageStoreKey);\n    if (store && store.getItem('page_tokens')) {\n      return JSON.parse(store.getItem('page_tokens'));\n    } else {\n      return this.defaultPersistedPageTokens;\n    }\n  }\n\n  setPersistedPageTokens(page_tokens: any) {\n    const store = getModelPageSessionStore(this.modelPageStoreKey);\n    if (store) {\n      store.setItem('page_tokens', JSON.stringify(page_tokens));\n    }\n  }\n\n  getPersistedMaxResults() {\n    const store = getModelPageSessionStore(this.modelPageStoreKey);\n    if (store && store.getItem('max_results')) {\n      return parseInt(store.getItem('max_results'), 10);\n    } else {\n      return MODEL_VERSIONS_PER_PAGE_COMPACT;\n    }\n  }\n\n  setMaxResultsInStore(max_results: any) {\n    const store = getModelPageSessionStore(this.modelPageStoreKey);\n    store.setItem('max_results', max_results.toString());\n  }\n\n  handleEditDescription = (description: any) => {\n    const { model } = this.props;\n    return this.props\n      .updateRegisteredModelApi(model.name, description, this.updateRegisteredModelApiId)\n      .then(() => this.loadPage(1, false, true));\n  };\n\n  handleDelete = () => {\n    const { model } = this.props;\n    return this.props.deleteRegisteredModelApi(model.name, this.deleteRegisteredModelApiId).then(() => {\n      this.props.navigate(ModelRegistryRoutes.modelListPageRoute);\n    });\n  };\n\n  loadPage = (page: number, isInitialLoading: boolean, loadModelMetadata = false) => {\n    const { modelName } = this.props;\n    const { pageTokens } = this.state;\n    this.setState({ loading: true, error: undefined });\n    const filters_obj = { name: modelName };\n    const promiseValues = [\n      this.props\n        .searchModelVersionsApi(\n          filters_obj,\n          isInitialLoading ? this.initSearchModelVersionsApiRequestId : null,\n          this.state.maxResultsSelection,\n          getOrderByExpr(this.orderByKey, this.orderByAsc),\n          pageTokens[page],\n        )\n        .then((response: any) => {\n          this.updatePageState(page, response);\n        }),\n    ];\n    if (loadModelMetadata) {\n      promiseValues.push(\n        this.props.getRegisteredModelApi(\n          modelName,\n          isInitialLoading === true ? this.initgetRegisteredModelApiRequestId : null,\n        ),\n      );\n    }\n    return Promise.all(promiseValues)\n      .then(() => {\n        this.setState({ loading: false });\n      })\n      .catch((error) => {\n        this.setState({ loading: false, error });\n        this.resetHistoryState();\n      });\n  };\n\n  getNextPageTokenFromResponse(response: any) {\n    const { value } = response;\n    if (this.isEmptyPageResponse(value)) {\n      // Why we could be here:\n      // 1. There are no models returned: we went to the previous page but all models after that\n      //    page's token has been deleted.\n      // 2. If `next_page_token` is not returned, assume there is no next page.\n      return null;\n    } else {\n      return value.next_page_token;\n    }\n  }\n\n  updatePageState = (page: any, response = {}) => {\n    const nextPageToken = this.getNextPageTokenFromResponse(response);\n    this.setState(\n      (prevState: any) => ({\n        pageTokens: {\n          ...prevState.pageTokens,\n          [page + 1]: nextPageToken,\n        },\n      }),\n      () => {\n        this.setPersistedPageTokens(this.state.pageTokens);\n      },\n    );\n  };\n\n  handleMaxResultsChange = (key: string) => {\n    this.setState({ maxResultsSelection: parseInt(key, 10) }, () => {\n      this.resetHistoryState();\n      const { maxResultsSelection } = this.state;\n      this.setMaxResultsInStore(maxResultsSelection);\n      this.loadPage(1, false);\n    });\n  };\n\n  handleClickNext = () => {\n    const nextPage = this.currentPage + 1;\n    this.updateUrlWithState(this.orderByKey, this.orderByAsc, nextPage).then(() => {\n      this.loadPage(nextPage, false);\n    });\n  };\n\n  handleClickPrev = () => {\n    const prevPage = this.currentPage - 1;\n    this.updateUrlWithState(this.orderByKey, this.orderByAsc, prevPage).then(() => {\n      this.loadPage(prevPage, false);\n    });\n  };\n\n  handleClickSortableColumn = (orderByKey: string, orderByDesc: boolean) => {\n    const orderByAsc = !orderByDesc;\n    this.resetHistoryState();\n    this.updateUrlWithState(orderByKey, orderByAsc, 1).then(() => {\n      this.loadPage(1, false);\n    });\n  };\n\n  getMaxResultsSelection = () => {\n    return this.state.maxResultsSelection;\n  };\n\n  render() {\n    const { model, modelVersions, navigate, modelName } = this.props;\n    const { pageTokens } = this.state;\n    return (\n      <PageContainer>\n        <RequestStateWrapper\n          requestIds={this.criticalInitialRequestIds}\n          // eslint-disable-next-line no-trailing-spaces\n        >\n          {(loading: any, hasError: any, requests: any) => {\n            if (hasError) {\n              if (Utils.shouldRender404(requests, [this.initgetRegisteredModelApiRequestId])) {\n                return (\n                  <ErrorView\n                    statusCode={404}\n                    subMessage={this.props.intl.formatMessage(\n                      {\n                        defaultMessage: 'Model {modelName} does not exist',\n                        description: 'Sub-message text for error message on overall model page',\n                      },\n                      {\n                        modelName: modelName,\n                      },\n                    )}\n                    fallbackHomePageReactRoute={ModelRegistryRoutes.modelListPageRoute}\n                  />\n                );\n              }\n              const permissionDeniedErrors = requests.filter((request: any) => {\n                return (\n                  this.criticalInitialRequestIds.includes(request.id) &&\n                  request.error?.getErrorCode() === ErrorCodes.PERMISSION_DENIED\n                );\n              });\n              if (permissionDeniedErrors && permissionDeniedErrors[0]) {\n                return (\n                  <ErrorView\n                    statusCode={403}\n                    subMessage={this.props.intl.formatMessage(\n                      {\n                        defaultMessage: 'Permission denied for {modelName}. Error: \"{errorMsg}\"',\n                        description: 'Permission denied error message on registered model detail page',\n                      },\n                      {\n                        modelName: modelName,\n                        errorMsg: permissionDeniedErrors[0].error?.getMessageField(),\n                      },\n                    )}\n                    fallbackHomePageReactRoute={ModelRegistryRoutes.modelListPageRoute}\n                  />\n                );\n              }\n              // TODO(Zangr) Have a more generic boundary to handle all errors, not just 404.\n              triggerError(requests);\n            } else if (loading) {\n              return <Spinner />;\n            } else if (model) {\n              // Null check to prevent NPE after delete operation\n              return (\n                <ModelView\n                  model={model}\n                  modelVersions={modelVersions}\n                  handleEditDescription={this.handleEditDescription}\n                  handleDelete={this.handleDelete}\n                  navigate={navigate}\n                  onMetadataUpdated={this.loadModelVersions}\n                  orderByKey={this.orderByKey}\n                  orderByAsc={this.orderByAsc}\n                  currentPage={this.currentPage}\n                  nextPageToken={pageTokens[this.currentPage + 1]}\n                  onClickNext={this.handleClickNext}\n                  onClickPrev={this.handleClickPrev}\n                  onClickSortableColumn={this.handleClickSortableColumn}\n                  onSetMaxResult={this.handleMaxResultsChange}\n                  maxResultValue={this.getMaxResultsSelection()}\n                  loading={this.state.loading}\n                />\n              );\n            }\n            return null;\n          }}\n        </RequestStateWrapper>\n      </PageContainer>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any, ownProps: WithRouterNextProps<{ modelName: string }>) => {\n  const modelName = decodeURIComponent(ownProps.params.modelName);\n  const model = state.entities.modelByName[modelName];\n  const modelVersions = getModelVersions(state, modelName);\n  return {\n    modelName,\n    model,\n    modelVersions,\n  };\n};\n\nconst mapDispatchToProps = {\n  searchModelVersionsApi,\n  getRegisteredModelApi,\n  updateRegisteredModelApi,\n  deleteRegisteredModelApi,\n};\n\nconst ModelPageWithRouter = withRouterNext(\n  // @ts-expect-error TS(2769): No overload matches this call.\n  connect(mapStateToProps, mapDispatchToProps)(injectIntl(ModelPageImpl)),\n);\n\nexport const ModelPage = withErrorBoundary(ErrorUtils.mlflowServices.MODEL_REGISTRY, ModelPageWithRouter);\n\nexport default ModelPage;\n"],"names":["Paragraph","Typography","_ref","name","styles","_ref2","KeyValueTagFullViewModal","React","props","theme","useDesignSystemTheme","_jsx","Modal","componentId","title","tagKey","visible","isKeyValueTagFullViewModalVisible","onCancel","setIsKeyValueTagFullViewModalVisible","children","_jsxs","css","_css","backgroundColor","colors","backgroundPrimary","marginTop","spacing","sm","whiteSpace","wordBreak","tagValue","CopyButton","copyText","showLabel","icon","CopyIcon","getTruncatedStyles","shouldTruncate","overflow","textOverflow","textWrap","KeyValueTag","isClosable","onClose","tag","enableFullViewModal","charLimit","maxWidth","className","intl","useIntl","useState","shouldTruncateKey","shouldTruncateValue","key","value","fullLength","length","isKeyLonger","shorterLength","getKeyAndValueComplexTruncation","allowFullViewModal","fullViewModalLabel","formatMessage","id","defaultMessage","Tag","closable","LegacyTooltip","display","onClick","undefined","Text","bold","ModelVersionTableAliasesCell","aliases","onAddEdit","flexWrap","alignItems","marginRight","rowGap","xs","columnGap","Button","size","type","FormattedMessage","_Fragment","map","alias","AliasTag","PencilIcon","lazyPako","truncateToFirstLineWithMaxLength","str","maxLength","truncated","_","char","join","middleTruncateStr","maxLen","firstPartLen","Math","floor","lastPartLen","substring","_keyStr","btoaUtf8","input","output","i","result","_utf8_encode","chr1","charCodeAt","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","atobUtf8","replace","indexOf","String","fromCharCode","_utf8_decode","string","utftext","n","c","c2","c3","getStringSHA256","crypto","subtle","digest","TextEncoder","encode","then","arrayBuffer","Array","prototype","call","Uint8Array","x","toString","slice","COMPRESSED_TEXT_DEFLATE_PREFIX","textCompressDeflate","async","binaryData","deflate","text","Buffer","b64encoded","from","binaryString","byte","fromCodePoint","btoa","textDecompressDeflate","pako","compressedText","startsWith","Error","compressedTextWithoutPrefix","inflate","to","atob","m","_m$codePointAt","codePointAt","isTextCompressedDeflate","buttonProps","showTooltip","setShowTooltip","dangerouslySetAntdProps","handleClick","navigator","clipboard","writeText","setTimeout","onMouseLeave","handleMouseLeave","LocalStorageUtils","getStoreForComponent","componentName","LocalStorageStore","getSessionScopedStoreForComponent","version","constructor","scope","storageObj","this","window","localStorage","sessionStorage","loadComponentState","storedVal","getItem","reactComponentStateKey","JSON","parse","saveComponentState","stateRecord","targetValue","toJSON","setItem","stringify","withScopePrefix","getDropdownMenu","allAvailableTags","menu","searchValue","toLowerCase","useMemo","sortedIndexOf","isValidTagKey","test","flattenOptions","data","disabled","style","color","actionTertiaryTextDefault","actionDisabledText","placement","PlusIcon","groupOption","DropdownMenu","TagKeySelectDropdown","control","onKeyChangeCallback","isOpen","setIsOpen","selectRef","useRef","field","fieldState","useController","rules","required","message","LegacySelect","allowClear","ref","showSearch","dropdownRender","placeholder","defaultValue","open","onDropdownVisibleChange","filterOption","option","includes","onSelect","onChange","onClear","handleClear","validationState","error","Option","getTagsMap","tags","Map","useEditKeyValueTagsModal","onSuccess","saveTagsHandler","valueRequired","editedEntityRef","errorMessage","setErrorMessage","initialTags","setInitialTags","finalTags","setFinalTags","showModal","setShowModal","form","useForm","defaultValues","hideModal","showEditTagsModal","useCallback","editedEntity","current","reset","saveTags","setIsLoading","values","catch","e","_e$getUserVisibleErro","ErrorWrapper","getUserVisibleError","formValues","watch","isLoading","hasNewValues","isEqual","sortBy","isDirty","showPopoverMessage","EditTagsModal","destroyOnClose","footer","RestoreAntDDefaultClsPrefix","dangerouslyUseFocusPseudoClass","UnsavedTagPopoverTrigger","onSaveTask","loading","onSubmit","handleSubmit","trim","newEntries","set","gap","md","minWidth","flex","FormUI","Label","htmlFor","_tag$value","get","setValue","RHFControlledComponents","Input","htmlType","Message","handleTagDelete","currentFinalTags","delete","_ref3","fullTagDisplay","truncate","shownText","Popover","Root","Trigger","asChild","Content","align","Close","marginLeft","Arrow","KeyValueTagsEditorCell","COLUMN_IDS","getAliasesModalTitle","ModelVersionTable","modelName","modelVersions","activeStageOnly","orderByAsc","orderByKey","onSortChange","getSortFieldName","modelEntity","onMetadataUpdated","usingNextModelsUI","pagination","_modelEntity$aliases","aliasesByVersion","forEach","push","versions","filter","current_stage","ACTIVE_STAGES","allTagsKeys","allTagsList","modelVersion","flat","Set","sort","dispatch","useDispatch","existingTags","newTags","updateModelVersionTagsApi","EditAliasesModal","showEditAliasesModal","useEditAliasesModal","onSave","currentlyEditedVersion","existingAliases","draftAliases","setModelVersionAliasesApi","getTitle","description","link","chunks","href","mlflowAliasesLearnMoreLink","rel","target","rowSelection","setRowSelection","useEffect","selectedVersions","selectedVersionNumbers","tableColumns","columns","STATUS","enableSorting","header","meta","flexBasis","general","heightSm","flexGrow","cell","row","original","status","status_message","modelVersionStatusIconTooltips","ModelVersionStatusIcons","VERSION","accessorKey","getValue","Link","ModelRegistryRoutes","getModelVersionPageRoute","versionNumber","CREATION_TIMESTAMP","Utils","formatTimestamp","USER_ID","TAGS","ALIASES","multiline","mvAliases","STAGE","StageTagComponents","DESCRIPTION","sorting","desc","table","useReactTable","state","getCoreRowModel","getSortedRowModel","getRowId","onRowSelectionChange","onSortingChange","stateUpdater","newSortState","sorter","emptyComponent","Empty","RegisteringModelDocUrl","image","Table","scrollable","empty","getRowModel","rows","someRowsSelected","getIsSomeRowsSelected","getIsAllRowsSelected","TableRow","isHeader","TableRowSelectCell","checked","indeterminate","getToggleAllRowsSelectedHandler","getLeafHeaders","_meta","TableHeader","sortable","column","getCanSort","sortDirection","getIsSorted","onToggleSort","currentSortColumn","sortDesc","toggleSorting","columnDef","flexRender","getContext","TableSkeletonRows","getIsSelected","getToggleSelectedHandler","getAllCells","_meta2","_meta3","_meta4","TableCell","StageFilters","_ref4","ModelViewImpl","super","maxResultsSelection","MODEL_VERSIONS_PER_PAGE_COMPACT","stageFilter","showDescriptionEditor","isDeleteModalVisible","isDeleteModalConfirmLoading","runsSelected","isTagsRequestPending","updatingEmailPreferences","isTagAssignmentModalVisible","isSavingTags","tagSavingError","formRef","sharedTaggingUIEnabled","shouldUseSharedTaggingUI","handleSetMaxResult","onSetMaxResult","MODEL_VERSIONS_SEARCH_TIMESTAMP_FIELD","handleSortChange","params","onClickSortableColumn","handleStageFilterChange","setState","handleCancelEditDescription","handleSubmitEditDescription","handleEditDescription","startEditingDescription","stopPropagation","showDeleteModal","hideDeleteModal","showConfirmLoading","hideConfirmLoading","handleDeleteConfirm","navigate","handleDelete","modelListPageRoute","logErrorAndNotifyUser","getTags","getVisibleTagValues","handleEditTags","handleCloseTagAssignmentModal","handleAddTag","model","setRegisteredModelTagApi","resetFields","ex","console","getMessageField","displayGlobalErrorNotification","handleSaveEdit","handleDeleteTag","deleteRegisteredModelTagApi","handleSaveTags","deletedTags","newTagsToSet","deletedTagsToDelete","Promise","all","selectedRowKeys","selectedRows","newState","Object","assign","run_id","renderDetails","currentPage","nextPageToken","compareDisabled","keys","wrapper","Descriptions","Item","label","creation_timestamp","last_updated_timestamp","user_id","TagList","onEdit","CollapsibleSection","collapsiblePanel","renderDescriptionEditIcon","forceOpen","defaultCollapsed","EditableNote","defaultMarkdown","showEditor","EditableTagsTableView","innerRef","isRequestPending","versionsTabButtons","SegmentedControlGroup","SegmentedControlButton","getActiveVersionsCount","onCompare","shouldShowModelsNextUI","ModelsNextUIToggleSwitch","CursorPagination","hasNextPage","Boolean","hasPreviousPage","onNextPage","onClickNext","onPreviousPage","onClickPrev","pageSizeSelect","num","default","maxResultValue","options","DangerModal","confirmLoading","onOk","okText","cancelText","bind","componentDidMount","pageTitle","updatePageTitle","v","getOverflowMenuItems","itemName","getCompareModelVersionsPageRoute","editButton","renderMainPanel","render","breadcrumbs","PageHeader","OverflowMenu","mapDispatchToProps","emailNotificationPreferenceDropdown","width","marginBottom","emailNotificationPreferenceTip","paddingLeft","paddingRight","height","buttonHeight","ModelView","connect","mapStateToProps","ownProps","getRegisteredModelTags","withNextModelsUIContext","injectIntl","getModelPageSessionStore","getOrderByExpr","ModelPageImpl","modelPageStoreKey","defaultPersistedPageTokens","initSearchModelVersionsApiRequestId","getUUID","initgetRegisteredModelApiRequestId","updateRegisteredModelApiId","deleteRegisteredModelApiId","criticalInitialRequestIds","isEmptyPageResponse","model_versions","next_page_token","updateRegisteredModelApi","loadPage","deleteRegisteredModelApi","page","isInitialLoading","loadModelMetadata","pageTokens","filters_obj","promiseValues","searchModelVersionsApi","response","updatePageState","getRegisteredModelApi","resetHistoryState","getNextPageTokenFromResponse","prevState","setPersistedPageTokens","handleMaxResultsChange","parseInt","setMaxResultsInStore","handleClickNext","nextPage","updateUrlWithState","handleClickPrev","prevPage","handleClickSortableColumn","orderByDesc","getMaxResultsSelection","persistedPageTokens","getPersistedPageTokens","maxResultsForTokens","getPersistedMaxResults","loadModelVersions","resolve","newParams","URLSearchParams","searchParams","setSearchParams","urlPage","_this$props$searchPar","store","page_tokens","max_results","PageContainer","RequestStateWrapper","requestIds","hasError","requests","shouldRender404","ErrorView","statusCode","subMessage","fallbackHomePageReactRoute","permissionDeniedErrors","request","_request$error","getErrorCode","ErrorCodes","PERMISSION_DENIED","_permissionDeniedErro","errorMsg","triggerError","Spinner","ModelPageWithRouter","withRouterNext","decodeURIComponent","entities","modelByName","getModelVersions","ModelPage","withErrorBoundary","ErrorUtils","mlflowServices","MODEL_REGISTRY"],"ignoreList":[],"sourceRoot":""}