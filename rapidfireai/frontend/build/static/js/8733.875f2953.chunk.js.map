{"version":3,"file":"static/js/8733.875f2953.chunk.js","mappings":"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","sources":["experiment-tracking/components/MetricsPlotView.tsx","common/components/error-boundaries/SectionErrorBoundary.tsx","common/components/Spinner.tsx","common/components/Progress.tsx","experiment-tracking/components/MetricsPlotControls.tsx","common/components/RequestStateWrapper.tsx","experiment-tracking/components/HtmlTableView.tsx","experiment-tracking/components/MetricsSummaryTable.tsx","common/components/IconButton.tsx","experiment-tracking/components/RunLinksPopover.tsx","experiment-tracking/components/MetricsPlotPanel.tsx","experiment-tracking/components/LazyPlot.tsx","experiment-tracking/components/LineSmoothSlider.tsx"],"sourcesContent":["/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport Utils from '../../common/utils/Utils';\nimport _ from 'lodash';\nimport { saveAs } from 'file-saver';\nimport { X_AXIS_STEP, X_AXIS_RELATIVE, MAX_LINE_SMOOTHNESS } from './MetricsPlotControls';\nimport { CHART_TYPE_BAR, convertMetricsToCsv } from './MetricsPlotPanel';\nimport { LazyPlot } from './LazyPlot';\nimport { generateInfinityAnnotations } from '../utils/MetricsUtils';\nimport { injectIntl, IntlShape } from 'react-intl';\n\nconst MAX_RUN_NAME_DISPLAY_LENGTH = 24;\nconst EMA_THRESHOLD = 1;\n\nexport const EMA = (mArray: any, smoothingWeight: any) => {\n  // If all elements in the set of metric values are constant, or if\n  // the degree of smoothing is set to the minimum value, return the\n  // original set of metric values\n  if (smoothingWeight <= 1 || !mArray || mArray.length <= EMA_THRESHOLD || mArray.every((v: any) => v === mArray[0])) {\n    return mArray;\n  }\n\n  const smoothness = smoothingWeight / (MAX_LINE_SMOOTHNESS + 1);\n  const smoothedArray = [];\n  let biasedElement = 0;\n  for (let i = 0; i < mArray.length; i++) {\n    if (!isNaN(mArray[i])) {\n      biasedElement = biasedElement * smoothness + (1 - smoothness) * mArray[i];\n      // To avoid biasing earlier elements toward smaller-than-accurate values, we divide\n      // all elements by a `debiasedWeight` that asymptotically increases and approaches\n      // 1 as the element index increases\n      const debiasWeight = 1.0 - Math.pow(smoothness, i + 1);\n      const debiasedElement = biasedElement / debiasWeight;\n      smoothedArray.push(debiasedElement);\n    } else {\n      smoothedArray.push(mArray[i]);\n    }\n  }\n  return smoothedArray;\n};\n\n// To avoid pulling in plotly.js (unlazily) and / or using a separate package, just duplicating here\n// Copied from https://github.com/plotly/plotly.js/blob/v2.5.1/src/fonts/ploticon.js#L100\nconst DISK_ICON = {\n  width: 857.1,\n  height: 1000,\n  // eslint-disable-next-line max-len\n  path: 'm214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z',\n  transform: 'matrix(1 0 0 -1 0 850)',\n};\n\ntype MetricsPlotViewImplProps = {\n  runUuids: string[];\n  runDisplayNames: string[];\n  metrics: any[];\n  xAxis: string;\n  metricKeys: string[];\n  showPoint: boolean;\n  chartType: string;\n  isComparing: boolean;\n  lineSmoothness?: number;\n  extraLayout?: any;\n  onLayoutChange: (...args: any[]) => any;\n  onClick: (...args: any[]) => any;\n  onLegendClick: (...args: any[]) => any;\n  onLegendDoubleClick: (...args: any[]) => any;\n  deselectedCurves: string[];\n  intl?: any;\n};\n\nexport class MetricsPlotViewImpl extends React.Component<MetricsPlotViewImplProps> {\n  static getLineLegend = (metricKey: any, runDisplayName: any, isComparing: any) => {\n    let legend = metricKey;\n    if (isComparing) {\n      legend += `, ${Utils.truncateString(runDisplayName, MAX_RUN_NAME_DISPLAY_LENGTH)}`;\n    }\n    return legend;\n  };\n\n  static getXValuesForLineChart(history: any, xAxisType: any, intl?: IntlShape) {\n    if (history.length === 0) {\n      return [];\n    }\n    switch (xAxisType) {\n      case X_AXIS_STEP:\n        return history.map(({ step }: any) => step);\n      case X_AXIS_RELATIVE: {\n        // @ts-expect-error TS(2339): Property 'timestamp' does not exist on type '{ toS... Remove this comment to see the full error message\n        const { timestamp: minTimestamp } = _.minBy(history, 'timestamp');\n        return history.map(({ timestamp }: any) => (timestamp - minTimestamp) / 1000);\n      }\n      default: // X_AXIS_WALL\n        return history.map(({ timestamp }: any) => timestamp);\n    }\n  }\n\n  /**\n   * Regenerates annotations and shapes for infinity and NaN values.\n   * Best called infrequently. Ideally should be called only when data input changes.\n   */\n  regenerateInfinityAnnotations = () => {\n    const { metrics, xAxis, extraLayout } = this.props;\n    const isYAxisLog = extraLayout?.yaxis?.type === 'log';\n    const annotationData = {};\n\n    metrics.forEach((metric) => {\n      const { metricKey, history } = metric;\n      // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n      annotationData[metricKey] = generateInfinityAnnotations({\n        xValues: (MetricsPlotView as any).getXValuesForLineChart(history, xAxis, this.props.intl),\n        yValues: history.map((entry: any) => (typeof entry.value === 'number' ? entry.value : Number(entry.value))),\n        isLogScale: isYAxisLog,\n        stringFormatter: (value) => this.props.intl.formatMessage(value, { metricKey }),\n      });\n    });\n\n    this.#annotationData = annotationData;\n  };\n\n  #annotationData = {};\n\n  getPlotPropsForLineChart = () => {\n    const { metrics, xAxis, showPoint, lineSmoothness, isComparing, deselectedCurves } = this.props;\n\n    const deselectedCurvesSet = new Set(deselectedCurves);\n    const shapes: any = [];\n    const annotations: any = [];\n\n    const data = metrics.map((metric) => {\n      const { metricKey, runDisplayName, history, runUuid } = metric;\n      const historyValues = history.map((entry: any) =>\n        typeof entry.value === 'number' ? entry.value : Number(entry.value),\n      );\n      // For metrics with exactly one non-NaN item, we set `isSingleHistory` to `true` in order\n      // to display the item as a point. For metrics with zero non-NaN items (i.e., empty metrics),\n      // we also set `isSingleHistory` to `true` in order to populate the plot legend with a\n      // point-style entry for each empty metric, although no data will be plotted for empty\n      // metrics\n      const isSingleHistory = historyValues.filter((value: any) => !isNaN(value)).length <= 1;\n\n      const visible = !deselectedCurvesSet.has(Utils.getCurveKey(runUuid, metricKey)) ? true : 'legendonly';\n\n      if (this.#annotationData && metricKey in this.#annotationData && visible === true) {\n        // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        shapes.push(...this.#annotationData[metricKey].shapes);\n        // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n        annotations.push(...this.#annotationData[metricKey].annotations);\n      }\n\n      return {\n        name: (MetricsPlotView as any).getLineLegend(metricKey, runDisplayName, isComparing),\n        x: (MetricsPlotView as any).getXValuesForLineChart(history, xAxis),\n        y: (isSingleHistory ? historyValues : EMA(historyValues, lineSmoothness)).map((entry: any) =>\n          !isFinite(entry) ? NaN : entry,\n        ),\n        text: historyValues.map((value: any) => (isNaN(value) ? value : value.toFixed(5))),\n        type: 'scattergl',\n        mode: isSingleHistory ? 'markers' : 'lines+markers',\n        marker: { opacity: isSingleHistory || showPoint ? 1 : 0 },\n        hovertemplate: isSingleHistory || lineSmoothness === 1 ? '%{y}' : 'Value: %{text}<br>Smoothed: %{y}',\n        visible: visible,\n        runId: runUuid,\n        metricName: metricKey,\n      };\n    });\n    const props = { data };\n\n    (props as any).layout = {\n      ...(props as any).layout,\n      ...this.props.extraLayout,\n      shapes,\n      annotations,\n    };\n\n    return props;\n  };\n\n  getPlotPropsForBarChart = () => {\n    /* eslint-disable no-param-reassign */\n    const { runUuids, runDisplayNames, deselectedCurves } = this.props;\n\n    // A reverse lookup of `metricKey: { runUuid: value, metricKey }`\n    const historyByMetricKey = this.props.metrics.reduce((map, metric) => {\n      const { runUuid, metricKey, history } = metric;\n      const value = history[0] && history[0].value;\n      if (!map[metricKey]) {\n        map[metricKey] = { metricKey, [runUuid]: value };\n      } else {\n        map[metricKey][runUuid] = value;\n      }\n      return map;\n    }, {});\n\n    const arrayOfHistorySortedByMetricKey = _.sortBy(Object.values(historyByMetricKey), 'metricKey');\n\n    const sortedMetricKeys = arrayOfHistorySortedByMetricKey.map((history) => (history as any).metricKey);\n    const deselectedCurvesSet = new Set(deselectedCurves);\n    const data = runUuids.map((runUuid, i) => {\n      const visibility = deselectedCurvesSet.has(runUuid) ? { visible: 'legendonly' } : {};\n      return {\n        name: Utils.truncateString(runDisplayNames[i], MAX_RUN_NAME_DISPLAY_LENGTH),\n        x: sortedMetricKeys,\n        y: arrayOfHistorySortedByMetricKey.map((history) => (history as any)[runUuid]),\n        type: 'bar',\n        runId: runUuid,\n        ...visibility,\n      };\n    });\n\n    const layout = { barmode: 'group' };\n    const props = { data, layout };\n    props.layout = {\n      ...props.layout,\n      ...this.props.extraLayout,\n    };\n    return props;\n  };\n\n  componentDidMount() {\n    this.regenerateInfinityAnnotations();\n  }\n\n  componentDidUpdate() {\n    /**\n     * TODO: make sure that annotations are regenereated only when data changes.\n     * In fact, all internal recalculations should be done only then.\n     */\n    this.regenerateInfinityAnnotations();\n  }\n\n  render() {\n    const { onLayoutChange, onClick, onLegendClick, onLegendDoubleClick } = this.props;\n    const plotProps =\n      this.props.chartType === CHART_TYPE_BAR ? this.getPlotPropsForBarChart() : this.getPlotPropsForLineChart();\n\n    return (\n      <div className=\"metrics-plot-view-container\">\n        <LazyPlot\n          {...plotProps}\n          useResizeHandler\n          onRelayout={onLayoutChange}\n          onClick={onClick}\n          onLegendClick={onLegendClick}\n          onLegendDoubleClick={onLegendDoubleClick}\n          style={{ width: '100%', height: '100%' }}\n          layout={_.cloneDeep((plotProps as any).layout)}\n          config={{\n            displaylogo: false,\n            scrollZoom: true,\n            modeBarButtonsToRemove: ['sendDataToCloud'],\n            modeBarButtonsToAdd: [\n              {\n                name: 'Download plot data as CSV',\n                icon: DISK_ICON,\n                click: () => {\n                  const csv = convertMetricsToCsv(this.props.metrics);\n                  const blob = new Blob([csv], { type: 'application/csv;charset=utf-8' });\n                  saveAs(blob, 'metrics.csv');\n                },\n              },\n            ],\n          }}\n        />\n      </div>\n    );\n  }\n}\n\n// @ts-expect-error TS(2769): No overload matches this call.\nexport const MetricsPlotView = injectIntl(MetricsPlotViewImpl);\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport Utils from '../../utils/Utils';\n\ntype Props = {\n  showServerError?: boolean;\n};\n\ntype State = any;\n\nexport class SectionErrorBoundary extends React.Component<Props, State> {\n  state = { error: null };\n\n  componentDidCatch(error: any, errorInfo: any) {\n    this.setState({ error });\n    // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n    console.error(error, errorInfo);\n  }\n\n  renderErrorMessage(error: any) {\n    return this.props.showServerError ? <div>Error message: {error.message}</div> : '';\n  }\n\n  render() {\n    const { children } = this.props;\n    const { error } = this.state;\n    if (error) {\n      return (\n        <div>\n          <p>\n            <i\n              data-testid=\"icon-fail\"\n              className=\"fa fa-exclamation-triangle mlflow-icon-fail\"\n              css={classNames.wrapper}\n            />\n            <span> Something went wrong with this section. </span>\n            <span>If this error persists, please report an issue </span>\n            {/* Reported during ESLint upgrade */}\n            {/* eslint-disable-next-line react/jsx-no-target-blank */}\n            <a href={Utils.getSupportPageUrl()} target=\"_blank\">\n              here\n            </a>\n            .{this.renderErrorMessage(error)}\n          </p>\n        </div>\n      );\n    }\n\n    return children;\n  }\n}\n\nconst classNames = {\n  wrapper: {\n    marginLeft: -2, // to align the failure icon with the collapsable section caret toggle\n  },\n};\n","import spinner from '../static/mlflow-spinner.png';\nimport { Interpolation, keyframes, Theme } from '@emotion/react';\n\ntype Props = {\n  showImmediately?: boolean;\n};\n\nexport function Spinner({ showImmediately }: Props) {\n  return (\n    <div css={(theme) => styles.spinner(theme, showImmediately)}>\n      <img alt=\"Page loading...\" src={spinner} />\n    </div>\n  );\n}\n\nconst styles = {\n  spinner: (theme: Theme, immediate?: boolean): Interpolation<Theme> => ({\n    width: 100,\n    marginTop: 100,\n    marginLeft: 'auto',\n    marginRight: 'auto',\n\n    img: {\n      position: 'absolute',\n      opacity: 0,\n      top: '50%',\n      left: '50%',\n      width: theme.general.heightBase * 2,\n      height: theme.general.heightBase * 2,\n      marginTop: -theme.general.heightBase,\n      marginLeft: -theme.general.heightBase,\n      animation: `${keyframes`\n          0% {\n            opacity: 1;\n          }\n          100% {\n            opacity: 1;\n            -webkit-transform: rotate(360deg);\n                transform: rotate(360deg);\n            }\n          `} 3s linear infinite`,\n      animationDelay: immediate ? '0s' : '0.5s',\n    },\n  }),\n};\n","import { Theme } from '@emotion/react';\n\nexport interface ProgressProps {\n  percent: number;\n  format: (percent: number) => string;\n  className?: string;\n}\n\n/**\n * Recreates basic features of antd's <Progress /> component.\n * Temporary solution, waiting for this component to be included in DuBois.\n */\nexport const Progress = (props: ProgressProps) => {\n  return (\n    <div css={styles.wrapper} className={props.className}>\n      <div css={styles.track}>\n        <div css={styles.progressTrack} style={{ width: `${props.percent}%` }} />\n      </div>\n      {props.format(props.percent)}\n    </div>\n  );\n};\n\nconst styles = {\n  wrapper: (theme: Theme) => ({ display: 'flex', alignItems: 'center', gap: theme.spacing.sm }),\n  track: (theme: Theme) => ({\n    backgroundColor: theme.colors.backgroundSecondary,\n    height: theme.spacing.sm,\n    flex: 1,\n    borderRadius: theme.spacing.sm,\n  }),\n  progressTrack: (theme: Theme) => ({\n    backgroundColor: theme.colors.primary,\n    height: theme.spacing.sm,\n    borderRadius: theme.spacing.sm,\n  }),\n};\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport _ from 'lodash';\nimport { Button, LegacySelect, Switch, LegacyTooltip, Radio, QuestionMarkIcon } from '@databricks/design-system';\nimport { Progress } from '../../common/components/Progress';\nimport { CHART_TYPE_LINE, METRICS_PLOT_POLLING_INTERVAL_MS } from './MetricsPlotPanel';\n\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { LineSmoothSlider } from './LineSmoothSlider';\n\nconst RadioGroup = Radio.Group;\nexport const X_AXIS_WALL = 'wall';\nexport const X_AXIS_STEP = 'step';\nexport const X_AXIS_RELATIVE = 'relative';\nexport const MAX_LINE_SMOOTHNESS = 100;\n\ntype Props = {\n  distinctMetricKeys: string[];\n  selectedMetricKeys: string[];\n  selectedXAxis: string;\n  handleXAxisChange: (...args: any[]) => any;\n  handleShowPointChange: (...args: any[]) => any;\n  handleMetricsSelectChange: (...args: any[]) => any;\n  handleYAxisLogScaleChange: (...args: any[]) => any;\n  handleLineSmoothChange: (value: number) => void;\n  chartType: string;\n  lineSmoothness: number;\n  yAxisLogScale: boolean;\n  showPoint: boolean;\n  intl: {\n    formatMessage: (...args: any[]) => any;\n  };\n  numRuns: number;\n  numCompletedRuns: number;\n  handleDownloadCsv: (...args: any[]) => any;\n  disableSmoothnessControl: boolean;\n};\n\nclass MetricsPlotControlsImpl extends React.Component<Props> {\n  static defaultProps = {\n    disableSmoothnessControl: false,\n  };\n\n  handleMetricsSelectFilterChange = (text: any, option: any) =>\n    option.props.title.toUpperCase().includes(text.toUpperCase());\n\n  getAllMetricKeys = () => {\n    const { distinctMetricKeys } = this.props;\n    return distinctMetricKeys.map((metricKey) => ({\n      title: metricKey,\n      value: metricKey,\n      key: metricKey,\n    }));\n  };\n\n  render() {\n    const { chartType, yAxisLogScale, lineSmoothness, showPoint, numRuns, numCompletedRuns, disableSmoothnessControl } =\n      this.props;\n\n    const lineSmoothnessTooltipText = (\n      <FormattedMessage\n        // eslint-disable-next-line max-len\n        defaultMessage='Make the line between points \"smoother\" based on Exponential Moving Average. Smoothing can be useful for displaying the overall trend when the logging frequency is high.'\n        description=\"Helpful tooltip message to help with line smoothness for the metrics plot\"\n      />\n    );\n    const completedRunsTooltipText = (\n      <FormattedMessage\n        // eslint-disable-next-line max-len\n        defaultMessage=\"MLflow UI automatically fetches metric histories for active runs and updates the metrics plot with a {interval} second interval.\"\n        description=\"Helpful tooltip message to explain the automatic metrics plot update\"\n        values={{ interval: Math.round(METRICS_PLOT_POLLING_INTERVAL_MS / 1000) }}\n      />\n    );\n    return (\n      <div\n        className=\"plot-controls\"\n        css={[styles.controlsWrapper, chartType === CHART_TYPE_LINE && styles.centeredControlsWrapper]}\n      >\n        {chartType === CHART_TYPE_LINE ? (\n          <div>\n            <div className=\"inline-control\">\n              <div className=\"control-label\">\n                <FormattedMessage\n                  defaultMessage=\"Completed Runs\"\n                  description=\"Label for the progress bar to show the number of completed runs\"\n                />{' '}\n                <LegacyTooltip title={completedRunsTooltipText}>\n                  <QuestionMarkIcon />\n                </LegacyTooltip>\n                <Progress\n                  percent={Math.round((100 * numCompletedRuns) / numRuns)}\n                  format={() => `${numCompletedRuns}/${numRuns}`}\n                />\n              </div>\n            </div>\n            <div className=\"inline-control\">\n              <div className=\"control-label\">\n                <FormattedMessage\n                  defaultMessage=\"Points:\"\n                  // eslint-disable-next-line max-len\n                  description=\"Label for the toggle button to toggle to show points or not for the metric experiment run\"\n                />\n              </div>\n              <Switch\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_120\"\n                data-testid=\"show-point-toggle\"\n                defaultChecked={showPoint}\n                onChange={this.props.handleShowPointChange}\n              />\n            </div>\n            {!disableSmoothnessControl && (\n              <div className=\"block-control\">\n                <div className=\"control-label\">\n                  <FormattedMessage\n                    defaultMessage=\"Line Smoothness\"\n                    description=\"Label for the smoothness slider for the graph plot for metrics\"\n                  />{' '}\n                  <LegacyTooltip title={lineSmoothnessTooltipText}>\n                    <QuestionMarkIcon />\n                  </LegacyTooltip>\n                </div>\n                <LineSmoothSlider\n                  data-testid=\"smoothness-toggle\"\n                  min={1}\n                  max={MAX_LINE_SMOOTHNESS}\n                  onChange={this.props.handleLineSmoothChange}\n                  value={lineSmoothness}\n                />\n              </div>\n            )}\n            <div className=\"block-control\">\n              <div className=\"control-label\">\n                <FormattedMessage\n                  defaultMessage=\"X-axis:\"\n                  // eslint-disable-next-line max-len\n                  description=\"Label for the radio button to toggle the control on the X-axis of the metric graph for the experiment\"\n                />\n              </div>\n              <RadioGroup\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_154\"\n                name=\"metrics-plot-x-axis-radio-group\"\n                css={styles.xAxisControls}\n                onChange={this.props.handleXAxisChange}\n                value={this.props.selectedXAxis}\n              >\n                <Radio value={X_AXIS_STEP} data-testid=\"x-axis-radio\">\n                  <FormattedMessage\n                    defaultMessage=\"Step\"\n                    // eslint-disable-next-line max-len\n                    description=\"Radio button option to choose the step control option for the X-axis for metric graph on the experiment runs\"\n                  />\n                </Radio>\n                <Radio value={X_AXIS_WALL} data-testid=\"x-axis-radio\">\n                  <FormattedMessage\n                    defaultMessage=\"Time (Wall)\"\n                    // eslint-disable-next-line max-len\n                    description=\"Radio button option to choose the time wall control option for the X-axis for metric graph on the experiment runs\"\n                  />\n                </Radio>\n                <Radio value={X_AXIS_RELATIVE} data-testid=\"x-axis-radio\">\n                  <FormattedMessage\n                    defaultMessage=\"Time (Relative)\"\n                    // eslint-disable-next-line max-len\n                    description=\"Radio button option to choose the time relative control option for the X-axis for metric graph on the experiment runs\"\n                  />\n                </Radio>\n              </RadioGroup>\n            </div>\n          </div>\n        ) : null}\n        <div className=\"block-control\">\n          <div className=\"control-label\">\n            <FormattedMessage\n              defaultMessage=\"Y-axis:\"\n              // eslint-disable-next-line max-len\n              description=\"Label where the users can choose the metric of the experiment run to be plotted on the Y-axis\"\n            />\n          </div>\n          <LegacySelect\n            placeholder={this.props.intl.formatMessage({\n              defaultMessage: 'Please select metric',\n              description:\n                // eslint-disable-next-line max-len\n                'Placeholder text where one can select metrics from the list of available metrics to render on the graph',\n            })}\n            value={this.props.selectedMetricKeys}\n            onChange={this.props.handleMetricsSelectChange}\n            mode=\"multiple\"\n            css={styles.axisSelector}\n          >\n            {this.getAllMetricKeys().map((key) => (\n              <LegacySelect.Option value={key.value} key={key.key}>\n                {key.title}\n              </LegacySelect.Option>\n            ))}\n          </LegacySelect>\n        </div>\n        <div className=\"inline-control\">\n          <div className=\"control-label\">\n            <FormattedMessage\n              defaultMessage=\"Y-axis Log Scale:\"\n              // eslint-disable-next-line max-len\n              description=\"Label for the radio button to toggle the Log scale on the Y-axis of the metric graph for the experiment\"\n            />\n          </div>\n          <Switch\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_220\"\n            defaultChecked={yAxisLogScale}\n            onChange={this.props.handleYAxisLogScaleChange}\n          />\n        </div>\n        <div className=\"inline-control\">\n          <Button\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_metricsplotcontrols.tsx_222\"\n            css={{\n              textAlign: 'justify',\n              textAlignLast: 'left',\n            }}\n            onClick={this.props.handleDownloadCsv}\n          >\n            <FormattedMessage\n              defaultMessage=\"Download data\"\n              // eslint-disable-next-line max-len\n              description=\"String for the download csv button to download metrics from this run offline in a CSV format\"\n            />\n            <i className=\"fa fa-download\" />\n          </Button>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst styles = {\n  xAxisControls: (theme: any) => ({\n    label: { marginTop: theme.spacing.xs, marginBottom: theme.spacing.xs },\n  }),\n  controlsWrapper: { minWidth: '20%', maxWidth: '30%' },\n  axisSelector: { width: '100%' },\n  centeredControlsWrapper: {\n    // Make controls aligned to plotly line chart\n    justifyContent: 'center',\n  },\n};\n\n// @ts-expect-error TS(2769): No overload matches this call.\nexport const MetricsPlotControls = injectIntl(MetricsPlotControlsImpl);\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { getApis } from '../../experiment-tracking/reducers/Reducers';\nimport { Spinner } from './Spinner';\nimport { ErrorCodes } from '../constants';\nimport { ErrorWrapper } from '../utils/ErrorWrapper';\nimport { ReduxState } from '../../redux-types';\n\nexport const DEFAULT_ERROR_MESSAGE = 'A request error occurred.';\n\ntype RequestStateWrapperProps = {\n  children?: React.ReactNode;\n  customSpinner?: React.ReactNode;\n  shouldOptimisticallyRender?: boolean;\n  requests: any[];\n  requestIds?: string[];\n  requestIdsWith404sToIgnore?: string[];\n  description?: any; // TODO: PropTypes.oneOf(Object.values(LoadingDescription))\n  permissionDeniedView?: React.ReactNode;\n  suppressErrorThrow?: boolean;\n  customRequestErrorHandlerFn?: (\n    failedRequests: {\n      id: string;\n      active?: boolean;\n      error: Error | ErrorWrapper;\n    }[],\n  ) => void;\n};\n\ntype RequestStateWrapperState = any;\n\nexport class RequestStateWrapper extends Component<RequestStateWrapperProps, RequestStateWrapperState> {\n  static defaultProps = {\n    requests: [],\n    requestIdsWith404sToIgnore: [],\n    shouldOptimisticallyRender: false,\n  };\n\n  state = {\n    shouldRender: false,\n    shouldRenderError: false,\n  };\n\n  static getErrorRequests(requests: any, requestIdsWith404sToIgnore: any) {\n    return requests.filter((r: any) => {\n      if (r.error !== undefined) {\n        return !(\n          requestIdsWith404sToIgnore &&\n          requestIdsWith404sToIgnore.includes(r.id) &&\n          r.error.getErrorCode() === ErrorCodes.RESOURCE_DOES_NOT_EXIST\n        );\n      }\n      return false;\n    });\n  }\n\n  static getDerivedStateFromProps(nextProps: any) {\n    const shouldRender = nextProps.requests.length\n      ? nextProps.requests.every((r: any) => r && r.active === false)\n      : false;\n\n    const requestErrors = RequestStateWrapper.getErrorRequests(\n      nextProps.requests,\n      nextProps.requestIdsWith404sToIgnore,\n    );\n\n    return {\n      shouldRender,\n      shouldRenderError: requestErrors.length > 0,\n      requestErrors,\n    };\n  }\n\n  getRenderedContent() {\n    const { children, requests, customSpinner, permissionDeniedView, suppressErrorThrow, customRequestErrorHandlerFn } =\n      this.props;\n    // @ts-expect-error TS(2339): Property 'requestErrors' does not exist on type '{... Remove this comment to see the full error message\n    const { shouldRender, shouldRenderError, requestErrors } = this.state;\n    const permissionDeniedErrors = requestErrors.filter((failedRequest: any) => {\n      return failedRequest.error.getErrorCode() === ErrorCodes.PERMISSION_DENIED;\n    });\n\n    if (typeof children === 'function') {\n      return children(!shouldRender, shouldRenderError, requests, requestErrors);\n    } else if (shouldRender || shouldRenderError || this.props.shouldOptimisticallyRender) {\n      if (permissionDeniedErrors.length > 0 && permissionDeniedView) {\n        return permissionDeniedView;\n      }\n      if (shouldRenderError && !suppressErrorThrow) {\n        customRequestErrorHandlerFn ? customRequestErrorHandlerFn(requestErrors) : triggerError(requestErrors);\n      }\n\n      return children;\n    }\n\n    return customSpinner || <Spinner />;\n  }\n\n  render() {\n    return this.getRenderedContent();\n  }\n}\n\nexport const triggerError = (requests: any) => {\n  // This triggers the OOPS error boundary.\n  // eslint-disable-next-line no-console -- TODO(FEINF-3587)\n  console.error('ERROR', requests);\n  throw Error(`${DEFAULT_ERROR_MESSAGE}: ${requests.error}`);\n};\n\nconst mapStateToProps = (state: ReduxState, ownProps: Omit<RequestStateWrapperProps, 'requests'>) => ({\n  requests: getApis(ownProps.requestIds, state),\n});\n\nexport default connect(mapStateToProps)(RequestStateWrapper);\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport { LegacyTable } from '@databricks/design-system';\nimport './HtmlTableView.css';\n\ntype Props = {\n  columns: any[];\n  values: any[];\n  styles?: any;\n  testId?: string;\n  scroll?: any;\n};\n\nexport function HtmlTableView({ columns, values, styles = {}, testId, scroll }: Props) {\n  return (\n    <LegacyTable\n      className=\"mlflow-html-table-view\"\n      data-testid={testId}\n      dataSource={values}\n      columns={columns}\n      scroll={scroll}\n      size=\"middle\"\n      pagination={false}\n      style={styles}\n    />\n  );\n}\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React, { Fragment } from 'react';\nimport { connect } from 'react-redux';\nimport { injectIntl } from 'react-intl';\nimport { HtmlTableView } from './HtmlTableView';\nimport { getRunInfo } from '../reducers/Reducers';\nimport { getLatestMetrics, getMinMetrics, getMaxMetrics } from '../reducers/MetricReducer';\nimport Utils from '../../common/utils/Utils';\nimport { Link } from '../../common/utils/RoutingUtils';\nimport Routes from '../routes';\nimport type { RunInfoEntity } from '../types';\n\nconst maxTableHeight = 300;\n// Because we make the table body scrollable, column widths must be fixed\n// so that the header widths match the table body column widths.\nconst headerColWidth = 350;\nconst dataColWidth = 200;\n\ntype MetricsSummaryTableProps = {\n  runUuids: string[];\n  runExperimentIds: any;\n  runDisplayNames: string[];\n  metricKeys: string[];\n  latestMetrics: any;\n  minMetrics: any;\n  maxMetrics: any;\n  intl: {\n    formatMessage: (...args: any[]) => any;\n  };\n};\n\nclass MetricsSummaryTable extends React.Component<MetricsSummaryTableProps> {\n  render() {\n    const { runUuids } = this.props;\n    return (\n      <div className=\"metrics-summary\">\n        {runUuids.length > 1 ? this.renderMetricTables() : this.renderRunTable(runUuids[0])}\n      </div>\n    );\n  }\n\n  renderRunTable(runUuid: any) {\n    const { metricKeys, latestMetrics, minMetrics, maxMetrics, intl } = this.props;\n    const columns = [\n      {\n        title: intl.formatMessage({\n          defaultMessage: 'Metric',\n          description:\n            // eslint-disable-next-line max-len\n            'Column title for the column displaying the metric names for a run',\n        }),\n        dataIndex: 'metricKey',\n        sorter: (a: any, b: any) => (a.metricKey < b.metricKey ? -1 : a.metricKey > b.metricKey ? 1 : 0),\n        width: headerColWidth,\n      },\n      ...this.dataColumns(),\n    ];\n    return metricKeys.length === 0 ? null : (\n      <HtmlTableView\n        columns={columns}\n        values={getRunValuesByMetric(runUuid, metricKeys, latestMetrics, minMetrics, maxMetrics, intl)}\n        scroll={{ y: maxTableHeight }}\n      />\n    );\n  }\n\n  renderMetricTables() {\n    const { runExperimentIds, runUuids, runDisplayNames, metricKeys, latestMetrics, minMetrics, maxMetrics, intl } =\n      this.props;\n    const columns = [\n      {\n        title: intl.formatMessage({\n          defaultMessage: 'Run',\n          description:\n            // eslint-disable-next-line max-len\n            'Column title for the column displaying the run names for a metric',\n        }),\n        dataIndex: 'runLink',\n        sorter: (a: any, b: any) => (a.runName < b.runName ? -1 : a.runName > b.runName ? 1 : 0),\n        width: headerColWidth,\n      },\n      ...this.dataColumns(),\n    ];\n    return metricKeys.map((metricKey) => {\n      return (\n        <Fragment key={metricKey}>\n          <h1>{metricKey}</h1>\n          <HtmlTableView\n            columns={columns}\n            values={getMetricValuesByRun(\n              metricKey,\n              runExperimentIds,\n              runUuids,\n              runDisplayNames,\n              latestMetrics,\n              minMetrics,\n              maxMetrics,\n              intl,\n            )}\n            scroll={{ y: maxTableHeight }}\n          />\n        </Fragment>\n      );\n    });\n  }\n\n  dataColumns() {\n    return [\n      {\n        title: this.props.intl.formatMessage({\n          defaultMessage: 'Latest',\n          description: 'Column title for the column displaying the latest metric values for a metric',\n        }),\n        dataIndex: 'latestFormatted',\n        sorter: (a: any, b: any) => a.latestValue - b.latestValue,\n        width: dataColWidth,\n        ellipsis: true,\n      },\n      {\n        title: this.props.intl.formatMessage({\n          defaultMessage: 'Min',\n          description: 'Column title for the column displaying the minimum metric values for a metric',\n        }),\n        dataIndex: 'minFormatted',\n        sorter: (a: any, b: any) => a.minValue - b.minValue,\n        width: dataColWidth,\n        ellipsis: true,\n      },\n      {\n        title: this.props.intl.formatMessage({\n          defaultMessage: 'Max',\n          description: 'Column title for the column displaying the maximum metric values for a metric',\n        }),\n        dataIndex: 'maxFormatted',\n        sorter: (a: any, b: any) => a.maxValue - b.maxValue,\n        width: dataColWidth,\n        ellipsis: true,\n      },\n    ];\n  }\n}\n\nconst getMetricValuesByRun = (\n  metricKey: any,\n  runExperimentIds: any,\n  runUuids: any,\n  runDisplayNames: any,\n  latestMetrics: any,\n  minMetrics: any,\n  maxMetrics: any,\n  intl: any,\n) => {\n  return runUuids.map((runUuid: any, runIdx: any) => {\n    const runName = runDisplayNames[runIdx];\n    return {\n      runName: runName,\n      runLink: <Link to={Routes.getRunPageRoute(runExperimentIds[runUuid] || '', runUuid)}>{runName}</Link>,\n      key: runUuid,\n      ...rowData(runUuid, metricKey, latestMetrics, minMetrics, maxMetrics, intl),\n    };\n  });\n};\n\nconst getRunValuesByMetric = (\n  runUuid: any,\n  metricKeys: any,\n  latestMetrics: any,\n  minMetrics: any,\n  maxMetrics: any,\n  intl: any,\n) => {\n  return metricKeys.map((metricKey: any) => {\n    return {\n      metricKey,\n      key: metricKey,\n      ...rowData(runUuid, metricKey, latestMetrics, minMetrics, maxMetrics, intl),\n    };\n  });\n};\n\nconst rowData = (runUuid: any, metricKey: any, latestMetrics: any, minMetrics: any, maxMetrics: any, intl: any) => {\n  const latestMetric = getMetric(latestMetrics, runUuid, metricKey);\n  const minMetric = getMetric(minMetrics, runUuid, metricKey);\n  const maxMetric = getMetric(maxMetrics, runUuid, metricKey);\n  const latestValue = getValue(latestMetric);\n  const minValue = getValue(minMetric);\n  const maxValue = getValue(maxMetric);\n  return {\n    latestFormatted: (\n      <span title={latestValue} css={{ marginRight: 10 }}>\n        {formatMetric(latestMetric, intl)}\n      </span>\n    ),\n    minFormatted: (\n      <span title={minValue} css={{ marginRight: 10 }}>\n        {formatMetric(minMetric, intl)}\n      </span>\n    ),\n    maxFormatted: (\n      <span title={maxValue} css={{ marginRight: 10 }}>\n        {formatMetric(maxMetric, intl)}\n      </span>\n    ),\n    latestValue,\n    minValue,\n    maxValue,\n  };\n};\n\nconst getMetric = (valuesMap: any, runUuid: any, metricKey: any) => valuesMap[runUuid] && valuesMap[runUuid][metricKey];\n\nconst getValue = (metric: any) => metric && metric.value;\n\nconst formatMetric = (metric: any, intl: any) =>\n  metric === undefined\n    ? ''\n    : intl.formatMessage(\n        {\n          defaultMessage: '{value} (step={step})',\n          description: 'Formats a metric value along with the step number it corresponds to',\n        },\n        {\n          value: metric.value,\n          step: metric.step,\n        },\n      );\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n  const { runUuids } = ownProps;\n  const runExperimentIds = {};\n  const latestMetrics = {};\n  const minMetrics = {};\n  const maxMetrics = {};\n  runUuids.forEach((runUuid: any) => {\n    const runInfo = getRunInfo(runUuid, state) as RunInfoEntity;\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    runExperimentIds[runUuid] = runInfo && runInfo.experimentId;\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    latestMetrics[runUuid] = getLatestMetrics(runUuid, state);\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    minMetrics[runUuid] = getMinMetrics(runUuid, state);\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    maxMetrics[runUuid] = getMaxMetrics(runUuid, state);\n  });\n  return { runExperimentIds, latestMetrics, minMetrics, maxMetrics };\n};\n\n// @ts-expect-error TS(2769): No overload matches this call.\nconst MetricsSummaryTableWithIntl = injectIntl(MetricsSummaryTable);\n\nexport default connect(mapStateToProps)(MetricsSummaryTableWithIntl);\n","import React from 'react';\nimport { Button } from '@databricks/design-system';\n\ntype Props = {\n  icon: React.ReactNode;\n  style?: React.CSSProperties;\n  className?: string;\n  onClick?: () => void;\n  restProps?: unknown;\n};\n\nexport const IconButton = ({ icon, className, style, onClick, ...restProps }: Props) => {\n  return (\n    <Button\n      componentId=\"codegen_mlflow_app_src_common_components_iconbutton.tsx_20\"\n      type=\"link\"\n      className={className}\n      style={{ padding: 0, ...style }}\n      onClick={onClick}\n      {...restProps}\n    >\n      {icon}\n    </Button>\n  );\n};\n","import React from 'react';\nimport { Link } from '../../common/utils/RoutingUtils';\nimport Routes from '../routes';\nimport { IconButton } from '../../common/components/IconButton';\nimport Utils from '../../common/utils/Utils';\nimport { LegacyPopover } from '@databricks/design-system';\nimport { type RunItem } from '../types';\n\ntype Props = {\n  experimentId: string;\n  visible: boolean;\n  x: number;\n  y: number;\n  runItems: RunItem[];\n  handleClose: () => void;\n  handleKeyDown: ({ key }: { key: string }) => void;\n  handleVisibleChange: (visible: boolean) => void;\n};\n\nexport class RunLinksPopover extends React.Component<Props> {\n  componentDidMount() {\n    document.addEventListener('keydown', this.props.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('keydown', this.props.handleKeyDown);\n  }\n\n  renderContent = () => {\n    const { experimentId, runItems } = this.props;\n    return (\n      <div>\n        {runItems.map(({ name, runId, color, y }, index) => {\n          const key = `${runId}-${index}`;\n          const to = Routes.getRunPageRoute(experimentId, runId);\n          return (\n            <Link key={key} to={to}>\n              <p style={{ color }}>\n                <i className=\"fa fa-external-link-o\" style={{ marginRight: 5 }} />\n                {`${name}, ${Utils.formatMetric(y)}`}\n              </p>\n            </Link>\n          );\n        })}\n      </div>\n    );\n  };\n\n  renderTitle = () => {\n    const { handleClose } = this.props;\n    return (\n      <div>\n        <span>Jump to individual runs</span>\n        <IconButton\n          icon={<i className=\"fa fa-times\" />}\n          onClick={handleClose}\n          style={{ float: 'right', marginLeft: '7px' }}\n        />\n      </div>\n    );\n  };\n\n  render() {\n    const { visible, x, y, handleVisibleChange } = this.props;\n    return (\n      <LegacyPopover\n        content={this.renderContent()}\n        title={this.renderTitle()}\n        placement=\"left\"\n        visible={visible}\n        onVisibleChange={handleVisibleChange}\n      >\n        <div\n          style={{\n            left: x,\n            top: y,\n            position: 'absolute',\n          }}\n        />\n      </LegacyPopover>\n    );\n  }\n}\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport Utils from '../../common/utils/Utils';\nimport RequestStateWrapper from '../../common/components/RequestStateWrapper';\nimport { getMetricHistoryApi, getRunApi } from '../actions';\nimport _ from 'lodash';\nimport { MetricsPlotView } from './MetricsPlotView';\nimport { getRunInfo } from '../reducers/Reducers';\nimport { MetricsPlotControls, X_AXIS_WALL, X_AXIS_RELATIVE, X_AXIS_STEP } from './MetricsPlotControls';\nimport MetricsSummaryTable from './MetricsSummaryTable';\nimport qs from 'qs';\nimport { withRouterNext } from '../../common/utils/withRouterNext';\nimport Routes from '../routes';\nimport { RunLinksPopover } from './RunLinksPopover';\nimport { getUUID } from '../../common/utils/ActionUtils';\nimport { saveAs } from 'file-saver';\nimport { Spinner } from '@databricks/design-system';\nimport { normalizeMetricsHistoryEntry } from '../utils/MetricsUtils';\nimport type { Location, NavigateFunction } from '../../common/utils/RoutingUtils';\n\nexport const CHART_TYPE_LINE = 'line';\nexport const CHART_TYPE_BAR = 'bar';\n\nexport const METRICS_PLOT_POLLING_INTERVAL_MS = 10 * 1000; // 10 seconds\n// A run is considered as 'hanging' if its status is 'RUNNING' but its latest metric was logged\n// prior to this threshold. The metrics plot doesn't automatically update hanging runs.\nexport const METRICS_PLOT_HANGING_RUN_THRESHOLD_MS = 3600 * 24 * 7 * 1000; // 1 week\nconst MAXIMUM_METRIC_DATA_POINTS = 100_000;\nconst GET_METRIC_HISTORY_MAX_RESULTS = 25000;\n\nexport const convertMetricsToCsv = (metrics: any) => {\n  const header = ['run_id', ...Object.keys(metrics[0].history[0])];\n  const rows = metrics.flatMap(({ runUuid, history }: any) =>\n    history.map((metric: any) => [runUuid, ...Object.values(metric)]),\n  );\n  return [header]\n    .concat(rows)\n    .map((row) => row.join(','))\n    .join('\\n');\n};\n\ntype OwnMetricsPlotPanelProps = {\n  experimentIds: string[];\n  runUuids: string[];\n  completedRunUuids: string[];\n  metricKey: string;\n  latestMetricsByRunUuid: any;\n  distinctMetricKeys: string[];\n  metricsWithRunInfoAndHistory: any[];\n  getMetricHistoryApi: (...args: any[]) => any;\n  getRunApi: (...args: any[]) => any;\n  location: Location;\n  navigate: NavigateFunction;\n  runDisplayNames: string[];\n  containsInfinities: boolean;\n};\n\ntype MetricsPlotPanelState = any;\n\ntype MetricsPlotPanelProps = OwnMetricsPlotPanelProps & typeof MetricsPlotPanel.defaultProps;\n\nexport class MetricsPlotPanel extends React.Component<MetricsPlotPanelProps, MetricsPlotPanelState> {\n  _isMounted = false;\n\n  static defaultProps = {\n    containsInfinities: false,\n  };\n\n  displayPopover: any;\n  intervalId: any;\n\n  // The fields below are exposed as instance attributes rather than component state so that they\n  // can be updated without triggering a rerender.\n  //\n  // ID of Javascript future (created via setTimeout()) used to trigger legend-click events after a\n  // delay, to allow time for double-click events to occur\n  legendClickTimeout = null;\n  // Time (millis after Unix epoch) since last legend click - if two clicks occur in short\n  // succession, we trigger a double-click event & cancel the pending single-click.\n  prevLegendClickTime = (Math as any).inf;\n\n  // Last curve ID clicked in the legend, used to determine if we're double-clicking on a specific\n  // legend curve\n  lastClickedLegendCurveId = null;\n\n  // Max time interval (in milliseconds) between two successive clicks on the metric plot legend\n  // that constitutes a double-click\n  MAX_DOUBLE_CLICK_INTERVAL_MS = 300;\n\n  // Delay (in ms) between when a user clicks on the metric plot legend & when event-handler logic\n  // (to toggle display of the selected curve on or off) actually fires. Set to a larger value than\n  // MAX_DOUBLE_CLICK_INTERVAL_MS to allow time for the double-click handler to fire before firing\n  // a single-click event.\n  SINGLE_CLICK_EVENT_DELAY_MS = this.MAX_DOUBLE_CLICK_INTERVAL_MS + 10;\n\n  constructor(props: MetricsPlotPanelProps) {\n    super(props);\n    this.state = {\n      historyRequestIds: [],\n      popoverVisible: false,\n      popoverX: 0,\n      popoverY: 0,\n      popoverRunItems: [],\n      focused: true,\n      loading: false,\n    };\n    this.displayPopover = false;\n    this.intervalId = null;\n  }\n\n  hasMultipleExperiments() {\n    return this.props.experimentIds && this.props.experimentIds.length > 1;\n  }\n\n  onFocus = () => {\n    this.setState({ focused: true });\n  };\n\n  onBlur = () => {\n    this.setState({ focused: false });\n  };\n\n  clearEventListeners = () => {\n    // `window.removeEventListener` does nothing when called with an unregistered event listener:\n    // https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener\n    window.removeEventListener('focus', this.onFocus);\n    window.removeEventListener('blur', this.onBlur);\n  };\n\n  clearInterval = () => {\n    // `clearInterval` does nothing when called with `null` or `undefine`:\n    // https://www.w3.org/TR/2011/WD-html5-20110525/timers.html#dom-windowtimers-cleartimeout\n    clearInterval(this.intervalId);\n    this.intervalId = null;\n  };\n\n  allRunsCompleted = () => {\n    return this.props.completedRunUuids.length === this.props.runUuids.length;\n  };\n\n  isHangingRunUuid = (activeRunUuid: any) => {\n    const metrics = this.props.latestMetricsByRunUuid[activeRunUuid];\n    if (!metrics) {\n      return false;\n    }\n    // @ts-expect-error TS(2345): Argument of type '({ timestamp }: { timestamp: any... Remove this comment to see the full error message\n    const timestamps = Object.values(metrics).map(({ timestamp }) => timestamp);\n    // @ts-expect-error TS(2345): Argument of type 'unknown' is not assignable to pa... Remove this comment to see the full error message\n    const latestTimestamp = Math.max(...timestamps);\n    return new Date().getTime() - latestTimestamp > METRICS_PLOT_HANGING_RUN_THRESHOLD_MS;\n  };\n\n  getActiveRunUuids = () => {\n    const { completedRunUuids, runUuids } = this.props;\n    const activeRunUuids = _.difference(runUuids, completedRunUuids);\n    return activeRunUuids.filter(_.negate(this.isHangingRunUuid)); // Exclude hanging runs\n  };\n\n  shouldPoll = () => {\n    return !(this.allRunsCompleted() || this.getActiveRunUuids().length === 0);\n  };\n\n  componentDidMount() {\n    this._isMounted = true;\n    this.loadMetricHistory(this.props.runUuids, this.getUrlState().selectedMetricKeys);\n    if (this.shouldPoll()) {\n      // Set event listeners to detect when this component gains/loses focus,\n      // e.g., a user switches to a different browser tab or app.\n      window.addEventListener('blur', this.onBlur);\n      window.addEventListener('focus', this.onFocus);\n      this.intervalId = setInterval(() => {\n        // Skip polling if this component is out of focus.\n        // @ts-expect-error TS(4111): Property 'focused' comes from an index signature, ... Remove this comment to see the full error message\n        if (this.state.focused) {\n          const activeRunUuids = this.getActiveRunUuids();\n          this.loadMetricHistory(activeRunUuids, this.getUrlState().selectedMetricKeys);\n          this.loadRuns(activeRunUuids);\n\n          if (!this.shouldPoll()) {\n            this.clearEventListeners();\n            this.clearInterval();\n          }\n        }\n      }, METRICS_PLOT_POLLING_INTERVAL_MS);\n    }\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n    this.clearEventListeners();\n    this.clearInterval();\n  }\n\n  getUrlState() {\n    return Utils.getMetricPlotStateFromUrl(this.props.location.search);\n  }\n\n  static predictChartType(metrics: any) {\n    // Show bar chart when every metric has exactly 1 metric history\n    if (metrics && metrics.length && _.every(metrics, (metric) => metric.history && metric.history.length === 1)) {\n      return CHART_TYPE_BAR;\n    }\n    return CHART_TYPE_LINE;\n  }\n\n  static isComparing(search: any) {\n    const params = qs.parse(search);\n    const runs = params && params['?runs'];\n    // @ts-expect-error TS(2345): Argument of type 'string | string[] | ParsedQs | P... Remove this comment to see the full error message\n    return runs ? JSON.parse(runs).length > 1 : false;\n  }\n\n  // Update page URL from component state. Intended to be called after React applies component\n  // state updates, e.g. in a setState callback\n  updateUrlState = (updatedState: any) => {\n    const { runUuids, metricKey, location, navigate } = this.props;\n    // @ts-expect-error TS(2345): Argument of type 'string | string[] | ParsedQs | P... Remove this comment to see the full error message\n    const experimentIds = JSON.parse(qs.parse(location.search)['experiments']);\n    const newState = {\n      ...this.getUrlState(),\n      ...updatedState,\n    };\n    const {\n      selectedXAxis,\n      selectedMetricKeys,\n      showPoint,\n      yAxisLogScale,\n      lineSmoothness,\n      layout,\n      deselectedCurves,\n      lastLinearYAxisRange,\n    } = newState;\n    navigate(\n      Routes.getMetricPageRoute(\n        runUuids,\n        metricKey,\n        experimentIds,\n        selectedMetricKeys,\n        layout,\n        selectedXAxis,\n        yAxisLogScale,\n        lineSmoothness,\n        showPoint,\n        deselectedCurves,\n        lastLinearYAxisRange,\n      ),\n      {\n        replace: true,\n      },\n    );\n  };\n\n  getNumTotalMetrics = () => {\n    return this.props.metricsWithRunInfoAndHistory.map(({ history }) => history.length).reduce((a, b) => a + b, 0);\n  };\n\n  loadMetricHistory = (runUuids: any, metricKeys: any) => {\n    if (this.getNumTotalMetrics() >= MAXIMUM_METRIC_DATA_POINTS) {\n      Utils.logErrorAndNotifyUser(\n        'The total number of metric data points exceeded 100,000. Cannot fetch more metrics.',\n      );\n      return Promise.resolve([]);\n    }\n    this.setState({ loading: true });\n    const promises = runUuids\n      .flatMap((id: any) =>\n        metricKeys.map((key: any) => ({\n          runUuid: id,\n          metricKey: key,\n        })),\n      )\n      // Avoid fetching non existing metrics\n      .filter(({ runUuid, metricKey }: any) => this.props.latestMetricsByRunUuid[runUuid].hasOwnProperty(metricKey))\n      .map(async ({ runUuid, metricKey }: any) => {\n        const requestIds = [];\n        const id = getUUID();\n        requestIds.push(id);\n        const firstPageResp = await this.props.getMetricHistoryApi(\n          runUuid,\n          metricKey,\n          GET_METRIC_HISTORY_MAX_RESULTS,\n          undefined,\n          id,\n        );\n\n        let nextPageToken = firstPageResp.value.next_page_token;\n        while (nextPageToken) {\n          if (this.getNumTotalMetrics() >= MAXIMUM_METRIC_DATA_POINTS) {\n            return { requestIds, success: false };\n          }\n\n          const uid = getUUID();\n          requestIds.push(uid);\n          /* eslint-disable no-await-in-loop */\n          const nextPageResp = await this.props.getMetricHistoryApi(\n            runUuid,\n            metricKey,\n            GET_METRIC_HISTORY_MAX_RESULTS,\n            nextPageToken,\n            uid,\n          );\n          nextPageToken = nextPageResp.value.next_page_token;\n        }\n        return { requestIds, success: true };\n      });\n    return Promise.all(promises).then((results) => {\n      // Ensure we don't set state if component is unmounted\n      if (this._isMounted) {\n        this.setState({ loading: false });\n      }\n      if (!results.every(({ success }) => success)) {\n        Utils.logErrorAndNotifyUser(\n          'The total number of metric data points exceeded 100,000. Aborted fetching metrics.',\n        );\n      }\n      return results.flatMap(({ requestIds }) => requestIds);\n    });\n  };\n\n  loadRuns = (runUuids: any) => {\n    const requestIds: any = [];\n    runUuids.forEach((runUuid: any) => {\n      const id = getUUID();\n      this.props.getRunApi(runUuid);\n      requestIds.push(id);\n    });\n    return requestIds;\n  };\n\n  getMetrics = () => {\n    /* eslint-disable no-param-reassign */\n    const state = this.getUrlState();\n    const selectedMetricsSet = new Set(state.selectedMetricKeys);\n    const { selectedXAxis } = state;\n    const { metricsWithRunInfoAndHistory } = this.props;\n\n    // Take only selected metrics\n    const metrics = metricsWithRunInfoAndHistory.filter((m) => selectedMetricsSet.has(m.metricKey));\n\n    // Sort metric history based on selected x-axis\n    metrics.forEach((metric) => {\n      const isStep = selectedXAxis === X_AXIS_STEP && metric.history[0] && _.isNumber(metric.history[0].step);\n      // Metric history can be large. Doing an in-place here to save memory\n      metric.history.sort(isStep ? Utils.compareByStepAndTimestamp : Utils.compareByTimestamp);\n    });\n\n    return metrics;\n  };\n\n  /**\n   * Handle changes in the scale type of the y-axis\n   * @param yAxisLogScale: Boolean - if true, y-axis should be converted to log scale, and if false,\n   * y-axis scale should be converted to a linear scale.\n   */\n  handleYAxisLogScaleChange = (yAxisLogScale: any) => {\n    const state = this.getUrlState();\n    const newLayout = _.cloneDeep(state.layout);\n    const newAxisType = yAxisLogScale ? 'log' : 'linear';\n\n    // Handle special case of a linear y-axis scale with negative values converted to log scale &\n    // now being restored to linear scale, by restoring the old linear-axis range from\n    // state.linearYAxisRange. In particular, we assume that if state.linearYAxisRange\n    // is non-empty, it contains a linear y axis range with negative values.\n    if (!yAxisLogScale && (state as any).lastLinearYAxisRange && (state as any).lastLinearYAxisRange.length > 0) {\n      newLayout.yaxis = {\n        type: 'linear',\n        range: (state as any).lastLinearYAxisRange,\n      };\n      this.updateUrlState({ layout: newLayout, lastLinearYAxisRange: [] });\n      return;\n    }\n\n    // Otherwise, if plot previously had no y axis range configured, simply set the axis type to\n    // log or linear scale appropriately\n    if (!state.layout.yaxis || !state.layout.yaxis.range) {\n      newLayout.yaxis = {\n        type: newAxisType,\n        autorange: true,\n        ...(newAxisType === 'log' ? { exponentformat: 'e' } : {}),\n      };\n      this.updateUrlState({ layout: newLayout, lastLinearYAxisRange: [] });\n      return;\n    }\n\n    // lastLinearYAxisRange contains the last range used for a linear-scale y-axis. We set\n    // this state attribute if and only if we're converting from a linear-scale y-axis with\n    // negative bounds to a log scale axis, so that we can restore the negative bounds if we\n    // subsequently convert back to a linear scale axis. Otherwise, we reset this attribute to an\n    // empty array\n    let lastLinearYAxisRange = [];\n\n    // At this point, we know the plot previously had a y axis specified with range bounds\n    // Convert the range to/from log scale as appropriate\n    const oldLayout = state.layout;\n    const oldYRange = oldLayout.yaxis.range;\n    if (yAxisLogScale) {\n      if (oldYRange[0] <= 0) {\n        lastLinearYAxisRange = oldYRange;\n        // When converting to log scale, handle negative values (which have no log-scale\n        // representation as taking the log of a negative number is not possible) as follows:\n        // If bottom of old Y range is negative, then tell plotly to infer the log y-axis scale\n        // (set 'autorange' to true), and preserve the old range in the lastLinearYAxisRange\n        // state attribute so that we can restore it if the user converts back to a linear-scale\n        // y axis. We defer to Plotly's autorange here under the assumption that it will produce\n        // a reasonable y-axis log scale for plots containing negative values.\n        newLayout.yaxis = {\n          type: 'log',\n          autorange: true,\n          exponentformat: 'e',\n        };\n      } else {\n        newLayout.yaxis = {\n          type: 'log',\n          range: [Math.log(oldYRange[0]) / Math.log(10), Math.log(oldYRange[1]) / Math.log(10)],\n          exponentformat: 'e',\n        };\n      }\n    } else {\n      // Otherwise, convert from log to linear scale normally\n      newLayout.yaxis = {\n        type: 'linear',\n        range: [Math.pow(10, oldYRange[0]), Math.pow(10, oldYRange[1])],\n      };\n    }\n    this.updateUrlState({ layout: newLayout, lastLinearYAxisRange });\n  };\n\n  /**\n   * Handle changes in the type of the metric plot's X axis (e.g. changes from wall-clock\n   * scale to relative-time scale to step-based scale).\n   * @param e: Selection event such that e.target.value is a string containing the new X axis type\n   */\n  handleXAxisChange = (e: any) => {\n    // Set axis value type, & reset axis scaling via autorange\n    const state = this.getUrlState();\n    const axisEnumToPlotlyType = {\n      [X_AXIS_WALL]: 'date',\n      [X_AXIS_RELATIVE]: 'linear',\n      [X_AXIS_STEP]: 'linear',\n    };\n    // @ts-expect-error TS(7053): Element implicitly has an 'any' type because expre... Remove this comment to see the full error message\n    const axisType = axisEnumToPlotlyType[e.target.value] || 'linear';\n    const newLayout = {\n      ...state.layout,\n      xaxis: {\n        autorange: true,\n        type: axisType,\n      },\n    };\n    this.updateUrlState({ selectedXAxis: e.target.value, layout: newLayout });\n  };\n\n  getAxisType() {\n    const state = this.getUrlState();\n    return state.layout && state.layout.yaxis && state.layout.yaxis.type === 'log' ? 'log' : 'linear';\n  }\n\n  /**\n   * Handle changes to metric plot layout (x & y axis ranges), e.g. specifically if the user\n   * zooms in or out on the plot.\n   *\n   * @param newLayout: Object containing the new Plot layout. See\n   * https://plot.ly/javascript/plotlyjs-events/#update-data for details on the object's fields\n   * and schema.\n   */\n  handleLayoutChange = (newLayout: any) => {\n    this.displayPopover = false;\n    const state = this.getUrlState();\n    // Unfortunately, we need to parse out the x & y axis range changes from the onLayout event...\n    // see https://plot.ly/javascript/plotlyjs-events/#update-data\n    const {\n      'xaxis.range[0]': newXRange0,\n      'xaxis.range[1]': newXRange1,\n      'yaxis.range[0]': newYRange0,\n      'yaxis.range[1]': newYRange1,\n      'xaxis.autorange': xAxisAutorange,\n      'yaxis.autorange': yAxisAutorange,\n      'yaxis.showspikes': yAxisShowSpikes,\n      'xaxis.showspikes': xAxisShowSpikes,\n      ...restFields\n    } = newLayout;\n\n    let mergedLayout = {\n      ...state.layout,\n      ...restFields,\n    };\n    let lastLinearYAxisRange = [...(state as any).lastLinearYAxisRange];\n\n    // Set fields for x axis\n    const newXAxis = mergedLayout.xaxis || {};\n    if (newXRange0 !== undefined && newXRange1 !== undefined) {\n      newXAxis.range = [newXRange0, newXRange1];\n      newXAxis.autorange = false;\n    }\n    if (xAxisShowSpikes) {\n      newXAxis.showspikes = true;\n    }\n    if (xAxisAutorange) {\n      newXAxis.autorange = true;\n    }\n    // Set fields for y axis\n    const newYAxis = mergedLayout.yaxis || {};\n    if (newYRange0 !== undefined && newYRange1 !== undefined) {\n      newYAxis.range = [newYRange0, newYRange1];\n      newYAxis.autorange = false;\n    }\n    if (yAxisShowSpikes) {\n      newYAxis.showspikes = true;\n    }\n    if (yAxisAutorange) {\n      lastLinearYAxisRange = [];\n      const axisType = state.layout && state.layout.yaxis && state.layout.yaxis.type === 'log' ? 'log' : 'linear';\n      newYAxis.autorange = true;\n      newYAxis.type = axisType;\n    }\n    if (newYAxis.type === 'log') {\n      newYAxis.exponentformat = 'e';\n    }\n    // Merge new X & Y axis info into layout\n    mergedLayout = {\n      ...mergedLayout,\n      xaxis: newXAxis,\n      yaxis: newYAxis,\n    };\n    this.updateUrlState({ layout: mergedLayout, lastLinearYAxisRange });\n  };\n\n  handleDownloadCsv = () => {\n    const csv = convertMetricsToCsv(this.props.metricsWithRunInfoAndHistory);\n    const blob = new Blob([csv], { type: 'application/csv;charset=utf-8' });\n    saveAs(blob, 'metrics.csv');\n  };\n\n  // Return unique key identifying the curve or bar chart corresponding to the specified\n  // Plotly plot data element\n  static getCurveKey(plotDataElem: any) {\n    // In bar charts, each legend item consists of a single run ID (all bars for that run are\n    // associated with & toggled by that legend item)\n    if (plotDataElem.type === 'bar') {\n      return plotDataElem.runId;\n    } else {\n      // In line charts, each (run, metricKey) tuple has its own legend item, so construct\n      // a unique legend item identifier by concatenating the run id & metric key\n      return Utils.getCurveKey(plotDataElem.runId, plotDataElem.metricName);\n    }\n  }\n\n  /**\n   * Handle clicking on a single curve within the plot legend in order to toggle its display\n   * on/off.\n   */\n  handleLegendClick = ({ curveNumber, data }: any) => {\n    // If two clicks in short succession, trigger double-click event\n    const state = this.getUrlState();\n    const currentTime = Date.now();\n    if (\n      currentTime - this.prevLegendClickTime < this.MAX_DOUBLE_CLICK_INTERVAL_MS &&\n      curveNumber === this.lastClickedLegendCurveId\n    ) {\n      this.handleLegendDoubleClick({ curveNumber, data });\n      this.prevLegendClickTime = (Math as any).inf;\n    } else {\n      // Otherwise, record time of current click & trigger click event\n      // Wait full double-click window to trigger setting state, and only if there was no\n      // double-click do we run the single-click logic (we wait a little extra to be safe)\n      const curveKey = MetricsPlotPanel.getCurveKey(data[curveNumber]);\n      // @ts-expect-error TS(2322): Type 'number' is not assignable to type 'null'.\n      this.legendClickTimeout = window.setTimeout(() => {\n        const existingDeselectedCurves = new Set((state as any).deselectedCurves);\n        if (existingDeselectedCurves.has(curveKey)) {\n          existingDeselectedCurves.delete(curveKey);\n        } else {\n          existingDeselectedCurves.add(curveKey);\n        }\n        this.updateUrlState({ deselectedCurves: Array.from(existingDeselectedCurves) });\n      }, this.SINGLE_CLICK_EVENT_DELAY_MS);\n      this.prevLegendClickTime = currentTime;\n    }\n    this.lastClickedLegendCurveId = curveNumber;\n    // Return false to disable plotly event handler\n    return false;\n  };\n\n  /**\n   * Handle double-clicking on a single curve within the plot legend in order to toggle display\n   * of the selected curve on (and disable display of all other curves).\n   */\n  handleLegendDoubleClick = ({ curveNumber, data }: any) => {\n    // @ts-expect-error TS(2769): No overload matches this call.\n    window.clearTimeout(this.legendClickTimeout);\n    // Exclude everything besides the current curve key\n    const curveKey = MetricsPlotPanel.getCurveKey(data[curveNumber]);\n    const allCurveKeys = data.map((elem: any) => MetricsPlotPanel.getCurveKey(elem));\n    const newDeselectedCurves = allCurveKeys.filter((curvePair: any) => curvePair !== curveKey);\n    this.updateUrlState({ deselectedCurves: newDeselectedCurves });\n    return false;\n  };\n\n  handleMetricsSelectChange = (metricKeys: any) => {\n    const existingMetricKeys = this.getUrlState().selectedMetricKeys || [];\n    const newMetricKeys = metricKeys.filter((k: any) => !existingMetricKeys.includes(k));\n    this.updateUrlState({ selectedMetricKeys: metricKeys });\n    this.loadMetricHistory(this.props.runUuids, newMetricKeys).then((requestIds) => {\n      this.setState({ loading: false });\n      this.setState((prevState: any) => ({\n        historyRequestIds: [...prevState.historyRequestIds, ...requestIds],\n      }));\n    });\n  };\n\n  handleShowPointChange = (showPoint: any) => this.updateUrlState({ showPoint });\n\n  handleLineSmoothChange = (lineSmoothness: any) => this.updateUrlState({ lineSmoothness });\n\n  handleKeyDownOnPopover = ({ key }: { key: string }) => {\n    if (key === 'Escape') {\n      this.setState({ popoverVisible: false });\n    }\n  };\n\n  updatePopover = (data: any) => {\n    this.displayPopover = !this.displayPopover;\n\n    // Ignore double click.\n    setTimeout(() => {\n      if (this.displayPopover) {\n        this.displayPopover = false;\n        const { popoverVisible, popoverX, popoverY } = this.state;\n        const {\n          points,\n          event: { clientX, clientY },\n        } = data;\n        const samePointClicked = popoverX === clientX && popoverY === clientY;\n        const runItems = points\n          .sort((a: any, b: any) => b.y - a.y)\n          .map((point: any) => ({\n            runId: point.data.runId,\n            name: point.data.name,\n            color: point.fullData.marker.color,\n            y: point.y,\n          }));\n\n        this.setState({\n          popoverVisible: !popoverVisible || !samePointClicked,\n          popoverX: clientX,\n          popoverY: clientY,\n          popoverRunItems: runItems,\n        });\n      }\n    }, 300);\n  };\n\n  render() {\n    const { experimentIds, runUuids, runDisplayNames, distinctMetricKeys, location } = this.props;\n    const { popoverVisible, popoverX, popoverY, popoverRunItems, loading } = this.state;\n    const state = this.getUrlState();\n    const { showPoint, selectedXAxis, selectedMetricKeys, lineSmoothness } = state;\n    const yAxisLogScale = this.getAxisType() === 'log';\n    const { historyRequestIds } = this.state;\n    const metrics = this.getMetrics();\n    const chartType = MetricsPlotPanel.predictChartType(metrics);\n    return (\n      <div className=\"mlflow-metrics-plot-container\">\n        <MetricsPlotControls\n          // @ts-expect-error TS(2322): Type '{ numRuns: number; numCompletedRuns: number;... Remove this comment to see the full error message\n          numRuns={this.props.runUuids.length}\n          numCompletedRuns={this.props.completedRunUuids.length}\n          distinctMetricKeys={distinctMetricKeys}\n          selectedXAxis={selectedXAxis}\n          selectedMetricKeys={selectedMetricKeys}\n          handleXAxisChange={this.handleXAxisChange}\n          handleMetricsSelectChange={this.handleMetricsSelectChange}\n          handleShowPointChange={this.handleShowPointChange}\n          handleYAxisLogScaleChange={this.handleYAxisLogScaleChange}\n          handleLineSmoothChange={this.handleLineSmoothChange}\n          chartType={chartType}\n          lineSmoothness={lineSmoothness}\n          yAxisLogScale={yAxisLogScale}\n          showPoint={showPoint}\n          handleDownloadCsv={this.handleDownloadCsv}\n          disableSmoothnessControl={this.props.containsInfinities}\n        />\n        <div className=\"metrics-plot-data\">\n          <RequestStateWrapper\n            requestIds={historyRequestIds}\n            // In this case where there are no history request IDs (e.g. on the\n            // initial page load / before we try to load additional metrics),\n            // optimistically render the children\n            shouldOptimisticallyRender={historyRequestIds.length === 0}\n          >\n            {this.hasMultipleExperiments() ? null : (\n              <RunLinksPopover\n                experimentId={experimentIds[0]}\n                visible={popoverVisible}\n                x={popoverX}\n                y={popoverY}\n                runItems={popoverRunItems}\n                handleKeyDown={this.handleKeyDownOnPopover}\n                handleClose={() => this.setState({ popoverVisible: false })}\n                handleVisibleChange={(visible) => this.setState({ popoverVisible: visible })}\n              />\n            )}\n            <Spinner size=\"large\" css={{ visibility: loading ? 'visible' : 'hidden' }} />\n            <MetricsPlotView\n              // @ts-expect-error TS(2322): Type '{ runUuids: string[]; runDisplayNames: strin... Remove this comment to see the full error message\n              runUuids={runUuids}\n              runDisplayNames={runDisplayNames}\n              xAxis={selectedXAxis}\n              metrics={this.getMetrics()}\n              metricKeys={selectedMetricKeys}\n              showPoint={showPoint}\n              chartType={chartType}\n              isComparing={MetricsPlotPanel.isComparing(location.search)}\n              lineSmoothness={lineSmoothness}\n              extraLayout={state.layout}\n              deselectedCurves={(state as any).deselectedCurves}\n              onLayoutChange={this.handleLayoutChange}\n              onClick={this.updatePopover}\n              onLegendClick={this.handleLegendClick}\n              onLegendDoubleClick={this.handleLegendDoubleClick}\n            />\n            <MetricsSummaryTable\n              runUuids={runUuids}\n              runDisplayNames={runDisplayNames}\n              metricKeys={selectedMetricKeys}\n            />\n          </RequestStateWrapper>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state: any, ownProps: any) => {\n  const { runUuids } = ownProps;\n  const completedRunUuids = runUuids.filter((runUuid: any) => getRunInfo(runUuid, state).status !== 'RUNNING');\n  const { latestMetricsByRunUuid, metricsByRunUuid } = state.entities;\n\n  // All metric keys from all runUuids, non-distinct\n  const metricKeys = _.flatMap(runUuids, (runUuid) => {\n    const latestMetrics = latestMetricsByRunUuid[runUuid];\n    return latestMetrics ? Object.keys(latestMetrics) : [];\n  });\n  const distinctMetricKeys = [...new Set(metricKeys)].sort();\n  const runDisplayNames: any = [];\n\n  let containsInfinities = false;\n\n  // Flat array of all metrics, with history and information of the run it belongs to\n  // This is used for underlying MetricsPlotView & predicting chartType for MetricsPlotControls\n  const metricsWithRunInfoAndHistory = _.flatMap(runUuids, (runUuid) => {\n    const runDisplayName = Utils.getRunDisplayName(getRunInfo(runUuid, state), runUuid);\n    runDisplayNames.push(runDisplayName);\n    const metricsHistory = metricsByRunUuid[runUuid];\n    return metricsHistory\n      ? Object.keys(metricsHistory).map((metricKey) => {\n          const history = metricsHistory[metricKey].map((entry: any) => normalizeMetricsHistoryEntry(entry));\n          if (history.some(({ value }: any) => typeof value === 'number' && !isNaN(value) && !isFinite(value))) {\n            containsInfinities = true;\n          }\n          return { metricKey, history, runUuid, runDisplayName };\n        })\n      : [];\n  });\n\n  return {\n    runDisplayNames,\n    latestMetricsByRunUuid,\n    distinctMetricKeys,\n    metricsWithRunInfoAndHistory,\n    completedRunUuids,\n    containsInfinities,\n  };\n};\n\nconst mapDispatchToProps = { getMetricHistoryApi, getRunApi };\n\nexport default withRouterNext(connect(mapStateToProps, mapDispatchToProps)(MetricsPlotPanel));\n","/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport { LegacySkeleton } from '@databricks/design-system';\nimport { SectionErrorBoundary } from '../../common/components/error-boundaries/SectionErrorBoundary';\n\nconst Plot = React.lazy(() => import('react-plotly.js'));\n\nexport const LazyPlot = ({ fallback, ...props }: any) => (\n  <SectionErrorBoundary>\n    <React.Suspense fallback={fallback ?? <LegacySkeleton active />}>\n      <Plot {...props} />\n    </React.Suspense>\n  </SectionErrorBoundary>\n);\n","import { useDesignSystemTheme } from '@databricks/design-system';\nimport { Input, Slider } from '@databricks/design-system';\nimport { clamp, isEmpty, isUndefined, keys } from 'lodash';\nimport { useState } from 'react';\n\nconst TRACK_SIZE = 20;\nconst THUMB_SIZE = 14;\nconst MARK_SIZE = 8;\nconst MARK_OFFSET_X = (THUMB_SIZE - MARK_SIZE) / 2;\nconst MARK_OFFSET_Y = (TRACK_SIZE - MARK_SIZE) / 2;\n\nconst ZINDEX_MARK = 1;\nconst ZINDEX_THUMB = 2;\n\nconst STEP_MARKS_DISPLAY_THRESHOLD = 10;\n\ninterface LineSmoothSliderProps {\n  max?: number;\n  min?: number;\n  step?: number;\n  marks?: Record<number, any>;\n  value: number | undefined;\n  onChange: (value: number) => void;\n  disabled?: boolean;\n  componentId?: string;\n  onAfterChange?: (value: number) => void;\n  className?: string;\n}\n\n// Internal helper function: finds the closest value to the given value from the marks\nconst getClosestValue = (marks: Record<number, string>, value: number, defaultValue: number) =>\n  keys(marks).reduce(\n    (prev, curr) => (Math.abs(Number(curr) - value) < Math.abs(prev - value) ? Number(curr) : Number(prev)),\n    defaultValue,\n  );\n\n// Internal helper function: finds the next value based on direction (down or up) from the marks\nconst getNextValue = (marks: Record<number, string>, currentValue: number, direction: 'down' | 'up') =>\n  direction === 'down'\n    ? Math.max(\n        ...Object.keys(marks)\n          .filter((mark) => Number(mark) < currentValue)\n          .map(Number),\n      )\n    : Math.min(\n        ...Object.keys(marks)\n          .filter((mark) => Number(mark) > currentValue)\n          .map(Number),\n      );\n\nexport const LineSmoothSlider = ({\n  max = 1,\n  min = 0,\n  step,\n  marks,\n  value,\n  onChange,\n  disabled,\n  onAfterChange,\n  componentId,\n  className,\n}: LineSmoothSliderProps) => {\n  const { theme } = useDesignSystemTheme();\n  const shouldUseMarks = !isEmpty(marks);\n  const shouldDisplayMarks = shouldUseMarks && Object.keys(marks).length < STEP_MARKS_DISPLAY_THRESHOLD;\n\n  // Temporary value is used to store the value of the input field before it is committed\n  const [temporaryValue, setTemporaryValue] = useState<number | undefined>(undefined);\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        height: theme.general.heightSm,\n        gap: theme.spacing.md,\n        alignItems: 'center',\n      }}\n    >\n      <Slider.Root\n        disabled={disabled}\n        css={{\n          flex: 1,\n          position: 'relative',\n          'span:last-child': { zIndex: ZINDEX_THUMB },\n        }}\n        className={className}\n        min={min}\n        max={max}\n        value={[value ?? 0]}\n        onValueCommit={([newValue]) => onAfterChange?.(newValue)}\n        onKeyDown={(e) => {\n          // If marks are used, we want to find the next value based on direction (arrow left/down or arrow right/up)\n          if (shouldUseMarks) {\n            e.preventDefault();\n\n            if (['ArrowLeft', 'ArrowRight', 'ArrowUp', 'ArrowDown'].includes(e.key)) {\n              const nextValue = getNextValue(\n                marks,\n                value ?? 0,\n                e.key === 'ArrowLeft' || e.key === 'ArrowDown' ? 'down' : 'up',\n              );\n\n              onAfterChange?.(nextValue);\n              onChange(nextValue);\n            }\n          }\n        }}\n        onValueChange={([newValue]) => {\n          if (shouldUseMarks) {\n            onChange(getClosestValue(marks, newValue, value ?? 0));\n            return;\n          }\n          onChange(newValue);\n        }}\n        step={step ?? undefined}\n      >\n        {/* Render marks if needed */}\n        {shouldDisplayMarks && (\n          <div css={{ position: 'absolute', inset: 0, marginRight: THUMB_SIZE }}>\n            {keys(marks).map((markPosition) => (\n              <div\n                key={markPosition}\n                css={{\n                  position: 'absolute',\n                  zIndex: ZINDEX_MARK,\n                  top: 0,\n                  right: 0,\n                  bottom: 0,\n                  marginLeft: -MARK_OFFSET_X / 2,\n                  marginTop: MARK_OFFSET_Y,\n                  pointerEvents: 'none',\n                  borderRadius: '100%',\n                  backgroundColor: theme.colors.actionPrimaryBackgroundDefault,\n                  height: MARK_SIZE,\n                  width: MARK_SIZE,\n                  opacity: 0.5,\n                }}\n                style={{\n                  left: `${(Number(markPosition) / (max - min)) * 100}%`,\n                }}\n              />\n            ))}\n          </div>\n        )}\n        <Slider.Track className=\"TRACK\">\n          <Slider.Range />\n        </Slider.Track>\n        <Slider.Thumb css={{ position: 'relative', height: THUMB_SIZE, width: THUMB_SIZE }} />\n      </Slider.Root>\n      <Input\n        componentId={componentId ?? 'mlflow.experiment_tracking.common.line_smooth_slider'}\n        type=\"number\"\n        disabled={disabled}\n        min={min}\n        max={max}\n        css={{ width: 'min-content' }}\n        step={step}\n        value={temporaryValue ?? value}\n        onBlur={() => {\n          // If temporary value is set, we want to commit it to the value\n          if (!isUndefined(temporaryValue)) {\n            if (shouldUseMarks) {\n              onAfterChange?.(getClosestValue(marks, temporaryValue, value ?? 0));\n              onChange(getClosestValue(marks, temporaryValue, value ?? 0));\n            } else {\n              onAfterChange?.(clamp(temporaryValue, min, max));\n              onChange(clamp(temporaryValue, min, max));\n            }\n            setTemporaryValue(undefined);\n          }\n        }}\n        onChange={({ target, nativeEvent }) => {\n          // If the input event is an input event, we want to set the temporary value\n          // to be commited on blur instead of directly setting the value\n          if (nativeEvent instanceof InputEvent) {\n            setTemporaryValue(Number(target.value));\n            return;\n          }\n\n          // If using marks, find the next value based on the direction of the change\n          if (shouldUseMarks) {\n            const nextValue = getNextValue(marks, value ?? 0, Number(target.value) < Number(value) ? 'down' : 'up');\n\n            onChange(nextValue);\n            return;\n          }\n\n          // If not using marks, clamp the value to the min and max\n          onChange(clamp(Number(target.value), min, max));\n        }}\n      />\n    </div>\n  );\n};\n"],"names":["EMA","mArray","smoothingWeight","length","every","v","smoothness","MAX_LINE_SMOOTHNESS","smoothedArray","biasedElement","i","isNaN","push","debiasedElement","Math","pow","DISK_ICON","width","height","path","transform","_annotationData","_classPrivateFieldLooseKey","MetricsPlotViewImpl","React","constructor","args","regenerateInfinityAnnotations","_extraLayout$yaxis","metrics","xAxis","extraLayout","this","props","isYAxisLog","yaxis","type","annotationData","forEach","metric","metricKey","history","generateInfinityAnnotations","xValues","MetricsPlotView","getXValuesForLineChart","intl","yValues","map","entry","value","Number","isLogScale","stringFormatter","formatMessage","_classPrivateFieldLooseBase","Object","defineProperty","writable","getPlotPropsForLineChart","showPoint","lineSmoothness","isComparing","deselectedCurves","deselectedCurvesSet","Set","shapes","annotations","data","runDisplayName","runUuid","historyValues","isSingleHistory","filter","visible","has","Utils","getCurveKey","name","getLineLegend","x","y","isFinite","NaN","text","toFixed","mode","marker","opacity","hovertemplate","runId","metricName","layout","getPlotPropsForBarChart","runUuids","runDisplayNames","historyByMetricKey","reduce","arrayOfHistorySortedByMetricKey","_","values","sortedMetricKeys","visibility","truncateString","barmode","xAxisType","X_AXIS_STEP","step","X_AXIS_RELATIVE","timestamp","minTimestamp","componentDidMount","componentDidUpdate","render","onLayoutChange","onClick","onLegendClick","onLegendDoubleClick","plotProps","chartType","CHART_TYPE_BAR","_jsx","className","children","LazyPlot","useResizeHandler","onRelayout","style","config","displaylogo","scrollZoom","modeBarButtonsToRemove","modeBarButtonsToAdd","icon","click","csv","convertMetricsToCsv","blob","Blob","saveAs","legend","injectIntl","SectionErrorBoundary","state","error","componentDidCatch","errorInfo","setState","console","renderErrorMessage","showServerError","_jsxs","message","css","classNames","wrapper","href","getSupportPageUrl","target","marginLeft","Spinner","showImmediately","theme","styles","spinner","alt","src","immediate","marginTop","marginRight","img","position","top","left","general","heightBase","animation","keyframes","animationDelay","Progress","track","progressTrack","percent","format","display","alignItems","gap","spacing","sm","backgroundColor","colors","backgroundSecondary","flex","borderRadius","primary","RadioGroup","Radio","Group","X_AXIS_WALL","_ref","MetricsPlotControlsImpl","handleMetricsSelectFilterChange","option","title","toUpperCase","includes","getAllMetricKeys","distinctMetricKeys","key","yAxisLogScale","numRuns","numCompletedRuns","disableSmoothnessControl","lineSmoothnessTooltipText","FormattedMessage","id","defaultMessage","completedRunsTooltipText","interval","round","METRICS_PLOT_POLLING_INTERVAL_MS","controlsWrapper","CHART_TYPE_LINE","centeredControlsWrapper","LegacyTooltip","QuestionMarkIcon","Switch","componentId","defaultChecked","onChange","handleShowPointChange","LineSmoothSlider","min","max","handleLineSmoothChange","xAxisControls","handleXAxisChange","selectedXAxis","LegacySelect","placeholder","selectedMetricKeys","handleMetricsSelectChange","axisSelector","Option","handleYAxisLogScaleChange","Button","handleDownloadCsv","defaultProps","label","xs","marginBottom","minWidth","maxWidth","justifyContent","MetricsPlotControls","RequestStateWrapper","Component","shouldRender","shouldRenderError","getErrorRequests","requests","requestIdsWith404sToIgnore","r","undefined","getErrorCode","ErrorCodes","RESOURCE_DOES_NOT_EXIST","getDerivedStateFromProps","nextProps","active","requestErrors","getRenderedContent","customSpinner","permissionDeniedView","suppressErrorThrow","customRequestErrorHandlerFn","permissionDeniedErrors","failedRequest","PERMISSION_DENIED","shouldOptimisticallyRender","triggerError","Error","connect","mapStateToProps","ownProps","getApis","requestIds","HtmlTableView","columns","testId","scroll","LegacyTable","dataSource","size","pagination","MetricsSummaryTable","renderMetricTables","renderRunTable","metricKeys","latestMetrics","minMetrics","maxMetrics","dataIndex","sorter","a","b","dataColumns","getRunValuesByMetric","runExperimentIds","runName","Fragment","getMetricValuesByRun","latestValue","ellipsis","minValue","maxValue","runIdx","runLink","Link","to","Routes","getRunPageRoute","rowData","_ref2","_ref3","latestMetric","getMetric","minMetric","maxMetric","getValue","latestFormatted","formatMetric","minFormatted","maxFormatted","valuesMap","MetricsSummaryTableWithIntl","runInfo","getRunInfo","experimentId","getLatestMetrics","getMinMetrics","getMaxMetrics","IconButton","restProps","padding","RunLinksPopover","renderContent","runItems","color","index","renderTitle","handleClose","float","document","addEventListener","handleKeyDown","componentWillUnmount","removeEventListener","handleVisibleChange","LegacyPopover","content","placement","onVisibleChange","MAXIMUM_METRIC_DATA_POINTS","header","keys","rows","flatMap","concat","row","join","MetricsPlotPanel","super","_isMounted","displayPopover","intervalId","legendClickTimeout","prevLegendClickTime","inf","lastClickedLegendCurveId","MAX_DOUBLE_CLICK_INTERVAL_MS","SINGLE_CLICK_EVENT_DELAY_MS","onFocus","focused","onBlur","clearEventListeners","window","clearInterval","allRunsCompleted","completedRunUuids","isHangingRunUuid","activeRunUuid","latestMetricsByRunUuid","timestamps","latestTimestamp","Date","getTime","getActiveRunUuids","shouldPoll","updateUrlState","updatedState","location","navigate","experimentIds","JSON","parse","qs","search","newState","getUrlState","lastLinearYAxisRange","getMetricPageRoute","replace","getNumTotalMetrics","metricsWithRunInfoAndHistory","loadMetricHistory","logErrorAndNotifyUser","Promise","resolve","loading","promises","hasOwnProperty","async","getUUID","nextPageToken","getMetricHistoryApi","next_page_token","success","uid","all","then","results","loadRuns","getRunApi","getMetrics","selectedMetricsSet","m","isStep","sort","compareByStepAndTimestamp","compareByTimestamp","newLayout","newAxisType","range","autorange","exponentformat","oldYRange","log","e","axisType","xaxis","handleLayoutChange","newXRange0","newXRange1","newYRange0","newYRange1","xAxisAutorange","yAxisAutorange","yAxisShowSpikes","xAxisShowSpikes","restFields","mergedLayout","newXAxis","showspikes","newYAxis","handleLegendClick","curveNumber","currentTime","now","handleLegendDoubleClick","curveKey","setTimeout","existingDeselectedCurves","delete","add","Array","from","clearTimeout","newDeselectedCurves","elem","curvePair","existingMetricKeys","newMetricKeys","k","prevState","historyRequestIds","handleKeyDownOnPopover","popoverVisible","updatePopover","popoverX","popoverY","points","event","clientX","clientY","samePointClicked","point","fullData","popoverRunItems","hasMultipleExperiments","setInterval","activeRunUuids","getMetricPlotStateFromUrl","predictChartType","params","runs","getAxisType","plotDataElem","containsInfinities","_css","mapDispatchToProps","withRouterNext","status","metricsByRunUuid","entities","getRunDisplayName","metricsHistory","normalizeMetricsHistoryEntry","some","Plot","fallback","LegacySkeleton","getClosestValue","marks","defaultValue","prev","curr","abs","getNextValue","currentValue","direction","mark","disabled","onAfterChange","useDesignSystemTheme","shouldUseMarks","isEmpty","shouldDisplayMarks","temporaryValue","setTemporaryValue","useState","heightSm","md","Slider","Root","zIndex","onValueCommit","newValue","onKeyDown","preventDefault","nextValue","onValueChange","inset","markPosition","right","bottom","pointerEvents","actionPrimaryBackgroundDefault","Track","Range","Thumb","Input","isUndefined","clamp","nativeEvent","InputEvent"],"ignoreList":[],"sourceRoot":""}