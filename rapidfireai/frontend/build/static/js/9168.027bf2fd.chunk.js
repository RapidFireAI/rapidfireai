"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[9168],{19485:function(e,t,n){n.d(t,{z:function(){return ce}});var i=n(68254),r=n(82589),o=n(31014),a=n(88464),s=n(88443),l=n(30152),c=n(77198),d=n(6211),u=n(73549),p=n(43270),h=n(74035),m=n(32582),v=n(99790),g=n(89555),y=n(21616),f=n(91144),x=n(50111);const C=e=>{let{title:t,children:n}=e;const{theme:r}=(0,i.u)();return(0,x.FD)("div",{css:(0,g.AH)({marginBottom:2*r.spacing.md},""),"data-testid":"experiment-view-compare-runs-config-field",children:[(0,x.FD)(i.T.Title,{level:4,children:[t,":"]}),n]})},M=e=>{let{value:t,onChange:n,metricKeyList:i,paramKeyList:o}=e;const{formatMessage:s}=(0,a.A)(),l=!(null!==o&&void 0!==o&&o.length)&&!(null!==i&&void 0!==i&&i.length);return(0,x.FD)(r._vn,{css:b.selectFull,value:l?s({id:"3VURvw",defaultMessage:"No metrics or parameters available"}):t,disabled:l,onChange:n,dangerouslySetAntdProps:{showSearch:!0},children:[null!==i&&void 0!==i&&i.length?(0,x.Y)(r._vn.OptGroup,{label:s({id:"jH0+gA",defaultMessage:"Metrics"}),children:i.map((e=>(0,x.Y)(r._vn.Option,{value:(0,y.GF)("METRIC",e),children:e},(0,y.GF)("METRIC",e))))}):null,null!==o&&void 0!==o&&o.length?(0,x.Y)(r._vn.OptGroup,{label:s({id:"kWUhea",defaultMessage:"Params"}),children:o.map((e=>(0,x.Y)(r._vn.Option,{value:(0,y.GF)("PARAM",e),children:e},(0,y.GF)("PARAM",e))))}):null]})},Y=e=>{let{onChange:t,value:n,options:i}=e;const{formatMessage:o}=(0,a.A)();return(0,f.M1)()?null:(0,x.Y)(C,{title:o({id:"AW2rVK",defaultMessage:"Max. no of runs shown"}),children:(0,x.Y)(r._vn,{css:b.selectFull,value:n,onChange:t,children:i.map((e=>{const t="number"===typeof e?e:e.value,n="number"===typeof e?e:e.label;return(0,x.Y)(r._vn.Option,{value:t,children:n},t)}))})})},A=[{value:5,label:(0,x.Y)(s.A,{id:"Mc6Dhy",defaultMessage:"5"})},{value:10,label:(0,x.Y)(s.A,{id:"2K8tsp",defaultMessage:"10"})},{value:20,label:(0,x.Y)(s.A,{id:"zwO8+l",defaultMessage:"20"})}],b={selectFull:{width:"100%"}},D=e=>{let{state:t,onStateChange:n,metricKeyList:i}=e;const a=(0,o.useCallback)((e=>{n((t=>({...t,metricKey:e})))}),[n]),s=(0,o.useCallback)((e=>{n((t=>({...t,runsCountToCompare:e})))}),[n]);(0,o.useEffect)((()=>{!t.metricKey&&null!==i&&void 0!==i&&i[0]&&a(i[0])}),[t.metricKey,a,i]);const l=0===i.length;return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:"Metric",children:(0,x.Y)(r._vn,{css:w.selectFull,value:l?"No metrics available":t.metricKey,onChange:a,disabled:l,dangerouslySetAntdProps:{showSearch:!0},children:i.map((e=>(0,x.Y)(r._vn.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})}),(0,x.Y)(Y,{value:t.runsCountToCompare,onChange:s,options:A})]})},w={selectFull:{width:"100%"}},R=e=>{let{state:t,onStateChange:n,metricKeyList:i,paramKeyList:a}=e;const s=(0,o.useCallback)((e=>{n((t=>({...t,selectedParams:e})))}),[n]),l=(0,o.useCallback)((e=>{n((t=>({...t,selectedMetrics:e})))}),[n]),c=0===i.length,d=0===a.length;return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:"Params",children:(0,x.Y)(r._vn,{mode:d?void 0:"multiple",onChange:s,style:{width:300},value:d?"No parameters available":t.selectedParams,disabled:d,children:a.map((e=>(0,x.Y)(r._vn.Option,{value:e,children:e},e)))})}),(0,x.Y)(C,{title:"Metrics",children:(0,x.Y)(r._vn,{mode:c?void 0:"multiple",onChange:l,style:{width:300},value:c?"No metrics available":t.selectedMetrics,disabled:c,children:i.map((e=>(0,x.Y)(r._vn.Option,{value:e,children:e},e)))})})]})};var S=n(7842),I=n(20193);const k=e=>{let{metricKeyList:t,selectedMetricKeys:n,updateSelectedMetrics:i}=e;const o=0===t.length;return(0,x.Y)(r._vn,{mode:"multiple",placeholder:o?(0,x.Y)(s.A,{id:"M5bYHa",defaultMessage:"No metrics available"}):(0,x.Y)(s.A,{id:"eQqRYQ",defaultMessage:"Select metrics"}),css:T.selectFull,value:o?[]:n,onChange:i,disabled:o,dangerouslySetAntdProps:{showSearch:!0},children:t.map((e=>(0,x.Y)(r._vn.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})},E=e=>{let{theme:t,metricKeyList:n,selectedXAxisMetricKey:i,updateSelectedXAxisMetricKey:o}=e;const a=0===n.length;return(0,x.FD)(r.sxL,{value:S.fj.METRIC,children:[(0,x.Y)(s.A,{id:"M/c4l0",defaultMessage:"Metric"}),(0,x.Y)(r._vn,{css:(0,g.AH)({marginTop:t.spacing.xs,width:"100%"},""),value:i||void 0,placeholder:a?(0,x.Y)(s.A,{id:"ER3oVW",defaultMessage:"No metrics available"}):(0,x.Y)(s.A,{id:"BOz0T2",defaultMessage:"Select metric"}),onClick:e=>{e.preventDefault(),e.stopPropagation()},onChange:o,disabled:a,dangerouslySetAntdProps:{showSearch:!0},children:n.map((e=>(0,x.Y)(r._vn.Option,{value:e,"data-testid":`metric-${e}`,children:e},e)))})]})},F=e=>{let{state:t,onStateChange:n,metricKeyList:l}=e;const c=(0,f.dD)(),{theme:d}=(0,i.u)(),u=(0,a.A)(),p=(0,o.useCallback)((e=>{n((t=>({...t,metricKey:e})))}),[n]),h=(0,o.useCallback)((e=>{n((t=>({...t,metricKey:e[0],selectedMetricKeys:e})))}),[n]),m=(0,o.useCallback)((e=>{n((t=>({...t,xAxisKey:e,selectedXAxisMetricKey:""})))}),[n]),v=(0,o.useCallback)((e=>{n((t=>({...t,xAxisScaleType:e?"log":"linear"})))}),[n]),g=(0,o.useCallback)((e=>{n((t=>({...t,selectedXAxisMetricKey:e,xAxisKey:S.fj.METRIC})))}),[n]),y=(0,o.useCallback)((e=>n((t=>({...t,scaleType:e?"log":"linear"})))),[n]),M=(0,o.useCallback)((e=>{n((t=>({...t,lineSmoothness:e})))}),[n]),A=(0,o.useCallback)((e=>{n((t=>({...t,runsCountToCompare:e})))}),[n]);return(0,o.useEffect)((()=>{!t.metricKey&&null!==l&&void 0!==l&&l[0]&&p(l[0])}),[t.metricKey,p,l]),(0,o.useEffect)((()=>{void 0===t.selectedMetricKeys&&void 0!==t.metricKey&&""!==t.metricKey&&h([t.metricKey])}),[t.selectedMetricKeys,t.metricKey,h]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:"Metric (Y-axis)",children:k({metricKeyList:l,selectedMetricKeys:t.selectedMetricKeys,updateSelectedMetrics:h})}),(0,x.Y)(C,{title:"X-axis",children:(0,x.FD)(r.sxL.Group,{name:"runs-charts-field-group-x-axis",value:t.xAxisKey,onChange:e=>{let{target:{value:t}}=e;return m(t)},children:[(0,x.Y)(r.sxL,{value:S.fj.STEP,children:(0,x.Y)(s.A,{id:"IfcpiM",defaultMessage:"Step"})}),(0,x.FD)(r.sxL,{value:S.fj.TIME,children:[(0,x.Y)(s.A,{id:"2Hf+yU",defaultMessage:"Time (wall)"}),(0,x.FD)(r.m_M,{title:(0,x.Y)(s.A,{id:"nlXn2G",defaultMessage:"Absolute date and time"}),placement:"right",children:[" ",(0,x.Y)(r.JGH,{css:T.timeStepQuestionMarkIcon})]})]}),(0,x.FD)(r.sxL,{value:S.fj.TIME_RELATIVE,children:[(0,x.Y)(s.A,{id:"Y47tVZ",defaultMessage:"Time (relative)"}),(0,x.FD)(r.m_M,{title:(0,x.Y)(s.A,{id:"NwNrl4",defaultMessage:"Amount of time that has passed since the first metric value was logged"}),placement:"right",children:[" ",(0,x.Y)(r.JGH,{css:T.timeStepQuestionMarkIcon})]})]}),c&&E({theme:d,metricKeyList:l,selectedXAxisMetricKey:t.selectedXAxisMetricKey,updateSelectedXAxisMetricKey:g})]})}),t.xAxisKey===S.fj.STEP&&(0,x.Y)(C,{title:"X-axis log scale",children:(0,x.Y)(r.dOG,{checked:"log"===t.xAxisScaleType,onChange:v,label:"Enabled"})}),(0,x.Y)(C,{title:"Y-axis log scale",children:(0,x.Y)(r.dOG,{checked:"log"===t.scaleType,onChange:y,label:"Enabled"})}),(0,x.Y)(C,{title:u.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),children:(0,x.FD)(r.d98,{name:u.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),value:t.displayPoints,onChange:e=>{let{target:t}=e;n((e=>({...e,displayPoints:t.value})))},children:[(0,x.FD)(r.EPn,{value:void 0,"aria-label":[u.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),u.formatMessage({id:"7nPjTL",defaultMessage:"Auto"})].join(": "),children:[(0,x.Y)(s.A,{id:"7nPjTL",defaultMessage:"Auto"})," ",(0,x.Y)(r.m_M,{title:(0,x.Y)(s.A,{id:"ax3YJx",defaultMessage:"Show points on line charts if there are fewer than 60 data points per trace"}),children:(0,x.Y)(r.mo0,{})})]}),(0,x.Y)(r.EPn,{value:!0,"aria-label":[u.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),u.formatMessage({id:"QUMV9L",defaultMessage:"On"})].join(": "),children:(0,x.Y)(s.A,{id:"QUMV9L",defaultMessage:"On"})}),(0,x.Y)(r.EPn,{value:!1,"aria-label":[u.formatMessage({id:"g7xNvF",defaultMessage:"Display points"}),u.formatMessage({id:"NtaCJN",defaultMessage:"Off"})].join(": "),children:(0,x.Y)(s.A,{id:"NtaCJN",defaultMessage:"Off"})})]})}),(0,x.Y)(C,{title:"Line smoothness",children:(0,x.Y)(I.o,{"data-testid":"smoothness-toggle",min:0,max:100,onChange:M,defaultValue:t.lineSmoothness?t.lineSmoothness:0})}),(0,x.Y)(Y,{value:t.runsCountToCompare,onChange:A,options:[5,10,20,50,100]})]})},T={selectFull:{width:"100%"},timeStepQuestionMarkIcon:()=>({svg:{width:12,height:12}})};var K=n(10811),L=n(42262),_=n(75627),z=n(13135),H=n(9133),N=n(81850);const U=(0,K.Ng)((e=>{let{entities:{metricsByRunUuid:t}}=e;return{metricsByRunUuid:t}}),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.metricsByRunUuid===t.entities.metricsByRunUuid})((e=>{let{previewData:t,cardConfig:n,metricsByRunUuid:i,groupBy:a}=e;const s=(0,f.dD)(),l=(0,o.useMemo)((()=>t.some((e=>e.groupParentInfo))),[t]),{aggregateFunction:c}=a||{},d=(0,o.useMemo)((()=>{if(l){return[...(0,H.compact)(t.map((e=>e.groupParentInfo))).flatMap((e=>e.runUuids)),...(0,H.compact)(t.filter((e=>!e.groupParentInfo&&!e.belongsToGroup)).map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid})))]}return(0,H.compact)(t.map((e=>e.runInfo))).map((e=>e.runUuid))}),[t,l]),u=(0,o.useMemo)((()=>{var e;const t=[n.metricKey],i=null!==(e=n.selectedMetricKeys)&&void 0!==e?e:t,r=n.selectedXAxisMetricKey?[n.selectedXAxisMetricKey]:[];return i.concat(r)}),[n.metricKey,n.selectedMetricKeys,n.selectedXAxisMetricKey]),{resultsByRunUuid:p,isLoading:h}=(0,z.S)({runUuids:d,metricKeys:u,enabled:!0,maxResults:320,autoRefreshEnabled:!1}),m=(0,o.useMemo)((()=>t.map((e=>{const t=u.reduce(((t,n)=>{var i,r;const o=null===(i=p[e.uuid])||void 0===i||null===(r=i[n])||void 0===r?void 0:r.metricsHistory;return o&&(t[n]=o),t}),{});return{...e,metricsHistory:t}}))),[u,p,t]),v=(0,N.B)({enabled:l,ungroupedRunsData:m,metricKeys:u,sampledDataResultsByRunUuid:p,aggregateFunction:c,selectedXAxisMetricKey:n.xAxisKey===S.fj.METRIC?n.selectedXAxisMetricKey:void 0}),g=l?v:m,{setTooltip:y,resetTooltip:C}=(0,_.uN)(n,s?_.QS.MultipleTracesWithScanline:_.QS.Simple);return h?(0,x.Y)(r.PLz,{}):(0,x.Y)(L.h,{runsData:g,metricKey:n.metricKey,selectedMetricKeys:n.selectedMetricKeys,scaleType:n.scaleType,xAxisScaleType:n.xAxisScaleType,lineSmoothness:n.lineSmoothness,xAxisKey:n.xAxisKey,selectedXAxisMetricKey:n.selectedXAxisMetricKey,displayPoints:n.displayPoints,useDefaultHoverBox:!1,onHover:y,onUnhover:C})}));var P=n(59264),B=n(65243);var O=n(66117);var W=n(10661);var G=n(21809);var j={name:"i1civq",styles:"display:flex;justify-content:center;align-items:center;text-align:center"},$={name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"};const V=e=>{let{state:t,onStateChange:n,metricKeyList:i,paramKeyList:r}=e;const{formatMessage:s}=(0,a.A)(),l=(0,o.useCallback)(((e,t)=>{const i=(0,y.tG)(e,"METRIC")?"METRIC":"PARAM",r=(0,y.dz)(e,i);n((e=>({...e,[t]:{key:r,type:i}})))}),[n]),c=(0,o.useCallback)((e=>{n((t=>({...t,runsCountToCompare:e})))}),[n]);return(0,o.useEffect)((()=>{var e,n,o;const a=null===i||void 0===i?void 0:i[0],s=null===r||void 0===r?void 0:r[0];null!==(e=t.xaxis)&&void 0!==e&&e.key||(a?l((0,y.GF)("METRIC",a),"xaxis"):s&&l((0,y.GF)("PARAM",s),"xaxis")),null!==(n=t.yaxis)&&void 0!==n&&n.key||(a?l((0,y.GF)("METRIC",a),"yaxis"):s&&l((0,y.GF)("PARAM",s),"yaxis")),null!==(o=t.zaxis)&&void 0!==o&&o.key||(a?l((0,y.GF)("METRIC",a),"zaxis"):s&&l((0,y.GF)("PARAM",s),"zaxis"))}),[t.xaxis,t.yaxis,t.zaxis,l,i,r]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:s({id:"2Us2jl",defaultMessage:"X axis"}),children:(0,x.Y)(M,{value:t.xaxis.key?(0,y.GF)(t.xaxis.type,t.xaxis.key):"",onChange:e=>{l(e,"xaxis")},paramKeyList:r,metricKeyList:i})}),(0,x.Y)(C,{title:s({id:"8YmId5",defaultMessage:"Y axis"}),children:(0,x.Y)(M,{value:t.yaxis.key?(0,y.GF)(t.yaxis.type,t.yaxis.key):"",onChange:e=>{l(e,"yaxis")},paramKeyList:r,metricKeyList:i})}),(0,x.Y)(C,{title:s({id:"cB0/61",defaultMessage:"Z axis"}),children:(0,x.Y)(M,{value:t.zaxis.key?(0,y.GF)(t.zaxis.type,t.zaxis.key):"",onChange:e=>{l(e,"zaxis")},paramKeyList:r,metricKeyList:i})}),(0,x.Y)(Y,{value:t.runsCountToCompare,onChange:c,options:[5,10,20,50,100]})]})},X=A;X.push({value:100,label:(0,x.Y)(s.A,{id:"Bbm59f",defaultMessage:"100"})},{value:250,label:(0,x.Y)(s.A,{id:"W8bOkn",defaultMessage:"250"})},{value:500,label:(0,x.Y)(s.A,{id:"Bnruyp",defaultMessage:"500"})});const Z=e=>{let{state:t,onStateChange:n,metricKeyList:i,paramKeyList:r}=e;const{formatMessage:s}=(0,a.A)(),l=(0,o.useCallback)(((e,t)=>{const i=(0,y.tG)(e,"METRIC")?"METRIC":"PARAM",r=(0,y.dz)(e,i);n((e=>({...e,[t]:{key:r,type:i}})))}),[n]),c=(0,o.useCallback)((e=>{n((t=>({...t,runsCountToCompare:e})))}),[n]);return(0,o.useEffect)((()=>{var e,n;const o=null===i||void 0===i?void 0:i[0],a=null===r||void 0===r?void 0:r[0];null!==(e=t.xaxis)&&void 0!==e&&e.key||(o?l((0,y.GF)("METRIC",o),"xaxis"):a&&l((0,y.GF)("PARAM",a),"xaxis")),null!==(n=t.yaxis)&&void 0!==n&&n.key||(o?l((0,y.GF)("METRIC",o),"yaxis"):a&&l((0,y.GF)("PARAM",a),"yaxis"))}),[t.xaxis,t.yaxis,l,i,r]),(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:s({id:"vBKFgp",defaultMessage:"X axis"}),children:(0,x.Y)(M,{value:t.xaxis.key?(0,y.GF)(t.xaxis.type,t.xaxis.key):"",onChange:e=>{l(e,"xaxis")},paramKeyList:r,metricKeyList:i})}),(0,x.Y)(C,{title:s({id:"DaF+KK",defaultMessage:"Y axis"}),children:(0,x.Y)(M,{value:t.yaxis.key?(0,y.GF)(t.yaxis.type,t.yaxis.key):"",onChange:e=>{l(e,"yaxis")},paramKeyList:r,metricKeyList:i})}),(0,x.Y)(Y,{value:t.runsCountToCompare,onChange:c,options:X})]})};var Q=n(73150),q=n(32677);var J={name:"1oeqf2d",styles:"width:100%;overflow:auto hidden;height:100%"};var ee={name:"8irbms",styles:"display:inline-flex;align-items:center"};const te=e=>{let{state:t,onStateChange:n,metricKeyList:c,paramKeyList:d,groupBy:u}=e;const p=(0,o.useCallback)((e=>{n((t=>{const n=t.compareGroups;return n.includes(e)?{...t,compareGroups:n.filter((t=>t!==e))}:{...t,compareGroups:[...n,e]}}))}),[n]),h=(0,o.useCallback)((e=>n((t=>({...t,chartName:e.target.value})))),[n]),m=(0,o.useCallback)((e=>n((t=>({...t,showChangeFromBaseline:e})))),[n]),v=(0,o.useCallback)((e=>n((t=>({...t,showDifferencesOnly:e})))),[n]),{theme:y}=(0,i.u)(),{formatMessage:f}=(0,a.A)();return(0,x.FD)(x.FK,{children:[(0,x.FD)(C,{title:f({id:"46xd2Z",defaultMessage:"Compare"}),children:[(0,x.Y)(r.Sc0.Group,{id:"checkbox-group",defaultValue:t.compareGroups,children:Object.values(l.K8).map((e=>{var n;const i=!!u&&l.Nf.includes(e);return(0,x.FD)("div",{css:ee,children:[(0,x.Y)(r.Sc0,{value:e,isChecked:null===(n=t.compareGroups)||void 0===n?void 0:n.includes(e),onChange:()=>p(e),disabled:i,children:e},e),i&&(0,x.Y)(r.ID_,{title:(0,x.Y)(s.A,{id:"LKAZ2n",defaultMessage:"Disable grouped runs to compare"})})]})}))}),(0,x.FD)("div",{css:(0,g.AH)({display:"flex",flexDirection:"column",padding:`${y.spacing.md}px 0px`,gap:y.spacing.sm},""),children:[(0,x.Y)(r.dOG,{checked:t.showChangeFromBaseline,onChange:m,label:f({id:"9g0sMx",defaultMessage:"Show change from baseline"})}),(0,x.Y)(r.dOG,{checked:t.showDifferencesOnly,onChange:v,label:f({id:"nWeQCU",defaultMessage:"Show differences only"})})]})]}),(0,x.Y)(C,{title:f({id:"ZgAOhX",defaultMessage:"Chart name"}),children:(0,x.Y)(i.f,{value:t.chartName,onChange:h})})]})};var ne=n(99061);const ie=e=>{let{previewData:t,state:n,onStateChange:i,imageKeyList:s}=e;const{stepMarks:l,maxMark:c,minMark:d}=(0,ne._)({data:t,selectedImageKeys:n.imageKeys||[]}),u=((0,o.useCallback)((e=>{i((t=>({...t,imageKeys:e})))}),[i]),(0,o.useCallback)((e=>{i((t=>({...t,step:e})))}),[i])),{formatMessage:p}=(0,a.A)(),h=e=>{i((t=>{var n;const i=t;var r;return null!==(n=i.imageKeys)&&void 0!==n&&n.includes(e)?{...i,imageKeys:null===(r=i.imageKeys)||void 0===r?void 0:r.filter((t=>t!==e))}:{...i,imageKeys:[...i.imageKeys||[],e]}}))};return(0,x.FD)(x.FK,{children:[(0,x.Y)(C,{title:p({id:"6Jan3t",defaultMessage:"Images"}),children:(0,x.FD)(r.AYc,{value:n.imageKeys,label:"Images",multiSelect:!0,children:[(0,x.Y)(r.gGe,{onClear:()=>{i((e=>({...e,imageKeys:[]})))},minWidth:300}),(0,x.Y)(r.dn6,{matchTriggerWidth:!0,children:(0,x.Y)(r.HI_,{children:s.map((e=>{var t;return(0,x.Y)(r.jTC,{value:e,onChange:h,checked:null===(t=n.imageKeys)||void 0===t?void 0:t.includes(e)},e)}))})})]})}),(0,x.Y)(C,{title:"Step",children:(0,x.Y)(I.o,{max:c,min:d,marks:l,defaultValue:n.step,disabled:Object.keys(l).length<=1,onChange:u,step:null})})]})};var re=n(34389);var oe={name:"1bivvgq",styles:"width:100%;overflow:auto hidden"};const ae={[l.zL.BAR]:e=>{let{previewData:t,cardConfig:n}=e;const{resetTooltip:i,setTooltip:r}=(0,_.uN)(n);return(0,x.Y)(B.u,{useDefaultHoverBox:!1,displayRunNames:!1,displayMetricKey:!1,metricKey:n.metricKey,runsData:t,margin:P.J,onHover:r,onUnhover:i})},[l.zL.CONTOUR]:e=>{let{previewData:t,cardConfig:n}=e;const{resetTooltip:i,setTooltip:r}=(0,_.uN)(n);return(0,x.Y)(O.a,{xAxis:n.xaxis,yAxis:n.yaxis,zAxis:n.zaxis,runsData:t,onHover:r,onUnhover:i,useDefaultHoverBox:!1})},[l.zL.LINE]:U,[l.zL.PARALLEL]:e=>{var t,n;let{previewData:i,cardConfig:r,groupBy:a}=e;const l=((null===(t=r.selectedParams)||void 0===t?void 0:t.length)||0)+((null===(n=r.selectedMetrics)||void 0===n?void 0:n.length)||0)>=2,{setTooltip:c,resetTooltip:d}=(0,_.uN)(r);if((0,o.useMemo)((()=>{var e;return null===(e=r.selectedParams)||void 0===e?void 0:e.some((e=>null===i||void 0===i?void 0:i.some((t=>{var n;return isNaN(Number(null===(n=t.params[e])||void 0===n?void 0:n.value))}))),[r.selectedParams,i])}),[r.selectedParams,i])&&a)return(0,x.Y)("div",{css:j,children:(0,x.Y)(s.A,{id:"kTkJkb",defaultMessage:"Parallel coordinates chart does not support aggregated string values. Use other parameters or disable run grouping to continue."})});const u=l?(0,G.fM)(i,r.selectedParams,r.selectedMetrics):[];return l?u.length?(0,x.Y)(G.Ay,{selectedMetrics:r.selectedMetrics,selectedParams:r.selectedParams,data:u,axesRotateThreshold:6,onHover:c,onUnhover:d}):null:(0,x.Y)("div",{css:$,children:"Select at least two metrics and params first"})},[l.zL.SCATTER]:e=>{let{previewData:t,cardConfig:n}=e;const{resetTooltip:i,setTooltip:r}=(0,_.uN)(n);return(0,x.Y)(W.i,{xAxis:n.xaxis,yAxis:n.yaxis,runsData:t,onHover:r,onUnhover:i,useDefaultHoverBox:!1})},[l.zL.DIFFERENCE]:e=>{let{previewData:t,groupBy:n,cardConfig:i,setCardConfig:r}=e;return(0,x.Y)("div",{css:J,children:(0,x.Y)(q.I,{previewData:t,groupBy:n,cardConfig:i,setCardConfig:r})})},[l.zL.IMAGE]:e=>{let{previewData:t,cardConfig:n,setCardConfig:i,groupBy:r}=e;return(0,x.Y)("div",{css:oe,children:(0,x.Y)(re.f,{previewData:t,cardConfig:n,setCardConfig:i,containerWidth:500,groupBy:r})})}};var se={name:"1uahl7",styles:"width:1280px"},le={name:"1d3w5wq",styles:"width:100%"};const ce=e=>{let{onCancel:t,onSubmit:n,config:g,chartRunData:y,metricKeyList:M,paramKeyList:Y,groupBy:A,supportedChartTypes:b}=e;const w=e=>!b||b.includes(e),{theme:S}=(0,i.u)(),[I,k]=(0,o.useState)(g),E=Boolean(I.uuid),T=(0,o.useCallback)((e=>{if(!e)return;const t=l.i$.getEmptyChartCardByType(e,!0);t&&k(t)}),[]),K=(0,o.useMemo)((()=>(0,f.M1)()?y.filter((e=>{let{hidden:t}=e;return!t})).reverse():y.slice(0,I.runsCountToCompare).reverse()),[y,I.runsCountToCompare]),L=(0,o.useMemo)((()=>{const e=new Set;return K.forEach((t=>{Object.keys(t.images).forEach((t=>{e.add(t)}))})),Array.from(e).sort()}),[K]),{formatMessage:z}=(0,a.A)();let H=!1;if(I.type===l.zL.LINE){var N;H=0===(null!==(N=I.selectedMetricKeys)&&void 0!==N?N:[]).length}return(0,x.Y)(r.aFV,{visible:!0,onCancel:t,onOk:()=>n(I),title:z(E?{id:"kBXHTA",defaultMessage:"Edit chart"}:{id:"6y36Fr",defaultMessage:"Add new chart"}),okButtonProps:{"data-testid":"experiment-view-compare-runs-chart-modal-confirm",disabled:H},cancelText:z({id:"TlVXcS",defaultMessage:"Cancel"}),okText:z(E?{id:"vPnoNk",defaultMessage:"Save changes"}:{id:"UzZf+2",defaultMessage:"Add chart"}),size:"wide",css:se,children:(0,x.FD)("div",{css:de.wrapper,children:[(0,x.FD)("div",{children:[!E&&(0,x.Y)(C,{title:"Type",children:(0,x.FD)(r._vn,{css:le,value:I.type,onChange:T,children:[w(l.zL.BAR)&&(0,x.Y)(r._vn.Option,{value:l.zL.BAR,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(c.h,{}),(0,x.Y)(s.A,{id:"gdK07H",defaultMessage:"Bar chart"})]})}),w(l.zL.SCATTER)&&(0,x.Y)(r._vn.Option,{value:l.zL.SCATTER,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(h.h,{}),(0,x.Y)(s.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]})}),w(l.zL.LINE)&&(0,x.Y)(r._vn.Option,{value:l.zL.LINE,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(u.h,{}),(0,x.Y)(s.A,{id:"CyTYL6",defaultMessage:"Line chart"})]})}),w(l.zL.PARALLEL)&&(0,x.Y)(r._vn.Option,{value:l.zL.PARALLEL,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(p.h,{}),(0,x.Y)(s.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]})}),w(l.zL.CONTOUR)&&(0,x.Y)(r._vn.Option,{value:l.zL.CONTOUR,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(d.h,{}),(0,x.Y)(s.A,{id:"6XfILf",defaultMessage:"Contour chart"})]})}),(0,f.uP)()&&w(l.zL.DIFFERENCE)&&(0,x.Y)(r._vn.Option,{value:l.zL.DIFFERENCE,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(m.h,{}),(0,x.Y)(s.A,{id:"G5mMJI",defaultMessage:"Difference view"})]})}),(0,f.HW)()&&w(l.zL.IMAGE)&&(0,x.Y)(r._vn.Option,{value:l.zL.IMAGE,children:(0,x.FD)("div",{css:de.chartTypeOption(S),children:[(0,x.Y)(v.h,{}),(0,x.Y)(s.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})})]})}),(U=I.type,U===l.zL.BAR?(0,x.Y)(D,{metricKeyList:M,state:I,onStateChange:k}):U===l.zL.CONTOUR?(0,x.Y)(V,{metricKeyList:M,paramKeyList:Y,state:I,onStateChange:k}):U===l.zL.LINE?(0,x.Y)(F,{metricKeyList:M,state:I,onStateChange:k}):U===l.zL.PARALLEL?(0,x.Y)(R,{metricKeyList:M,paramKeyList:Y,state:I,onStateChange:k}):U===l.zL.SCATTER?(0,x.Y)(Z,{metricKeyList:M,paramKeyList:Y,state:I,onStateChange:k}):(0,f.uP)()&&U===l.zL.DIFFERENCE?(0,x.Y)(te,{metricKeyList:M,paramKeyList:Y,state:I,onStateChange:k,groupBy:A}):(0,f.HW)()&&U===l.zL.IMAGE?(0,x.Y)(ie,{previewData:K,imageKeyList:L,state:I,onStateChange:k}):null)]}),(0,x.Y)(_.W,{contextData:{runs:y},component:Q.X,hoverOnly:!0,children:(0,x.Y)("div",{css:de.chartWrapper,children:(e=>{if(!e)return null;const t=ae[e];return t?(0,x.Y)(t,{previewData:K,cardConfig:I,groupBy:A,setCardConfig:k}):null})(I.type)})})]})});var U},de={chartTypeOption:e=>({display:"grid",gridTemplateColumns:`${e.general.iconSize+e.spacing.xs}px 1fr`,gap:e.spacing.xs,alignItems:"center"}),wrapper:{display:"grid",gridTemplateColumns:"300px 1fr",gap:32},field:{display:"grid",gridTemplateColumns:"80px 1fr",marginBottom:16},chartWrapper:{height:400,width:500}}},63617:function(e,t,n){n.d(t,{_:function(){return d}});var i=n(89555),r=n(68254),o=n(82589),a=n(75627),s=n(12359),l=n(50111);var c={name:"1fttcpj",styles:"display:flex;flex-direction:column"};const d=e=>{let{chartData:t,isMetricHistoryLoading:n=!1,groupBy:d,fullScreenChart:u,onCancel:p,tooltipContextValue:h,tooltipComponent:m,autoRefreshEnabled:v,showControllerNotification:g}=e;const{theme:y,getPrefixedClassName:f}=(0,r.u)();return u?(0,l.Y)(o.aFV,{visible:!0,onCancel:p,title:(0,l.FD)("div",{css:c,children:[u.title,(0,l.Y)("span",{css:(0,i.AH)({color:y.colors.textSecondary,fontSize:y.typography.fontSizeSm,marginRight:y.spacing.xs},""),children:u.subtitle})]}),footer:null,verticalSizing:"maxed_out",dangerouslySetAntdProps:{width:"95%"},css:(0,i.AH)({[`.${f("modal-body")}`]:{flex:1}},""),children:(0,l.Y)(a.W,{contextData:h,component:m,showControllerNotification:g,children:(0,l.Y)(s.i,{cardConfig:u.config,chartRunData:t,groupBy:d,index:0,sectionIndex:0,fullScreen:!0,autoRefreshEnabled:v,onRemoveChart:()=>{},onReorderCharts:()=>{},onStartEditChart:()=>{},setFullScreenChart:()=>{},canMoveDown:!1,canMoveUp:!1,onMoveDown:()=>{},onMoveUp:()=>{},onReorderWith:()=>{}})})}):null}},73150:function(e,t,n){n.d(t,{X:function(){return A}});var i=n(31014),r=n(9133),o=n(82589),a=n(68254),s=n(88443),l=n(48624),c=n(58481),d=n(24947),u=n(7842),p=n(75627),h=n(30152),m=n(59397),v=n(91144),g=n(10811),y=n(16612),f=n(44240),x=n(96174),C=n(50111);const M=(e,t,n)=>{var i,o;const{metricKey:a,xAxisKey:s}=e,l=(null===n||void 0===n||null===(i=n.metricEntity)||void 0===i?void 0:i.key)||a,c=null!==(o=null===n||void 0===n?void 0:n.yValue)&&void 0!==o?o:null===t||void 0===t?void 0:t.metrics[l].value;if((0,r.isNil)(c))return null;const d=((e,t)=>{var n,i,r;return t===u.fj.METRIC?null!==(n=null===e||void 0===e?void 0:e.xValue)&&void 0!==n?n:"":(0,v.v$)()&&t===u.fj.TIME_RELATIVE?"number"===typeof(r=null!==(i=null===e||void 0===e?void 0:e.xValue)&&void 0!==i?i:"")?r:r.split(" ")[1]||"00:00:00":null===e||void 0===e?void 0:e.xValue})(n,s);return(0,C.FD)(C.FK,{children:[n&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:[n.label,":"]})," ",d]}),(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:[l,":"]})," ",c]})]})},Y=e=>{let{activeRun:t,cardConfig:n,isHovering:i,hoverData:r}=e;return n.type===h.zL.BAR?((e,t)=>{const{metricKey:n}=e,i=null===t||void 0===t?void 0:t.metrics[n];return i?(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:[i.key,":"]})," ",i.value]}):null})(n,t):n.type===h.zL.SCATTER?((e,t)=>{var n,i,r,o;const{xaxis:a,yaxis:s}=e,l=a.key,c=s.key,d="METRIC"===a.type?null===(n=t.metrics[l])||void 0===n?void 0:n.value:null===(i=t.params[l])||void 0===i?void 0:i.value,u="METRIC"===s.type?null===(r=t.metrics[c])||void 0===r?void 0:r.value:null===(o=t.params[c])||void 0===o?void 0:o.value;return(0,C.FD)(C.FK,{children:[d&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:["X (",l,"):"]})," ",d]}),u&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:["Y (",c,"):"]})," ",u]})]})})(n,t):n.type===h.zL.CONTOUR?((e,t)=>{var n,i,r,o,a,s;const{xaxis:l,yaxis:c,zaxis:d}=e,u=l.key,p=c.key,h=d.key,m="METRIC"===l.type?null===(n=t.metrics[u])||void 0===n?void 0:n.value:null===(i=t.params[u])||void 0===i?void 0:i.value,v="METRIC"===c.type?null===(r=t.metrics[p])||void 0===r?void 0:r.value:null===(o=t.params[p])||void 0===o?void 0:o.value,g="METRIC"===d.type?null===(a=t.metrics[h])||void 0===a?void 0:a.value:null===(s=t.params[h])||void 0===s?void 0:s.value;return(0,C.FD)(C.FK,{children:[m&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:["X (",u,"):"]})," ",m]}),v&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:["Y (",p,"):"]})," ",v]}),g&&(0,C.FD)("div",{css:b.value,children:[(0,C.FD)("strong",{children:["Z (",h,"):"]})," ",g]})]})})(n,t):n.type===h.zL.LINE?M(n,t,r):n.type===h.zL.PARALLEL?((e,t,n)=>{const{selectedParams:i,selectedMetrics:r}=e,o=i.map((e=>{const n=null===t||void 0===t?void 0:t.params[e];return!n||(0,C.FD)("div",{children:[(0,C.FD)("strong",{children:[n.key,":"]})," ",n.value]},e)})),a=r.map((e=>{const n=null===t||void 0===t?void 0:t.metrics[e];return!n||(0,C.FD)("div",{children:[(0,C.FD)("strong",{children:[n.key,":"]})," ",n.value]},e)}));return n?(0,C.FD)(C.FK,{children:[o.slice(0,3),(o.length>3||a.length>1)&&(0,C.Y)("div",{children:"..."}),a[a.length-1]]}):(0,C.FD)(C.FK,{children:[o,a]})})(n,t,i):null},A=e=>{let{closeContextMenu:t,contextData:n,hoverData:r,chartData:u,runUuid:h,isHovering:v,mode:M,showControllerNotification:A,refreshRuns:D}=e;const w=(0,g.wA)(),{runs:R,onTogglePin:S,onHideRun:I}=n,[k,E]=(0,i.useState)(!1),[F,T]=(0,i.useState)(""),[K,L]=(0,i.useState)("{}"),[_,z]=(0,i.useState)(""),[H,N]=(0,i.useState)(!1),[U,P]=(0,i.useState)(!1),[B,O]=(0,i.useState)(!1),[W,G]=(0,i.useState)(null),[j,$]=(0,i.useState)(0),[V]=(0,d.z)(),X=null===R||void 0===R?void 0:R.find((e=>e.uuid===h));(0,i.useEffect)((()=>{h&&(async()=>{try{var e;const t=Number(null===(e=R.find((e=>e.uuid===h)))||void 0===e?void 0:e.displayName);if(!t)return void console.error("Run not found");const n=await y.F.getRunUi({run_id:t});if(n&&"object"===typeof n&&"config"in n){const e=n.config;L(JSON.stringify(e,null,2)),z(JSON.stringify(e,null,2)),"status"in n&&"string"===typeof n.status&&T(n.status),"num_chunks_visited"in n&&"number"===typeof n.num_chunks_visited&&$(n.num_chunks_visited)}else console.error("Response does not contain a config object")}catch(t){console.error("Error fetching run configuration:",t)}})()}),[w,h,R]);if((0,p.bL)(r)&&M===p.QS.MultipleTracesWithScanline&&v)return(0,C.Y)(m.G,{hoverData:r});const Z=(0,p.bL)(r)?r.hoveredDataPoint:r;if(!X)return null;const Q=X.displayName||X.uuid,q=null!==Z&&void 0!==Z&&Z.metricEntity?` (${Z.metricEntity.key})`:"";return(0,C.FD)("div",{css:b.container,children:[(0,C.Y)(x.a,{isOpen:B,onClose:()=>O(!1),onConfirm:async()=>{if(!W||!X)return;const e=Number(X.displayName);try{let n;switch(W){case"stop":n=await y.F.stopRun({run_id:e});break;case"resume":n=await y.F.resumeRun({run_id:e});break;case"delete":if(n=await y.F.deleteRun({run_id:e}),n&&"object"===typeof n&&"error"in n)break;await w((0,f.pA)(h))}(n&&"object"===typeof n&&"error"in n?n.error:null)&&A&&A(W,"error"),A&&(A(W,"success"),"function"===typeof D&&D()),t()}catch(n){console.error(`Error ${W}ing run:`,n),A&&A(W,"error")}finally{O(!1),G(null)}},actionType:W||"stop",runName:X.displayName}),!v&&(0,C.FD)("div",{css:b.leftPanel,children:[(0,C.Y)(o.m_M,{title:"Resume run",placement:"left",children:(0,C.Y)(a.B,{componentId:"resume-run-button",size:"middle",icon:(0,C.Y)(o.udU,{color:"success"}),css:b.iconButton,onClick:async()=>{try{var e;const t=Number(null===(e=R.find((e=>e.uuid===h)))||void 0===e?void 0:e.displayName),n=await y.F.resumeRun({run_id:t});if(n&&"object"===typeof n&&"error"in n?n.error:null)return void(null===A||void 0===A||A("resume","error"));null===A||void 0===A||A("resume","success"),null===D||void 0===D||D()}catch(t){null===A||void 0===A||A("resume","error")}}})}),(0,C.Y)(o.m_M,{title:"Stop run",placement:"left",children:(0,C.Y)(a.B,{componentId:"stop-run-button",size:"middle",icon:(0,C.Y)(o.wFz,{color:"danger"}),css:b.iconButton,onClick:async()=>{try{var e;const t=Number(null===(e=R.find((e=>e.uuid===h)))||void 0===e?void 0:e.displayName),n=await y.F.stopRun({run_id:t});if(n&&"object"===typeof n&&"error"in n?n.error:null)return void(null===A||void 0===A||A("stop","error"));null===A||void 0===A||A("stop","success"),null===D||void 0===D||D()}catch(t){null===A||void 0===A||A("stop","error")}}})}),(0,C.Y)(o.m_M,{title:"Clone run",placement:"left",children:(0,C.Y)(a.B,{componentId:"clone-run-button",size:"middle",icon:(0,C.Y)(o.TdU,{}),onClick:()=>{E(!0),N(!1)}})}),(0,C.Y)(o.m_M,{title:"Delete run",placement:"left",children:(0,C.Y)(a.B,{componentId:"delete-run-button",size:"middle",icon:(0,C.Y)(o.ucK,{}),onClick:async()=>{try{var e;const t=Number(null===(e=R.find((e=>e.uuid===h)))||void 0===e?void 0:e.displayName),n=await y.F.deleteRun({run_id:t});if(n&&"object"===typeof n&&"error"in n?n.error:null)return void(null===A||void 0===A||A("delete","error"));I&&"function"===typeof I&&I(h),null===A||void 0===A||A("delete","success"),null===D||void 0===D||D()}catch(t){console.error("Error deleting run:",t),null===A||void 0===A||A("delete","error")}}})})]}),(0,C.FD)("div",{css:b.contentWrapper,children:[(0,C.FD)("div",{css:b.header,children:[(0,C.Y)("div",{css:b.colorPill,style:{backgroundColor:X.color}}),X.groupParentInfo?(0,C.Y)(a.T.Text,{children:Q+q}):(0,C.Y)(l.N_,{to:c.h.getRunPageRoute(V,h),target:"_blank",css:b.runLink,onClick:t,children:Q+q})]}),(0,C.FD)("div",{css:b.valueBoxWrapper,children:[(0,C.Y)(Y,{isHovering:v,activeRun:X,cardConfig:u,hoverData:Z}),(0,C.FD)(a.T.Text,{children:[(0,C.Y)("strong",{children:"Status:"})," ",F]}),(0,C.FD)(a.T.Text,{children:[(0,C.Y)("strong",{children:"Chunk Number:"})," ",j]})]}),!v&&(0,C.Y)(C.FK,{children:(0,C.Y)(o.m_M,{title:k?"You can now edit the config":"Click 'Clone' to edit this config",placement:"top",children:(0,C.Y)(a.f.TextArea,{value:K,onChange:e=>L(e.target.value),readOnly:!k,autoSize:!1,rows:8})})}),!v&&k&&(0,C.FD)(C.FK,{children:[(0,C.Y)(o.Sc0,{isChecked:H,onChange:()=>N(!H),children:"Warm start?"}),(0,C.Y)(a.B,{componentId:"save-run-button",size:"middle",type:"primary",onClick:()=>{E(!1),(async()=>{E(!1);try{var e;const i=Number(null===(e=R.find((e=>e.uuid===h)))||void 0===e?void 0:e.displayName);let r;try{r=JSON.parse(K)}catch(t){return console.error("Error parsing config JSON:",t),void(null===A||void 0===A||A("clone_modify","error","Invalid JSON configuration"))}const o=await y.F.cloneModifyRun({run_id:i,config:r,warm_start:H});let a=null;if("string"===typeof o)try{const e=JSON.parse(o);!1===e.result&&e.err_msg&&(a=e.err_msg)}catch(n){a=o}else if(o&&"object"===typeof o){const e=o;!1===e.result&&e.err_msg?a=e.err_msg:e.error&&(a=e.error)}if(a)return console.error("Error clone-modifying run:",a),void("function"===typeof A&&A("clone_modify","error",a));"function"===typeof A&&A("clone_modify","success")}catch(i){console.error("Error clone-modifying run:",i),"function"===typeof A&&A("clone_modify","error")}})()},children:"Submit"}),(0,C.Y)(a.B,{componentId:"cancel-run-button",size:"middle",onClick:()=>{E(!1),L(_),N(!1)},children:"Cancel"})]})]}),(0,C.FD)("div",{css:b.actionsWrapper,children:[!v&&(0,C.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_259",size:"small",onClick:t,icon:(0,C.Y)(a.C,{})}),X.pinnable&&S&&(0,C.Y)(o.m_M,{title:X.pinned?(0,C.Y)(s.A,{id:"ugm2f6",defaultMessage:"Unpin run"}):(0,C.Y)(s.A,{id:"58xhem",defaultMessage:"Click to pin the run"}),placement:"bottom",children:(0,C.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_282",size:"small",onClick:()=>{S(h),t()},icon:X.pinned?(0,C.Y)(o.aS3,{}):(0,C.Y)(o.tsw,{})})}),I&&(0,C.Y)(o.m_M,{title:(0,C.Y)(s.A,{id:"eE5VIF",defaultMessage:"Click to hide the run"}),placement:"bottom",children:(0,C.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscomparetooltipbody.tsx_302","data-testid":"experiment-view-compare-runs-tooltip-visibility-button",size:"small",onClick:()=>{I(h),t()},icon:(0,C.Y)(o.kFX,{})})})]})]})},b={container:{display:"flex",maxHeight:"100%",overflow:"hidden",width:"100%"},leftPanel:e=>({display:"flex",flexDirection:"column",gap:8,marginRight:16,padding:8,backgroundColor:e.colors.backgroundSecondary,borderRadius:e.general.borderRadiusBase}),runLink:e=>({color:e.colors.primary,"&:hover":{}}),actionsWrapper:{display:"flex",flexDirection:"column",gap:8,alignItems:"flex-start",marginLeft:16},header:{display:"flex",gap:8,alignItems:"center"},value:{maxWidth:450,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},valueBoxWrapper:{display:"flex",gap:8},contentWrapper:{display:"flex",flexDirection:"column",gap:12,flex:1,overflow:"auto",maxHeight:"100%"},colorPill:{width:12,height:12,borderRadius:"100%"},iconButton:{name:"1sawya1",styles:"&.ant-btn{border:1px solid rgba(0, 0, 0, 0.1);background:rgba(255, 255, 255, 0.1);box-shadow:none;&:hover,&:focus{background:rgba(255, 255, 255, 0.2);}}"}}},66117:function(e,t,n){n.d(t,{a:function(){return m}});var i=n(68254),r=n(31014),o=n(79445),a=n(97604),s=n(25790),l=n(7842),c=n(23541),d=n(50684),u=n(50111);const p={displaylogo:!1,scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},h=[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],m=r.memo((e=>{let{runsData:t,xAxis:n,yAxis:m,zAxis:v,markerSize:g=10,className:y,reverseScale:f,margin:x=l.AQ,colorScale:C=h,onUpdate:M,onHover:Y,onUnhover:A,width:b,height:D,useDefaultHoverBox:w=!0,selectedRunUuid:R,onSetDownloadHandler:S}=e;const{theme:I}=(0,i.u)(),{layoutHeight:k,layoutWidth:E,setContainerDiv:F,containerDiv:T,isDynamicSizeSupported:K}=(0,l.xN)(),L=(0,r.useMemo)((()=>{const e=[],i=[],r=[],o=[],a=[];for(const l of t){var s,c,d;const{metrics:t,params:u,color:p,uuid:h,displayName:g}=l,y="METRIC"===n.type?t:u,f="METRIC"===m.type?t:u,x="METRIC"===v.type?t:u,C=(null===y||void 0===y||null===(s=y[n.key])||void 0===s?void 0:s.value)||void 0,M=(null===f||void 0===f||null===(c=f[m.key])||void 0===c?void 0:c.value)||void 0,Y=(null===x||void 0===x||null===(d=x[v.key])||void 0===d?void 0:d.value)||void 0;C&&M&&Y&&(e.push(C),i.push(M),r.push(Y),o.push(p||I.colors.primary),a.push([h,g||h,Y]))}const u=[{x:e,y:i,customdata:a,text:t.map((e=>{let{displayName:t}=e;return t})),hovertemplate:w?(p=v.key,`<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><b>${p}:</b> %{customdata[2]:.2f}<extra></extra>`):void 0,hoverinfo:w?void 0:"none",hoverlabel:w?l.rv:void 0,type:"scatter",mode:"markers",textposition:"bottom center",marker:{size:g,color:o,line:{color:"black",width:1}}}];var p;return t.length>1&&u.unshift({x:e,y:i,z:r,type:"contour",connectgaps:!0,hoverinfo:"none",contours:{coloring:"heatmap"},colorscale:C,reversescale:f,colorbar:{tickfont:{size:11,color:I.colors.textSecondary,family:""}}}),u}),[C,f,g,t,n.type,n.key,m.type,m.key,v.type,v.key,I.colors.primary,I.colors.textSecondary,w]),_=(0,r.useMemo)((()=>(0,l.y)(I)),[I]),[z,H]=(0,r.useState)({width:b||E,height:D||k,margin:x,xaxis:{title:n.key,tickfont:{size:11,color:I.colors.textSecondary}},yaxis:{ticks:"inside",title:{standoff:32,text:m.key},tickfont:{size:11,color:I.colors.textSecondary}},template:{layout:_}});(0,r.useEffect)((()=>{H((e=>{const t={...e,width:b||E,height:D||k,margin:x};return t.xaxis&&(t.xaxis.title=n.key),t.yaxis&&(t.yaxis.title={standoff:32,text:m.key}),t}))}),[E,k,x,n.key,m.key,b,D]);const{setHoveredPointIndex:N}=(0,s.ZY)(T,R,t,s.nD),U=(0,r.useCallback)((e=>{var t,n;let{points:i}=e;const r=i.find((e=>{let{curveNumber:t}=e;return 1===t}));if(N(null!==(t=null===r||void 0===r?void 0:r.pointIndex)&&void 0!==t?t:-1),!r)return;const o=null===r||void 0===r||null===(n=r.customdata)||void 0===n?void 0:n[0];o&&(null===Y||void 0===Y||Y(o))}),[Y,N]),P=(0,r.useCallback)((()=>{null===A||void 0===A||A(),N(-1)}),[A,N]),B=(0,a.l)(U),O=(0,r.useMemo)((()=>(0,l.eY)(t)),[t]);(0,r.useEffect)((()=>{const e=L.map((e=>({...e,mode:"text+markers"})));null===S||void 0===S||S((0,d.W)(e,z))}),[z,S,L]);const W=(0,u.Y)("div",{css:[l.gz.chartWrapper(I),l.gz.scatterChartHighlightStyles,""],className:y,ref:F,children:(0,u.Y)(o.W,{data:L,useResizeHandler:!K,css:l.gz.chart(I),onUpdate:M,layout:z,config:p,onHover:B,onUnhover:P})});return(0,u.Y)(c.A,{labelData:O,children:W})}))},65243:function(e,t,n){n.d(t,{u:function(){return m}});var i=n(68254),r=n(31014),o=n(88464),a=n(79445),s=n(97604),l=n(25790),c=n(7842),d=n(23541),u=n(50684),p=n(50111);const h={displaylogo:!1,scrollZoom:!1,doubleClick:"autosize",showTips:!1,modeBarButtonsToRemove:["toImage"]},m=r.memo((e=>{let{runsData:t,metricKey:n,className:m,margin:g=c.am,onUpdate:y,onHover:f,onUnhover:x,barWidth:C=3/4,width:M,height:Y,displayRunNames:A=!0,useDefaultHoverBox:b=!0,displayMetricKey:D=!0,selectedRunUuid:w,onSetDownloadHandler:R}=e;const S=(0,r.useMemo)((()=>{const e=t.map((e=>e.uuid)),i=t.map((e=>{let{displayName:t}=e;return t})),r=t.map((e=>{var t;return(0,c.jn)(null===(t=e.metrics[n])||void 0===t?void 0:t.value)})),o=t.map((e=>{var t;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return"number"===typeof e?e.toFixed(t):e}(null===(t=e.metrics[n])||void 0===t?void 0:t.value)})),a=t.map((e=>e.color));return[{y:e,x:r,names:i,text:o,textposition:r.map((e=>0===e?"outside":"auto")),textfont:{size:11},metrics:t.map((e=>e.metrics[n])),type:"bar",hovertemplate:b?"%{label}<extra></extra>":void 0,hoverinfo:b?"y":"none",hoverlabel:b?c.rv:void 0,width:C,orientation:"h",marker:{color:a}}]}),[t,n,C,b]),{layoutHeight:I,layoutWidth:k,setContainerDiv:E,containerDiv:F,isDynamicSizeSupported:T}=(0,c.xN)(),{formatMessage:K}=(0,o.A)(),{theme:L}=(0,i.u)(),_=(0,r.useMemo)((()=>(0,c.y)(L)),[L]),[z,H]=(0,r.useState)({width:M||k,height:Y||I,margin:g,xaxis:{title:D?n:void 0,tickfont:{size:11,color:L.colors.textSecondary}},yaxis:{showticklabels:A,title:A?K({id:"+hQ+de",defaultMessage:"Run name"}):void 0,tickfont:{size:11,color:L.colors.textSecondary},fixedrange:!0},template:{layout:_}});(0,r.useEffect)((()=>{H((e=>({...e,width:M||k,height:Y||I,margin:g,xaxis:{...e.xaxis,title:D?n:void 0}})))}),[k,I,g,n,M,Y,D]);const{setHoveredPointIndex:N}=(0,l.ZY)(F,w,t,l.Iq),U=(0,r.useCallback)((e=>{var t,n,i,r;let{points:o,event:a}=e;const s=null===(t=o[0].data)||void 0===t?void 0:t.metrics[o[0].pointIndex];N(null!==(n=null===(i=o[0])||void 0===i?void 0:i.pointIndex)&&void 0!==n?n:-1);const l={xValue:o[0].x,yValue:o[0].value,index:o[0].pointIndex,metricEntity:s},c=null===(r=o[0])||void 0===r?void 0:r.label;c&&(null===f||void 0===f||f(c,a,l))}),[f,N]),P=(0,r.useCallback)((()=>{null===x||void 0===x||x(),N(-1)}),[x,N]),B=(0,s.l)(U),O=(0,r.useMemo)((()=>(0,c.eY)(t)),[t]);(0,r.useEffect)((()=>{const e={...z,yaxis:{...z.yaxis,showticklabels:!0,automargin:!0}},t=S.map((e=>({...e,y:e.names})));null===R||void 0===R||R((0,u.W)(t,e))}),[z,R,S]);const W=(0,p.Y)("div",{css:[c.gz.chartWrapper(L),v.highlightStyles,""],className:m,ref:E,children:(0,p.Y)(a.W,{data:S,useResizeHandler:!T,css:c.gz.chart(L),onUpdate:y,layout:z,config:h,onHover:B,onUnhover:P})});return(0,p.Y)(d.A,{labelData:O,children:W})})),v={highlightStyles:{".trace.bars g.point path":{transition:"var(--trace-transition)"},".trace.bars.is-highlight g.point path":{opacity:"var(--trace-opacity-dimmed-high) !important"},".trace.bars g.point.is-hover-highlight path":{opacity:"var(--trace-opacity-highlighted) !important"},".trace.bars g.point.is-selection-highlight path":{opacity:"var(--trace-opacity-highlighted) !important",stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"}}}},16026:function(e,t,n){n.d(t,{Y:function(){return l}});var i=n(89555),r=n(68254),o=(n(31014),n(50111));var a={name:"aj4kza",styles:"white-space:nowrap;text-overflow:ellipsis;overflow:hidden"};const s=e=>{let{label:t,color:n,dashStyle:s}=e;const{theme:c}=(0,r.u)();return(0,o.FD)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",textOverflow:"ellipsis",flexShrink:0,marginRight:c.spacing.md,maxWidth:"100%"},""),children:[(0,o.Y)(l,{color:n,dashStyle:s}),(0,o.Y)(r.T.Text,{color:"secondary",size:"sm",css:a,children:t})]})},l=e=>{let{color:t,dashStyle:n}=e;const{theme:a}=(0,r.u)(),s=n?(e=>{switch(e){case"dot":return"3";case"dash":return"6, 3";case"longdash":return"9, 3";case"dashdot":return"6, 3, 3, 3";case"longdashdot":return"9, 3, 3, 3";default:return""}})(n):void 0,l=a.typography.fontSizeSm/2;return(0,o.Y)("svg",{css:(0,i.AH)({height:a.typography.fontSizeSm,width:24,marginRight:a.spacing.xs,flexShrink:0},""),children:(0,o.Y)("path",{d:`M0,${l}h24`,style:{strokeWidth:3,stroke:t,strokeDasharray:s}})})};t.A=e=>{let{labelData:t,height:n,fullScreen:a}=e;const{theme:l}=(0,r.u)();return(0,o.Y)("div",{css:(0,i.AH)({display:"flex",flexWrap:"wrap",height:n,alignContent:a?"flex-start":"normal",gap:a?l.spacing.sm:0,overflowY:"auto",overflowX:"hidden",marginTop:a?l.spacing.lg:l.spacing.sm},""),children:t.map((e=>(0,o.Y)(s,{...e},e.label)))})}},23541:function(e,t,n){var i=n(89555),r=(n(31014),n(16026)),o=n(68254),a=n(50111);t.A=e=>{let{labelData:t,fullScreen:n,children:s}=e;const{theme:l}=(0,o.u)(),c=n?100:32,d=n?l.spacing.lg:l.spacing.md;return(0,a.FD)(a.FK,{children:[(0,a.Y)("div",{css:(0,i.AH)({height:`calc(100% - ${c+d}px)`},""),children:s}),(0,a.Y)(r.A,{labelData:t,height:c,fullScreen:n})]})}},42262:function(e,t,n){n.d(t,{h:function(){return A}});var i=n(68254),r=n(9133),o=n(31014),a=n(88464),s=n(79445),l=n(97604),c=n(25790),d=n(7842),u=n(82645),p=n(23541),h=n(91144),m=n(65977),v=n(50684),g=n(25866),y=n(50111);const f=(e,t)=>{const n=t.reduce(((e,t,n)=>(e[t]=n,e)),{});return e.slice().sort(((e,t)=>n[e.step]-n[t.step]))},x={displaylogo:!1,doubleClick:"autosize",scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},C=e=>`<b>${e}</b>:<br><b>%{xaxis.title.text}:</b> %{x}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>`,M=(e,t)=>{if(!e)return[];if(t===d.fj.TIME_RELATIVE){const{timestamp:t}=(0,r.minBy)(e,"timestamp")||{};return t?(0,h.v$)()?e.map((e=>{let{timestamp:n}=e;return n-t+g.$V})):e.map((e=>{let{timestamp:n}=e;return(n-t)/1e3})):e.map((e=>{let{step:t}=e;return t}))}if((0,h.v$)()&&t===d.fj.TIME_RELATIVE_HOURS){const{timestamp:t}=(0,r.minBy)(e,"timestamp")||{};if(t)return e.map((e=>{let{timestamp:n}=e;return(n-t)/g.uv}))}else if(t===d.fj.TIME)return e.map((e=>{let{timestamp:t}=e;return t}));return e.map((e=>{let{step:t}=e;return t}))},Y=e=>e?e.map((e=>({value:(0,d.jn)(e.value),step:e.step}))).sort(((e,t)=>Number(e.value)-Number(t.value))):[],A=o.memo((e=>{let{runsData:t,metricKey:n,selectedMetricKeys:A,scaleType:D="linear",xAxisScaleType:w="linear",xAxisKey:R=d.fj.STEP,selectedXAxisMetricKey:S="",lineSmoothness:I=70,className:k,margin:E=d.am,lineShape:F="linear",onUpdate:T,onHover:K,onUnhover:L,width:_,height:z,useDefaultHoverBox:H=!0,selectedRunUuid:N,xRange:U,yRange:P,lockXAxisZoom:B,fullScreen:O,displayPoints:W,onSetDownloadHandler:G}=e;const{theme:j}=(0,i.u)(),$=(0,h.dD)(),V=(0,o.useMemo)((()=>{let e=R;if((0,h.v$)()&&R===d.fj.TIME_RELATIVE){const i=A||[n];let o=0;t.forEach((e=>{const t=e.metricsHistory;t&&i.forEach((e=>{if(t[e]){const{timestamp:n}=(0,r.minBy)(t[e],"timestamp")||{},{timestamp:i}=(0,r.maxBy)(t[e],"timestamp")||{};if(i&&n){const e=i-n;o=Math.max(o,e)}}}))})),o>=g.B5&&(e=d.fj.TIME_RELATIVE_HOURS)}return e}),[t,A,n,R]),X=(0,o.useMemo)((()=>{const e=null!==A&&void 0!==A?A:[n];return t.map((t=>e.filter((e=>{var n;return!(0,r.isEmpty)(null===(n=t.metricsHistory)||void 0===n?void 0:n[e])})).map(((e,n)=>(e=>{var t,n,i,r,o,a;let{runEntry:s,metricKey:l,xAxisKey:c,selectedXAxisMetricKey:p,useDefaultHoverBox:h,lineSmoothness:m,lineShape:v,lineDash:g,displayPoints:y}=e;if(!s.metricsHistory)return{};const x=null===(t=s.metricsHistory[l])||void 0===t?void 0:t.sort(((e,t)=>c===d.fj.STEP?e.step-t.step:e.timestamp-t.timestamp));let A,b;if(c===d.fj.METRIC){const e=Y(s.metricsHistory[p]),t=e.map((e=>{let{step:t}=e;return t})),n=f(null!==x&&void 0!==x?x:[],t);A=e.map((e=>{let{value:t}=e;return t})),b=f(n,t).map((e=>{let{value:t}=e;return(0,d.jn)(t)}))}else A=M(x,c),b=null===x||void 0===x?void 0:x.map((e=>{let{value:t}=e;return(0,d.jn)(t)}));const D=(0,d.fH)(A)?"linear":v,w=null!==y&&void 0!==y?y:A.length<60,R=1===(null===(n=b)||void 0===n?void 0:n.length);return{uuid:s.uuid,name:(null===(i=s.runInfo)||void 0===i?void 0:i.runName)||"",x:A,y:(0,u.mV)(null!==(r=b)&&void 0!==r?r:[],m),metricHistory:x,metricKey:l,hovertext:(null===(o=s.runInfo)||void 0===o?void 0:o.runName)||"",text:"x",textposition:"outside",textfont:{size:11},mode:R||w?"lines+markers":"lines",hovertemplate:h?C((null===(a=s.runInfo)||void 0===a?void 0:a.runName)||""):void 0,hoverinfo:h?void 0:"none",hoverlabel:h?d.rv:void 0,type:"scatter",line:{dash:g,shape:D},marker:{color:s.color}}})({runEntry:t,metricKey:e,xAxisKey:V,selectedXAxisMetricKey:S,useDefaultHoverBox:H,lineSmoothness:I,lineShape:F,lineDash:d.J2[n%d.J2.length],displayPoints:W}))))).flat()}),[t,F,V,I,n,H,A,S,W]),Z=(0,o.useMemo)((()=>{const e=null!==A&&void 0!==A?A:[n];return t.filter((e=>{let{groupParentInfo:t}=e;return t})).flatMap((t=>e.map((e=>(e=>{var t;let{runEntry:n,metricKey:i,lineShape:r,xAxisKey:o,selectedXAxisMetricKey:a}=e;if(!n.aggregatedMetricsHistory)return{};const{max:s,min:l}=n.aggregatedMetricsHistory[i];let c,u,p,h;if(o===d.fj.METRIC){if(!n.metricsHistory)return{};const e=Y(n.metricsHistory[a]),t=e.map((e=>e.step)),i=e.map((e=>e.value));p=f(l,t).map((e=>{let{value:t}=e;return(0,d.jn)(t)})).reverse(),h=f(s,t).map((e=>{let{value:t}=e;return(0,d.jn)(t)})),c=i.slice().reverse(),u=i}else{const e=l.slice().reverse();c=M(e,o),u=M(s,o),p=e.map((e=>{let{value:t}=e;return(0,d.jn)(t)})),h=s.map((e=>{let{value:t}=e;return(0,d.jn)(t)}))}const m=[...c,null,...u],v=[...p,null,...h];return{name:(null===(t=n.runInfo)||void 0===t?void 0:t.runName)||"",x:m,y:v,fillcolor:(0,d.FI)(n.color,.2),hovertemplate:void 0,hoverlabel:void 0,hoverinfo:"skip",line:{color:"transparent",shape:r},fill:"tozeroy",type:"scatter"}})({runEntry:t,metricKey:e,lineShape:F,xAxisKey:V,selectedXAxisMetricKey:S})))))}),[F,n,t,A,V,S]),Q=(0,o.useMemo)((()=>[...Z,...X]),[X,Z]),{layoutHeight:q,layoutWidth:J,setContainerDiv:ee,containerDiv:te,isDynamicSizeSupported:ne}=(0,d.xN)(),{formatMessage:ie}=(0,a.A)(),{setHoveredPointIndex:re}=(0,c.ZY)(te,N,Q,c.PQ,Z.length),oe=(0,o.useMemo)((()=>V===d.fj.METRIC?S:ie((0,d.fw)(V))),[ie,V,S]),ae=(0,o.useMemo)((()=>({tickfont:{size:11,color:j.colors.textSecondary},type:"log"===D?"log":"linear",fixedrange:B})),[D,B,j]),[se,le]=(0,o.useState)({width:_||J,height:z||q,margin:E,xaxis:{title:oe,tickfont:{size:11,color:j.colors.textSecondary}},yaxis:ae,showlegend:!1});(0,o.useEffect)((()=>{le((e=>{const t={...e,width:_||J,height:z||q,margin:E,yaxis:ae,showlegend:!1};return(0,r.isEqual)(t,e)?e:t}))}),[J,q,E,ae,_,z,oe]);const ce=(0,o.useMemo)((()=>((null===A||void 0===A?void 0:A.length)||0)>1),[A]),de=(0,o.useCallback)((e=>{var t,n;let{points:i,event:r}=e;const o=i[0],a=null===o||void 0===o?void 0:o.data;if(re(null!==(t=null===o||void 0===o?void 0:o.curveNumber)&&void 0!==t?t:-1),!a)return;const s=a.uuid,l=null===(n=a.metricHistory)||void 0===n?void 0:n[o.pointIndex],c={xValue:o.x,yValue:o.y,metricEntity:l,index:o.pointIndex,label:oe};s&&(null===K||void 0===K||K(s,r,c))}),[K,re,oe]),ue=(0,o.useCallback)((()=>{null===L||void 0===L||L(),re(-1)}),[L,re]),pe=(0,o.useMemo)((()=>(0,d.y)(j)),[j]),he=se;he.xaxis&&(he.xaxis.title=oe,he.xaxis.type=((e,t)=>e===d.fj.TIME||(0,h.v$)()&&V===d.fj.TIME_RELATIVE?"date":e===d.fj.STEP&&"log"===t?"log":"linear")(R,w),U&&(he.xaxis.range=((e,t,n)=>{if(e===d.fj.STEP&&"number"===typeof t[0]&&"number"===typeof t[1]&&"log"===n){if(t[0]<0&&t[1]<0)return;if(t[0]<0)return[0,t[1]]}return[...t]})(R,U,w)),he.xaxis.tickformat=(0,h.v$)()&&V===d.fj.TIME_RELATIVE?"%H:%M:%S":void 0),he.template={layout:pe},P&&he.yaxis&&(he.yaxis.range=P,he.yaxis.automargin=!0,he.yaxis.tickformat="f");const me=(0,o.useMemo)((()=>(0,d.Ct)(t,A,n)),[t,A,n]),{scanlineElement:ve,initHandler:ge,updateHandler:ye,onPointHover:fe,onPointUnhover:xe}=(0,m.t)({legendLabelData:me,plotData:X,runsData:t,containsMultipleMetricKeys:ce,onHover:K,onUnhover:ue,xAxisKeyLabel:oe,xAxisKey:V,xAxisScaleType:R===d.fj.STEP?w:"linear",setHoveredPointIndex:re,disabled:!$}),Ce=(0,l.l)($?fe:de);(0,o.useEffect)((()=>{const e=((null===A||void 0===A?void 0:A.length)||0)>1?Q.map((e=>e.metricKey?{...e,name:`${e.name} (${e.metricKey})`}:e)):Q,t={...se,showlegend:!0,legend:{orientation:"h"}};null===G||void 0===G||G((0,v.W)(e,t))}),[se,G,Q,null===A||void 0===A?void 0:A.length]);const Me=(0,y.FD)("div",{css:[d.gz.chartWrapper(j),b.highlightStyles,""],className:k,ref:ee,children:[(0,y.Y)(s.W,{data:Q,useResizeHandler:!ne,css:d.gz.chart(j),onUpdate:(e,t)=>{$&&ye(e,t),null===T||void 0===T||T(e,t)},layout:he,config:x,onHover:Ce,onUnhover:$?xe:ue,onInitialized:ge}),ve]});return(0,y.Y)(p.A,{labelData:me,fullScreen:O,children:Me})})),b={highlightStyles:{".scatterlayer g.trace":{transition:"var(--trace-transition)"},".scatterlayer.is-highlight g.trace:not(.is-band)":{opacity:"var(--trace-opacity-dimmed-low) !important"},".scatterlayer g.trace.is-hover-highlight:not(.is-band)":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight:not(.is-band)":{opacity:"var(--trace-opacity-highlighted) !important"},".scatterlayer g.trace.is-selection-highlight path.point":{stroke:"var(--trace-stroke-color)",strokeWidth:"var(--trace-stroke-width) !important"},".scatterlayer.is-highlight g.trace.is-band:not(.is-band-highlighted)":{opacity:"var(--trace-opacity-dimmed) !important"}}}},59397:function(e,t,n){n.d(t,{G:function(){return g}});var i=n(89555),r=n(9133),o=n(31014),a=n(16026),s=n(69526),l=n(88464),c=n(7842),d=n(68254),u=n(91144),p=n(50111);const h=e=>{let{value:t}=e;return(0,p.FD)(p.FK,{children:[(0,p.Y)(s.XU,{value:t,year:"numeric"}),"-",(0,p.Y)(s.XU,{value:t,month:"2-digit"}),"-",(0,p.Y)(s.XU,{value:t,day:"2-digit"})," ",(0,p.Y)(s.ib,{value:t,hour:"numeric",hourCycle:"h24"}),":",(0,p.Y)(s.ib,{value:t,minute:"2-digit"}),":",(0,p.Y)(s.ib,{value:t,second:"2-digit",fractionalSecondDigits:3})]})},m=e=>{let{value:t}=e;return(0,p.FD)(p.FK,{children:[(0,p.Y)(s.ib,{value:t,hour:"2-digit",hourCycle:"h23"}),":",(0,p.Y)(s.ib,{value:t,minute:"2-digit"}),":",(0,p.Y)(s.ib,{value:t,second:"2-digit",fractionalSecondDigits:3})]})};var v={name:"1efi8gv",styles:"font-weight:bold"};const g=e=>{let{hoverData:t}=e;const{tooltipLegendItems:n,hoveredDataPoint:s,xValue:g,xAxisKeyLabel:y}=t,{traceUuid:f,metricEntity:x}=s||{},C=(0,l.A)(),{theme:M}=(0,d.u)(),Y=`${f}.${null===x||void 0===x?void 0:x.key}`,A=t.xAxisKey===c.fj.METRIC?y:C.formatMessage((0,c.fw)(t.xAxisKey));return n?(0,p.FD)("div",{children:[!(0,r.isUndefined)(g)&&(0,p.FD)("div",{css:(0,i.AH)({marginBottom:M.spacing.xs},""),children:[(0,p.Y)("span",{css:v,children:A})," ",t.xAxisKey===c.fj.TIME?(0,p.Y)(h,{value:g}):(0,u.v$)()&&t.xAxisKey===c.fj.TIME_RELATIVE?(0,p.Y)(m,{value:g}):g]}),(0,p.Y)("div",{css:(0,i.AH)({display:"grid",gridTemplateColumns:`${M.general.iconSize}px auto auto`,columnGap:M.spacing.sm,rowGap:M.spacing.sm/4,alignItems:"center"},""),children:n.map((e=>{let{displayName:t,color:n,uuid:s,value:l,dashStyle:c}=e;return(0,p.FD)(o.Fragment,{children:[(0,p.Y)(a.Y,{color:n||"transparent",dashStyle:c}),(0,p.Y)("div",{css:(0,i.AH)({marginRight:M.spacing.md,fontSize:M.typography.fontSizeSm,color:Y===s?"unset":M.colors.textPlaceholder},""),children:t}),(0,p.Y)("div",{children:!(0,r.isUndefined)(l)&&(0,p.Y)("span",{css:(0,i.AH)({fontWeight:Y===s?"bold":"normal",color:Y===s?"unset":M.colors.textPlaceholder},""),children:l})})]},s)}))})]}):null}},10661:function(e,t,n){n.d(t,{i:function(){return h}});var i=n(68254),r=n(31014),o=n(79445),a=n(97604),s=n(25790),l=n(7842),c=n(23541),d=n(50684),u=n(50111);const p={displaylogo:!1,scrollZoom:!1,modeBarButtonsToRemove:["toImage"]},h=r.memo((e=>{let{runsData:t,xAxis:n,yAxis:h,markerSize:m=10,className:v,margin:g=l.am,onUpdate:y,onHover:f,onUnhover:x,width:C,height:M,useDefaultHoverBox:Y=!0,selectedRunUuid:A,onSetDownloadHandler:b}=e;const{theme:D}=(0,i.u)(),{layoutHeight:w,layoutWidth:R,setContainerDiv:S,containerDiv:I,isDynamicSizeSupported:k}=(0,l.xN)(),E=(0,r.useMemo)((()=>{const e=[],i=[],r=[],o=[];for(const l of t){var a,s;const{runInfo:t,metrics:c,params:d,color:u,uuid:p,displayName:m}=l,{runUuid:v,runName:g}=t||{},y="METRIC"===n.type?c:d,f="METRIC"===h.type?c:d,x=(null===y||void 0===y||null===(a=y[n.key])||void 0===a?void 0:a.value)||void 0,C=(null===f||void 0===f||null===(s=f[h.key])||void 0===s?void 0:s.value)||void 0;x&&C&&(e.push(x),i.push(C),r.push(u||D.colors.primary),v?o.push([v,g||v]):o.push([p,m]))}return[{x:e,y:i,customdata:o,text:t.map((e=>{let{displayName:t}=e;return t})),hovertemplate:Y?"<b>%{customdata[1]}:</b><br><b>%{xaxis.title.text}:</b> %{x:.2f}<br><b>%{yaxis.title.text}:</b> %{y:.2f}<br><extra></extra>":void 0,hoverinfo:Y?void 0:"none",hoverlabel:Y?l.rv:void 0,type:"scatter",mode:"markers",textposition:"bottom center",marker:{size:m,color:r}}]}),[t,n,h,D,m,Y]),F=(0,r.useMemo)((()=>(0,l.y)(D)),[D]),[T,K]=(0,r.useState)({width:C||R,height:M||w,margin:g,xaxis:{title:n.key,tickfont:{size:11,color:D.colors.textSecondary}},yaxis:{title:h.key,tickfont:{size:11,color:D.colors.textSecondary}},template:{layout:F}});(0,r.useEffect)((()=>{K((e=>{const t={...e,width:C||R,height:M||w,margin:g};return t.xaxis&&(t.xaxis.title=n.key),t.yaxis&&(t.yaxis.title=h.key),t}))}),[R,w,g,n.key,h.key,C,M]);const{setHoveredPointIndex:L}=(0,s.ZY)(I,A,t,s.nD),_=(0,r.useCallback)((e=>{var t,n,i,r;let{points:o}=e;const a=null===(t=o[0])||void 0===t||null===(n=t.customdata)||void 0===n?void 0:n[0];L(null!==(i=null===(r=o[0])||void 0===r?void 0:r.pointIndex)&&void 0!==i?i:-1),a&&(null===f||void 0===f||f(a))}),[f,L]),z=(0,r.useCallback)((()=>{null===x||void 0===x||x(),L(-1)}),[x,L]),H=(0,a.l)(_),N=(0,r.useMemo)((()=>(0,l.eY)(t)),[t]);(0,r.useEffect)((()=>{const e=E.map((e=>({...e,mode:"text+markers"})));null===b||void 0===b||b((0,d.W)(e,T))}),[T,b,E]);const U=(0,u.Y)("div",{css:[l.gz.chartWrapper(D),l.gz.scatterChartHighlightStyles,""],className:v,ref:S,children:(0,u.Y)(o.W,{data:E,useResizeHandler:!k,css:l.gz.chart(D),layout:T,config:p,onUpdate:y,onHover:H,onUnhover:z})});return(0,u.Y)(c.A,{labelData:N,children:U})}))},6922:function(e,t,n){n.d(t,{Ox:function(){return g},cN:function(){return d},xC:function(){return u}});var i=n(89555),r=n(68254),o=n(82589),a=n(90765),s=n(91144),l=n(88443),c=n(50111);let d=function(e){return e.PARALLEL_CHARTS_AREA="PARALLEL_CHARTS_AREA",e.GENERAL_AREA="GENERAL_AREA",e}({});const u=e=>{let{runsOrGroups:t}=e;const n=t.some((e=>{let{groupParentInfo:t}=e;return t})),i=t.some((e=>{let{runInfo:t}=e;return t}));return(0,s.M1)()?null:i&&n?(0,c.Y)(l.A,{id:"xr/C5c",defaultMessage:"Comparing first {count} groups and runs",values:{count:t.length}}):n?(0,c.Y)(l.A,{id:"TMJfZv",defaultMessage:"Comparing first {count} groups",values:{count:t.length}}):(0,c.Y)(l.A,{id:"gdjniH",defaultMessage:"Comparing first {count} runs",values:{count:t.length}})};var p={name:"andpxo",styles:"display:flex;overflow:hidden"},h={name:"19mhjsb",styles:"overflow:hidden;flex:1;flex-shrink:1"},m={name:"72wqca",styles:"margin-bottom:0;overflow:hidden;white-space:nowrap;text-overflow:ellipsis"},v={name:"1989ovb",styles:"vertical-align:middle"};const g=e=>{let{title:t,subtitle:n,onDelete:s,onEdit:d,children:u,uuid:g,dragGroupKey:f,tooltip:x="",onReorderWith:C=(()=>{}),canMoveDown:M,canMoveUp:Y,onMoveDown:A,onMoveUp:b,additionalMenuContent:D,toggleFullScreenChart:w,toggles:R,supportedDownloadFormats:S=[],onClickDownload:I,isRefreshing:k=!1}=e;const{theme:E}=(0,r.u)(),{dragHandleRef:F,dragPreviewRef:T,dropTargetRef:K,isDraggingOtherGroup:L,isOver:_}=(0,a.S)({dragGroupKey:f,dragKey:g||"",onDrop:C,disabled:!1});return(0,c.FD)("div",{css:(0,i.AH)({height:360,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:E.colors.backgroundPrimary,padding:12,paddingBottom:E.spacing.sm,border:`1px solid ${E.colors.border}`,borderRadius:E.general.borderRadiusBase,transition:"opacity 0.12s",position:"relative"},""),style:{opacity:L?.1:_?.5:1},"data-testid":"experiment-view-compare-runs-card",ref:e=>{null===T||void 0===T||T(e),null===K||void 0===K||K(e)},children:[(0,c.FD)("div",{css:p,children:[(0,c.Y)("div",{ref:F,"data-testid":"experiment-view-compare-runs-card-drag-handle",css:(0,i.AH)({marginTop:E.spacing.xs,marginRight:E.spacing.sm,cursor:"grab"},""),children:(0,c.Y)(o.WP0,{})}),(0,c.FD)("div",{css:h,children:[(0,c.Y)(r.T.Title,{title:String(t),level:4,css:m,children:t}),n&&(0,c.Y)("span",{css:y.subtitle(E),children:n}),x&&(0,c.Y)(o.ID_,{css:v,title:x})]}),k&&(0,c.Y)("div",{css:(0,i.AH)({width:E.general.heightSm,height:E.general.heightSm,display:"flex",alignItems:"center",justifyContent:"center"},""),children:(0,c.Y)(r.S,{})}),R&&(0,c.Y)("div",{css:(0,i.AH)({display:"flex",padding:`0px ${E.spacing.lg}px`,gap:E.spacing.md,alignItems:"flex-start"},""),children:R.map((e=>(0,c.Y)(o.dOG,{checked:e.currentToggle,onChange:e.setToggle,label:e.toggleLabel},e.toggleLabel)))}),(0,c.Y)(r.B,{componentId:"fullscreen_button_chartcard",icon:(0,c.Y)(o.P7m,{}),onClick:w,disabled:!w}),(0,c.FD)(o.rId.Root,{modal:!1,children:[(0,c.Y)(o.rId.Trigger,{asChild:!0,children:(0,c.Y)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_cards_chartcard.common.tsx_158",type:"tertiary",icon:(0,c.Y)(o.ssM,{}),"data-testid":"experiment-view-compare-runs-card-menu"})}),(0,c.FD)(o.rId.Content,{align:"end",minWidth:100,children:[(0,c.Y)(o.rId.Item,{onClick:d,"data-testid":"experiment-view-compare-runs-card-edit",children:"Configure"}),(0,c.Y)(o.rId.Item,{onClick:s,"data-testid":"experiment-view-compare-runs-card-delete",children:"Delete"}),S.length>0&&I&&(0,c.FD)(c.FK,{children:[(0,c.Y)(o.rId.Separator,{}),S.includes("csv")&&(0,c.Y)(o.rId.Item,{onClick:()=>I("csv"),children:(0,c.Y)(l.A,{id:"5YOBk/",defaultMessage:"Export as CSV"})}),S.includes("svg")&&(0,c.Y)(o.rId.Item,{onClick:()=>I("svg"),children:(0,c.Y)(l.A,{id:"LiW/yM",defaultMessage:"Download as SVG"})}),S.includes("png")&&(0,c.Y)(o.rId.Item,{onClick:()=>I("png"),children:(0,c.Y)(l.A,{id:"s5ygFF",defaultMessage:"Download as PNG"})})]}),(0,c.Y)(o.rId.Separator,{}),(0,c.Y)(o.rId.Item,{disabled:!Y,onClick:b,"data-testid":"experiment-view-compare-runs-move-up",children:(0,c.Y)(l.A,{id:"IAyAgH",defaultMessage:"Move up"})}),(0,c.Y)(o.rId.Item,{disabled:!M,onClick:A,"data-testid":"experiment-view-compare-runs-move-down",children:(0,c.Y)(l.A,{id:"Z6kodo",defaultMessage:"Move down"})}),D]})]})]}),u]})},y={chartEntry:e=>({height:360,overflow:"hidden",display:"grid",gridTemplateRows:"auto 1fr",backgroundColor:e.colors.backgroundPrimary,padding:e.spacing.md,border:`1px solid ${e.colors.border}`,borderRadius:e.general.borderRadiusBase}),chartComponentWrapper:()=>({overflow:"hidden"}),subtitle:e=>({color:e.colors.textSecondary,fontSize:11,marginRight:4,verticalAlign:"middle"})}},59264:function(e,t,n){n.d(t,{J:function(){return p},X:function(){return h}});var i=n(31014),r=n(65243),o=n(75627),a=n(92206),s=n(91144),l=n(6922),c=n(50684),d=n(21616),u=n(50111);const p={t:24,b:48,r:0,l:4,pad:0},h=e=>{let{config:t,chartRunData:n,onDelete:h,onEdit:v,onReorderWith:g,canMoveDown:y,canMoveUp:f,onMoveDown:x,onMoveUp:C,fullScreen:M,setFullScreenChart:Y}=e;const A=(0,i.useMemo)((()=>(0,s.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),{setTooltip:b,resetTooltip:D,selectedRunUuid:w}=(0,o.uN)(t),{elementRef:R,isInViewport:S}=(0,a.v)(),[I,k]=(0,c.H)(),E=(0,u.Y)("div",{css:[m.barChartCardWrapper,{height:M?"100%":void 0},""],ref:R,children:S?(0,u.Y)(r.u,{runsData:A,metricKey:t.metricKey,displayRunNames:!1,displayMetricKey:!1,useDefaultHoverBox:!1,margin:p,onHover:b,onUnhover:D,selectedRunUuid:w,onSetDownloadHandler:k}):null});return M?E:(0,u.Y)(l.Ox,{onEdit:v,onDelete:h,title:t.metricKey,subtitle:(0,u.Y)(l.xC,{runsOrGroups:A}),uuid:t.uuid,dragGroupKey:l.cN.GENERAL_AREA,onReorderWith:g,canMoveDown:y,canMoveUp:f,onMoveDown:x,onMoveUp:C,toggleFullScreenChart:()=>{null===Y||void 0===Y||Y({config:t,title:t.metricKey,subtitle:(0,u.Y)(l.xC,{runsOrGroups:n})})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:e=>{if("csv"!==e&&"csv-full"!==e)null===I||void 0===I||I(e,t.metricKey);else{const e=[...A].reverse();(0,d.LL)(e,[t.metricKey],[],t.metricKey)}},children:E})},m={barChartCardWrapper:{overflow:"hidden"}}},12359:function(e,t,n){n.d(t,{i:function(){return ae}});var i=n(31014),r=n(30152),o=n(91144),a=n(59264),s=n(82589),l=n(7842),c=n(42262),d=n(75627),u=n(6922),p=n(13135),h=n(9133),m=n(92206),v=n(25121),g=n(10811),y=n(84655),f=n(81850),x=n(50684),C=n(21616),M=n(50111);const Y=e=>e.selectedMetricKeys&&0!==e.selectedMetricKeys.length?e.selectedMetricKeys.join(" vs "):e.metricKey,A=e=>{let{config:t,chartRunData:n,onDelete:r,onEdit:a,onReorderWith:A,onDownloadFullMetricHistoryCsv:D,canMoveDown:w,canMoveUp:R,onMoveDown:S,onMoveUp:I,groupBy:k,fullScreen:E,setFullScreenChart:F,autoRefreshEnabled:T}=e;const K=(0,o.dD)(),L=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),_=(0,i.useMemo)((()=>L.some((e=>e.groupParentInfo))),[L]),z=(0,i.useMemo)((()=>{if(_){return[...(0,h.compact)(L.map((e=>e.groupParentInfo))).flatMap((e=>e.runUuids)),...(0,h.compact)(L.filter((e=>!e.groupParentInfo&&!e.belongsToGroup)).map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid})))]}return(0,h.compact)(L.map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid})))}),[L,_]),H=(0,i.useMemo)((()=>{var e;const n=[t.metricKey],i=null!==(e=t.selectedMetricKeys)&&void 0!==e?e:n,r=t.selectedXAxisMetricKey?[t.selectedXAxisMetricKey]:[];return i.concat(r)}),[t.metricKey,t.selectedMetricKeys,t.selectedXAxisMetricKey]),{setTooltip:N,resetTooltip:U,destroyTooltip:P,selectedRunUuid:B}=(0,d.uN)(t,K?d.QS.MultipleTracesWithScanline:d.QS.Simple),{elementRef:O,isInViewport:W}=(0,m.v)(),{aggregateFunction:G}=k||{},j=(0,g.d4)((e=>(0,h.pick)(e.entities.sampledMetricsByRunUuid,z)),g.bN),{range:$,setRange:V,setOffsetTimestamp:X,stepRange:Z}=(0,y.E)(t.xAxisKey,t.metricKey,j,z,t.xAxisKey===l.fj.STEP?t.xAxisScaleType:"linear"),Q=(0,i.useRef)(void 0),{resultsByRunUuid:q,isLoading:J,isRefreshing:ee}=(0,p.S)({runUuids:z,metricKeys:H,enabled:W,maxResults:320,range:Z,autoRefreshEnabled:T});(0,i.useEffect)((()=>{P()}),[P,J]);const te=(0,i.useMemo)((()=>L.map((e=>{const t=H.reduce(((t,n)=>{var i,r;const o=null===(i=q[e.uuid])||void 0===i||null===(r=i[n])||void 0===r?void 0:r.metricsHistory;return o&&(t[n]=o),t}),{});return{...e,metricsHistory:t}}))),[H,q,L]),ne=(0,f.B)({enabled:_,ungroupedRunsData:te,metricKeys:H,sampledDataResultsByRunUuid:q,aggregateFunction:G,selectedXAxisMetricKey:t.xAxisKey===l.fj.METRIC?t.selectedXAxisMetricKey:void 0}),ie=_?ne:te,[re,oe]=(0,x.H)(),ae=(0,M.Y)("div",{css:[b.lineChartCardWrapper,{height:E?"100%":void 0},""],ref:O,children:W?J?(0,M.Y)(s.PLz,{}):(0,M.Y)(c.h,{runsData:ie,metricKey:t.metricKey,selectedMetricKeys:t.selectedMetricKeys,scaleType:t.scaleType,xAxisKey:t.xAxisKey,xAxisScaleType:t.xAxisScaleType,selectedXAxisMetricKey:t.selectedXAxisMetricKey,lineSmoothness:t.lineSmoothness,useDefaultHoverBox:!1,onHover:N,onUnhover:U,selectedRunUuid:B,onUpdate:e=>{let{layout:n}=e;const{range:i}=n.yaxis||{};if(!(0,h.isEqual)(i,Q.current)&&P(),Q.current=[...i],!n.xaxis)return;const{autorange:r,range:a}=n.xaxis;if(r)V(void 0);else if(!(0,h.isEqual)(a,$)&&!r&&a){const e=(0,h.compact)(L.map((e=>{let{runInfo:t}=e;return null===t||void 0===t?void 0:t.runUuid}))),n=L.flatMap((e=>{var t;let{groupParentInfo:n}=e;return null!==(t=null===n||void 0===n?void 0:n.runUuids)&&void 0!==t?t:[]}));if((0,o.v$)()||t.xAxisKey!==l.fj.TIME_RELATIVE)if(t.xAxisKey===l.fj.TIME_RELATIVE_HOURS){const t=(0,v.CZ)(q,[...e,...n],a,36e5);X([...t])}else X(void 0);else{const t=(0,v.CZ)(q,[...e,...n],a);X([...t])}V([...a])}},xRange:$,yRange:Q.current,fullScreen:E,displayPoints:t.displayPoints,onSetDownloadHandler:oe}):null});return E?ae:(0,M.Y)(u.Ox,{onEdit:a,onDelete:r,title:Y(t),subtitle:(0,M.Y)(u.xC,{runsOrGroups:L}),uuid:t.uuid,dragGroupKey:u.cN.GENERAL_AREA,onReorderWith:A,supportedDownloadFormats:["png","svg","csv","csv-full"],onClickDownload:e=>{var n,i;const r=null!==(n=null===(i=t.selectedMetricKeys)||void 0===i?void 0:i.join("-"))&&void 0!==n?n:t.metricKey;if("csv-full"!==e)"csv"!==e?null===re||void 0===re||re(e,r):(0,C.Fz)(ie,t.selectedMetricKeys||[t.metricKey],r);else{const e=(0,h.compact)(ie.map((e=>{var t;return null===(t=e.runInfo)||void 0===t?void 0:t.runUuid}))),n=(0,h.compact)(ie.filter((e=>{let{groupParentInfo:t}=e;return t})).flatMap((e=>{var t;return null===(t=e.groupParentInfo)||void 0===t?void 0:t.runUuids}))),i=[...e,...n];null===D||void 0===D||D(i,t.selectedMetricKeys||[t.metricKey])}},canMoveDown:w,canMoveUp:R,onMoveDown:S,onMoveUp:I,toggleFullScreenChart:()=>{null===F||void 0===F||F({config:t,title:Y(t),subtitle:(0,M.Y)(u.xC,{runsOrGroups:n})})},isRefreshing:ee,children:ae})},b={lineChartCardWrapper:{overflow:"hidden"}};var D=n(10661);const w=e=>{let{config:t,chartRunData:n,onDelete:r,onEdit:a,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:p,onMoveUp:h,fullScreen:v,setFullScreenChart:g}=e;const y=`${t.xaxis.key} vs. ${t.yaxis.key}`,f=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),{setTooltip:Y,resetTooltip:A,selectedRunUuid:b}=(0,d.uN)(t),{elementRef:w,isInViewport:S}=(0,m.v)(),[I,k]=(0,x.H)(),E=(0,M.Y)("div",{css:[R.scatterChartCardWrapper,{height:v?"100%":void 0},""],ref:w,children:S?(0,M.Y)(D.i,{runsData:f,xAxis:t.xaxis,yAxis:t.yaxis,onHover:Y,onUnhover:A,useDefaultHoverBox:!1,selectedRunUuid:b,onSetDownloadHandler:k}):null});return v?E:(0,M.Y)(u.Ox,{onEdit:a,onDelete:r,title:y,subtitle:(0,M.Y)(u.xC,{runsOrGroups:f}),uuid:t.uuid,dragGroupKey:u.cN.GENERAL_AREA,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:p,onMoveUp:h,toggleFullScreenChart:()=>{null===g||void 0===g||g({config:t,title:y,subtitle:(0,M.Y)(u.xC,{runsOrGroups:n})})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:e=>{const n=[t.xaxis.key,t.yaxis.key].join("-");if("csv"!==e&&"csv-full"!==e)null===I||void 0===I||I(e,n);else{const e=[],i=[];for(const n of["xaxis","yaxis"])"PARAM"===t[n].type?e.push(t[n].key):i.push(t[n].key);(0,C.LL)(f,i,e,n)}},children:E})},R={scatterChartCardWrapper:{overflow:"hidden"}};var S=n(66117);const I=e=>{let{config:t,chartRunData:n,onDelete:r,onEdit:a,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:p,onMoveUp:h,fullScreen:m,setFullScreenChart:v}=e;const g=`${t.xaxis.key} vs. ${t.yaxis.key} vs. ${t.zaxis.key}`,y=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),{setTooltip:f,resetTooltip:Y,selectedRunUuid:A}=(0,d.uN)(t),[b,D]=(0,x.H)(),w=(0,M.Y)("div",{css:[k.contourChartCardWrapper,{height:m?"100%":void 0},""],children:(0,M.Y)(S.a,{runsData:y,xAxis:t.xaxis,yAxis:t.yaxis,zAxis:t.zaxis,useDefaultHoverBox:!1,onHover:f,onUnhover:Y,selectedRunUuid:A,onSetDownloadHandler:D})});return m?w:(0,M.Y)(u.Ox,{onEdit:a,onDelete:r,title:g,subtitle:(0,M.Y)(u.xC,{runsOrGroups:y}),uuid:t.uuid,dragGroupKey:u.cN.GENERAL_AREA,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:p,onMoveUp:h,toggleFullScreenChart:()=>{null===v||void 0===v||v({config:t,title:g,subtitle:(0,M.Y)(u.xC,{runsOrGroups:n})})},supportedDownloadFormats:["png","svg","csv"],onClickDownload:e=>{const n=[t.xaxis.key,t.yaxis.key,t.zaxis.key].join("-");if("csv"!==e&&"csv-full"!==e)null===b||void 0===b||b(e,n);else{const e=[],i=[];for(const n of["xaxis","yaxis","zaxis"])"PARAM"===t[n].type?e.push(t[n].key):i.push(t[n].key);(0,C.LL)(y,i,e,n)}},children:w})},k={contourChartCardWrapper:{overflow:"hidden"}};var E=n(68254),F=n(28232),T=n(21809),K=n(88443),L=n(21879);var _={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},z={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"},H={name:"yz1nei",styles:"margin-top:16px"},N={name:"18uqayh",styles:"margin-bottom:16px"};const U=e=>{let{onEdit:t}=e;return(0,M.Y)("div",{css:_,children:(0,M.FD)("div",{css:z,children:[(0,M.Y)(F.h,{}),(0,M.Y)(E.T.Title,{css:H,color:"secondary",level:3,children:"Compare parameter importance"}),(0,M.Y)(E.T.Text,{css:N,color:"secondary",children:"Use the parallel coordinates chart to compare how various parameters in model affect your model metrics."}),(0,M.Y)(E.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_cards_runscompareparallelchartcard.tsx_51",type:"primary",onClick:t,children:"Configure chart"})]})})};var P={name:"1neqb0a",styles:"display:flex;flex:1;justify-content:center;align-items:center"},B={name:"10zh1lj",styles:"display:flex;flex-direction:column;align-items:center;max-width:360px"},O={name:"1qxt18i",styles:"margin-top:16px;text-align:center"},W={name:"18uqayh",styles:"margin-bottom:16px"};const G=()=>(0,M.Y)("div",{css:P,children:(0,M.FD)("div",{css:B,children:[(0,M.Y)(F.h,{}),(0,M.Y)(E.T.Title,{css:O,color:"secondary",level:3,children:(0,M.Y)(K.A,{id:"glxGz2",defaultMessage:"Parallel coordinates chart does not support aggregated string values."})}),(0,M.Y)(E.T.Text,{css:W,color:"secondary",children:(0,M.Y)(K.A,{id:"QPC4hV",defaultMessage:"Use other parameters or disable run grouping to continue."})})]})}),j=e=>{let{config:t,chartRunData:n,onDelete:r,onEdit:a,onReorderWith:l,canMoveDown:c,canMoveUp:p,onMoveDown:h,onMoveUp:v,groupBy:g,fullScreen:y,setFullScreenChart:f}=e;const x=(0,L.e)(),Y=(0,i.useMemo)((()=>!(0,o.M1)()||null!==t&&void 0!==t&&t.showAllRuns?n:null===n||void 0===n?void 0:n.filter((e=>{let{hidden:t}=e;return!t}))),[n,null===t||void 0===t?void 0:t.showAllRuns]),A=(0,i.useMemo)((()=>{var e;return null===(e=t.selectedParams)||void 0===e?void 0:e.some((e=>null===Y||void 0===Y?void 0:Y.some((t=>{var n;return isNaN(Number(null===(n=t.params[e])||void 0===n?void 0:n.value))}))),[t.selectedParams,Y])}),[t.selectedParams,Y]),b=(0,i.useCallback)((e=>{x((n=>{var i;const r=null===(i=n.compareRunCharts)||void 0===i?void 0:i.map((n=>{if(n.uuid===t.uuid){return{...n,showAllRuns:e}}return n}));return{...n,compareRunCharts:r}}))}),[t.uuid,x]),[D,w]=(0,i.useMemo)((()=>{var e,n;const i=((null===(e=t.selectedParams)||void 0===e?void 0:e.length)||0)+((null===(n=t.selectedMetrics)||void 0===n?void 0:n.length)||0)>=2;return[i,i?(0,T.fM)(Y,t.selectedParams,t.selectedMetrics):[]]}),[t,Y]),{elementRef:R,isInViewport:S}=(0,m.v)(),{setTooltip:I,resetTooltip:k,selectedRunUuid:E,closeContextMenu:F}=(0,d.uN)(t),_=A&&g,z=D&&!_,H=(0,o.M1)()?(0,M.Y)(M.FK,{children:t.showAllRuns?(0,M.Y)(K.A,{id:"oY+vPi",defaultMessage:"Showing all runs"}):(0,M.Y)(K.A,{id:"1hI96w",defaultMessage:"Showing only visible runs"})}):(0,M.FD)(M.FK,{children:["Comparing ",w.length," runs"]}),N=(0,M.Y)(M.FK,{children:D?_?(0,M.Y)(G,{}):w.length?(0,M.Y)("div",{css:[$.parallelChartCardWrapper,{height:y?"100%":void 0},""],ref:R,children:S?(0,M.Y)(T.Ay,{data:w,selectedParams:t.selectedParams,selectedMetrics:t.selectedMetrics,onHover:I,onUnhover:k,axesRotateThreshold:8,selectedRunUuid:E,closeContextMenu:F}):null}):null:(0,M.Y)(U,{onEdit:a})});return y?N:(0,M.Y)(u.Ox,{onEdit:a,onDelete:r,title:"Parallel Coordinates",subtitle:z?H:null,uuid:t.uuid,tooltip:"The Parallel Coordinates Chart now only shows runs with columns that are either numbers or strings. If a column has string entries, the runs corresponding to the 30 most recent unique values will be shown.",dragGroupKey:u.cN.PARALLEL_CHARTS_AREA,onReorderWith:l,canMoveDown:c,canMoveUp:p,onMoveDown:h,onMoveUp:v,toggleFullScreenChart:D&&!_?()=>{null===f||void 0===f||f({config:t,title:"Parallel Coordinates",subtitle:z?H:null})}:void 0,additionalMenuContent:(0,o.M1)()?(0,M.FD)(M.FK,{children:[(0,M.Y)(s.rId.Separator,{}),(0,M.FD)(s.rId.CheckboxItem,{checked:!t.showAllRuns,onClick:()=>b(!1),children:[(0,M.Y)(s.rId.ItemIndicator,{}),(0,M.Y)(K.A,{id:"d8I3cy",defaultMessage:"Show only visible"})]}),(0,M.FD)(s.rId.CheckboxItem,{checked:t.showAllRuns,onClick:()=>b(!0),children:[(0,M.Y)(s.rId.ItemIndicator,{}),(0,M.Y)(K.A,{id:"e7K2T3",defaultMessage:"Show all runs"})]})]}):null,supportedDownloadFormats:["csv"],onClickDownload:e=>{const n=[...t.selectedMetrics,...t.selectedParams].join("-");"csv"===e&&(0,C.LL)(Y,t.selectedMetrics,t.selectedParams,n)},children:N})},$={parallelChartCardWrapper:{display:"flex",overflow:"hidden",cursor:"pointer"}};var V=n(89555),X=n(32677),Z=n(62758),Q=n(88464);var q={name:"1d3w5wq",styles:"width:100%"};const J=e=>{let{config:t,chartRunData:n,onDelete:a,onEdit:s,onReorderWith:l,canMoveDown:c,canMoveUp:d,onMoveDown:p,onMoveUp:h,groupBy:m,fullScreen:v,setFullScreenChart:g}=e;const y=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),f=(0,Z.Ez)(),x=(0,i.useCallback)((()=>{f({...t,showChangeFromBaseline:!t.showChangeFromBaseline})}),[t,f]),C=(0,i.useCallback)((()=>{f({...t,showDifferencesOnly:!t.showDifferencesOnly})}),[t,f]),{formatMessage:Y}=(0,Q.A)(),A=(0,M.Y)("div",{css:(0,V.AH)({display:"flex",overflow:"auto hidden",cursor:"pointer",height:v?"100%":void 0,width:"100%"},""),children:(0,M.Y)("div",{css:q,children:(0,M.Y)(X.I,{previewData:y,groupBy:m,cardConfig:t,setCardConfig:e=>{f(e(t))}})})});let b;return m&&r.Nf.some((e=>t.compareGroups.includes(e)))&&(b=Y({id:"csNr/8",defaultMessage:"Disable grouped runs to compare parameters, tag, or attributes"})),v?A:(0,M.Y)(u.Ox,{onEdit:s,onDelete:a,title:t.chartName,subtitle:(0,M.Y)(u.xC,{runsOrGroups:y}),uuid:t.uuid,dragGroupKey:u.cN.GENERAL_AREA,onReorderWith:l,canMoveDown:c,canMoveUp:d,onMoveDown:p,onMoveUp:h,toggleFullScreenChart:()=>{null===g||void 0===g||g({config:t,title:t.chartName,subtitle:(0,M.Y)(u.xC,{runsOrGroups:n})})},toggles:[{toggleLabel:Y({id:"4tpkvx",defaultMessage:"Show change from baseline"}),currentToggle:t.showChangeFromBaseline,setToggle:x},{toggleLabel:Y({id:"e7GTKi",defaultMessage:"Show differences only"}),currentToggle:t.showDifferencesOnly,setToggle:C}],tooltip:b,children:A})};var ee=n(34389),te=n(99061),ne=n(25866),ie=n(20193);var re={name:"lee4ct",styles:"width:350px"};const oe=e=>{let{config:t,chartRunData:n,onDelete:r,onEdit:a,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:d,onMoveUp:p,groupBy:h,fullScreen:m,setFullScreenChart:v}=e;const{theme:g}=(0,E.u)(),y=(0,i.useRef)(null),[f,x]=(0,i.useState)(0);(0,i.useEffect)((()=>{const e=new ResizeObserver((e=>{x(e[0].contentRect.width)}));return y.current&&e.observe(y.current),()=>{e.disconnect()}}),[y]);const[C,Y]=(0,i.useState)(t),A=(0,Z.Ez)(),b=(0,i.useCallback)((e=>{A({...t,step:e})}),[t,A]),D=1===t.imageKeys.length?t.imageKeys[0]:ne._g,w=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]),{stepMarks:R,maxMark:S,minMark:I}=(0,te._)({data:w,selectedImageKeys:t.imageKeys||[]}),k=Object.keys(R).length;(0,i.useEffect)((()=>{1===k&&C.step!==I&&b(I)}),[I,k,C.step,b]);const F=w.filter((e=>e.tags[ne.Cr])).length>ne.Lf,T=(0,M.FD)("div",{css:(0,V.AH)({display:"flex",flexDirection:"column",height:m?"100%":void 0,width:"100%",overflow:"auto"},""),children:[(0,M.Y)("div",{ref:y,css:(0,V.AH)({cursor:"pointer",height:`calc(100% - ${2*g.spacing.md}px)`,overflow:"auto"},""),children:(0,M.Y)(ee.f,{previewData:w,groupBy:h,cardConfig:C,setCardConfig:e=>{A(e(t))},containerWidth:f})}),(0,M.Y)("div",{css:(0,V.AH)({justifyContent:"center",alignItems:"center",display:"inline-flex",gap:g.spacing.md},""),children:(0,M.Y)("div",{css:re,children:(0,M.Y)(ie.o,{defaultValue:C.step,onChange:e=>{Y((t=>({...t,step:e})))},max:S,min:I,marks:R,step:null,disabled:Object.keys(R).length<=1,onAfterChange:b})})})]});return m?T:(0,M.Y)(u.Ox,{onEdit:a,onDelete:r,title:D,subtitle:F&&`Displaying images from first ${ne.Lf} runs`,uuid:t.uuid,dragGroupKey:u.cN.GENERAL_AREA,onReorderWith:s,canMoveDown:l,canMoveUp:c,onMoveDown:d,onMoveUp:p,toggleFullScreenChart:()=>{null===v||void 0===v||v({config:t,title:D,subtitle:(0,M.Y)(u.xC,{runsOrGroups:n})})},children:T})},ae=e=>{let{cardConfig:t,chartRunData:n,index:s,sectionIndex:l,onStartEditChart:c,onRemoveChart:d,setFullScreenChart:u,groupBy:p,fullScreen:h,canMoveDown:m,canMoveUp:v,onMoveDown:g,onMoveUp:y,onReorderWith:f,autoRefreshEnabled:x,onDownloadFullMetricHistoryCsv:C}=e;const Y={fullScreen:h,key:`${t.uuid}-${s}-${l}`,autoRefreshEnabled:x,groupBy:p,...{onEdit:()=>c(t),onDelete:()=>d(t),setFullScreenChart:u},...{onReorderWith:f,canMoveDown:m,canMoveUp:v,onMoveDown:g,onMoveUp:y}},b=(0,i.useMemo)((()=>(0,o.M1)()?n.filter((e=>{let{hidden:t}=e;return!t})).reverse():n.slice(0,t.runsCountToCompare||10).reverse()),[n,t]);return t.type===r.zL.PARALLEL?(0,M.Y)(j,{config:t,chartRunData:n,...Y}):(0,o.uP)()&&t.type===r.zL.DIFFERENCE?(0,M.Y)(J,{config:t,chartRunData:n,...Y}):(0,o.HW)()&&t.type===r.zL.IMAGE?(0,M.Y)(oe,{config:t,chartRunData:n,...Y}):t.type===r.zL.BAR?(0,M.Y)(a.X,{config:t,chartRunData:b,...Y}):t.type===r.zL.LINE?(0,M.Y)(A,{config:t,chartRunData:b,onDownloadFullMetricHistoryCsv:C,...Y}):t.type===r.zL.SCATTER?(0,M.Y)(w,{config:t,chartRunData:b,...Y}):t.type===r.zL.CONTOUR?(0,M.Y)(I,{config:t,chartRunData:b,...Y}):null}},32677:function(e,t,n){n.d(t,{I:function(){return C}});var i=n(89555),r=n(30152),o=n(31014),a=n(70618),s=n(9856),l=n(68254),c=n(82589),d=n(79432),u=n(88464),p=n(88443),h=n(92103),m=n(50111);const v="headingColumn";var g={name:"4c6dm7",styles:"display:flex;flex-direction:row;justify-content:space-between"},y={name:"ti75j2",styles:"margin:0"},f={name:"4c6dm7",styles:"display:flex;flex-direction:row;justify-content:space-between"},x={name:"1iwgvlm",styles:"flex-shrink:1;flex-grow:1;overflow:hidden"};const C=e=>{let{previewData:t,cardConfig:n,groupBy:C,setCardConfig:M}=e;const{formatMessage:Y}=(0,u.A)(),{theme:A}=(0,l.u)(),{modelMetrics:b,systemMetrics:D,parameters:w,tags:R,attributes:S}=(0,o.useMemo)((()=>(0,h.FI)(t,n,v,C)),[t,n,C]),I=[...n.compareGroups.includes(r.K8.MODEL_METRICS)?b:[],...n.compareGroups.includes(r.K8.SYSTEM_METRICS)?D:[],...n.compareGroups.includes(r.K8.PARAMETERS)?w:[],...n.compareGroups.includes(r.K8.ATTRIBUTES)?S:[],...n.compareGroups.includes(r.K8.TAGS)?R:[]],{baselineColumn:k,nonBaselineColumns:E}=(0,o.useMemo)((()=>{let e=t.find((e=>e.uuid===n.baselineColumnUuid));void 0===e&&t.length>0&&(e=t[0]);const i=t.filter((t=>void 0===e||t.uuid!==e.uuid));return{baselineColumn:e,nonBaselineColumns:i}}),[t,n.baselineColumnUuid]),F=(0,o.useMemo)((()=>{const e=(e,t)=>{const r=t=>t[e.uuid];return t?{id:e.uuid,header:()=>(0,m.Y)("span",{css:g,children:(0,m.FD)("span",{css:(0,i.AH)({display:"inline-flex",gap:A.spacing.sm,alignItems:"center"},""),children:[(0,m.Y)(d.E,{color:e.color}),e.displayName,(0,m.Y)(c.vwO,{css:y,children:(0,m.Y)(p.A,{id:"Mm7PVx",defaultMessage:"baseline"})})]})}),size:200,accessorFn:r,cell:e=>(0,m.Y)("span",{children:(0,h.Ep)(e.getValue())})}:{id:e.uuid,header:()=>(0,m.Y)("span",{css:f,children:(0,m.FD)("span",{css:(0,i.AH)({display:"inline-flex",gap:A.spacing.sm,alignItems:"center"},""),children:[(0,m.Y)(d.E,{color:e.color}),e.displayName]})}),size:200,accessorFn:t=>({text:t[e.uuid],difference:k?(0,h.fQ)(t[e.uuid],t[k.uuid]):null}),cell:e=>(0,m.FD)("span",{css:(0,i.AH)({display:"inline-flex",gap:A.spacing.md,verticalAlign:"middle"},""),children:[(0,m.Y)(l.T.Text,{children:(0,h.Ep)(e.getValue().text)}),k&&n.showChangeFromBaseline&&e.getValue().difference&&("-"===e.getValue().difference[0]?(0,m.FD)("div",{css:(0,i.AH)({display:"inline-flex",gap:A.spacing.xs},""),children:[(0,m.Y)(l.T.Paragraph,{color:"error",children:e.getValue().difference}),(0,m.Y)(c.ZLN,{color:"danger"})]}):(0,m.FD)("div",{css:(0,i.AH)({display:"inline-flex",gap:A.spacing.xs},""),children:[(0,m.Y)(l.T.Paragraph,{color:"success",children:e.getValue().difference}),(0,m.Y)(c.Kpk,{color:"success"})]}))]})}};return[{id:v,header:Y({id:"c5AQYh",defaultMessage:"Compare by"}),accessorKey:v,size:200},...k?[e(k,!0)]:[],...E.map((t=>e(t,!1)))]}),[A.spacing,Y,k,E,n.showChangeFromBaseline]),T=(0,a.N4)({data:I,columns:F,enableColumnResizing:!0,columnResizeMode:"onChange",getCoreRowModel:(0,s.HT)()}),K=(0,o.useCallback)((e=>{M&&M((t=>({...t,baselineColumnUuid:e})))}),[M]);return 0===t.length?null:(0,m.FD)(c.XIK,{style:{width:T.getTotalSize()},scrollable:!0,children:[T.getHeaderGroups().map((e=>(0,m.Y)(c.Hjg,{isHeader:!0,children:e.headers.map(((e,t)=>(0,m.Y)(c.A0N,{style:{maxWidth:e.column.getSize()},resizable:e.column.getCanResize(),resizeHandler:e.getResizeHandler(),children:(0,m.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"row",gap:A.spacing.xs,alignItems:"center"},""),children:[(0,m.Y)("div",{css:x,children:(0,a.Kv)(e.column.columnDef.header,e.getContext())}),0!==t&&M&&(0,m.Y)("div",{children:(0,m.FD)(c.rId.Root,{children:[(0,m.Y)(c.rId.Trigger,{asChild:!0,children:(0,m.Y)(l.B,{componentId:"set_as_baseline_button",icon:(0,m.Y)(c.ssM,{})})}),(0,m.Y)(c.rId.Content,{children:(0,m.Y)(c.rId.Item,{onClick:()=>K(e.id),children:(0,m.Y)(p.A,{id:"s0233x",defaultMessage:"Set as baseline"})})})]})})]})},e.id)))},e.id))),T.getRowModel().rows.map((e=>(0,m.Y)(c.Hjg,{children:e.getAllCells().map((e=>(0,m.Y)(c.nA6,{style:{maxWidth:e.column.getSize()},multiline:!0,children:(0,a.Kv)(e.column.columnDef.cell,e.getContext())},e.id)))},e.id)))]})}},54421:function(e,t,n){n.d(t,{Rn:function(){return m},TV:function(){return h},hZ:function(){return u},mQ:function(){return f},pG:function(){return p}});var i=n(89555),r=n(82589),o=n(68254),a=n(88443),s=n(77484),l=n(31014),c=n(8875),d=n(50111);const u=10,p=(e,t)=>{const n=Math.floor(t/120);return e<n?Math.min(t/e-u,225):t/n-u},h=e=>{let{imageUrl:t,compressedImageUrl:n,imageSize:a,maxImageSize:s}=e;const[u,p]=(0,l.useState)(!1),{theme:h}=(0,o.u)();return(0,d.Y)("div",{css:(0,i.AH)({width:a,height:a||"100%"},""),children:(0,d.Y)("div",{css:(0,i.AH)({height:a||"100%"},""),children:void 0===n?(0,d.Y)(r.xUE,{label:"Loading...",css:(0,i.AH)({height:a,width:a},"")}):(0,d.Y)("div",{css:(0,i.AH)({display:"flex",alignItems:"center",justifyContent:"center",width:a||"100%",height:a||"100%",maxWidth:s,maxHeight:s,backgroundColor:h.colors.backgroundSecondary,"& .ant-image":{height:"100%",display:"flex",alignItems:"center"}},""),children:(0,d.Y)(c.b,{visible:u,onVisibleChange:p,children:(0,d.Y)(c._,{src:n,preview:{src:t},style:{maxWidth:s||"100%",maxHeight:s||"100%"}})})})})})},m=e=>{let{metadataByStep:t,imageSize:n,step:l,runUuid:c}=e;const{theme:u}=(0,o.u)();return void 0===t[l]?(0,d.FD)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",width:n,height:n,backgroundColor:u.colors.backgroundSecondary,padding:u.spacing.md},""),children:[(0,d.Y)(r.xfq,{}),(0,d.Y)(a.A,{id:"0XZ2zu",defaultMessage:"No image logged at this step"})]}):(0,d.Y)(h,{imageUrl:(0,s.To)(t[l].filepath,c),compressedImageUrl:(0,s.To)(t[l].compressed_filepath,c),imageSize:n})};var v={name:"1pf7ok1",styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;width:100%;font-size:16px"},g={name:"yz1nei",styles:"margin-top:16px"},y={name:"18uqayh",styles:"margin-bottom:16px"};const f=()=>(0,d.FD)("div",{css:v,children:[(0,d.Y)(o.T.Title,{css:g,color:"secondary",level:3,children:"Compare logged images"}),(0,d.Y)(o.T.Text,{css:y,color:"secondary",children:"Use the image grid chart to compare logged images across runs."})]})},34389:function(e,t,n){n.d(t,{f:function(){return g}});var i=n(89555),r=n(68254),o=n(82589),a=n(79432),s=n(31014),l=n(54421),c=n(50111);var d={name:"cxqpnm",styles:"display:flex;justify-content:flex-start;flex-wrap:wrap"};const u=e=>{let{previewData:t,cardConfig:n,width:u}=e;const{theme:p}=(0,r.u)(),h=t.filter((e=>{const t=e.images[n.imageKeys[0]];return t&&Object.keys(t).length>0})),m=(0,s.useMemo)((()=>(0,l.pG)(h.length,u)),[h,u]);return 0===h.length?(0,c.Y)(l.mQ,{}):(0,c.Y)("div",{css:d,children:h.map((e=>{const t=Object.values(e.images[n.imageKeys[0]]).reduce(((e,t)=>(void 0!==t.step&&(e[t.step]=t),e)),{});return(0,c.FD)("div",{css:(0,i.AH)({padding:l.hZ/2+"px"},""),children:[(0,c.Y)(o.m_M,{title:e.displayName,children:(0,c.FD)("div",{css:(0,i.AH)({width:m,height:p.typography.lineHeightMd,overflow:"hidden",whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",gap:p.spacing.sm},""),children:[(0,c.Y)(a.E,{color:e.color}),e.displayName]})}),(0,c.Y)(l.Rn,{step:n.step,metadataByStep:t,imageSize:m,runUuid:e.uuid},e.uuid)]},e.uuid)}))})};var p=n(88443);var h={name:"1kzq5ms",styles:"height:100%;width:100%"};const m=e=>{let{previewData:t,cardConfig:n,width:d}=e;const{theme:u}=(0,r.u)(),m=t.filter((e=>0!==Object.keys(e.images).length)),v=(0,s.useMemo)((()=>(0,l.pG)(m.length,d)),[m,d]);return 0===m.length?(0,c.Y)(l.mQ,{}):(0,c.Y)("div",{css:h,children:(0,c.FD)(o.XIK,{grid:!0,scrollable:!0,children:[(0,c.FD)(o.Hjg,{isHeader:!0,children:[(0,c.Y)(o.A0N,{css:(0,i.AH)({minWidth:v+u.spacing.md},""),children:(0,c.Y)(p.A,{id:"IdxSB8",defaultMessage:"images"})}),m.map((e=>(0,c.Y)(o.A0N,{css:(0,i.AH)({minWidth:v+u.spacing.md},""),children:(0,c.Y)(o.m_M,{title:e.displayName,children:(0,c.FD)("div",{css:(0,i.AH)({height:u.typography.lineHeightMd,whiteSpace:"nowrap",display:"inline-flex",alignItems:"center",margin:"auto",gap:u.spacing.sm},""),children:[(0,c.Y)(a.E,{color:e.color}),e.displayName]})})},e.uuid)))]}),n.imageKeys.map((e=>(0,c.FD)(o.Hjg,{children:[(0,c.Y)(o.nA6,{css:(0,i.AH)({minWidth:v+u.spacing.md},""),children:(0,c.Y)("div",{style:{whiteSpace:"normal"},children:e})}),m.map((t=>{if(t.images[e]&&Object.keys(t.images[e]).length>0){const r=Object.values(t.images[e]).reduce(((e,t)=>(void 0!==t.step&&(e[t.step]=t),e)),{});return(0,c.Y)(o.nA6,{css:(0,i.AH)({minWidth:v+u.spacing.md},""),children:(0,c.Y)(l.Rn,{metadataByStep:r,imageSize:v,step:n.step,runUuid:t.uuid})},t.uuid)}return(0,c.Y)(o.nA6,{css:(0,i.AH)({minWidth:v+u.spacing.md},"")},t.uuid)}))]},e)))]})})};var v=n(25866);const g=e=>{let{previewData:t,cardConfig:n,groupBy:i,setCardConfig:r,containerWidth:o}=e;const a=t.filter((e=>e.tags[v.Cr])).slice(-v.Lf);return 1===n.imageKeys.length?(0,c.Y)(u,{previewData:a,cardConfig:n,width:o}):n.imageKeys.length>1?(0,c.Y)(m,{previewData:a,cardConfig:n,width:o}):null}},21809:function(e,t,n){n.d(t,{fM:function(){return l}});var i=n(82589),r=n(31014),o=n(50111);const a=r.lazy((()=>Promise.all([n.e(8336),n.e(8712),n.e(4762)]).then(n.bind(n,70495)))),s=30;function l(e,t,n){return function(e){if(0===e.length)return e;const t=Object.keys(e[0]);t.shift();let n=e;return t.forEach((e=>{const t=n.filter((t=>!isNaN(Number(t[e]))&&null!==t[e]));if(t.length>=n.length/2)return void(n=t);const i=new Set,r=[];for(const o of n){const t=o[e];i.size===s&&i.has(String(t))?r.push(o):i.size<s&&isNaN(Number(t))&&(i.add(String(t)),r.push(o))}n=r})),n}(e.map((e=>{const i={uuid:e.uuid};function r(e,t){if(Array.isArray(e))for(const n of e)i[n]=n in t?t[n].value:null}return r(t,e.params),r(n,e.metrics),i})))}t.Ay=e=>(0,o.Y)(r.Suspense,{fallback:(0,o.Y)(i.PLz,{}),children:(0,o.Y)(a,{...e})})},57127:function(e,t,n){n.d(t,{J:function(){return K}});var i=n(89555),r=n(82589),o=n(30152),a=n(18415),s=n(68254),l=n(77198),c=n(6211),d=n(73549),u=n(43270),p=n(74035),h=n(32582),m=n(99790),v=n(91144),g=n(88443),y=n(50111);const f=e=>{let{onAddChart:t,supportedChartTypes:n}=e;const i=e=>!n||n.includes(e);return(0,y.FD)(r.rId.Root,{modal:!1,children:[(0,y.Y)(r.rId.Trigger,{asChild:!0,children:(0,y.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_runscompareaddchartmenu.tsx_19",css:x.addChartButton,icon:(0,y.Y)(r.c11,{}),"data-testid":"experiment-view-compare-runs-add-chart",children:(0,y.Y)(g.A,{id:"9vwPnB",defaultMessage:"Add chart"})})}),(0,y.FD)(r.rId.Content,{align:"end",children:[i(o.zL.BAR)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.BAR),"data-testid":"experiment-view-compare-runs-chart-type-bar",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(l.h,{})}),(0,y.Y)(g.A,{id:"gdK07H",defaultMessage:"Bar chart"})]}),i(o.zL.LINE)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.LINE),"data-testid":"experiment-view-compare-runs-chart-type-line",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(d.h,{})}),(0,y.Y)(g.A,{id:"CyTYL6",defaultMessage:"Line chart"})]}),i(o.zL.PARALLEL)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.PARALLEL),"data-testid":"experiment-view-compare-runs-chart-type-parallel",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(u.h,{})}),(0,y.Y)(g.A,{id:"FC9mcS",defaultMessage:"Parallel coordinates"})]}),i(o.zL.SCATTER)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.SCATTER),"data-testid":"experiment-view-compare-runs-chart-type-scatter",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(p.h,{})}),(0,y.Y)(g.A,{id:"Q0i5xG",defaultMessage:"Scatter chart"})]}),i(o.zL.CONTOUR)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.CONTOUR),"data-testid":"experiment-view-compare-runs-chart-type-contour",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(c.h,{})}),(0,y.Y)(g.A,{id:"6XfILf",defaultMessage:"Contour chart"})]}),(0,v.uP)()&&i(o.zL.DIFFERENCE)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.DIFFERENCE),"data-testid":"experiment-view-compare-runs-chart-type-difference",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(h.h,{})}),(0,y.Y)(g.A,{id:"G5mMJI",defaultMessage:"Difference view"})]}),(0,v.HW)()&&i(o.zL.IMAGE)&&(0,y.FD)(r.rId.Item,{onClick:()=>t(o.zL.IMAGE),"data-testid":"experiment-view-compare-runs-chart-type-image",children:[(0,y.Y)(r.rId.IconWrapper,{css:x.iconWrapper,children:(0,y.Y)(m.h,{})}),(0,y.Y)(g.A,{id:"5m2VPy",defaultMessage:"Image grid"})]})]})]})},x={addChartButton:e=>({backgroundColor:`${e.colors.backgroundPrimary} !important`}),iconWrapper:e=>({width:e.general.iconSize+e.spacing.xs})};var C=n(31014),M=n(90765),Y=n(45959),A=n.n(Y);var b={name:"5s5off",styles:"position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);cursor:grab"};const D=e=>{let{index:t,section:n,sectionChartsLength:o,addNewChartCard:l,onDeleteSection:c,onAddSection:d,editSection:u,onSetEditSection:p,onSetSectionName:h,onSectionReorder:m,isExpanded:v,supportedChartTypes:x}=e;const{theme:Y}=(0,s.u)(),[D,w]=(0,C.useState)(n.name),[R,S]=(0,C.useState)(!1),I=(0,C.useRef)(null),k=(0,C.useRef)(null),[E,F]=(0,C.useState)(0),[T,K]=(0,C.useState)(!1),L=e=>{e.stopPropagation()},_=e=>{e.stopPropagation(),D.trim()?(p(-1),h(n.uuid,D)):e.preventDefault()};(0,C.useEffect)((()=>{if(!I.current)return;const e=new ResizeObserver((e=>{let[t]=e;F(t.contentRect.width)}));return e.observe(I.current),()=>e.disconnect()}),[]);const z=u===t,[H,N]=(0,C.useState)(!1),{dragHandleRef:U,dragPreviewRef:P,dropTargetRef:B,isOver:O,isDragging:W}=(0,M.S)({dragGroupKey:"sections",dragKey:n.uuid,onDrop:m});return(0,y.Y)(y.FK,{children:(0,y.FD)("div",{role:"figure",css:(0,i.AH)({display:"flex",alignItems:"center",width:"100%",padding:`${Y.spacing.xs}px 0px`,height:`${a.U}px`,".section-element-visibility-on-hover":{visibility:H?"visible":"hidden",opacity:H?1:0},".section-element-visibility-on-hover-and-not-drag":{visibility:H?"visible":"hidden",opacity:H?R?0:1:0},".section-element-hidden-on-edit":{display:z?"none":"inherit"}},""),onMouseMove:()=>N(!0),onMouseLeave:()=>N(!1),ref:e=>{null===B||void 0===B||B(e),null===P||void 0===P||P(e)},"data-testid":"experiment-view-compare-runs-section-header",children:[O&&(0,y.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,backgroundColor:Y.isDarkMode?Y.colors.blue800:Y.colors.blue100,border:`2px dashed ${Y.colors.blue400}`,opacity:.75},"")}),(0,y.FD)("div",{style:{maxWidth:"40%",display:"flex",alignItems:"center"},children:[(0,y.Y)("div",{ref:I,style:{position:z?"absolute":"relative",visibility:z?"hidden":"visible",textOverflow:z?void 0:"ellipsis",maxWidth:"100%",overflow:"clip",paddingLeft:7,whiteSpace:"pre"},children:D}),u===t&&(0,y.Y)(s.f,{autoFocus:!0,onClick:L,onMouseDown:L,onMouseUp:L,onDoubleClick:L,onChange:e=>{w(e.target.value)},value:D,css:(0,i.AH)({color:Y.colors.textPrimary,fontWeight:600,padding:"1px 6px 1px 6px",background:Y.colors.backgroundSecondary,minWidth:"50px",width:E+14,position:"relative",lineHeight:Y.typography.lineHeightBase,maxWidth:"100%"},""),onKeyDown:e=>{"Escape"===e.key&&(e.stopPropagation(),p(-1),w(n.name))},onPressEnter:_,dangerouslyAppendEmotionCSS:{"&&":{minHeight:"20px !important"}},onBlur:e=>{e.relatedTarget!==k.current&&(p(-1),h(n.uuid,D))}}),(0,y.Y)("div",{css:(0,i.AH)({padding:Y.spacing.xs,position:"relative"},""),style:{visibility:z?"hidden":"visible",display:z?"none":"inherit"},children:`(${o})`}),(0,y.Y)("div",{className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:(0,y.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_246",onClick:e=>{e.stopPropagation(),p(t)},"aria-label":"Icon label",icon:(0,y.Y)(r.R2l,{})})})]}),u===t&&(0,y.Y)("div",{style:{padding:`0 ${Y.spacing.xs}px`},children:(0,y.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_251",onClick:_,icon:(0,y.Y)(s.e,{}),ref:k})}),(0,y.Y)("div",{className:"section-element-visibility-on-hover section-element-hidden-on-edit",css:b,children:(0,y.Y)(r.WP0,{rotate:90,style:{color:Y.colors.textSecondary},ref:U,onMouseDown:()=>S(!0),onMouseLeave:()=>{S(!1)},"data-testid":"experiment-view-compare-runs-section-header-drag-handle"})}),(0,y.FD)("div",{style:{position:"absolute",top:"50%",right:"0",transform:"translate(0, -50%)",display:"flex",alignItems:"center"},children:[(0,y.FD)("div",{onClick:L,onMouseDown:L,onMouseUp:L,onDoubleClick:L,className:"section-element-visibility-on-hover-and-not-drag section-element-hidden-on-edit",children:[(0,y.FD)(r.rId.Root,{modal:!1,children:[(0,y.Y)(r.rId.Trigger,{asChild:!0,children:(0,y.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionheader.tsx_288",icon:(0,y.Y)(r.ssM,{})})}),(0,y.FD)(r.rId.Content,{children:[(0,y.Y)(r.rId.Item,{onClick:()=>{d(n.uuid,!0)},children:(0,y.Y)(g.A,{id:"CevPsF",defaultMessage:"Add section above"})}),(0,y.Y)(r.rId.Item,{onClick:()=>{d(n.uuid,!1)},children:(0,y.Y)(g.A,{id:"aaKoNq",defaultMessage:"Add section below"})}),(0,y.Y)(r.rId.Item,{onClick:()=>{K(!0)},children:(0,y.Y)(g.A,{id:"8XrJnT",defaultMessage:"Delete section"})})]})]}),(0,y.Y)(r.ZFm,{visible:T,onOk:()=>{c(n.uuid)},onCancel:()=>{K(!1)},title:"Delete section",children:(0,y.Y)(g.A,{id:"TPspzA",defaultMessage:"Deleting the section will permanently remove it and the charts it contains. This cannot be undone."})})]}),(0,y.Y)("div",{onClick:L,onMouseDown:L,onMouseUp:L,onDoubleClick:L,className:A()({"section-element-visibility-on-hover-and-not-drag":!v},"section-element-hidden-on-edit"),css:(0,i.AH)({alignSelf:"flex-end",marginLeft:Y.spacing.xs},""),children:(0,y.Y)(f,{onAddChart:l(n.uuid),supportedChartTypes:x})})]})]})})};var w=n(915),R=n(6922),S=n(12359);const I=e=>{let{sectionId:t,chartRunData:n,cardsConfig:a,isMetricHistoryLoading:l,onRemoveChart:c,onStartEditChart:d,onReorderCharts:u,onInsertCharts:p,groupBy:h,sectionIndex:m,setFullScreenChart:v,autoRefreshEnabled:f}=e;const{theme:x}=(0,s.u)(),[Y,A,b,D]=(0,C.useMemo)((()=>Array.isArray(a)?[a.filter((e=>e.type===o.zL.PARALLEL)),a.filter((e=>e.type===o.zL.DIFFERENCE)),a.filter((e=>e.type===o.zL.IMAGE)),a.filter((e=>e.type!==o.zL.PARALLEL&&e.type!==o.zL.DIFFERENCE&&e.type!==o.zL.IMAGE))]:[[],[],[],[]]),[a]),I=(0,C.useMemo)((()=>(0,w.A)({maxColumns:3,gap:x.spacing.md,additionalBreakpoints:[{breakpointWidth:2160,minColumnWidthForBreakpoint:600}]})),[x]),{dropTargetRef:k,isOver:E}=(0,M.S)({dragGroupKey:R.cN.GENERAL_AREA,dragKey:t,onDrop:p}),{dropTargetRef:F,isOver:T}=(0,M.S)({dragGroupKey:R.cN.PARALLEL_CHARTS_AREA,dragKey:t,onDrop:p}),K=!Y.length&&!A.length&&!b.length&&!D.length;return(0,y.FD)("div",{role:"figure",ref:e=>{null===k||void 0===k||k(e),null===F||void 0===F||F(e)},css:(0,i.AH)({padding:0===a.length?x.spacing.lg:0,position:"relative",overflow:"hidden"},""),children:[(E||T)&&0===a.length&&(0,y.Y)("div",{css:(0,i.AH)({position:"absolute",inset:0,backgroundColor:x.isDarkMode?x.colors.blue800:x.colors.blue100,border:`2px dashed ${x.colors.blue400}`,opacity:.75},"")}),K&&(0,y.Y)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,y.Y)(r.SvL,{title:(0,y.Y)(g.A,{id:"9TOU1G",defaultMessage:"No charts in this section"}),description:(0,y.Y)(g.A,{id:"9wWapn",defaultMessage:"Click 'Add chart' or drag and drop to add charts here."})})}),[A,Y,b].map(((e,t)=>e.length?(0,y.Y)("div",{css:(0,i.AH)({display:"flex",flexDirection:"column",gap:x.spacing.md,marginBottom:x.spacing.md},""),children:e.map(((t,i)=>{const r={onReorderWith:u,canMoveDown:i<e.length-1,canMoveUp:i>0,onMoveDown:()=>{var n;return u(t.uuid||"",(null===(n=e[i+1])||void 0===n?void 0:n.uuid)||"")},onMoveUp:()=>{var n;return u(t.uuid||"",(null===(n=e[i-1])||void 0===n?void 0:n.uuid)||"")}};return(0,y.Y)(S.i,{cardConfig:t,chartRunData:n,onStartEditChart:d,onRemoveChart:c,setFullScreenChart:v,onReorderCharts:u,index:i,sectionIndex:m,groupBy:h,autoRefreshEnabled:f,...r},`${t.uuid}-${i}-${m}`)}))},`chart-cards-${t}`):null)),(0,y.Y)("div",{css:I,children:D.map(((e,t)=>{const i={onReorderWith:u,canMoveDown:t<D.length-1,canMoveUp:t>0,onMoveDown:()=>{var n;return u(e.uuid||"",(null===(n=D[t+1])||void 0===n?void 0:n.uuid)||"")},onMoveUp:()=>{var n;return u(e.uuid||"",(null===(n=D[t-1])||void 0===n?void 0:n.uuid)||"")}};return(0,y.Y)(S.i,{cardConfig:e,chartRunData:n,onStartEditChart:d,onRemoveChart:c,setFullScreenChart:v,onReorderCharts:u,index:t,sectionIndex:m,groupBy:h,autoRefreshEnabled:f,...i},`${e.uuid}-${t}-${m}`)}))})]})},k=e=>{let{sectionId:t,sectionCharts:n,reorderCharts:i,insertCharts:r,isMetricHistoryLoading:o,chartData:a,startEditChart:s,removeChart:l,groupBy:c,sectionIndex:d,setFullScreenChart:u,autoRefreshEnabled:p}=e;return(0,y.Y)(I,{sectionId:t,chartRunData:a,cardsConfig:n,isMetricHistoryLoading:o,onRemoveChart:l,onStartEditChart:s,onReorderCharts:i,onInsertCharts:r,groupBy:c,sectionIndex:d,setFullScreenChart:u,autoRefreshEnabled:p})};var E=n(7204),F=n(62758),T=n(9133);const K=e=>{let{compareRunSections:t,compareRunCharts:n,reorderCharts:l,insertCharts:c,chartData:d,isMetricHistoryLoading:u=!1,autoRefreshEnabled:p=!1,startEditChart:h,removeChart:m,addNewChartCard:v,search:f,groupBy:x,supportedChartTypes:M,setFullScreenChart:Y=(()=>{})}=e;const A=(0,F.g_)(),[b,w]=(0,C.useState)(-1),{theme:R}=(0,s.u)(),S=(0,C.useMemo)((()=>(t||[]).flatMap((e=>e.display?[e.uuid]:[]))),[t]),I=e=>{A((t=>{const n=(t.compareRunCharts||[]).filter((t=>t.isGenerated||t.metricSectionId!==e)).map((t=>t.isGenerated&&t.metricSectionId===e?{...t,deleted:!0}:t)),i=(t.compareRunSections||[]).slice().filter((t=>t.uuid!==e));return{...t,compareRunCharts:n,compareRunSections:i,isAccordionReordered:!0}}))},K=(e,t)=>{let n=-1;return A((i=>{const r=[...i.compareRunSections||[]];n=r.findIndex((t=>t.uuid===e));const o={name:"",uuid:(0,E.yk)(),display:!1,isReordered:!1};return n<0?r.push(o):(t||(n+=1),r.splice(n,0,o)),{...i,compareRunSections:r,isAccordionReordered:!0}})),n},L=(e,t)=>{A((n=>{const i=(n.compareRunSections||[]).map((n=>n.uuid===e?{...n,name:t}:n));return{...n,compareRunSections:i,isAccordionReordered:!0}}))},_=(e,t)=>{A((n=>{const i=(n.compareRunSections||[]).slice(),r=i.findIndex((t=>t.uuid===e)),o=i.findIndex((e=>e.uuid===t)),a=i.splice(r,1)[0];return i.splice(o,0,a),{...n,compareRunSections:i,isAccordionReordered:!0}}))};if(!t||!n)return null;if(""!==f){const e=n.filter((e=>!e.deleted&&((e,t)=>{const n=e.toLowerCase();if(t.type===o.zL.BAR)return t.metricKey.toLowerCase().includes(n);if(t.type===o.zL.LINE){const e=t;return(0,T.isArray)(e.selectedMetricKeys)?e.selectedMetricKeys.some((e=>e.toLowerCase().includes(n))):e.metricKey.toLowerCase().includes(n)}if(t.type===o.zL.SCATTER){const e=t;return e.xaxis.key.toLowerCase().includes(n)||e.yaxis.key.toLowerCase().includes(n)}if(t.type===o.zL.PARALLEL)return"Parallel Coordinates".toLowerCase().includes(n);{const e=t;return e.xaxis.key.toLowerCase().includes(n)||e.yaxis.key.toLowerCase().includes(n)||e.zaxis.key.toLowerCase().includes(n)}})(f,e))),s=new Set;e.forEach((e=>{e.metricSectionId&&s.add(e.metricSectionId)}));const v=t.filter((e=>s.has(e.uuid)));return 0===e.length?(0,y.FD)(y.FK,{children:[(0,y.Y)(r.hKd,{size:"lg"}),(0,y.Y)(r.SvL,{title:(0,y.Y)(g.A,{id:"D+UN8o",defaultMessage:"No metric charts"}),description:(0,y.Y)(g.A,{id:"gZSJbg",defaultMessage:"All charts are filtered. Clear the search filter to see hidden metric charts."})})]}):(0,y.Y)(y.FK,{children:(0,y.Y)(a.A,{activeKey:v.map((e=>{let{uuid:t}=e;return t})),disableCollapse:!0,children:v.map(((t,n)=>{const o=e.filter((e=>e.metricSectionId===t.uuid)),s=(0,y.FD)("div",{role:"figure",css:(0,i.AH)({display:"flex",alignItems:"center",width:"100%",padding:"4px 0px",height:`${a.U}px`},""),children:[(0,y.Y)("div",{css:(0,i.AH)({paddingLeft:7,whiteSpace:"pre-wrap"},""),"data-testid":"on-search-runs-compare-section-header",children:t.name}),(0,y.Y)("div",{css:(0,i.AH)({padding:R.spacing.xs,position:"relative"},""),children:`(${o.length})`})]});return(0,y.Y)(r.nD3.Panel,{header:s,collapsible:"disabled",children:(0,y.Y)(k,{sectionId:t.uuid,sectionCharts:o,reorderCharts:l,insertCharts:c,isMetricHistoryLoading:u,chartData:d,startEditChart:h,removeChart:m,groupBy:x,sectionIndex:n,setFullScreenChart:Y,autoRefreshEnabled:p})},t.uuid)}))})})}return(0,y.FD)("div",{children:[(0,y.Y)(a.A,{activeKey:S,onActiveKeyChange:e=>{A((t=>{const n=(t.compareRunSections||[]).map((t=>{const n=t.uuid,i="string"===typeof e&&n===e||Array.isArray(e)&&e.includes(n);return{...t,display:i}}));return{...t,compareRunSections:n}}))},children:(t||[]).map(((e,t)=>{const i=(n||[]).filter((t=>{const n=t.metricSectionId;return!t.deleted&&n===e.uuid}));return(0,y.Y)(r.nD3.Panel,{header:(0,y.Y)(D,{index:t,section:e,onDeleteSection:I,onAddSection:K,editSection:b,onSetEditSection:w,onSetSectionName:L,sectionChartsLength:i.length,addNewChartCard:v,onSectionReorder:_,isExpanded:S.includes(e.uuid),supportedChartTypes:M}),children:(0,y.Y)(k,{sectionId:e.uuid,sectionCharts:i,reorderCharts:l,insertCharts:c,isMetricHistoryLoading:u,chartData:d,startEditChart:h,removeChart:m,groupBy:x,sectionIndex:t,setFullScreenChart:Y,autoRefreshEnabled:p})},e.uuid)}))}),(0,y.Y)("div",{children:(0,y.Y)(s.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_runs-compare_sections_runscomparesectionaccordion.tsx_405",block:!0,onClick:()=>{A((e=>{const t=[...e.compareRunSections||[],{name:"",uuid:(0,E.yk)(),display:!1,isReordered:!1}];return{...e,compareRunSections:t,isAccordionReordered:!0}})),w((null===t||void 0===t?void 0:t.length)||-1)},icon:(0,y.Y)(r.c11,{}),style:{border:"none",marginTop:"6px"},children:(0,y.Y)(g.A,{id:"YlavFP",defaultMessage:"Add section"})})})]})}}}]);