/*! For license information please see 8823.baf9bffd.chunk.js.LICENSE.txt */
(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[8823],{88584:function(t){t.exports=function(t,e,r,i){var n,o,s,a,h,l=e[0],u=e[1],f=e[2],c=e[3],p=r[0],d=r[1],g=r[2],v=r[3];(o=l*p+u*d+f*g+c*v)<0&&(o=-o,p=-p,d=-d,g=-g,v=-v);1-o>1e-6?(n=Math.acos(o),s=Math.sin(n),a=Math.sin((1-i)*n)/s,h=Math.sin(i*n)/s):(a=1-i,h=i);return t[0]=a*l+h*p,t[1]=a*u+h*d,t[2]=a*f+h*g,t[3]=a*c+h*v,t}},23533:function(t){"use strict";t.exports=function(t){return t||0===t?t.toString():""}},17113:function(t,e,r){"use strict";var i=r(45854);t.exports=function(t,e,r){var o=n[e];o||(o=n[e]={});if(t in o)return o[t];var s={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},a=i(t,s);s.triangles=!1;var h,l,u=i(t,s);if(r&&1!==r){for(h=0;h<a.positions.length;++h)for(l=0;l<a.positions[h].length;++l)a.positions[h][l]/=r;for(h=0;h<u.positions.length;++h)for(l=0;l<u.positions[h].length;++l)u.positions[h][l]/=r}var f=[[1/0,1/0],[-1/0,-1/0]],c=u.positions.length;for(h=0;h<c;++h){var p=u.positions[h];for(l=0;l<2;++l)f[0][l]=Math.min(f[0][l],p[l]),f[1][l]=Math.max(f[1][l],p[l])}return o[t]=[a,u,f]};var n={}},9438:function(t,e,r){var i=r(79810),n=r(14955),o=n("./perspective.glsl"),s=n("./orthographic.glsl"),a=n("./projection.glsl"),h=n("./draw-fragment.glsl"),l=n("./pick-fragment.glsl"),u=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],f={vertex:o,fragment:h,attributes:u},c={vertex:s,fragment:h,attributes:u},p={vertex:a,fragment:h,attributes:u},d={vertex:o,fragment:l,attributes:u},g={vertex:s,fragment:l,attributes:u},v={vertex:a,fragment:l,attributes:u};function m(t,e){var r=i(t,e),n=r.attributes;return n.position.location=0,n.color.location=1,n.glyph.location=2,n.id.location=3,r}e.createPerspective=function(t){return m(t,f)},e.createOrtho=function(t){return m(t,c)},e.createProject=function(t){return m(t,p)},e.createPickPerspective=function(t){return m(t,d)},e.createPickOrtho=function(t){return m(t,g)},e.createPickProject=function(t){return m(t,v)}},40021:function(t,e,r){"use strict";var i=r(24968),n=r(99795),o=r(66405),s=r(32237),a=r(84669),h=r(9438),l=r(17113),u=r(23533),f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(t,e){var r=t[0],i=t[1],n=t[2],o=t[3];return t[0]=e[0]*r+e[4]*i+e[8]*n+e[12]*o,t[1]=e[1]*r+e[5]*i+e[9]*n+e[13]*o,t[2]=e[2]*r+e[6]*i+e[10]*n+e[14]*o,t[3]=e[3]*r+e[7]*i+e[11]*n+e[15]*o,t}function p(t,e,r,i){return c(i,i),c(i,i),c(i,i)}function d(t,e){this.index=t,this.dataCoordinate=this.position=e}function g(t){return!0===t||t>1?1:t}function v(t,e,r,i,n,o,s,a,h,l,u,f){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=i,this.pointBuffer=n,this.colorBuffer=o,this.glyphBuffer=s,this.idBuffer=a,this.vao=h,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=l,this.pickOrthoShader=u,this.pickProjectShader=f,this.points=[],this._selectResult=new d(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(t){var e=t.gl,r=h.createPerspective(e),i=h.createOrtho(e),s=h.createProject(e),a=h.createPickPerspective(e),l=h.createPickOrtho(e),u=h.createPickProject(e),f=n(e),c=n(e),p=n(e),d=n(e),g=o(e,[{buffer:f,size:3,type:e.FLOAT},{buffer:c,size:4,type:e.FLOAT},{buffer:p,size:2,type:e.FLOAT},{buffer:d,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),m=new v(e,r,i,s,f,c,p,d,g,a,l,u);return m.update(t),m};var m=v.prototype;m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},m.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var x=[0,0],y=[0,0,0],b=[0,0,0],_=[0,0,0,1],w=[0,0,0,1],A=f.slice(),E=[0,0,0],T=[[0,0,0],[0,0,0]];function M(t){return t[0]=t[1]=t[2]=0,t}function S(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function P(t,e,r,i){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=i,t}function O(t,e,r,i){var n,o=e.axesProject,s=e.gl,h=t.uniforms,l=r.model||f,u=r.view||f,c=r.projection||f,d=e.axesBounds,g=function(t){for(var e=T,r=0;r<2;++r)for(var i=0;i<3;++i)e[r][i]=Math.max(Math.min(t[r][i],1e8),-1e8);return e}(e.clipBounds);n=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],x[0]=2/s.drawingBufferWidth,x[1]=2/s.drawingBufferHeight,t.bind(),h.view=u,h.projection=c,h.screenSize=x,h.highlightId=e.highlightId,h.highlightScale=e.highlightScale,h.clipBounds=g,h.pickGroup=e.pickId/255,h.pixelRatio=i;for(var v=0;v<3;++v)if(o[v]){h.scale=e.projectScale[v],h.opacity=e.projectOpacity[v];for(var m=A,O=0;O<16;++O)m[O]=0;for(O=0;O<4;++O)m[5*O]=1;m[5*v]=0,n[v]<0?m[12+v]=d[0][v]:m[12+v]=d[1][v],a(m,l,m),h.model=m;var C=(v+1)%3,j=(v+2)%3,B=M(y),L=M(b);B[C]=1,L[j]=1;var I=p(0,0,0,S(_,B)),R=p(0,0,0,S(w,L));if(Math.abs(I[1])>Math.abs(R[1])){var F=I;I=R,R=F,F=B,B=L,L=F;var k=C;C=j,j=k}I[0]<0&&(B[C]=-1),R[1]>0&&(L[j]=-1);var D=0,N=0;for(O=0;O<4;++O)D+=Math.pow(l[4*C+O],2),N+=Math.pow(l[4*j+O],2);B[C]/=Math.sqrt(D),L[j]/=Math.sqrt(N),h.axes[0]=B,h.axes[1]=L,h.fragClipBounds[0]=P(E,g[0],v,-1e8),h.fragClipBounds[1]=P(E,g[1],v,1e8),e.vao.bind(),e.vao.draw(s.TRIANGLES,e.vertexCount),e.lineWidth>0&&(s.lineWidth(e.lineWidth*i),e.vao.draw(s.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}var C=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function j(t,e,r,i,n,o,s){var a=r.gl;if((o===r.projectHasAlpha||s)&&O(e,r,i,n),o===r.hasAlpha||s){t.bind();var h=t.uniforms;h.model=i.model||f,h.view=i.view||f,h.projection=i.projection||f,x[0]=2/a.drawingBufferWidth,x[1]=2/a.drawingBufferHeight,h.screenSize=x,h.highlightId=r.highlightId,h.highlightScale=r.highlightScale,h.fragClipBounds=C,h.clipBounds=r.axes.bounds,h.opacity=r.opacity,h.pickGroup=r.pickId/255,h.pixelRatio=n,r.vao.bind(),r.vao.draw(a.TRIANGLES,r.vertexCount),r.lineWidth>0&&(a.lineWidth(r.lineWidth*n),r.vao.draw(a.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function B(t,e,r,n){var o;o=Array.isArray(t)?e<t.length?t[e]:void 0:t,o=u(o);var s=!0;i(o)&&(o="\u25bc",s=!1);var a=l(o,r,n);return{mesh:a[0],lines:a[1],bounds:a[2],visible:s}}m.draw=function(t){j(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},m.drawTransparent=function(t){j(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},m.drawPick=function(t){j(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},m.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],i=this._selectResult;i.index=e;for(var n=0;n<3;++n)i.position[n]=i.dataCoordinate[n]=r[n];return i},m.highlight=function(t){if(t){var e=t.index,r=255&e,i=e>>8&255,n=e>>16&255;this.highlightId=[r/255,i/255,n/255,0]}else this.highlightId=[1,1,1,1]},m.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t)if(Array.isArray(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}if("projectScale"in t)if(Array.isArray(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(Array.isArray(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{r=+t.projectOpacity;this.projectOpacity=[r,r,r]}for(var i=0;i<3;++i)this.projectOpacity[i]=g(this.projectOpacity[i]),this.projectOpacity[i]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=g(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var n,o,a=t.position,h=t.font||"normal",l=t.alignment||[0,0];if(2===l.length)n=l[0],o=l[1];else{n=[],o=[];for(i=0;i<l.length;++i)n[i]=l[i][0],o[i]=l[i][1]}var u=[1/0,1/0,1/0],f=[-1/0,-1/0,-1/0],c=t.glyph,p=t.color,d=t.size,v=t.angle,m=t.lineColor,x=-1,y=0,b=0,_=0;if(a.length){_=a.length;t:for(i=0;i<_;++i){for(var w=a[i],A=0;A<3;++A)if(isNaN(w[A])||!isFinite(w[A]))continue t;var E=(N=B(c,i,h,this.pixelRatio)).mesh,T=N.lines,M=N.bounds;y+=3*E.cells.length,b+=2*T.edges.length}}var S=y+b,P=s.mallocFloat(3*S),O=s.mallocFloat(4*S),C=s.mallocFloat(2*S),j=s.mallocUint32(S);if(S>0){var L=0,I=y,R=[0,0,0,1],F=[0,0,0,1],k=Array.isArray(p)&&Array.isArray(p[0]),D=Array.isArray(m)&&Array.isArray(m[0]);t:for(i=0;i<_;++i){x+=1;for(w=a[i],A=0;A<3;++A){if(isNaN(w[A])||!isFinite(w[A]))continue t;f[A]=Math.max(f[A],w[A]),u[A]=Math.min(u[A],w[A])}E=(N=B(c,i,h,this.pixelRatio)).mesh,T=N.lines,M=N.bounds;var N,U=N.visible;if(U)if(Array.isArray(p)){if(3===(V=k?i<p.length?p[i]:[0,0,0,0]:p).length){for(A=0;A<3;++A)R[A]=V[A];R[3]=1}else if(4===V.length){for(A=0;A<4;++A)R[A]=V[A];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else R[0]=R[1]=R[2]=0,R[3]=1;else R=[1,1,1,0];if(U)if(Array.isArray(m)){var V;if(3===(V=D?i<m.length?m[i]:[0,0,0,0]:m).length){for(A=0;A<3;++A)F[A]=V[A];F[A]=1}else if(4===V.length){for(A=0;A<4;++A)F[A]=V[A];!this.hasAlpha&&V[3]<1&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1;else F=[1,1,1,0];var z=.5;U?Array.isArray(d)?z=i<d.length?+d[i]:12:d?z=+d:this.useOrtho&&(z=12):z=0;var X=0;Array.isArray(v)?X=i<v.length?+v[i]:0:v&&(X=+v);var W=Math.cos(X),G=Math.sin(X);for(w=a[i],A=0;A<3;++A)f[A]=Math.max(f[A],w[A]),u[A]=Math.min(u[A],w[A]);var q=n,H=o;q=0;Array.isArray(n)?q=i<n.length?n[i]:0:n&&(q=n);H=0;Array.isArray(o)?H=i<o.length?o[i]:0:o&&(H=o);var Y=[q*=q>0?1-M[0][0]:q<0?1+M[1][0]:1,H*=H>0?1-M[0][1]:H<0?1+M[1][1]:1],Z=E.cells||[],Q=E.positions||[];for(A=0;A<Z.length;++A)for(var K=Z[A],$=0;$<3;++$){for(var J=0;J<3;++J)P[3*L+J]=w[J];for(J=0;J<4;++J)O[4*L+J]=R[J];j[L]=x;var tt=Q[K[$]];C[2*L]=z*(W*tt[0]-G*tt[1]+Y[0]),C[2*L+1]=z*(G*tt[0]+W*tt[1]+Y[1]),L+=1}for(Z=T.edges,Q=T.positions,A=0;A<Z.length;++A)for(K=Z[A],$=0;$<2;++$){for(J=0;J<3;++J)P[3*I+J]=w[J];for(J=0;J<4;++J)O[4*I+J]=F[J];j[I]=x;tt=Q[K[$]];C[2*I]=z*(W*tt[0]-G*tt[1]+Y[0]),C[2*I+1]=z*(G*tt[0]+W*tt[1]+Y[1]),I+=1}}}this.bounds=[u,f],this.points=a,this.pointCount=a.length,this.vertexCount=y,this.lineVertexCount=b,this.pointBuffer.update(P),this.colorBuffer.update(O),this.glyphBuffer.update(C),this.idBuffer.update(j),s.free(P),s.free(O),s.free(C),s.free(j)},m.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},65985:function(t,e,r){"use strict";var i=r(14955);e.boxVertex=i("./shaders/box-vertex.glsl"),e.boxFragment=i("./shaders/box-fragment.glsl")},978:function(t,e,r){"use strict";var i=r(79810),n=r(99795),o=r(65985);function s(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=function(t,e){var r=t.gl,a=n(r,[0,0,0,1,1,0,1,1]),h=i(r,o.boxVertex,o.boxFragment),l=new s(t,a,h);return l.update(e),t.addOverlay(l),l};var a=s.prototype;a.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth,i=(this.innerFill,this.innerColor),n=(this.outerFill,this.outerColor),o=this.borderColor,s=t.box,a=t.screenBox,h=t.dataBox,l=t.viewBox,u=t.pixelRatio,f=(e[0]-h[0])*(l[2]-l[0])/(h[2]-h[0])+l[0],c=(e[1]-h[1])*(l[3]-l[1])/(h[3]-h[1])+l[1],p=(e[2]-h[0])*(l[2]-l[0])/(h[2]-h[0])+l[0],d=(e[3]-h[1])*(l[3]-l[1])/(h[3]-h[1])+l[1];if(f=Math.max(f,l[0]),c=Math.max(c,l[1]),p=Math.min(p,l[2]),d=Math.min(d,l[3]),!(p<f||d<c)){s.bind();var g=a[2]-a[0],v=a[3]-a[1];if(this.outerFill&&(s.drawBox(0,0,g,c,n),s.drawBox(0,c,f,d,n),s.drawBox(0,d,g,v,n),s.drawBox(p,c,g,d,n)),this.innerFill&&s.drawBox(f,c,p,d,i),r>0){var m=r*u;s.drawBox(f-m,c-m,p+m,c+m,o),s.drawBox(f-m,d-m,p+m,d+m,o),s.drawBox(f-m,c-m,f+m,d+m,o),s.drawBox(p-m,c-m,p+m,d+m,o)}}}},a.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},a.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},41998:function(t,e,r){"use strict";t.exports=function(t,e){var r=e[0],o=e[1],s=i(t,r,o,{}),a=n.mallocUint8(r*o*4);return new h(t,s,a)};var i=r(67645),n=r(32237),o=r(75501),s=r(43863).nextPow2;function a(t,e,r,i,n){this.coord=[t,e],this.id=r,this.value=i,this.distance=n}function h(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var i=this;this._readCallback=function(){i.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,i.buffer),i._readTimeout=null)}}var l=h.prototype;Object.defineProperty(l,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){n.free(this.buffer);for(var i=this.buffer=n.mallocUint8(s(r*e*4)),o=0;o<r*e*4;++o)i[o]=255}return t}}}),l.begin=function(){var t=this.gl;this.shape;t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},l.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},l.query=function(t,e,r){if(!this.gl)return null;var i=this.fbo.shape.slice();t|=0,e|=0,"number"!==typeof r&&(r=1);var n=0|Math.min(Math.max(t-r,0),i[0]),s=0|Math.min(Math.max(t+r,0),i[0]),h=0|Math.min(Math.max(e-r,0),i[1]),l=0|Math.min(Math.max(e+r,0),i[1]);if(s<=n||l<=h)return null;var u=[s-n,l-h],f=o(this.buffer,[u[0],u[1],4],[4,4*i[0],1],4*(n+i[0]*h)),c=function(t,e,r){for(var i=1e8,n=-1,o=-1,s=t.shape[0],a=t.shape[1],h=0;h<s;h++)for(var l=0;l<a;l++){var u=t.get(h,l,0),f=t.get(h,l,1),c=t.get(h,l,2),p=t.get(h,l,3);if(u<255||f<255||c<255||p<255){var d=e-h,g=r-l,v=d*d+g*g;v<i&&(i=v,n=h,o=l)}}return[n,o,i]}(f.hi(u[0],u[1],1),r,r),p=c[0],d=c[1];return p<0||Math.pow(this.radius,2)<c[2]?null:new a(p+n|0,d+h|0,f.get(p,d,0),[f.get(p,d,1),f.get(p,d,2),f.get(p,d,3)],Math.sqrt(c[2]))},l.dispose=function(){this.gl&&(this.fbo.dispose(),n.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},79810:function(t,e,r){"use strict";var i=r(55792),n=r(82816),o=r(28963),s=r(68502),a=r(71570),h=r(15282);function l(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var u=l.prototype;function f(t,e){return t.name<e.name?-1:1}u.bind=function(){var t;this.program||this._relink();var e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},u.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},u.update=function(t,e,r,l){if(!e||1===arguments.length){var u=t;t=u.vertex,e=u.fragment,r=u.uniforms,l=u.attributes}var c=this,p=c.gl,d=c._vref;c._vref=s.shader(p,p.VERTEX_SHADER,t),d&&d.dispose(),c.vertShader=c._vref.shader;var g=this._fref;if(c._fref=s.shader(p,p.FRAGMENT_SHADER,e),g&&g.dispose(),c.fragShader=c._fref.shader,!r||!l){var v=p.createProgram();if(p.attachShader(v,c.fragShader),p.attachShader(v,c.vertShader),p.linkProgram(v),!p.getProgramParameter(v,p.LINK_STATUS)){var m=p.getProgramInfoLog(v);throw new h(m,"Error linking program:"+m)}r=r||a.uniforms(p,v),l=l||a.attributes(p,v),p.deleteProgram(v)}(l=l.slice()).sort(f);var x,y=[],b=[],_=[];for(x=0;x<l.length;++x){var w=l[x];if(w.type.indexOf("mat")>=0){for(var A=0|w.type.charAt(w.type.length-1),E=new Array(A),T=0;T<A;++T)E[T]=_.length,b.push(w.name+"["+T+"]"),"number"===typeof w.location?_.push(w.location+T):Array.isArray(w.location)&&w.location.length===A&&"number"===typeof w.location[T]?_.push(0|w.location[T]):_.push(-1);y.push({name:w.name,type:w.type,locations:E})}else y.push({name:w.name,type:w.type,locations:[_.length]}),b.push(w.name),"number"===typeof w.location?_.push(0|w.location):_.push(-1)}var M=0;for(x=0;x<_.length;++x)if(_[x]<0){for(;_.indexOf(M)>=0;)M+=1;_[x]=M}var S=new Array(r.length);function P(){c.program=s.program(p,c._vref,c._fref,b,_);for(var t=0;t<r.length;++t)S[t]=p.getUniformLocation(c.program,r[t].name)}P(),c._relink=P,c.types={uniforms:o(r),attributes:o(l)},c.attributes=n(p,c,y,_),Object.defineProperty(c,"uniforms",i(p,c,r,S))},t.exports=function(t,e,r,i,n){var o=new l(t);return o.update(e,r,i,n),o}},15282:function(t){function e(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=(new Error).stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,t.exports=e},82816:function(t,e,r){"use strict";t.exports=function(t,e,r,n){for(var o={},h=0,l=r.length;h<l;++h){var u=r[h],f=u.name,c=u.type,p=u.locations;switch(c){case"bool":case"int":case"float":s(t,e,p[0],n,1,o,f);break;default:if(c.indexOf("vec")>=0){if((d=c.charCodeAt(c.length-1)-48)<2||d>4)throw new i("","Invalid data type for attribute "+f+": "+c);s(t,e,p[0],n,d,o,f)}else{if(!(c.indexOf("mat")>=0))throw new i("","Unknown data type for attribute "+f+": "+c);var d;if((d=c.charCodeAt(c.length-1)-48)<2||d>4)throw new i("","Invalid data type for attribute "+f+": "+c);a(t,e,p,n,d,o,f)}}}return o};var i=r(15282);function n(t,e,r,i,n,o){this._gl=t,this._wrapper=e,this._index=r,this._locations=i,this._dimension=n,this._constFunc=o}var o=n.prototype;function s(t,e,r,i,o,s,a){for(var h=["gl","v"],l=[],u=0;u<o;++u)h.push("x"+u),l.push("x"+u);h.push("if(x0.length===void 0){return gl.vertexAttrib"+o+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+o+"fv(v,x0)}");var f=Function.apply(null,h),c=new n(t,e,r,i,o,f);Object.defineProperty(s,a,{set:function(e){return t.disableVertexAttribArray(i[r]),f(t,i[r],e),e},get:function(){return c},enumerable:!0})}function a(t,e,r,i,n,o,a){for(var h=new Array(n),l=new Array(n),u=0;u<n;++u)s(t,e,r[u],i,n,h,u),l[u]=h[u];Object.defineProperty(h,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<n;++e)l[e].location=t[e];else for(e=0;e<n;++e)l[e].location=t+e;return t},get:function(){for(var t=new Array(n),e=0;e<n;++e)t[e]=i[r[e]];return t},enumerable:!0}),h.pointer=function(e,o,s,a){e=e||t.FLOAT,o=!!o,s=s||n*n,a=a||0;for(var h=0;h<n;++h){var l=i[r[h]];t.vertexAttribPointer(l,n,e,o,s,a+h*n),t.enableVertexAttribArray(l)}};var f=new Array(n),c=t["vertexAttrib"+n+"fv"];Object.defineProperty(o,a,{set:function(e){for(var o=0;o<n;++o){var s=i[r[o]];if(t.disableVertexAttribArray(s),Array.isArray(e[0]))c.call(t,s,e[o]);else{for(var a=0;a<n;++a)f[a]=e[n*o+a];c.call(t,s,f)}}return e},get:function(){return h},enumerable:!0})}o.pointer=function(t,e,r,i){var n=this,o=n._gl,s=n._locations[n._index];o.vertexAttribPointer(s,n._dimension,t||o.FLOAT,!!e,r||0,i||0),o.enableVertexAttribArray(s)},o.set=function(t,e,r,i){return this._constFunc(this._locations[this._index],t,e,r,i)},Object.defineProperty(o,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}})},55792:function(t,e,r){"use strict";var i=r(28963),n=r(15282);function o(t){return new Function("y","return function(){return y}")(t)}function s(t,e){for(var r=new Array(t),i=0;i<t;++i)r[i]=e;return r}t.exports=function(t,e,r,a){function h(t,e,r){switch(r){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+e+"],obj"+t+")";case"float":return"gl.uniform1f(locations["+e+"],obj"+t+")";default:var i=r.indexOf("vec");if(!(0<=i&&i<=1&&r.length===4+i)){if(0===r.indexOf("mat")&&4===r.length){var o;if((o=r.charCodeAt(r.length-1)-48)<2||o>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+r);return"gl.uniformMatrix"+o+"fv(locations["+e+"],false,obj"+t+")"}throw new n("","Unknown uniform data type for "+name+": "+r)}if((o=r.charCodeAt(r.length-1)-48)<2||o>4)throw new n("","Invalid data type");switch(r.charAt(0)){case"b":case"i":return"gl.uniform"+o+"iv(locations["+e+"],obj"+t+")";case"v":return"gl.uniform"+o+"fv(locations["+e+"],obj"+t+")";default:throw new n("","Unrecognized data type for vector "+name+": "+r)}}}function l(t,e){if("object"!==typeof e)return[[t,e]];var r=[];for(var i in e){var n=e[i],o=t;parseInt(i)+""===i?o+="["+i+"]":o+="."+i,"object"===typeof n?r.push.apply(r,l(o,n)):r.push([o,n])}return r}function u(e){for(var i=["return function updateProperty(obj){"],n=l("",e),o=0;o<n.length;++o){var s=n[o],u=s[0],f=s[1];a[f]&&i.push(h(u,f,r[f].type))}return i.push("return obj}"),new Function("gl","locations",i.join("\n"))(t,a)}function f(i,h,l){if("object"===typeof l){var f=c(l);Object.defineProperty(i,h,{get:o(f),set:u(l),enumerable:!0,configurable:!1})}else a[l]?Object.defineProperty(i,h,{get:(p=l,new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+p+"])}")(t,e,a)),set:u(l),enumerable:!0,configurable:!1}):i[h]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new n("","Invalid data type");return"b"===t.charAt(0)?s(r,!1):s(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r;if((r=t.charCodeAt(t.length-1)-48)<2||r>4)throw new n("","Invalid uniform dimension type for matrix "+name+": "+t);return s(r*r,0)}throw new n("","Unknown uniform data type for "+name+": "+t)}}(r[l].type);var p}function c(t){var e;if(Array.isArray(t)){e=new Array(t.length);for(var r=0;r<t.length;++r)f(e,r,t[r])}else for(var i in e={},t)f(e,i,t[i]);return e}var p=i(r,!0);return{get:o(c(p)),set:u(p),enumerable:!0,configurable:!0}}},28963:function(t){"use strict";t.exports=function(t,e){for(var r={},i=0;i<t.length;++i)for(var n=t[i].name.split("."),o=r,s=0;s<n.length;++s){var a=n[s].split("[");if(a.length>1){a[0]in o||(o[a[0]]=[]),o=o[a[0]];for(var h=1;h<a.length;++h){var l=parseInt(a[h]);h<a.length-1||s<n.length-1?(l in o||(h<a.length-1?o[l]=[]:o[l]={}),o=o[l]):o[l]=e?i:t[i].type}}else s<n.length-1?(a[0]in o||(o[a[0]]={}),o=o[a[0]]):o[a[0]]=e?i:t[i].type}return r}},71570:function(t,e){"use strict";e.uniforms=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=[],o=0;o<r;++o){var s=t.getActiveUniform(e,o);if(s){var a=n(t,s.type);if(s.size>1)for(var h=0;h<s.size;++h)i.push({name:s.name.replace("[0]","["+h+"]"),type:a});else i.push({name:s.name,type:a})}}return i},e.attributes=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=[],o=0;o<r;++o){var s=t.getActiveAttrib(e,o);s&&i.push({name:s.name,type:n(t,s.type)})}return i};var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function n(t,e){if(!i){var n=Object.keys(r);i={};for(var o=0;o<n.length;++o){var s=n[o];i[t[s]]=r[s]}}return i[e]}},68502:function(t,e,r){"use strict";e.shader=function(t,e,r){return u(t).getShaderReference(e,r)},e.program=function(t,e,r,i,n){return u(t).getProgram(e,r,i,n)};var i=r(15282),n=r(81901),o=new("undefined"===typeof WeakMap?r(55627):WeakMap),s=0;function a(t,e,r,i,n,o,s){this.id=t,this.src=e,this.type=r,this.shader=i,this.count=o,this.programs=[],this.cache=s}function h(t){this.gl=t,this.shaders=[{},{}],this.programs={}}a.prototype.dispose=function(){if(0===--this.count){for(var t=this.cache,e=t.gl,r=this.programs,i=0,n=r.length;i<n;++i){var o=t.programs[r[i]];o&&(delete t.programs[i],e.deleteProgram(o))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var l=h.prototype;function u(t){var e=o.get(t);return e||(e=new h(t),o.set(t,e)),e}l.getShaderReference=function(t,e){var r=this.gl,o=this.shaders[t===r.FRAGMENT_SHADER|0],h=o[e];if(h&&r.isShader(h.shader))h.count+=1;else{var l=function(t,e,r){var o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(o);try{var a=n(s,r,e)}catch(h){throw console.warn("Failed to format compiler error: "+h),new i(s,"Error compiling shader:\n"+s)}throw new i(s,a.short,a.long)}return o}(r,t,e);h=o[e]=new a(s++,e,t,l,[],1,this)}return h},l.getProgram=function(t,e,r,n){var o=[t.id,e.id,r.join(":"),n.join(":")].join("@"),s=this.programs[o];return s&&this.gl.isProgram(s)||(this.programs[o]=s=function(t,e,r,n,o){var s=t.createProgram();t.attachShader(s,e),t.attachShader(s,r);for(var a=0;a<n.length;++a)t.bindAttribLocation(s,o[a],n[a]);if(t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS)){var h=t.getProgramInfoLog(s);throw new i(h,"Error linking program: "+h)}return s}(this.gl,t.shader,e.shader,r,n),t.programs.push(o),e.programs.push(o)),s}},24855:function(t){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=function(t,r){var i=new e(t);return i.update(r),t.addOverlay(i),i};var r=e.prototype;r.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map((function(t){return t.slice()})),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var t=this.enable,e=this.width,r=this.color,i=this.center,n=this.plot,o=n.line,s=n.dataBox,a=n.viewBox;if(o.bind(),s[0]<=i[0]&&i[0]<=s[2]&&s[1]<=i[1]&&i[1]<=s[3]){var h=a[0]+(i[0]-s[0])/(s[2]-s[0])*(a[2]-a[0]),l=a[1]+(i[1]-s[1])/(s[3]-s[1])*(a[3]-a[1]);t[0]&&o.drawLine(h,l,a[0],l,e[0],r[0]),t[1]&&o.drawLine(h,l,h,a[1],e[1],r[1]),t[2]&&o.drawLine(h,l,a[2],l,e[2],r[2]),t[3]&&o.drawLine(h,l,h,a[3],e[3],r[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},29062:function(t,e,r){"use strict";var i=r(14955),n=r(79810),o=i("./vertex.glsl"),s=i("./fragment.glsl");t.exports=function(t){return n(t,o,s,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},13256:function(t,e,r){"use strict";var i=r(99795),n=r(66405),o=r(29062);t.exports=function(t,e){var r=[];function s(t,e,i,n,o,s){var a=[t,e,i,0,0,0,1];a[n+3]=1,a[n]=o,r.push.apply(r,a),a[6]=-1,r.push.apply(r,a),a[n]=s,r.push.apply(r,a),r.push.apply(r,a),a[6]=1,r.push.apply(r,a),a[n]=o,r.push.apply(r,a)}s(0,0,0,0,0,1),s(0,0,0,1,0,1),s(0,0,0,2,0,1),s(1,0,0,1,-1,1),s(1,0,0,2,-1,1),s(0,1,0,0,-1,1),s(0,1,0,2,-1,1),s(0,0,1,0,-1,1),s(0,0,1,1,-1,1);var h=i(t,r),l=n(t,[{type:t.FLOAT,buffer:h,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:h,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:h,size:1,offset:24,stride:28}]),u=o(t);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.weight.location=2;var f=new a(t,h,l,u);return f.update(e),f};var s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function a(t,e,r,i){this.gl=t,this.buffer=e,this.vao=r,this.shader=i,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var h=a.prototype,l=[0,0,0],u=[0,0,0],f=[0,0];h.isTransparent=function(){return!1},h.drawTransparent=function(t){},h.draw=function(t){var e=this.gl,r=this.vao,i=this.shader;r.bind(),i.bind();var n,o=t.model||s,a=t.view||s,h=t.projection||s;this.axes&&(n=this.axes.lastCubeProps.axis);for(var c=l,p=u,d=0;d<3;++d)n&&n[d]<0?(c[d]=this.bounds[0][d],p[d]=this.bounds[1][d]):(c[d]=this.bounds[1][d],p[d]=this.bounds[0][d]);f[0]=e.drawingBufferWidth,f[1]=e.drawingBufferHeight,i.uniforms.model=o,i.uniforms.view=a,i.uniforms.projection=h,i.uniforms.coordinates=[this.position,c,p],i.uniforms.colors=this.colors,i.uniforms.screenShape=f;for(d=0;d<3;++d)i.uniforms.lineWidth=this.lineWidth[d]*this.pixelRatio,this.enabled[d]&&(r.draw(e.TRIANGLES,6,6*d),this.drawSides[d]&&r.draw(e.TRIANGLES,12,18+12*d));r.unbind()},h.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},h.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},98232:function(t,e,r){var i=r(14955),n=i("./triangle-vertex.glsl"),o=i("./triangle-fragment.glsl"),s=i("./pick-vertex.glsl"),a=i("./pick-fragment.glsl");e.meshShader={vertex:n,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:s,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},94794:function(t,e,r){"use strict";var i=r(684),n=r(54713),o=["xyz","xzy","yxz","yzx","zxy","zyx"],s=function(t,e,r,o){for(var s=0,a=0;a<t.length;a++)for(var h=t[a].velocities,l=0;l<h.length;l++)s=Math.max(s,i.length(h[l]));var u=t.map((function(t){return function(t,e,r,o){for(var s=t.points,a=t.velocities,h=t.divergences,l=[],u=[],f=[],c=[],p=[],d=[],g=0,v=0,m=n.create(),x=n.create(),y=0;y<s.length;y++){var b=s[y],_=a[y],w=h[y];0===e&&(w=.05*r),v=i.length(_)/o,m=n.create(),i.copy(m,_),m[3]=w;for(var A=0;A<8;A++)p[A]=[b[0],b[1],b[2],A];if(c.length>0)for(A=0;A<8;A++){var E=(A+1)%8;l.push(c[A],p[A],p[E],p[E],c[E],c[A]),f.push(x,m,m,m,x,x),d.push(g,v,v,v,g,g);var T=l.length;u.push([T-6,T-5,T-4],[T-3,T-2,T-1])}var M=c;c=p,p=M;var S=x;x=m,m=S;var P=g;g=v,v=P}return{positions:l,cells:u,vectors:f,vertexIntensity:d}}(t,r,o,s)})),f=[],c=[],p=[],d=[];for(a=0;a<u.length;a++){var g=u[a],v=f.length;f=f.concat(g.positions),p=p.concat(g.vectors),d=d.concat(g.vertexIntensity);for(l=0;l<g.cells.length;l++){var m=g.cells[l],x=[];c.push(x);for(var y=0;y<m.length;y++)x.push(m[y]+v)}}return{positions:f,cells:c,vectors:p,vertexIntensity:d,colormap:e}},a=function(t,e){var r,i=t.length;for(r=0;r<i;r++){var n=t[r];if(n===e)return r;if(n>e)return r-1}return r},h=function(t,e,r){return t<e?e:t>r?r:t},l=function(t){var e=1/0;t.sort((function(t,e){return t-e}));for(var r=t.length,i=1;i<r;i++){var n=Math.abs(t[i]-t[i-1]);n<e&&(e=n)}return e};t.exports=function(t,e){var r=t.startingPositions,n=t.maxLength||1e3,u=t.tubeSize||1,f=t.absoluteTubeSize,c=t.gridFill||"+x+y+z",p={};-1!==c.indexOf("-x")&&(p.reversedX=!0),-1!==c.indexOf("-y")&&(p.reversedY=!0),-1!==c.indexOf("-z")&&(p.reversedZ=!0),p.filled=o.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var d=t.getVelocity||function(e){return function(t,e,r){var n=e.vectors,o=e.meshgrid,s=t[0],l=t[1],u=t[2],f=o[0].length,c=o[1].length,p=o[2].length,d=a(o[0],s),g=a(o[1],l),v=a(o[2],u),m=d+1,x=g+1,y=v+1;if(d=h(d,0,f-1),m=h(m,0,f-1),g=h(g,0,c-1),x=h(x,0,c-1),v=h(v,0,p-1),y=h(y,0,p-1),d<0||g<0||v<0||m>f-1||x>c-1||y>p-1)return i.create();var b,_,w,A,E,T,M=o[0][d],S=o[0][m],P=o[1][g],O=o[1][x],C=o[2][v],j=(s-M)/(S-M),B=(l-P)/(O-P),L=(u-C)/(o[2][y]-C);switch(isFinite(j)||(j=.5),isFinite(B)||(B=.5),isFinite(L)||(L=.5),r.reversedX&&(d=f-1-d,m=f-1-m),r.reversedY&&(g=c-1-g,x=c-1-x),r.reversedZ&&(v=p-1-v,y=p-1-y),r.filled){case 5:E=v,T=y,w=g*p,A=x*p,b=d*p*c,_=m*p*c;break;case 4:E=v,T=y,b=d*p,_=m*p,w=g*p*f,A=x*p*f;break;case 3:w=g,A=x,E=v*c,T=y*c,b=d*c*p,_=m*c*p;break;case 2:w=g,A=x,b=d*c,_=m*c,E=v*c*f,T=y*c*f;break;case 1:b=d,_=m,E=v*f,T=y*f,w=g*f*p,A=x*f*p;break;default:b=d,_=m,w=g*f,A=x*f,E=v*f*c,T=y*f*c}var I=n[b+w+E],R=n[b+w+T],F=n[b+A+E],k=n[b+A+T],D=n[_+w+E],N=n[_+w+T],U=n[_+A+E],V=n[_+A+T],z=i.create(),X=i.create(),W=i.create(),G=i.create();i.lerp(z,I,D,j),i.lerp(X,R,N,j),i.lerp(W,F,U,j),i.lerp(G,k,V,j);var q=i.create(),H=i.create();i.lerp(q,z,W,B),i.lerp(H,X,G,B);var Y=i.create();return i.lerp(Y,q,H,L),Y}(e,t,p)},g=t.getDivergence||function(t,e){var r=i.create(),n=1e-4;i.add(r,t,[n,0,0]);var o=d(r);i.subtract(o,o,e),i.scale(o,o,1/n),i.add(r,t,[0,n,0]);var s=d(r);i.subtract(s,s,e),i.scale(s,s,1/n),i.add(r,t,[0,0,n]);var a=d(r);return i.subtract(a,a,e),i.scale(a,a,1/n),i.add(r,o,s),i.add(r,r,a),r},v=[],m=e[0][0],x=e[0][1],y=e[0][2],b=e[1][0],_=e[1][1],w=e[1][2],A=function(t){var e=t[0],r=t[1],i=t[2];return!(e<m||e>b||r<x||r>_||i<y||i>w)},E=10*i.distance(e[0],e[1])/n,T=E*E,M=1,S=0,P=r.length;P>1&&(M=function(t){for(var e=[],r=[],i=[],n={},o={},s={},a=t.length,h=0;h<a;h++){var u=t[h],f=u[0],c=u[1],p=u[2];n[f]||(e.push(f),n[f]=!0),o[c]||(r.push(c),o[c]=!0),s[p]||(i.push(p),s[p]=!0)}var d=l(e),g=l(r),v=l(i),m=Math.min(d,g,v);return isFinite(m)?m:1}(r));for(var O=0;O<P;O++){var C=i.create();i.copy(C,r[O]);var j=[C],B=[],L=d(C),I=C;B.push(L);var R=[],F=g(C,L),k=i.length(F);isFinite(k)&&k>S&&(S=k),R.push(k),v.push({points:j,velocities:B,divergences:R});for(var D=0;D<100*n&&j.length<n&&A(C);){D++;var N=i.clone(L),U=i.squaredLength(N);if(0===U)break;if(U>T&&i.scale(N,N,E/Math.sqrt(U)),i.add(N,N,C),L=d(N),i.squaredDistance(I,N)-T>-1e-4*T){j.push(N),I=N,B.push(L);F=g(N,L),k=i.length(F);isFinite(k)&&k>S&&(S=k),R.push(k)}C=N}}var V=s(v,t.colormap,S,M);return f?V.tubeScale=f:(0===S&&(S=1),V.tubeScale=.5*u*M/S),V};var u=r(98232),f=r(99716).createMesh;t.exports.createTubeMesh=function(t,e){return f(t,e,{shaders:u,traceType:"streamtube"})}},76927:function(t,e,r){var i=r(79810),n=r(14955),o=n("../shaders/vertex.glsl"),s=n("../shaders/fragment.glsl"),a=n("../shaders/contour-vertex.glsl"),h=n("../shaders/pick.glsl");e.createShader=function(t){var e=i(t,o,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createPickShader=function(t){var e=i(t,o,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createContourShader=function(t){var e=i(t,a,s,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},e.createPickContourShader=function(t){var e=i(t,a,h,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},16802:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=x(e),i=b(e),a=y(e),h=_(e),l=n(e),u=o(e,[{buffer:l,size:4,stride:w,offset:0},{buffer:l,size:3,stride:w,offset:16},{buffer:l,size:3,stride:w,offset:28}]),f=n(e),c=o(e,[{buffer:f,size:4,stride:20,offset:0},{buffer:f,size:1,stride:20,offset:16}]),p=n(e),d=o(e,[{buffer:p,size:2,type:e.FLOAT}]),g=s(e,1,S,e.RGBA,e.UNSIGNED_BYTE);g.minFilter=e.LINEAR,g.magFilter=e.LINEAR;var v=new P(e,[0,0],[[0,0,0],[0,0,0]],r,i,l,u,g,a,h,f,c,p,d,[0,0,0]),m={levels:[[],[],[]]};for(var A in t)m[A]=t[A];return m.colormap=m.colormap||"jet",v.update(m),v};var i=r(43863),n=r(99795),o=r(66405),s=r(89407),a=r(32237),h=r(21808),l=r(45229),u=r(29451),f=r(75501),c=r(80590),p=r(84669),d=r(51213),g=r(62683),v=r(43278),m=r(76927),x=m.createShader,y=m.createContourShader,b=m.createPickShader,_=m.createPickContourShader,w=40,A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],T=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function M(t,e,r,i,n){this.position=t,this.index=e,this.uv=r,this.level=i,this.dataCoordinate=n}!function(){for(var t=0;t<3;++t){var e=T[t],r=(t+2)%3;e[(t+1)%3+0]=1,e[r+3]=1,e[t+6]=1}}();var S=256;function P(t,e,r,i,n,o,s,h,l,u,c,p,d,g,v){this.gl=t,this.shape=e,this.bounds=r,this.objectOffset=v,this.intensityBounds=[],this._shader=i,this._pickShader=n,this._coordinateBuffer=o,this._vao=s,this._colorMap=h,this._contourShader=l,this._contourPickShader=u,this._contourBuffer=c,this._contourVAO=p,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new M([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=d,this._dynamicVAO=g,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[f(a.mallocFloat(1024),[0,0]),f(a.mallocFloat(1024),[0,0]),f(a.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var O=P.prototype;O.genColormap=function(t,e){var r=!1,i=u([h({colormap:t,nshades:S,format:"rgba"}).map((function(t,i){var n=e?function(t,e){if(!e)return 1;if(!e.length)return 1;for(var r=0;r<e.length;++r){if(e.length<2)return 1;if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var i=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-i)+i*e[r-1][1]}}return 1}(i/255,e):t[3];return n<1&&(r=!0),[t[0],t[1],t[2],255*n]}))]);return l.divseq(i,255),this.hasAlphaScale=r,i},O.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},O.isOpaque=function(){return!this.isTransparent()},O.pickSlots=1,O.setPickBase=function(t){this.pickId=t};var C=[0,0,0],j={showSurface:!1,showContour:!1,projections:[A.slice(),A.slice(),A.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(t,e){var r,i,n,o=e.axes&&e.axes.lastCubeProps.axis||C,s=e.showSurface,a=e.showContour;for(r=0;r<3;++r)for(s=s||e.surfaceProject[r],i=0;i<3;++i)a=a||e.contourProject[r][i];for(r=0;r<3;++r){var h=j.projections[r];for(i=0;i<16;++i)h[i]=0;for(i=0;i<4;++i)h[5*i]=1;h[5*r]=0,h[12+r]=e.axesBounds[+(o[r]>0)][r],p(h,t.model,h);var l=j.clipBounds[r];for(n=0;n<2;++n)for(i=0;i<3;++i)l[n][i]=t.clipBounds[n][i];l[0][r]=-1e8,l[1][r]=1e8}return j.showSurface=s,j.showContour=a,j}var L={model:A,view:A,projection:A,inverseModel:A.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},I=A.slice(),R=[1,0,0,0,1,0,0,0,1];function F(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0);var i=L;i.model=t.model||A,i.view=t.view||A,i.projection=t.projection||A,i.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],i.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],i.objectOffset=this.objectOffset,i.contourColor=this.contourColor[0],i.inverseModel=d(i.inverseModel,i.model);for(var n=0;n<2;++n)for(var o=i.clipBounds[n],s=0;s<3;++s)o[s]=Math.min(Math.max(this.clipBounds[n][s],-1e8),1e8);i.kambient=this.ambientLight,i.kdiffuse=this.diffuseLight,i.kspecular=this.specularLight,i.roughness=this.roughness,i.fresnel=this.fresnel,i.opacity=this.opacity,i.height=0,i.permutation=R,i.vertexColor=this.vertexColor;var a=I;for(p(a,i.view,i.model),p(a,i.projection,a),d(a,a),n=0;n<3;++n)i.eyePosition[n]=a[12+n]/a[15];var h=a[15];for(n=0;n<3;++n)h+=this.lightPosition[n]*a[4*n+3];for(n=0;n<3;++n){var l=a[12+n];for(s=0;s<3;++s)l+=a[4*s+n]*this.lightPosition[s];i.lightPosition[n]=l/h}var u=B(i,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=i,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[n],this._shader.uniforms.clipBounds=u.clipBounds[n],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var f=this._contourShader;i.kambient=1,i.kdiffuse=0,i.kspecular=0,i.opacity=1,f.bind(),f.uniforms=i;var c=this._contourVAO;for(c.bind(),n=0;n<3;++n)for(f.uniforms.permutation=T[n],r.lineWidth(this.contourWidth[n]*this.pixelRatio),s=0;s<this.contourLevels[n].length;++s)s===this.highlightLevel[n]?(f.uniforms.contourColor=this.highlightColor[n],f.uniforms.contourTint=this.highlightTint[n]):0!==s&&s-1!==this.highlightLevel[n]||(f.uniforms.contourColor=this.contourColor[n],f.uniforms.contourTint=this.contourTint[n]),this._contourCounts[n][s]&&(f.uniforms.height=this.contourLevels[n][s],c.draw(r.LINES,this._contourCounts[n][s],this._contourOffsets[n][s]));for(n=0;n<3;++n)for(f.uniforms.model=u.projections[n],f.uniforms.clipBounds=u.clipBounds[n],s=0;s<3;++s)if(this.contourProject[n][s]){f.uniforms.permutation=T[s],r.lineWidth(this.contourWidth[s]*this.pixelRatio);for(var g=0;g<this.contourLevels[s].length;++g)g===this.highlightLevel[s]?(f.uniforms.contourColor=this.highlightColor[s],f.uniforms.contourTint=this.highlightTint[s]):0!==g&&g-1!==this.highlightLevel[s]||(f.uniforms.contourColor=this.contourColor[s],f.uniforms.contourTint=this.contourTint[s]),this._contourCounts[s][g]&&(f.uniforms.height=this.contourLevels[s][g],c.draw(r.LINES,this._contourCounts[s][g],this._contourOffsets[s][g]))}for(c.unbind(),(c=this._dynamicVAO).bind(),n=0;n<3;++n)if(0!==this._dynamicCounts[n])for(f.uniforms.model=i.model,f.uniforms.clipBounds=i.clipBounds,f.uniforms.permutation=T[n],r.lineWidth(this.dynamicWidth[n]*this.pixelRatio),f.uniforms.contourColor=this.dynamicColor[n],f.uniforms.contourTint=this.dynamicTint[n],f.uniforms.height=this.dynamicLevel[n],c.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]),s=0;s<3;++s)this.contourProject[s][n]&&(f.uniforms.model=u.projections[s],f.uniforms.clipBounds=u.clipBounds[s],c.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]));c.unbind()}}O.draw=function(t){return F.call(this,t,!1)},O.drawTransparent=function(t){return F.call(this,t,!0)};var k={model:A,view:A,projection:A,inverseModel:A,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function D(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function N(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function U(t){if(Array.isArray(t)){if(Array.isArray(t))return[N(t[0]),N(t[1]),N(t[2])];var e=N(t);return[e.slice(),e.slice(),e.slice()]}}O.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE);var r=k;r.model=t.model||A,r.view=t.view||A,r.projection=t.projection||A,r.shape=this._field[2].shape,r.pickId=this.pickId/255,r.lowerBound=this.bounds[0],r.upperBound=this.bounds[1],r.objectOffset=this.objectOffset,r.permutation=R;for(var i=0;i<2;++i)for(var n=r.clipBounds[i],o=0;o<3;++o)n[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);var s=B(r,this);if(s.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=r,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&(this._pickShader.uniforms.model=s.projections[i],this._pickShader.uniforms.clipBounds=s.clipBounds[i],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(s.showContour){var a=this._contourPickShader;a.bind(),a.uniforms=r;var h=this._contourVAO;for(h.bind(),o=0;o<3;++o)for(e.lineWidth(this.contourWidth[o]*this.pixelRatio),a.uniforms.permutation=T[o],i=0;i<this.contourLevels[o].length;++i)this._contourCounts[o][i]&&(a.uniforms.height=this.contourLevels[o][i],h.draw(e.LINES,this._contourCounts[o][i],this._contourOffsets[o][i]));for(i=0;i<3;++i)for(a.uniforms.model=s.projections[i],a.uniforms.clipBounds=s.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){a.uniforms.permutation=T[o],e.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var l=0;l<this.contourLevels[o].length;++l)this._contourCounts[o][l]&&(a.uniforms.height=this.contourLevels[o][l],h.draw(e.LINES,this._contourCounts[o][l],this._contourOffsets[o][l]))}h.unbind()}},O.pick=function(t){if(!t)return null;if(t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,i=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,n=Math.floor(i),o=i-n,s=e[1]*(t.value[1]+(15&t.value[2])/16)/255,a=Math.floor(s),h=s-a;n+=1,a+=1;var l=r.position;l[0]=l[1]=l[2]=0;for(var u=0;u<2;++u)for(var f=u?o:1-o,c=0;c<2;++c)for(var p=n+u,d=a+c,v=f*(c?h:1-h),m=0;m<3;++m)l[m]+=this._field[m].get(p,d)*v;for(var x=this._pickResult.level,y=0;y<3;++y)if(x[y]=g.le(this.contourLevels[y],l[y]),x[y]<0)this.contourLevels[y].length>0&&(x[y]=0);else if(x[y]<this.contourLevels[y].length-1){var b=this.contourLevels[y][x[y]],_=this.contourLevels[y][x[y]+1];Math.abs(b-l[y])>Math.abs(_-l[y])&&(x[y]+=1)}for(r.index[0]=o<.5?n:n+1,r.index[1]=h<.5?a:a+1,r.uv[0]=i/e[0],r.uv[1]=s/e[1],m=0;m<3;++m)r.dataCoordinate[m]=this._field[m].get(r.index[0],r.index[1]);return r},O.padField=function(t,e){var r=e.shape.slice(),i=t.shape.slice();l.assign(t.lo(1,1).hi(r[0],r[1]),e),l.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),l.assign(t.lo(1,i[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),l.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),l.assign(t.lo(i[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,i[1]-1,e.get(0,r[1]-1)),t.set(i[0]-1,0,e.get(r[0]-1,0)),t.set(i[0]-1,i[1]-1,e.get(r[0]-1,r[1]-1))},O.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=D(t.contourWidth,Number)),"showContour"in t&&(this.showContour=D(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=D(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=U(t.contourColor)),"contourProject"in t&&(this.contourProject=D(t.contourProject,(function(t){return D(t,Boolean)}))),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=U(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=D(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=D(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var n=(e.shape[0]+2)*(e.shape[1]+2);n>this._field[2].data.length&&(a.freeFloat(this._field[2].data),this._field[2].data=a.mallocFloat(i.nextPow2(n))),this._field[2]=f(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var o=this.shape,s=0;s<2;++s)this._field[2].size>this._field[s].data.length&&(a.freeFloat(this._field[s].data),this._field[s].data=a.mallocFloat(this._field[2].size)),this._field[s]=f(this._field[s].data,[o[0]+2,o[1]+2]);if(t.coords){var h=t.coords;if(!Array.isArray(h)||3!==h.length)throw new Error("gl-surface: invalid coordinates for x/y");for(s=0;s<2;++s){var l=h[s];for(m=0;m<2;++m)if(l.shape[m]!==o[m])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[s],l)}}else if(t.ticks){var u=t.ticks;if(!Array.isArray(u)||2!==u.length)throw new Error("gl-surface: invalid ticks");for(s=0;s<2;++s){var p=u[s];if((Array.isArray(p)||p.length)&&(p=f(p)),p.shape[0]!==o[s])throw new Error("gl-surface: invalid tick length");var d=f(p.data,o);d.stride[s]=p.stride[0],d.stride[1^s]=0,this.padField(this._field[s],d)}}else{for(s=0;s<2;++s){var g=[0,0];g[s]=1,this._field[s]=f(this._field[s].data,[o[0]+2,o[1]+2],g,0)}this._field[0].set(0,0,0);for(var m=0;m<o[0];++m)this._field[0].set(m+1,0,m);for(this._field[0].set(o[0]+1,0,o[0]-1),this._field[1].set(0,0,0),m=0;m<o[1];++m)this._field[1].set(0,m+1,m);this._field[1].set(0,o[1]+1,o[1]-1)}var x=this._field,y=f(a.mallocFloat(3*x[2].size*2),[3,o[0]+2,o[1]+2,2]);for(s=0;s<3;++s)v(y.pick(s),x[s],"mirror");var b=f(a.mallocFloat(3*x[2].size),[o[0]+2,o[1]+2,3]);for(s=0;s<o[0]+2;++s)for(m=0;m<o[1]+2;++m){var _=y.get(0,s,m,0),w=y.get(0,s,m,1),A=y.get(1,s,m,0),T=y.get(1,s,m,1),M=y.get(2,s,m,0),S=y.get(2,s,m,1),P=A*S-T*M,O=M*w-S*_,C=_*T-w*A,j=Math.sqrt(P*P+O*O+C*C);j<1e-8?(j=Math.max(Math.abs(P),Math.abs(O),Math.abs(C)))<1e-8?(C=1,O=P=0,j=1):j=1/j:j=1/Math.sqrt(j),b.set(s,m,0,P*j),b.set(s,m,1,O*j),b.set(s,m,2,C*j)}a.free(y.data);var B=[1/0,1/0,1/0],L=[-1/0,-1/0,-1/0],I=1/0,R=-1/0,F=(o[0]-1)*(o[1]-1)*6,k=a.mallocFloat(i.nextPow2(10*F)),N=0,V=0;for(s=0;s<o[0]-1;++s)t:for(m=0;m<o[1]-1;++m){for(var z=0;z<2;++z)for(var X=0;X<2;++X)for(var W=0;W<3;++W){var G=this._field[W].get(1+s+z,1+m+X);if(isNaN(G)||!isFinite(G))continue t}for(W=0;W<6;++W){var q=s+E[W][0],H=m+E[W][1],Y=this._field[0].get(q+1,H+1),Z=this._field[1].get(q+1,H+1);G=this._field[2].get(q+1,H+1),P=b.get(q+1,H+1,0),O=b.get(q+1,H+1,1),C=b.get(q+1,H+1,2),t.intensity&&(Q=t.intensity.get(q,H));var Q=t.intensity?t.intensity.get(q,H):G+this.objectOffset[2];k[N++]=q,k[N++]=H,k[N++]=Y,k[N++]=Z,k[N++]=G,k[N++]=0,k[N++]=Q,k[N++]=P,k[N++]=O,k[N++]=C,B[0]=Math.min(B[0],Y+this.objectOffset[0]),B[1]=Math.min(B[1],Z+this.objectOffset[1]),B[2]=Math.min(B[2],G+this.objectOffset[2]),I=Math.min(I,Q),L[0]=Math.max(L[0],Y+this.objectOffset[0]),L[1]=Math.max(L[1],Z+this.objectOffset[1]),L[2]=Math.max(L[2],G+this.objectOffset[2]),R=Math.max(R,Q),V+=1}}for(t.intensityBounds&&(I=+t.intensityBounds[0],R=+t.intensityBounds[1]),s=6;s<N;s+=10)k[s]=(k[s]-I)/(R-I);this._vertexCount=V,this._coordinateBuffer.update(k.subarray(0,N)),a.freeFloat(k),a.free(b.data),this.bounds=[B,L],this.intensity=t.intensity||this._field[2],this.intensityBounds[0]===I&&this.intensityBounds[1]===R||(r=!0),this.intensityBounds=[I,R]}if("levels"in t){var K=t.levels;for(K=Array.isArray(K[0])?K.slice():[[],[],K],s=0;s<3;++s)K[s]=K[s].slice(),K[s].sort((function(t,e){return t-e}));for(s=0;s<3;++s)for(m=0;m<K[s].length;++m)K[s][m]-=this.objectOffset[s];t:for(s=0;s<3;++s){if(K[s].length!==this.contourLevels[s].length){r=!0;break}for(m=0;m<K[s].length;++m)if(K[s][m]!==this.contourLevels[s][m]){r=!0;break t}}this.contourLevels=K}if(r){x=this._field,o=this.shape;for(var $=[],J=0;J<3;++J){var tt=this.contourLevels[J],et=[],rt=[],it=[0,0,0];for(s=0;s<tt.length;++s){var nt=c(this._field[J],tt[s]);et.push($.length/5|0),V=0;t:for(m=0;m<nt.cells.length;++m){var ot=nt.cells[m];for(W=0;W<2;++W){var st=nt.positions[ot[W]],at=st[0],ht=0|Math.floor(at),lt=at-ht,ut=st[1],ft=0|Math.floor(ut),ct=ut-ft,pt=!1;e:for(var dt=0;dt<3;++dt){it[dt]=0;var gt=(J+dt+1)%3;for(z=0;z<2;++z){var vt=z?lt:1-lt;for(q=0|Math.min(Math.max(ht+z,0),o[0]),X=0;X<2;++X){var mt=X?ct:1-ct;if(H=0|Math.min(Math.max(ft+X,0),o[1]),G=dt<2?this._field[gt].get(q,H):(this.intensity.get(q,H)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(G)||isNaN(G)){pt=!0;break e}var xt=vt*mt;it[dt]+=xt*G}}}if(pt){if(W>0){for(var yt=0;yt<5;++yt)$.pop();V-=1}continue t}$.push(it[0],it[1],st[0],st[1],it[2]),V+=1}}rt.push(V)}this._contourOffsets[J]=et,this._contourCounts[J]=rt}var bt=a.mallocFloat($.length);for(s=0;s<$.length;++s)bt[s]=$[s];this._contourBuffer.update(bt),a.freeFloat(bt)}},O.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)a.freeFloat(this._field[t].data)},O.highlight=function(t){var e,r;if(!t)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(r=this.snapToData?t.dataCoordinate:t.position,e=0;e<3;++e)r[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var i=0,n=this.shape,o=a.mallocFloat(12*n[0]*n[1]),s=0;s<3;++s)if(this.enableDynamic[s]){this.dynamicLevel[s]=r[s];var h=(s+1)%3,l=(s+2)%3,u=this._field[s],f=this._field[h],p=this._field[l],d=c(u,r[s]),g=d.cells,v=d.positions;for(this._dynamicOffsets[s]=i,e=0;e<g.length;++e)for(var m=g[e],x=0;x<2;++x){var y=v[m[x]],b=+y[0],_=0|b,w=0|Math.min(_+1,n[0]),A=b-_,E=1-A,T=+y[1],M=0|T,S=0|Math.min(M+1,n[1]),P=T-M,O=1-P,C=E*O,j=E*P,B=A*O,L=A*P,I=C*f.get(_,M)+j*f.get(_,S)+B*f.get(w,M)+L*f.get(w,S),R=C*p.get(_,M)+j*p.get(_,S)+B*p.get(w,M)+L*p.get(w,S);if(isNaN(I)||isNaN(R)){x&&(i-=1);break}o[2*i+0]=I,o[2*i+1]=R,i+=1}this._dynamicCounts[s]=i-this._dynamicOffsets[s]}else this.dynamicLevel[s]=NaN,this._dynamicCounts[s]=0;this._dynamicBuffer.update(o.subarray(0,2*i)),a.freeFloat(o)}}},34254:function(t,e,r){"use strict";var i=r(94968),n=r(40973),o=r(1470),s=r(21e3),a=r(33),h=r(81128),l=r(78352),u=r(32237),f=r(94947),c=r(86186),p=r(13531),d=r(47685),g=r(45569),v=r(69726),m=r(62903),x=r(88927),y=r(43863).nextPow2,b=new a,_=!1;if(document.body){var w=document.body.appendChild(document.createElement("div"));w.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(w).fontStretch&&(_=!0),document.body.removeChild(w)}var A=function(t){!function(t){return"function"===typeof t&&t._gl&&t.prop&&t.texture&&t.buffer}(t)?this.gl=s(t):(t={regl:t},this.gl=t.regl._gl),this.shader=b.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=t.regl||o({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),b.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(c(t)?t:{})};A.prototype.createShader=function(){var t=this.regl,e=t({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:t.prop("count"),offset:t.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:t.this("sizeBuffer")},width:{offset:0,stride:8,buffer:t.this("sizeBuffer")},char:t.this("charBuffer"),position:t.this("position")},uniforms:{atlasSize:function(t,e){return[e.atlas.width,e.atlas.height]},atlasDim:function(t,e){return[e.atlas.cols,e.atlas.rows]},atlas:function(t,e){return e.atlas.texture},charStep:function(t,e){return e.atlas.step},em:function(t,e){return e.atlas.em},color:t.prop("color"),opacity:t.prop("opacity"),viewport:t.this("viewportArray"),scale:t.this("scale"),align:t.prop("align"),baseline:t.prop("baseline"),translate:t.this("translate"),positionOffset:t.prop("positionOffset")},primitive:"points",viewport:t.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:t,draw:e,atlas:{}}},A.prototype.update=function(t){var e=this;if("string"===typeof t)t={text:t};else if(!t)return;null!=(t=n(t,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(Array.isArray(t.opacity)?this.opacity=t.opacity.map((function(t){return parseFloat(t)})):this.opacity=parseFloat(t.opacity)),null!=t.viewport&&(this.viewport=f(t.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=t.kerning&&(this.kerning=t.kerning),null!=t.offset&&("number"===typeof t.offset&&(t.offset=[t.offset,0]),this.positionOffset=x(t.offset)),t.direction&&(this.direction=t.direction),t.range&&(this.range=t.range,this.scale=[1/(t.range[2]-t.range[0]),1/(t.range[3]-t.range[1])],this.translate=[-t.range[0],-t.range[1]]),t.scale&&(this.scale=t.scale),t.translate&&(this.translate=t.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||t.font||(t.font=A.baseFontSize+"px sans-serif");var r,o=!1,s=!1;if(t.font&&(Array.isArray(t.font)?t.font:[t.font]).forEach((function(t,r){if("string"===typeof t)try{t=i.parse(t)}catch(f){t=i.parse(A.baseFontSize+"px "+t)}else t=i.parse(i.stringify(t));var n=i.stringify({size:A.baseFontSize,family:t.family,stretch:_?t.stretch:void 0,variant:t.variant,weight:t.weight,style:t.style}),a=p(t.size),h=Math.round(a[0]*d(a[1]));if(h!==e.fontSize[r]&&(s=!0,e.fontSize[r]=h),(!e.font[r]||n!=e.font[r].baseString)&&(o=!0,e.font[r]=A.fonts[n],!e.font[r])){var l=t.family.join(", "),u=[t.style];t.style!=t.variant&&u.push(t.variant),t.variant!=t.weight&&u.push(t.weight),_&&t.weight!=t.stretch&&u.push(t.stretch),e.font[r]={baseString:n,family:l,weight:t.weight,stretch:t.stretch,style:t.style,variant:t.variant,width:{},kerning:{},metrics:m(l,{origin:"top",fontSize:A.baseFontSize,fontStyle:u.join(" ")})},A.fonts[n]=e.font[r]}})),(o||s)&&this.font.forEach((function(r,n){var o=i.stringify({size:e.fontSize[n],family:r.family,stretch:_?r.stretch:void 0,variant:r.variant,weight:r.weight,style:r.style});if(e.fontAtlas[n]=e.shader.atlas[o],!e.fontAtlas[n]){var s=r.metrics;e.shader.atlas[o]=e.fontAtlas[n]={fontString:o,step:2*Math.ceil(e.fontSize[n]*s.bottom*.5),em:e.fontSize[n],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:e.regl.texture()}}null==t.text&&(t.text=e.text)})),"string"===typeof t.text&&t.position&&t.position.length>2){for(var a=Array(.5*t.position.length),c=0;c<a.length;c++)a[c]=t.text;t.text=a}if(null!=t.text||o){if(this.textOffsets=[0],Array.isArray(t.text)){this.count=t.text[0].length,this.counts=[this.count];for(var b=1;b<t.text.length;b++)this.textOffsets[b]=this.textOffsets[b-1]+t.text[b-1].length,this.count+=t.text[b].length,this.counts.push(t.text[b].length);this.text=t.text.join("")}else this.text=t.text,this.count=this.text.length,this.counts=[this.count];r=[],this.font.forEach((function(t,i){A.atlasContext.font=t.baseString;for(var n=e.fontAtlas[i],o=0;o<e.text.length;o++){var s=e.text.charAt(o);if(null==n.ids[s]&&(n.ids[s]=n.chars.length,n.chars.push(s),r.push(s)),null==t.width[s]&&(t.width[s]=A.atlasContext.measureText(s).width/A.baseFontSize,e.kerning)){var a=[];for(var h in t.width)a.push(h+s,s+h);v(t.kerning,g(t.family,{pairs:a}))}}}))}if(t.position)if(t.position.length>2){for(var w=!t.position[0].length,E=u.mallocFloat(2*this.count),T=0,M=0;T<this.counts.length;T++){var S=this.counts[T];if(w)for(var P=0;P<S;P++)E[M++]=t.position[2*T],E[M++]=t.position[2*T+1];else for(var O=0;O<S;O++)E[M++]=t.position[T][0],E[M++]=t.position[T][1]}this.position.call?this.position({type:"float",data:E}):this.position=this.regl.buffer({type:"float",data:E}),u.freeFloat(E)}else this.position.destroy&&this.position.destroy(),this.position={constant:t.position};if(t.text||o){var C=u.mallocUint8(this.count),j=u.mallocFloat(2*this.count);this.textWidth=[];for(var B=0,L=0;B<this.counts.length;B++){for(var I=this.counts[B],R=this.font[B]||this.font[0],F=this.fontAtlas[B]||this.fontAtlas[0],k=0;k<I;k++){var D=this.text.charAt(L),N=this.text.charAt(L-1);if(C[L]=F.ids[D],j[2*L]=R.width[D],k){var U=j[2*L-2],V=j[2*L],z=j[2*L-1]+.5*U+.5*V;if(this.kerning){var X=R.kerning[N+D];X&&(z+=.001*X)}j[2*L+1]=z}else j[2*L+1]=.5*j[2*L];L++}this.textWidth.push(j.length?.5*j[2*L-2]+j[2*L-1]:0)}t.align||(t.align=this.align),this.charBuffer({data:C,type:"uint8",usage:"stream"}),this.sizeBuffer({data:j,type:"float",usage:"stream"}),u.freeUint8(C),u.freeFloat(j),r.length&&this.font.forEach((function(t,r){var i=e.fontAtlas[r],n=i.step,o=Math.floor(A.maxAtlasSize/n),s=Math.min(o,i.chars.length),a=Math.ceil(i.chars.length/s),h=y(s*n),u=y(a*n);i.width=h,i.height=u,i.rows=a,i.cols=s,i.em&&i.texture({data:l({canvas:A.atlasCanvas,font:i.fontString,chars:i.chars,shape:[h,u],step:[n,n]})})}))}if(t.align&&(this.align=t.align,this.alignOffset=this.textWidth.map((function(t,r){var i=Array.isArray(e.align)?e.align.length>1?e.align[r]:e.align[0]:e.align;if("number"===typeof i)return i;switch(i){case"right":case"end":return-t;case"center":case"centre":case"middle":return.5*-t}return 0}))),null==this.baseline&&null==t.baseline&&(t.baseline=0),null!=t.baseline&&(this.baseline=t.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map((function(t,r){var i=(e.font[r]||e.font[0]).metrics,n=0;return n+=.5*i.bottom,n+="number"===typeof t?t-i.baseline:-i[t],n*=-1}))),null!=t.color)if(t.color||(t.color="transparent"),"string"!==typeof t.color&&isNaN(t.color)){var W;if("number"===typeof t.color[0]&&t.color.length>this.counts.length){var G=t.color.length;W=u.mallocUint8(G);for(var q=(t.color.subarray||t.color.slice).bind(t.color),H=0;H<G;H+=4)W.set(h(q(H,H+4),"uint8"),H)}else{var Y=t.color.length;W=u.mallocUint8(4*Y);for(var Z=0;Z<Y;Z++)W.set(h(t.color[Z]||0,"uint8"),4*Z)}this.color=W}else this.color=h(t.color,"uint8");if(t.position||t.text||t.color||t.baseline||t.align||t.font||t.offset||t.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Q=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Q);for(var K=0;K<this.batch.length;K++)this.batch[K]={count:this.counts.length>1?this.counts[K]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[K]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*K,4*K+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[K]:this.opacity,baseline:null!=this.baselineOffset[K]?this.baselineOffset[K]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[K]?this.alignOffset[K]:this.alignOffset[0]:0,atlas:this.fontAtlas[K]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*K,2*K+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},t.exports=A},89407:function(t,e,r){"use strict";var i=r(75501),n=r(45229),o=r(32237);t.exports=function(t){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");s||function(t){s=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],a=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],h=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]}(t);if("number"===typeof arguments[1])return v(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return v(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var e=arguments[1],r=l(e)?e:e.raw;if(r)return function(t,e,r,i,n,o){var s=g(t);return t.texImage2D(t.TEXTURE_2D,0,n,n,o,e),new c(t,s,r,i,n,o)}(t,r,0|e.width,0|e.height,arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if(e.shape&&e.data&&e.stride)return function(t,e){var r=e.dtype,s=e.shape.slice(),a=t.getParameter(t.MAX_TEXTURE_SIZE);if(s[0]<0||s[0]>a||s[1]<0||s[1]>a)throw new Error("gl-texture2d: Invalid texture size");var h=d(s,e.stride.slice()),l=0;"float32"===r?l=t.FLOAT:"float64"===r?(l=t.FLOAT,h=!1,r="float32"):"uint8"===r?l=t.UNSIGNED_BYTE:(l=t.UNSIGNED_BYTE,h=!1,r="uint8");var f,p,v=0;if(2===s.length)v=t.LUMINANCE,s=[s[0],s[1],1],e=i(e.data,s,[e.stride[0],e.stride[1],1],e.offset);else{if(3!==s.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===s[2])v=t.ALPHA;else if(2===s[2])v=t.LUMINANCE_ALPHA;else if(3===s[2])v=t.RGB;else{if(4!==s[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}}l!==t.FLOAT||t.getExtension("OES_texture_float")||(l=t.UNSIGNED_BYTE,h=!1);var m=e.size;if(h)f=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var x=[s[2],s[2]*s[0],1];p=o.malloc(m,r);var y=i(p,s,x,0);"float32"!==r&&"float64"!==r||l!==t.UNSIGNED_BYTE?n.assign(y,e):u(y,e),f=p.subarray(0,m)}var b=g(t);t.texImage2D(t.TEXTURE_2D,0,v,s[0],s[1],0,v,l,f),h||o.free(p);return new c(t,b,s[0],s[1],v,l)}(t,e)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var s=null,a=null,h=null;function l(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var u=function(t,e){n.muls(t,e,255)};function f(t,e,r){var i=t.gl,n=i.getParameter(i.MAX_TEXTURE_SIZE);if(e<0||e>n||r<0||r>n)throw new Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),i.texImage2D(i.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function c(t,e,r,i,n,o){this.gl=t,this.handle=e,this.format=n,this.type=o,this._shape=[r,i],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var s=this,a=[this._wrapS,this._wrapT];Object.defineProperties(a,[{get:function(){return s._wrapS},set:function(t){return s.wrapS=t}},{get:function(){return s._wrapT},set:function(t){return s.wrapT=t}}]),this._wrapVector=a;var h=[this._shape[0],this._shape[1]];Object.defineProperties(h,[{get:function(){return s._shape[0]},set:function(t){return s.width=t}},{get:function(){return s._shape[1]},set:function(t){return s.height=t}}]),this._shapeVector=h}var p=c.prototype;function d(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function g(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function v(t,e,r,i,n){var o=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>o||r<0||r>o)throw new Error("gl-texture2d: Invalid texture shape");if(n===t.FLOAT&&!t.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var s=g(t);return t.texImage2D(t.TEXTURE_2D,0,i,e,r,0,i,n,null),new c(t,s,e,r,i,n)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&s.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),a.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&s.indexOf(t)>=0&&(e.getExtension("OES_texture_float_linear")||(t=e.NEAREST)),a.indexOf(t)<0)throw new Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),h.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),h.indexOf(t)<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(h.indexOf(t[e])<0)throw new Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw new Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return f(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return f(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,f(this,this._shape[0],t),t}}}),p.bind=function(t){var e=this.gl;return void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)this._mipLevels.indexOf(e)<0&&this._mipLevels.push(e)},p.setPixels=function(t,e,r,s){var a=this.gl;this.bind(),Array.isArray(e)?(s=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),s=s||0;var h=l(t)?t:t.raw;if(h){this._mipLevels.indexOf(s)<0?(a.texImage2D(a.TEXTURE_2D,0,this.format,this.format,this.type,h),this._mipLevels.push(s)):a.texSubImage2D(a.TEXTURE_2D,s,e,r,this.format,this.type,h)}else{if(!(t.shape&&t.stride&&t.data))throw new Error("gl-texture2d: Unsupported data type");if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>s||r+t.shape[0]>this._shape[0]>>>s||e<0||r<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(t,e,r,s,a,h,l,f){var c=f.dtype,p=f.shape.slice();if(p.length<2||p.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var g=0,v=0,m=d(p,f.stride.slice());"float32"===c?g=t.FLOAT:"float64"===c?(g=t.FLOAT,m=!1,c="float32"):"uint8"===c?g=t.UNSIGNED_BYTE:(g=t.UNSIGNED_BYTE,m=!1,c="uint8");if(2===p.length)v=t.LUMINANCE,p=[p[0],p[1],1],f=i(f.data,p,[f.stride[0],f.stride[1],1],f.offset);else{if(3!==p.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===p[2])v=t.ALPHA;else if(2===p[2])v=t.LUMINANCE_ALPHA;else if(3===p[2])v=t.RGB;else{if(4!==p[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");v=t.RGBA}p[2]}v!==t.LUMINANCE&&v!==t.ALPHA||a!==t.LUMINANCE&&a!==t.ALPHA||(v=a);if(v!==a)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var x=f.size,y=l.indexOf(s)<0;y&&l.push(s);if(g===h&&m)0===f.offset&&f.data.length===x?y?t.texImage2D(t.TEXTURE_2D,s,a,p[0],p[1],0,a,h,f.data):t.texSubImage2D(t.TEXTURE_2D,s,e,r,p[0],p[1],a,h,f.data):y?t.texImage2D(t.TEXTURE_2D,s,a,p[0],p[1],0,a,h,f.data.subarray(f.offset,f.offset+x)):t.texSubImage2D(t.TEXTURE_2D,s,e,r,p[0],p[1],a,h,f.data.subarray(f.offset,f.offset+x));else{var b;b=h===t.FLOAT?o.mallocFloat32(x):o.mallocUint8(x);var _=i(b,p,[p[2],p[2]*p[0],1]);g===t.FLOAT&&h===t.UNSIGNED_BYTE?u(_,f):n.assign(_,f),y?t.texImage2D(t.TEXTURE_2D,s,a,p[0],p[1],0,a,h,b.subarray(0,x)):t.texSubImage2D(t.TEXTURE_2D,s,e,r,p[0],p[1],a,h,b.subarray(0,x)),h===t.FLOAT?o.freeFloat32(b):o.freeUint8(b)}}(a,e,r,s,this.format,this.type,this._mipLevels,t)}}},21e3:function(t,e,r){"use strict";var i=r(40973);function n(t){if(t.container)if(t.container==document.body)document.body.style.width||(t.canvas.width=t.width||t.pixelRatio*r.g.innerWidth),document.body.style.height||(t.canvas.height=t.height||t.pixelRatio*r.g.innerHeight);else{var e=t.container.getBoundingClientRect();t.canvas.width=t.width||e.right-e.left,t.canvas.height=t.height||e.bottom-e.top}}function o(t){return"function"===typeof t.getContext&&"width"in t&&"height"in t}function s(){var t=document.createElement("canvas");return t.style.position="absolute",t.style.top=0,t.style.left=0,t}t.exports=function(t){var e;if(t?"string"===typeof t&&(t={container:t}):t={},o(t)?t={container:t}:t="string"===typeof(e=t).nodeName&&"function"===typeof e.appendChild&&"function"===typeof e.getBoundingClientRect?{container:t}:function(t){return"function"===typeof t.drawArrays||"function"===typeof t.drawElements}(t)?{gl:t}:i(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=r.g.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if("string"===typeof t.container){var a=document.querySelector(t.container);if(!a)throw Error("Element "+t.container+" is not found");t.container=a}o(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=s(),t.container.appendChild(t.canvas),n(t))}else if(!t.canvas){if("undefined"===typeof document)throw Error("Not DOM environment. Use headless-gl.");t.container=document.body||document.documentElement,t.canvas=s(),t.container.appendChild(t.canvas),n(t)}return t.gl||["webgl","experimental-webgl","webgl-experimental"].some((function(r){try{t.gl=t.canvas.getContext(r,t.attrs)}catch(e){}return t.gl})),t.gl}},60096:function(t){"use strict";t.exports=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var i=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>i)throw new Error("gl-vao: Too many vertex attributes");for(var n=0;n<r.length;++n){var o=r[n];if(o.buffer){var s=o.buffer,a=o.size||4,h=o.type||t.FLOAT,l=!!o.normalized,u=o.stride||0,f=o.offset||0;s.bind(),t.enableVertexAttribArray(n),t.vertexAttribPointer(n,a,h,l,u,f)}else{if("number"===typeof o)t.vertexAttrib1f(n,o);else if(1===o.length)t.vertexAttrib1f(n,o[0]);else if(2===o.length)t.vertexAttrib2f(n,o[0],o[1]);else if(3===o.length)t.vertexAttrib3f(n,o[0],o[1],o[2]);else{if(4!==o.length)throw new Error("gl-vao: Invalid vertex attribute");t.vertexAttrib4f(n,o[0],o[1],o[2],o[3])}t.disableVertexAttribArray(n)}}for(;n<i;++n)t.disableVertexAttribArray(n)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(n=0;n<i;++n)t.disableVertexAttribArray(n)}}},71277:function(t,e,r){"use strict";var i=r(60096);function n(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){i(this.gl,this._elements,this._attributes)},n.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},n.prototype.dispose=function(){},n.prototype.unbind=function(){},n.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._elements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},t.exports=function(t){return new n(t)}},93157:function(t,e,r){"use strict";var i=r(60096);function n(t,e,r,i,n,o){this.location=t,this.dimension=e,this.a=r,this.b=i,this.c=n,this.d=o}function o(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},o.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},o.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},o.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},o.prototype.update=function(t,e,r){if(this.bind(),i(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var s=t[o];"number"===typeof s?this._attribs.push(new n(o,1,s)):Array.isArray(s)&&this._attribs.push(new n(o,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},o.prototype.draw=function(t,e,r){r=r||0;var i=this.gl;this._useElements?i.drawElements(t,e,this._elementsType,r):i.drawArrays(t,r,e)},t.exports=function(t,e){return new o(t,e,e.createVertexArrayOES())}},66405:function(t,e,r){"use strict";var i=r(93157),n=r(71277);function o(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}t.exports=function(t,e,r,s){var a,h=t.createVertexArray?new o(t):t.getExtension("OES_vertex_array_object");return(a=h?i(t,h):n(t)).update(e,r,s),a}},55879:function(t){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}},54995:function(t,e,r){t.exports=function(t,e){var r=i(t[0],t[1],t[2]),s=i(e[0],e[1],e[2]);n(r,r),n(s,s);var a=o(r,s);return a>1?0:Math.acos(a)};var i=r(12268),n=r(16543),o=r(16283)},24163:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},15985:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},62679:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},30218:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},8156:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=r[0],a=r[1],h=r[2];return t[0]=n*h-o*a,t[1]=o*s-i*h,t[2]=i*a-n*s,t}},622:function(t,e,r){t.exports=r(91249)},91249:function(t){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}},96323:function(t,e,r){t.exports=r(55800)},55800:function(t){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}},16283:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},64714:function(t){t.exports=1e-6},32103:function(t,e,r){t.exports=function(t,e){var r=t[0],n=t[1],o=t[2],s=e[0],a=e[1],h=e[2];return Math.abs(r-s)<=i*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=i*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-h)<=i*Math.max(1,Math.abs(o),Math.abs(h))};var i=r(64714)},37994:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},39626:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},46270:function(t,e,r){t.exports=function(t,e,r,n,o,s){var a,h;e||(e=3);r||(r=0);h=n?Math.min(n*e+r,t.length):t.length;for(a=r;a<h;a+=e)i[0]=t[a],i[1]=t[a+1],i[2]=t[a+2],o(i,i,s),t[a]=i[0],t[a+1]=i[1],t[a+2]=i[2];return t};var i=r(30218)()},12268:function(t){t.exports=function(t,e,r){var i=new Float32Array(3);return i[0]=t,i[1]=e,i[2]=r,i}},684:function(t,e,r){t.exports={EPSILON:r(64714),create:r(30218),clone:r(15985),angle:r(54995),fromValues:r(12268),copy:r(62679),set:r(1860),equals:r(32103),exactEquals:r(37994),add:r(55879),subtract:r(62630),sub:r(35842),multiply:r(8338),mul:r(94342),divide:r(55800),div:r(96323),min:r(4960),max:r(61182),floor:r(39626),ceil:r(24163),round:r(65116),scale:r(39382),scaleAndAdd:r(761),distance:r(91249),dist:r(622),squaredDistance:r(36122),sqrDist:r(74114),length:r(89730),len:r(88351),squaredLength:r(67009),sqrLen:r(2275),negate:r(38940),inverse:r(80260),normalize:r(16543),dot:r(16283),cross:r(8156),lerp:r(11075),random:r(59505),transformMat4:r(71806),transformMat3:r(59423),transformQuat:r(40863),rotateX:r(96365),rotateY:r(63406),rotateZ:r(70507),forEach:r(46270)}},80260:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},88351:function(t,e,r){t.exports=r(89730)},89730:function(t){t.exports=function(t){var e=t[0],r=t[1],i=t[2];return Math.sqrt(e*e+r*r+i*i)}},11075:function(t){t.exports=function(t,e,r,i){var n=e[0],o=e[1],s=e[2];return t[0]=n+i*(r[0]-n),t[1]=o+i*(r[1]-o),t[2]=s+i*(r[2]-s),t}},61182:function(t){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}},4960:function(t){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}},94342:function(t,e,r){t.exports=r(8338)},8338:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}},38940:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},16543:function(t){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=r*r+i*i+n*n;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o);return t}},59505:function(t){t.exports=function(t,e){e=e||1;var r=2*Math.random()*Math.PI,i=2*Math.random()-1,n=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*n,t[1]=Math.sin(r)*n,t[2]=i*e,t}},96365:function(t){t.exports=function(t,e,r,i){var n=r[1],o=r[2],s=e[1]-n,a=e[2]-o,h=Math.sin(i),l=Math.cos(i);return t[0]=e[0],t[1]=n+s*l-a*h,t[2]=o+s*h+a*l,t}},63406:function(t){t.exports=function(t,e,r,i){var n=r[0],o=r[2],s=e[0]-n,a=e[2]-o,h=Math.sin(i),l=Math.cos(i);return t[0]=n+a*h+s*l,t[1]=e[1],t[2]=o+a*l-s*h,t}},70507:function(t){t.exports=function(t,e,r,i){var n=r[0],o=r[1],s=e[0]-n,a=e[1]-o,h=Math.sin(i),l=Math.cos(i);return t[0]=n+s*l-a*h,t[1]=o+s*h+a*l,t[2]=e[2],t}},65116:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},39382:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}},761:function(t){t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t}},1860:function(t){t.exports=function(t,e,r,i){return t[0]=e,t[1]=r,t[2]=i,t}},74114:function(t,e,r){t.exports=r(36122)},2275:function(t,e,r){t.exports=r(67009)},36122:function(t){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2];return r*r+i*i+n*n}},67009:function(t){t.exports=function(t){var e=t[0],r=t[1],i=t[2];return e*e+r*r+i*i}},35842:function(t,e,r){t.exports=r(62630)},62630:function(t){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},59423:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2];return t[0]=i*r[0]+n*r[3]+o*r[6],t[1]=i*r[1]+n*r[4]+o*r[7],t[2]=i*r[2]+n*r[5]+o*r[8],t}},71806:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=r[3]*i+r[7]*n+r[11]*o+r[15];return s=s||1,t[0]=(r[0]*i+r[4]*n+r[8]*o+r[12])/s,t[1]=(r[1]*i+r[5]*n+r[9]*o+r[13])/s,t[2]=(r[2]*i+r[6]*n+r[10]*o+r[14])/s,t}},40863:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=r[0],a=r[1],h=r[2],l=r[3],u=l*i+a*o-h*n,f=l*n+h*i-s*o,c=l*o+s*n-a*i,p=-s*i-a*n-h*o;return t[0]=u*l+p*-s+f*-h-c*-a,t[1]=f*l+p*-a+c*-s-u*-h,t[2]=c*l+p*-h+u*-a-f*-s,t}},70498:function(t){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}},24804:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},84764:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},10833:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},9242:function(t){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+i*i+n*n+o*o)}},27988:function(t){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}},37018:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},89091:function(t){t.exports=function(t,e,r,i){var n=new Float32Array(4);return n[0]=t,n[1]=e,n[2]=r,n[3]=i,n}},54713:function(t,e,r){t.exports={create:r(10833),clone:r(24804),fromValues:r(89091),copy:r(84764),set:r(17237),add:r(70498),subtract:r(82945),multiply:r(597),divide:r(27988),min:r(80065),max:r(56115),scale:r(31927),scaleAndAdd:r(43303),distance:r(9242),squaredDistance:r(96015),length:r(36129),squaredLength:r(26924),negate:r(82523),inverse:r(29965),normalize:r(74858),dot:r(37018),lerp:r(508),random:r(3910),transformMat4:r(35083),transformQuat:r(88074)}},29965:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},36129:function(t){t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return Math.sqrt(e*e+r*r+i*i+n*n)}},508:function(t){t.exports=function(t,e,r,i){var n=e[0],o=e[1],s=e[2],a=e[3];return t[0]=n+i*(r[0]-n),t[1]=o+i*(r[1]-o),t[2]=s+i*(r[2]-s),t[3]=a+i*(r[3]-a),t}},56115:function(t){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}},80065:function(t){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}},597:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}},82523:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},74858:function(t){t.exports=function(t,e){var r=e[0],i=e[1],n=e[2],o=e[3],s=r*r+i*i+n*n+o*o;s>0&&(s=1/Math.sqrt(s),t[0]=r*s,t[1]=i*s,t[2]=n*s,t[3]=o*s);return t}},3910:function(t,e,r){var i=r(74858),n=r(31927);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),i(t,t),n(t,t,e),t}},31927:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}},43303:function(t){t.exports=function(t,e,r,i){return t[0]=e[0]+r[0]*i,t[1]=e[1]+r[1]*i,t[2]=e[2]+r[2]*i,t[3]=e[3]+r[3]*i,t}},17237:function(t){t.exports=function(t,e,r,i,n){return t[0]=e,t[1]=r,t[2]=i,t[3]=n,t}},96015:function(t){t.exports=function(t,e){var r=e[0]-t[0],i=e[1]-t[1],n=e[2]-t[2],o=e[3]-t[3];return r*r+i*i+n*n+o*o}},26924:function(t){t.exports=function(t){var e=t[0],r=t[1],i=t[2],n=t[3];return e*e+r*r+i*i+n*n}},82945:function(t){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}},35083:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=e[3];return t[0]=r[0]*i+r[4]*n+r[8]*o+r[12]*s,t[1]=r[1]*i+r[5]*n+r[9]*o+r[13]*s,t[2]=r[2]*i+r[6]*n+r[10]*o+r[14]*s,t[3]=r[3]*i+r[7]*n+r[11]*o+r[15]*s,t}},88074:function(t){t.exports=function(t,e,r){var i=e[0],n=e[1],o=e[2],s=r[0],a=r[1],h=r[2],l=r[3],u=l*i+a*o-h*n,f=l*n+h*i-s*o,c=l*o+s*n-a*i,p=-s*i-a*n-h*o;return t[0]=u*l+p*-s+f*-h-c*-a,t[1]=f*l+p*-a+c*-s-u*-h,t[2]=c*l+p*-h+u*-a-f*-s,t[3]=e[3],t}},28937:function(t,e,r){var i=r(60674),n=r(83997);t.exports=function(t){for(var e=Array.isArray(t)?t:i(t),r=0;r<e.length;r++){var o=e[r];if("preprocessor"===o.type){var s=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(s&&s[2]){var a=s[1],h=s[2];return(a?n(h):h).trim()}}}}},20939:function(t,e,r){t.exports=function(t){var e,r,A,E=0,T=0,M=h,S=[],P=[],O=1,C=0,j=0,B=!1,L=!1,I="",R=o,F=i;"300 es"===(t=t||{}).version&&(R=a,F=s);var k={},D={};for(E=0;E<R.length;E++)k[R[E]]=!0;for(E=0;E<F.length;E++)D[F[E]]=!0;return function(t){return P=[],null!==t?function(t){E=0,t.toString&&(t=t.toString());var r;I+=t.replace(/\r\n/g,"\n"),A=I.length;for(;e=I[E],E<A;){switch(r=E,M){case u:E=W();break;case f:E=X();break;case c:E=z();break;case p:E=G();break;case d:E=Y();break;case _:E=H();break;case g:E=Z();break;case l:E=Q();break;case y:E=V();break;case h:E=U()}if(r!==E)if("\n"===I[r])C=0,++O;else++C}return T+=E,I=I.slice(E),P}(t):function(t){S.length&&N(S.join(""));return M=b,N("(eof)"),P}()};function N(t){t.length&&P.push({type:w[M],data:t,position:j,line:O,column:C})}function U(){return S=S.length?[]:S,"/"===r&&"*"===e?(j=T+E-1,M=u,r=e,E+1):"/"===r&&"/"===e?(j=T+E-1,M=f,r=e,E+1):"#"===e?(M=c,j=T+E,E):/\s/.test(e)?(M=y,j=T+E,E):(B=/\d/.test(e),L=/[^\w_]/.test(e),j=T+E,M=B?d:L?p:l,E)}function V(){return/[^\s]/g.test(e)?(N(S.join("")),M=h,E):(S.push(e),r=e,E+1)}function z(){return"\r"!==e&&"\n"!==e||"\\"===r?(S.push(e),r=e,E+1):(N(S.join("")),M=h,E)}function X(){return z()}function W(){return"/"===e&&"*"===r?(S.push(e),N(S.join("")),M=h,E+1):(S.push(e),r=e,E+1)}function G(){if("."===r&&/\d/.test(e))return M=g,E;if("/"===r&&"*"===e)return M=u,E;if("/"===r&&"/"===e)return M=f,E;if("."===e&&S.length){for(;q(S););return M=g,E}if(";"===e||")"===e||"("===e){if(S.length)for(;q(S););return N(e),M=h,E+1}var t=2===S.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;q(S););return M=h,E}return S.push(e),r=e,E+1}function q(t){for(var e,r,i=0;;){if(e=n.indexOf(t.slice(0,t.length+i).join("")),r=n[e],-1===e){if(i--+t.length>0)continue;r=t.slice(0,1).join("")}return N(r),j+=r.length,(S=S.slice(r.length)).length}}function H(){return/[^a-fA-F0-9]/.test(e)?(N(S.join("")),M=h,E):(S.push(e),r=e,E+1)}function Y(){return"."===e||/[eE]/.test(e)?(S.push(e),M=g,r=e,E+1):"x"===e&&1===S.length&&"0"===S[0]?(M=_,S.push(e),r=e,E+1):/[^\d]/.test(e)?(N(S.join("")),M=h,E):(S.push(e),r=e,E+1)}function Z(){return"f"===e&&(S.push(e),r=e,E+=1),/[eE]/.test(e)?(S.push(e),r=e,E+1):("-"!==e&&"+"!==e||!/[eE]/.test(r))&&/[^\d]/.test(e)?(N(S.join("")),M=h,E):(S.push(e),r=e,E+1)}function Q(){if(/[^\d\w_]/.test(e)){var t=S.join("");return M=D[t]?x:k[t]?m:v,N(S.join("")),M=h,E}return S.push(e),r=e,E+1}};var i=r(58243),n=r(35794),o=r(46835),s=r(14152),a=r(33035),h=999,l=9999,u=0,f=1,c=2,p=3,d=4,g=5,v=6,m=7,x=8,y=9,b=10,_=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},33035:function(t,e,r){var i=r(46835);i=i.slice().filter((function(t){return!/^(gl\_|texture)/.test(t)})),t.exports=i.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},46835:function(t){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},14152:function(t,e,r){var i=r(58243);t.exports=i.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},58243:function(t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},35794:function(t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},60674:function(t,e,r){var i=r(20939);t.exports=function(t,e){var r=i(e),n=[];return n=(n=n.concat(r(t))).concat(r(null))}},14955:function(t){t.exports=function(t){"string"===typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],i=0;i<t.length-1;i++)r.push(t[i],e[i]||"");return r.push(t[i]),r.join("")}},66982:function(t,e,r){"use strict";var i,n=r(13195);i="function"===typeof r.g.matchMedia?!r.g.matchMedia("(hover: none)").matches:n,t.exports=i},473:function(t,e,r){"use strict";var i=r(13195);t.exports=i&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(r){t=!1}return t}()},39954:function(t){"use strict";t.exports=function(t,r){var i,n,o,s=t||"",a=r||"div",h={},l=0;for(;l<s.length;)e.lastIndex=l,o=e.exec(s),(i=s.slice(l,o?o.index:s.length))&&(n?"#"===n?h.id=i:h.className?h.className.push(i):h.className=[i]:a=i,l+=i.length),o&&(n=o[0],l++);return{type:"element",tagName:a,properties:h,children:[]}};var e=/[#.]/g},33009:function(t,e,r){"use strict";t.exports=function(t,e){var r=t.length;if(0===r)throw new Error("Must have at least d+1 points");var n=t[0].length;if(r<=n)throw new Error("Must input at least d+1 points");var s=t.slice(0,n+1),a=i.apply(void 0,s);if(0===a)throw new Error("Input not in general position");for(var h=new Array(n+1),u=0;u<=n;++u)h[u]=u;a<0&&(h[0]=1,h[1]=0);var f=new o(h,new Array(n+1),!1),c=f.adjacent,p=new Array(n+2);for(u=0;u<=n;++u){for(var d=h.slice(),g=0;g<=n;++g)g===u&&(d[g]=-1);var v=d[0];d[0]=d[1],d[1]=v;var m=new o(d,new Array(n+1),!0);c[u]=m,p[u]=m}p[n+1]=f;for(u=0;u<=n;++u){d=c[u].vertices;var x=c[u].adjacent;for(g=0;g<=n;++g){var y=d[g];if(y<0)x[g]=f;else for(var b=0;b<=n;++b)c[b].vertices.indexOf(y)<0&&(x[g]=c[b])}}var _=new l(n,s,p),w=!!e;for(u=n+1;u<r;++u)_.insert(t[u],w);return _.boundary()};var i=r(30223),n=r(46312).Fw;function o(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function s(t,e,r){this.vertices=t,this.cell=e,this.index=r}function a(t,e){return n(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var h=[];function l(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter((function(t){return!t.boundary})),this.tuple=new Array(t+1);for(var n=0;n<=t;++n)this.tuple[n]=this.vertices[n];var o=h[t];o||(o=h[t]=function(t){for(var e=["function orient(){var tuple=this.tuple;return test("],r=0;r<=t;++r)r>0&&e.push(","),e.push("tuple[",r,"]");e.push(")}return orient");var n=new Function("test",e.join("")),o=i[t+1];return o||(o=i),n(o)}(t)),this.orient=o}var u=l.prototype;u.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,i=this.vertices.length-1,n=this.tuple,o=this.vertices,s=[t];for(t.lastVisited=-i;s.length>0;){(t=s.pop()).vertices;for(var a=t.adjacent,h=0;h<=r;++h){var l=a[h];if(l.boundary&&!(l.lastVisited<=-i)){for(var u=l.vertices,f=0;f<=r;++f){var c=u[f];n[f]=c<0?e:o[c]}var p=this.orient();if(p>0)return l;l.lastVisited=-i,0===p&&s.push(l)}}}return null},u.walk=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,o=this.tuple,s=e?this.interior.length*Math.random()|0:this.interior.length-1,a=this.interior[s];t:for(;!a.boundary;){for(var h=a.vertices,l=a.adjacent,u=0;u<=i;++u)o[u]=n[h[u]];a.lastVisited=r;for(u=0;u<=i;++u){var f=l[u];if(!(f.lastVisited>=r)){var c=o[u];o[u]=t;var p=this.orient();if(o[u]=c,p<0){a=f;continue t}f.boundary?f.lastVisited=-r:f.lastVisited=r}}return}return a},u.addPeaks=function(t,e){var r=this.vertices.length-1,i=this.dimension,n=this.vertices,h=this.tuple,l=this.interior,u=this.simplices,f=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,l.push(e);for(var c=[];f.length>0;){var p=(e=f.pop()).vertices,d=e.adjacent,g=p.indexOf(r);if(!(g<0))for(var v=0;v<=i;++v)if(v!==g){var m=d[v];if(m.boundary&&!(m.lastVisited>=r)){var x=m.vertices;if(m.lastVisited!==-r){for(var y=0,b=0;b<=i;++b)x[b]<0?(y=b,h[b]=t):h[b]=n[x[b]];if(this.orient()>0){x[y]=r,m.boundary=!1,l.push(m),f.push(m),m.lastVisited=r;continue}m.lastVisited=-r}var _=m.adjacent,w=p.slice(),A=d.slice(),E=new o(w,A,!0);u.push(E);var T=_.indexOf(e);if(!(T<0)){_[T]=E,A[g]=m,w[v]=-1,A[v]=e,d[v]=E,E.flip();for(b=0;b<=i;++b){var M=w[b];if(!(M<0||M===r)){for(var S=new Array(i-1),P=0,O=0;O<=i;++O){var C=w[O];C<0||O===b||(S[P++]=C)}c.push(new s(S,E,b))}}}}}}c.sort(a);for(v=0;v+1<c.length;v+=2){var j=c[v],B=c[v+1],L=j.index,I=B.index;L<0||I<0||(j.cell.adjacent[j.index]=B.cell,B.cell.adjacent[B.index]=j.cell)}},u.insert=function(t,e){var r=this.vertices;r.push(t);var i=this.walk(t,e);if(i){for(var n=this.dimension,o=this.tuple,s=0;s<=n;++s){var a=i.vertices[s];o[s]=a<0?t:r[a]}var h=this.orient(o);h<0||(0!==h||(i=this.handleBoundaryDegeneracy(i,t)))&&this.addPeaks(t,i)}},u.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,i=r.length,n=0;n<i;++n){var o=r[n];if(o.boundary){for(var s=new Array(t),a=o.vertices,h=0,l=0,u=0;u<=t;++u)a[u]>=0?s[h++]=a[u]:l=1&u;if(l===(1&t)){var f=s[0];s[0]=s[1],s[1]=f}e.push(s)}}return e}},28724:function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}}},44965:function(t,e,r){"use strict";var i=r(62683);function n(t,e,r,i,n){this.mid=t,this.left=e,this.right=r,this.leftPoints=i,this.rightPoints=n,this.count=(e?e.count:0)+(r?r.count:0)+i.length}t.exports=function(t){if(!t||0===t.length)return new m(null);return new m(v(t))};var o=n.prototype;function s(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function a(t,e){var r=v(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function h(t,e){var r=t.intervals([]);r.push(e),a(t,r)}function l(t,e){var r=t.intervals([]),i=r.indexOf(e);return i<0?0:(r.splice(i,1),a(t,r),1)}function u(t,e,r){for(var i=0;i<t.length&&t[i][0]<=e;++i){var n=r(t[i]);if(n)return n}}function f(t,e,r){for(var i=t.length-1;i>=0&&t[i][1]>=e;--i){var n=r(t[i]);if(n)return n}}function c(t,e){for(var r=0;r<t.length;++r){var i=e(t[r]);if(i)return i}}function p(t,e){return t-e}function d(t,e){var r=t[0]-e[0];return r||t[1]-e[1]}function g(t,e){var r=t[1]-e[1];return r||t[0]-e[0]}function v(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(p);var i=e[e.length>>1],o=[],s=[],a=[];for(r=0;r<t.length;++r){var h=t[r];h[1]<i?o.push(h):i<h[0]?s.push(h):a.push(h)}var l=a,u=a.slice();return l.sort(d),u.sort(g),new n(i,v(o),v(s),l,u)}function m(t){this.root=t}o.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},o.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?h(this,t):this.left.insert(t):this.left=v([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?h(this,t):this.right.insert(t):this.right=v([t]);else{var r=i.ge(this.leftPoints,t,d),n=i.ge(this.rightPoints,t,g);this.leftPoints.splice(r,0,t),this.rightPoints.splice(n,0,t)}},o.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(e-1)?l(this,t):2===(a=this.left.remove(t))?(this.left=null,this.count-=1,1):(1===a&&(this.count-=1),a):0;if(t[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(e-1)?l(this,t):2===(a=this.right.remove(t))?(this.right=null,this.count-=1,1):(1===a&&(this.count-=1),a):0;if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var r=this,n=this.left;n.right;)r=n,n=n.right;if(r===this)n.right=this.right;else{var o=this.left,a=this.right;r.count-=n.count,r.right=n.left,n.left=o,n.right=a}s(this,n),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?s(this,this.left):s(this,this.right);return 1}for(o=i.ge(this.leftPoints,t,d);o<this.leftPoints.length&&this.leftPoints[o][0]===t[0];++o)if(this.leftPoints[o]===t){this.count-=1,this.leftPoints.splice(o,1);for(a=i.ge(this.rightPoints,t,g);a<this.rightPoints.length&&this.rightPoints[a][1]===t[1];++a)if(this.rightPoints[a]===t)return this.rightPoints.splice(a,1),1}return 0},o.queryPoint=function(t,e){if(t<this.mid){if(this.left)if(r=this.left.queryPoint(t,e))return r;return u(this.leftPoints,t,e)}if(t>this.mid){var r;if(this.right)if(r=this.right.queryPoint(t,e))return r;return f(this.rightPoints,t,e)}return c(this.leftPoints,e)},o.queryInterval=function(t,e,r){var i;if(t<this.mid&&this.left&&(i=this.left.queryInterval(t,e,r)))return i;if(e>this.mid&&this.right&&(i=this.right.queryInterval(t,e,r)))return i;return e<this.mid?u(this.leftPoints,e,r):t>this.mid?f(this.rightPoints,t,r):c(this.leftPoints,r)};var x=m.prototype;x.insert=function(t){this.root?this.root.insert(t):this.root=new n(t[0],null,null,[t],[t])},x.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},x.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},x.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(x,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(x,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},4877:function(t){"use strict";t.exports=function(t,e,r,i,n,o,s,a){if(!t){var h;if(void 0===e)h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[r,i,n,o,s,a],u=0;(h=new Error(e.replace(/%s/g,(function(){return l[u++]})))).name="Invariant Violation"}throw h.framesToPop=1,h}}},61246:function(t){"use strict";t.exports=function(t,e){e=e||new Array(t.length);for(var r=0;r<t.length;++r)e[t[r]]=r;return e}},66129:function(t){"use strict";t.exports=function(t){for(var e=new Array(t),r=0;r<t;++r)e[r]=r;return e}},28324:function(t){"use strict";t.exports=function(t){var e="string"===typeof t?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}},90304:function(t,e,r){"use strict";var i=r(28324),n=r(27025);t.exports=function(t){return i(t)||n(t)}},13195:function(t){t.exports=!0},772:function(t){function e(t){return!!t.constructor&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}t.exports=function(t){return null!=t&&(e(t)||function(t){return"function"===typeof t.readFloatLE&&"function"===typeof t.slice&&e(t.slice(0,0))}(t)||!!t._isBuffer)}},27025:function(t){"use strict";t.exports=function(t){var e="string"===typeof t?t.charCodeAt(0):t;return e>=48&&e<=57}},33205:function(t){"use strict";t.exports=function(t){var e="string"===typeof t?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}},33290:function(t){"use strict";t.exports="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},66828:function(t){"use strict";t.exports=i,t.exports.isMobile=i,t.exports.default=i;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function i(t){t||(t={});var i=t.ua;if(i||"undefined"===typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"===typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!==typeof i)return!1;var n=t.tablet?r.test(i):e.test(i);return!n&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(n=!0),n}},92987:function(t){"use strict";t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},86186:function(t){"use strict";var e=Object.prototype.toString;t.exports=function(t){var r;return"[object Object]"===e.call(t)&&(null===(r=Object.getPrototypeOf(t))||r===Object.getPrototypeOf({}))}},24968:function(t){"use strict";t.exports=function(t){for(var e,r=t.length,i=0;i<r;i++)if(((e=t.charCodeAt(i))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},43848:function(t){"use strict";t.exports=function(t){return"string"===typeof t&&(t=t.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(t)&&/[\dz]$/i.test(t)&&t.length>4))}}}]);