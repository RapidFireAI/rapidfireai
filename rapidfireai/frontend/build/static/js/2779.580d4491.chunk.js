"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[2779],{28789:function(e,t,n){n.d(t,{n:function(){return fn}});var r=n(82589),s=n(31014),a=n(47664),i=n(64558),o=n(28825),l=n(88443),d=n(77481),c=n(68254),u=n(23142),p=n(10811),g=n(44240),m=n(58481),h=n(56412),f=n(45653),v=n(76010),y=n(25866),x=n(50111);var b={name:"11jf4ye",styles:"display:flex;gap:8px"},w={name:"82a6rk",styles:"flex:1"};const Y=e=>{let{onCancel:t,visible:n,experimentIds:a,searchFacetsState:i,uiState:o}=e;const[d,u]=(0,s.useState)(""),[Y,S]=(0,s.useState)(!0),[C,I]=(0,s.useState)(null),k=(0,p.wA)(),R=(0,s.useMemo)((()=>({...i,...o})),[i,o]),A=(0,s.useCallback)((async e=>{if(a.length>1)return S(!1),I(e),void u(window.location.href);S(!0);const[t]=a,n=JSON.stringify(e),r=await(0,f.Xb)(n),s=`${y.o6}${r}`;k((0,g.EJ)(t,s,n)).then((()=>{S(!1),I(e);const n=m.h.getExperimentPageRoute(t,!1,r),s=`${window.location.origin}${window.location.pathname}#${n}`;u(s)})).catch((e=>{throw v.A.logErrorAndNotifyUser("Failed to create shareable link for experiment"),e}))}),[k,a]);return(0,s.useEffect)((()=>{n&&C!==R&&A(R)}),[n,A,C,R]),(0,x.Y)(r.aFV,{title:(0,x.Y)(l.A,{id:"6KFQMl",defaultMessage:"Get shareable link"}),visible:n,onCancel:t,children:(0,x.FD)("div",{css:b,children:[Y?(0,x.Y)(r.xUE,{css:w}):(0,x.Y)(c.f,{placeholder:"Click button on the right to create shareable state",value:d,readOnly:!0}),(0,x.Y)(h.i,{loading:Y,copyText:d})]})})},S=e=>{let{searchFacetsState:t,uiState:n,experimentIds:r}=e;const[a,i]=(0,s.useState)(!1);return(0,x.FD)(x.FK,{children:[t&&n&&r?(0,x.Y)(Y,{searchFacetsState:t,uiState:n,visible:a,onCancel:()=>i(!1),experimentIds:r}):(0,x.Y)(u.e,{link:window.location.href,visible:a,onCancel:()=>i(!1)}),(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentviewheadersharebutton.tsx_44",type:"primary",onClick:()=>i(!0),"data-test-id":"share-button",children:(0,x.Y)(l.A,{id:"2oFAO4",defaultMessage:"Share"})})]})},C=s.memo((e=>{let{experiments:t}=e;const n=(0,s.useMemo)((()=>(0,x.Y)(l.A,{id:"Dhn7Mb",defaultMessage:"Displaying Runs from {numExperiments} Experiments",values:{numExperiments:t.length}})),[t.length]);return(0,x.Y)(d.z,{title:n,breadcrumbs:[],children:(0,x.Y)(S,{})})}));var I=n(89555),k=n(21616);var R=n(48624),A=n(53677),M=n(80297);const _=e=>{let{showDeleteRunModal:t,showRestoreRunModal:n,showRenameRunModal:r,runsSelected:s,onCloseDeleteRunModal:a,onCloseRestoreRunModal:i,onCloseRenameRunModal:o,renamedRunName:l,refreshRuns:d}=e;const c=Object.entries(s).filter((e=>{let[,t]=e;return t})).map((e=>{let[t]=e;return t}));return(0,x.FD)(x.FK,{children:[(0,x.Y)(M.A,{isOpen:n,onClose:i,selectedRunIds:c,onSuccess:()=>{d()}}),(0,x.Y)(A.jP,{runUuid:c[0],onClose:o,runName:l,isOpen:r,onSuccess:()=>{d()}})]})},F=e=>{let{children:t}=e;return(0,x.Y)(x.FK,{children:t})},D=s.memo((e=>{let{viewState:t,runsData:n,searchFacetsState:r,refreshRuns:a}=e;const{runsSelected:i}=t,{runInfos:o}=n,{lifecycleFilter:d}=r,u=(0,R.Zp)(),[p,g]=(0,s.useState)(!1),[h,f]=(0,s.useState)(!1),[v,b]=(0,s.useState)(!1),[w,Y]=(0,s.useState)(""),S=((0,s.useCallback)((()=>{const e=Object.keys(i),t=o.find((t=>t.runUuid===e[0]));t&&(Y(t.runName),b(!0))}),[o,i]),(0,s.useCallback)((()=>{const e=Object.keys(i),t=o.filter((t=>{let{runUuid:n}=t;return e.includes(n)})).map((e=>{let{experimentId:t}=e;return t}));u(m.h.getCompareRunPageRoute(e,[...new Set(t)].sort()))}),[u,o,i])),C=((0,s.useCallback)((()=>g(!0)),[]),(0,s.useCallback)((()=>f(!0)),[])),I=(0,s.useCallback)((()=>g(!1)),[]),k=(0,s.useCallback)((()=>f(!1)),[]),A=(0,s.useCallback)((()=>b(!1)),[]),M=Object.values(t.runsSelected).filter(Boolean).length,D=M>0,T=M>1;return(0,x.FD)(x.FK,{children:[(0,x.FD)("div",{css:E.controlBar,children:[d===y.gy.DELETED?(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_126","data-testid":"runs-restore-button",disabled:!D,onClick:C,children:(0,x.Y)(l.A,{id:"Potju2",defaultMessage:"Restore"})}):null,(0,x.Y)("div",{css:E.buttonSeparator}),(0,x.Y)(F,{children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsactions.tsx_136","data-testid":"runs-compare-button",disabled:!T,onClick:S,children:(0,x.Y)(l.A,{id:"RaGnOQ",defaultMessage:"Compare"})})})]}),(0,x.Y)(_,{runsSelected:i,onCloseRenameRunModal:A,onCloseDeleteRunModal:I,onCloseRestoreRunModal:k,showDeleteRunModal:p,showRestoreRunModal:h,showRenameRunModal:v,renamedRunName:w,refreshRuns:a})]})})),E={buttonSeparator:e=>({borderLeft:`1px solid ${e.colors.border}`,marginLeft:e.spacing.xs,marginRight:e.spacing.xs,height:"100%"}),controlBar:e=>({display:"flex",gap:e.spacing.sm,alignItems:"center"})};var T=n(91144),L=n(88464),B=n(14343),H=n(24947),O=n(13644);var P={name:"bjn8wh",styles:"position:relative"};const K=s.memo((e=>{const{runInfos:t,mlflowServerStatus:n}=e,{theme:a}=(0,c.u)(),{refreshRuns:i}=e,o=(0,H.z)(),[d,u]=(0,s.useState)(0),[p,m]=(0,s.useState)(0),[h,f]=(0,s.useState)(!0);(0,s.useEffect)((()=>{m(0),u((()=>Date.now()))}),[t]),(0,s.useEffect)((()=>{f(n.isValid)}),[n.isValid]),(0,s.useEffect)((()=>{if(!d)return;const e=setInterval((async()=>{if(!await(0,O.r)())return void f(!1);const e={experimentIds:o,filter:`attributes.start_time > ${d}`,maxResults:y.ks};(0,g.bc)(e).then((e=>{var t;const n=(null===(t=e.runs)||void 0===t?void 0:t.length)||0;m(n)}))}),y.a0);return()=>clearInterval(e)}),[d,o,h]);return(0,x.FD)("div",{css:P,children:[p>0&&(0,x.Y)("div",{title:y.ks>p?`${p}`:y.ks-1+"+",css:(0,I.AH)({position:"absolute",top:0,right:0,transform:"translate(50%, -50%)",display:"flex",justifyContent:"center",alignItems:"center",width:p>9?28:20,height:20,borderRadius:10,border:`1px solid ${a.colors.white}`,backgroundColor:a.colors.lime,color:a.colors.white,fontSize:10,fontWeight:"bold",userSelect:"none",zIndex:1},""),children:y.ks>p?p:y.ks-1+"+"}),(0,x.Y)(r.m_M,{title:(0,x.Y)(l.A,{id:"ag05Pe",defaultMessage:"Refresh"}),useAsLabel:!0,children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrefreshbutton.tsx_123",onClick:()=>{i&&i(),m(0),u((()=>Date.now())),f(!0)},"data-testid":"runs-refresh-button",icon:(0,x.Y)(r.Fjq,{}),disabled:!n.isValid})})]})})),N=(0,p.Ng)((e=>({runInfos:e.entities.runInfosByUuid,mlflowServerStatus:e.clusters.mlflowServer.status})),void 0,void 0,{areStatesEqual:(e,t)=>e.entities.runInfosByUuid===t.entities.runInfosByUuid&&e.clusters.mlflowServer.status===t.clusters.mlflowServer.status})(K);var U=n(9133),z=n(32614);const $=e=>(0,s.useMemo)((()=>z.A.getStoreForComponent("ExperimentView",e)),[e]),V=()=>(0,x.FD)("div",{className:"search-input-tooltip-content",children:[(0,x.Y)(l.A,{id:"kIlkgf",defaultMessage:"Search runs using a simplified version of the SQL {whereBold} clause.",values:{whereBold:(0,x.Y)("b",{children:"WHERE"})}})," ",(0,x.Y)(l.A,{id:"nYKZy4",defaultMessage:"<link>Learn more</link>",values:{link:e=>(0,x.Y)("a",{href:a.g2,target:"_blank",rel:"noopener noreferrer",children:e})}}),(0,x.Y)("br",{}),(0,x.Y)(l.A,{id:"U3btBc",defaultMessage:"Examples:"}),(0,x.Y)("br",{}),"\u2022 metrics.rmse >= 0.8",(0,x.Y)("br",{}),"\u2022 metrics.`f1 score` < 1",(0,x.Y)("br",{}),"\u2022 params.model = 'tree'",(0,x.Y)("br",{}),"\u2022 attributes.run_name = 'my run'",(0,x.Y)("br",{}),"\u2022 tags.`mlflow.user` = 'myUser'",(0,x.Y)("br",{}),"\u2022 metric.f1_score > 0.9 AND params.model = 'tree'",(0,x.Y)("br",{}),"\u2022 dataset.name IN ('dataset1', 'dataset2')",(0,x.Y)("br",{}),"\u2022 attributes.run_id IN ('a1b2c3d4', 'e5f6g7h8')",(0,x.Y)("br",{}),"\u2022 tags.model_class LIKE 'sklearn.linear_model%'"]});const G=["run_id","run_name","status","artifact_uri","user_id","start_time","end_time","created"].map((e=>({value:`attributes.${e}`})));var W={name:"lugakg",styles:"font-weight:normal"};const q=(e,t)=>{const n=e.split(RegExp(t.replace(".","\\."),"ig")),r=e.match(RegExp(t.replace(".","\\."),"ig"));return(0,x.Y)("span",{css:W,"data-test-id":e,children:n.map(((e,t)=>(0,x.FD)(s.Fragment,{children:[e,t!==n.length-1&&r&&(0,x.Y)("b",{children:r[t]})]},t)))})};const j="tooltipLastPopup";var Z={name:"c61v0h",styles:".du-bois-light-select-item-option-active:not(.du-bois-light-select-item-option-disabled){background-color:#e6f1f5;}"},Q={name:"9gxvqt",styles:"display:flex;gap:4px;align-items:center"};const X=e=>{const{runsData:t,searchFilter:n,requestError:a,onSearchFilterChange:i,onClear:o}=e,{theme:l}=(0,c.u)(),[d,u]=(0,s.useState)(""),[p,g]=(0,s.useState)(void 0),[m,h]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),y=(0,s.useRef)({metricNames:[],paramNames:[],tagNames:[]}),[b,w]=(0,s.useState)({Metrics:10,Parameters:10,Tags:10}),Y=(0,s.useRef)([]),[S,C]=(0,s.useState)(void 0);(0,s.useEffect)((()=>{u(n)}),[n]);const k=(0,s.useMemo)((()=>{const e=y.current,n=((e,t)=>{const n=(e,t)=>[...new Set([...e,...t])],r=e=>e.flatMap((e=>Object.keys(e)));return{metricNames:n(t.metricNames,e.metricKeyList),paramNames:n(t.paramNames,e.paramKeyList),tagNames:n(r(t.tagNames),r(e.tagsList)).filter((e=>!e.startsWith("mlflow."))).map((e=>e.includes('"')||e.includes(" ")||e.includes(".")?`\`${e}\``:e.includes("`")?`"${e}"`:e))}})(t,e);return y.current=n,[{label:"Metrics",options:(r=n).metricNames.map((e=>({value:`metrics.${e}`})))},{label:"Parameters",options:r.paramNames.map((e=>({value:`params.${e}`})))},{label:"Tags",options:r.tagNames.map((e=>({value:`tags.${e}`})))},{label:"Attributes",options:G}];var r}),[t]);(0,s.useEffect)((()=>{const e=Y.current,t=(e=>{const t=/>|<|>=|<=|=|!=|like|ilike/gi,n=(e=>{const t=/and[\s]+/gi,n=[];let r,s;for(;s=t.lastIndex,r=t.exec(e);)n.push({clause:e.substring(s,r.index),startIndex:s});return n.push({clause:e.substring(s),startIndex:s}),n})(e),r=[];return n.forEach((e=>{const n=e.clause.split(t)[0],{startIndex:s}=e;r.push({name:n,startIndex:0+s,endIndex:n.length+s})})),r})(d);if(Y.current=t,f)return void v(!1);const n=t.map((e=>e.name)),r=e.map((e=>e.name));if(!(0,U.isEqual)(n,r)&&t.length>=e.length){let n=0;for(;n<t.length;){if(n>=e.length||t[n].name.trim()!==e[n].name.trim())return g(!0),void C(t[n]);n++}}g(!1)}),[d]);const R=(0,s.useMemo)((()=>S?((e,t,n)=>e.map((e=>{const r=e.options.filter((e=>e.value.toLowerCase().includes(t.name.toLowerCase().trim()))).map((e=>({value:e.value,label:q(e.value,t.name.trim())}))),s=n[e.label],a=[...r.slice(0,s),...r.length>s?[{label:"...",value:`..._${e.label}`}]:[]];return{label:e.label,options:a}})).filter((e=>e.options.length>0)))(k,S,b):[]),[k,S,b]),A=(0,s.useCallback)(((e,t)=>{if(S)if(e.startsWith("...")){g(!0);const e=t.value.split("_")[1];w((t=>({...t,[e]:t[e]+10})))}else{const t=d.substring(0,S.startIndex),n=d.substring(S.endIndex);u(t+e+" "+n),v(!0),g(!1)}}),[d,u,S,g]),M=$(j),[_,F]=(0,s.useState)((()=>{const e=Math.floor(Date.now()/1e3),t=M.getItem(j);return!t||parseInt(t,10)<e-604800})),D=s.useRef(null);(0,s.useEffect)((()=>{if(a&&_){var e;const t=Math.floor(Date.now()/1e3);M.setItem(j,t),F(!1),null===(e=D.current)||void 0===e||e.click()}}),[a]);const E=0===R.flatMap((e=>e.options)).length,T=p&&m&&!E,L=(0,s.useCallback)((e=>{"Enter"===e.key&&(T?g(!1):i(d)),"Escape"===e.key&&(e.preventDefault(),T&&g(!1))}),[T,d,i]);return(0,x.Y)("div",{css:(0,I.AH)({display:"flex",gap:l.spacing.sm,width:430,[l.responsive.mediaQueries.xs]:{width:"auto"}},""),children:(0,x.Y)(r.j9R,{dropdownMatchSelectWidth:560,css:(0,I.AH)({width:560,[l.responsive.mediaQueries.xs]:{width:"auto"}},""),defaultOpen:!1,defaultActiveFirstOption:!0,open:T,options:R,onSelect:A,value:d,"data-test-id":"runs-search-autocomplete",dropdownRender:e=>(0,x.Y)("div",{css:Z,children:e}),children:(0,x.Y)(c.f,{value:d,prefix:(0,x.Y)(r.WIv,{css:(0,I.AH)({svg:{width:16,height:16,color:l.colors.textSecondary}},"")}),onKeyDown:L,onClick:()=>h(!0),onBlur:()=>h(!1),onChange:e=>u(e.target.value),placeholder:'metrics.rmse < 1 and params.model = "tree"',"data-test-id":"search-box",suffix:(0,x.FD)("div",{css:Q,children:[d&&(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_runssearchautocomplete.tsx_212",onClick:o,type:"link","data-test-id":"clear-button",children:(0,x.Y)(c.C,{})}),(0,x.Y)(r.m_M,{title:(0,x.Y)(V,{}),placement:"right",dangerouslySetAntdProps:{overlayInnerStyle:{width:"150%"},trigger:["focus","click"]},children:(0,x.Y)(c.B,{size:"small",ref:D,componentId:"mlflow.experiment_page.search_filter.tooltip",type:"link",icon:(0,x.Y)(r.mo0,{css:(0,I.AH)({svg:{width:16,height:16,color:l.colors.textSecondary}},"")})})})]})})})})};var J=n(18476),ee=n(82196),te=n(24774);const ne=s.createContext({createNewRun:()=>{}}),re=e=>{let{children:t,visibleRuns:n,refreshRuns:r}=e;const[a,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(null),d=(0,s.useMemo)((()=>({createNewRun:e=>{i(!0),l(e||null)}})),[]);return(0,x.FD)(ne.Provider,{value:d,children:[t,(0,T.Ii)()&&(0,x.Y)(te.Z,{visibleRuns:n,isOpen:a,closeModal:()=>i(!1),runBeingDuplicated:o,refreshRuns:r})]})};var se=n(53660),ae=n(67694),ie=n(83028),oe=n(21879);const le=s.memo((e=>{let{searchFacetsState:t,experimentId:n,runsData:a,viewState:i,updateViewState:o,onDownloadCsv:d,requestError:u,additionalControls:g,refreshRuns:m,viewMaximized:h,autoRefreshEnabled:f=!1}=e;const v=(0,ae.Px)(),[b]=(0,se.a)(),w=(0,oe.e)(),{startTime:Y,lifecycleFilter:S,datasetsFilter:C,searchFilter:R}=((0,H.z)().length,t),A=b,M=(0,L.A)(),{createNewRun:_}=(0,s.useContext)(ne),[F,D]=(0,s.useState)(!1),{theme:E}=(0,c.u)(),O=(0,s.useMemo)((()=>(0,k.XU)(M)),[M]),P=S===y.gy.ACTIVE?M.formatMessage({id:"0pdAuV",defaultMessage:"Active"}):M.formatMessage({id:"yJpGwW",defaultMessage:"Deleted"}),K=M.formatMessage({id:"+fb25b",defaultMessage:"Time created"}),U=void 0===A||"ARTIFACT"===A,z=(0,p.d4)((e=>e.entities.datasetsByExperimentId[n])),$=void 0!==z;return(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:E.spacing.sm,justifyContent:"space-between",[E.responsive.mediaQueries.xs]:{flexDirection:"column"}},""),children:[(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:E.spacing.sm,alignItems:"center",flexWrap:"wrap"},""),children:[(0,x.Y)(X,{runsData:a,searchFilter:R,onSearchFilterChange:e=>{v({searchFilter:e})},onClear:()=>{v((0,ie.G)())},requestError:u}),(0,x.FD)(r.AYc,{label:K,value:"ALL"!==Y?[O[Y]]:[],children:[(0,x.Y)(r.gGe,{allowClear:"ALL"!==Y,onClear:()=>{v({startTime:"ALL"})},"data-test-id":"start-time-select-dropdown"}),(0,x.Y)(r.dn6,{children:(0,x.Y)(r.HI_,{children:Object.keys(O).map((e=>(0,x.Y)(r.crD,{checked:e===Y,title:O[e],"data-test-id":`start-time-select-${e}`,value:e,onChange:()=>{v({startTime:e})},children:O[e]},e)))})})]}),(0,x.FD)(r.AYc,{label:M.formatMessage({id:"iLFoPb",defaultMessage:"State"}),value:[P],children:[(0,x.Y)(r.gGe,{allowClear:!1,"data-testid":"lifecycle-filter"}),(0,x.Y)(r.dn6,{children:(0,x.FD)(r.HI_,{children:[(0,x.Y)(r.crD,{checked:S===y.gy.ACTIVE,"data-testid":"active-runs-menu-item",value:y.gy.ACTIVE,onChange:()=>{v({lifecycleFilter:y.gy.ACTIVE})},children:(0,x.Y)(l.A,{id:"0pdAuV",defaultMessage:"Active"})},y.gy.ACTIVE),(0,x.Y)(r.crD,{checked:S===y.gy.DELETED,"data-testid":"deleted-runs-menu-item",value:y.gy.DELETED,onChange:()=>{v({lifecycleFilter:y.gy.DELETED})},children:(0,x.Y)(l.A,{id:"yJpGwW",defaultMessage:"Deleted"})},y.gy.DELETED)]})})]}),(0,x.Y)(r.AYc,{label:M.formatMessage({id:"IZ95jb",defaultMessage:"Datasets"}),value:C.map((e=>e.name)),multiSelect:!0,children:(0,x.FD)(r.m_M,{title:!$&&(0,x.Y)(l.A,{id:"v8UFxB",defaultMessage:"No datasets were recorded for this experiment's runs."}),children:[(0,x.Y)(r.gGe,{allowClear:!0,onClear:()=>v({datasetsFilter:[]}),"data-test-id":"datasets-select-dropdown",showTagAfterValueCount:1,disabled:!$}),$&&(0,x.Y)(r.dn6,{maxHeight:600,children:(0,x.Y)(r.HI_,{children:(0,x.Y)(r.dhl,{children:z.map((e=>(0,x.FD)(r.jTC,{checked:C.some((t=>(0,J.R)(t,e))),title:e.name,"data-test-id":`dataset-dropdown-${e.name}`,value:e.name,onChange:()=>(e=>{const t=C.some((t=>(0,J.R)(t,e)))?C.filter((t=>!(0,J.R)(t,e))):[...C,e];v({datasetsFilter:t})})(e),children:[e.name," (",e.digest,")"," ",e.context&&(0,x.Y)(r.vwO,{css:(0,I.AH)({textTransform:"capitalize",marginRight:E.spacing.xs},""),children:e.context})]},e.name+e.digest+e.context)))})})})]})}),g]}),(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:E.spacing.sm,alignItems:"flex-start"},""),children:[(0,x.FD)(r.rId.Root,{children:[(0,x.Y)(r.rId.Trigger,{asChild:!0,children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_338",icon:(0,x.Y)(r.ssM,{}),"aria-label":M.formatMessage({id:"E5gbt5",defaultMessage:"More options"})})}),(0,x.FD)(r.rId.Content,{children:[(0,x.FD)(r.rId.Item,{className:"csv-button",onClick:d,children:[(0,x.Y)(r.rId.IconWrapper,{children:(0,x.Y)(r.s3U,{})}),`Download ${a.runInfos.length} runs`]}),(0,T.Hn)()&&(0,x.FD)(x.FK,{children:[(0,x.Y)(r.rId.Separator,{}),(0,x.FD)(r.rId.CheckboxItem,{checked:f,onClick:()=>w((e=>({...e,autoRefreshEnabled:!e.autoRefreshEnabled}))),children:[(0,x.Y)(r.rId.ItemIndicator,{}),(0,x.Y)(l.A,{id:"YamyaP",defaultMessage:"Auto-refresh"})]})]})]})]}),(0,x.Y)(ee.A,{isOpen:F,closeModal:()=>D(!1),experimentId:n}),U&&(0,x.Y)(r.m_M,{title:M.formatMessage({id:"eZOxx1",defaultMessage:"Toggle the preview sidepane"}),useAsLabel:!0,children:(0,x.Y)(B.k,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscontrolsfilters.tsx_403",pressed:i.previewPaneVisible,icon:(0,x.Y)(r.CPw,{}),onClick:()=>o({previewPaneVisible:!i.previewPaneVisible})})}),!(0,T.Hn)()&&(0,x.Y)(N,{refreshRuns:m})]})]})}));var de={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"},ce={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"};const ue=s.memo((e=>{const t=(0,ae.Px)(),n=(0,oe.e)(),a=(0,L.A)(),{sortOptions:i}=e,{orderByKey:o,orderByAsc:l}=e,d=e=>{let{value:r}=e;const[s,a]=r.split(y.KE);t({orderByAsc:a===y.mh,orderByKey:s}),n((e=>e.selectedColumns.includes(s)?e:{...e,selectedColumns:[...e.selectedColumns,s]}))},c=(0,s.useMemo)((()=>`${o}${y.KE}${l?y.mh:y.KU}`),[l,o]),u=(0,s.useMemo)((()=>{const e=i.find((e=>e.value===c));let t=null===e||void 0===e?void 0:e.label;if(!t){const e=o.match(/^.+\.`(.+)`$/);e&&(t=e[1])}return`${a.formatMessage({id:"llrWuc",defaultMessage:"Sort"})}: ${t}`}),[c,o,i,a]),p=(0,s.useMemo)((()=>(0,x.FD)("span",{css:de,children:[l?(0,x.Y)(r.GCP,{}):(0,x.Y)(r.MMv,{})," ",u]})),[u,l]),g=e=>{d({value:e}),h(!1)},[m,h]=(0,s.useState)(!1);return(0,x.FD)(r.AYc,{label:p,onOpenChange:h,open:m,children:[(0,x.Y)(r.gGe,{onClear:()=>{d({value:""})},"data-test-id":"sort-select-dropdown","aria-label":u}),(0,x.Y)(r.dn6,{minWidth:250,children:(0,x.Y)(r.HI_,{children:(0,x.Y)(r.dhl,{children:i.map((e=>(0,x.Y)(r.crD,{value:e.value,onChange:g,checked:e.value===c,"data-test-id":`sort-select-${e.label}-${e.order}`,children:(0,x.FD)("span",{css:ce,children:[e.order===y.mh?(0,x.Y)(r.Kpk,{}):(0,x.Y)(r.ZLN,{}),(0,f.fx)(e.label,50)]})},e.value)))})})})]})})),pe="GROUP",ge=(0,k.GF)(pe,y.RO.ATTRIBUTES),me=(0,k.GF)(pe,y.RO.PARAMS),he=(0,k.GF)(pe,y.RO.METRICS),fe=(0,k.GF)(pe,y.RO.TAGS),ve=(e,t)=>e.filter((e=>e.toLowerCase().includes(t.toLowerCase()))),ye=(e,t)=>{if(!t)return e;const n=e.toLowerCase().indexOf(t.toLowerCase()),r=e.substring(0,n),s=e.substring(n,n+t.length),a=e.substring(n+t.length);return n>-1?(0,x.FD)("span",{children:[r,(0,x.Y)("strong",{children:s}),a]}):e},xe=s.memo((e=>{let{runsData:t,columnSelectorVisible:n,onChangeColumnSelectorVisible:a,selectedColumns:i}=e;const o=(0,oe.e)(),d=(0,H.z)(),[u,p]=(0,s.useState)(""),{theme:g}=(0,c.u)(),m=(0,s.useRef)(null),h=(0,s.useRef)(null),f=(0,s.useRef)(null),b=(0,s.useMemo)((()=>(e=>{const t=[y.qo.USER,y.qo.SOURCE,y.qo.VERSION,y.qo.MODELS];return e&&t.unshift(y.qo.EXPERIMENT_NAME),t.unshift(y.qo.DATASET),t})(d.length>1)),[d.length]),w=(0,s.useCallback)((e=>o((t=>{const n=e(t.selectedColumns),r=Array.from(new Set(n));return{...t,selectedColumns:r}}))),[o]),Y=(0,s.useMemo)((()=>v.A.getVisibleTagKeyList(t.tagsList)),[t]),S=(0,s.useMemo)((()=>({[y.RO.ATTRIBUTES]:b.map((e=>(0,k.GF)(y.RO.ATTRIBUTES,e))),[y.RO.PARAMS]:t.paramKeyList.map((e=>(0,k.GF)(y.RO.PARAMS,e))),[y.RO.METRICS]:t.metricKeyList.map((e=>(0,k.GF)(y.RO.METRICS,e))),[y.RO.TAGS]:Y.map((e=>(0,k.GF)(y.RO.TAGS,e)))})),[t,b,Y]),C=(0,s.useMemo)((()=>{const e=[],n=ve(b,u),r=ve(t.paramKeyList,u),s=ve(t.metricKeyList,u),a=ve(Y,u);return n.length&&e.push({key:ge,title:"Attributes",children:n.map((e=>({key:(0,k.GF)(y.RO.ATTRIBUTES,e),title:ye(e,u)})))}),s.length&&e.push({key:he,title:`Metrics (${s.length})`,children:s.map((e=>({key:(0,k.GF)(y.RO.METRICS,e),title:ye(e,u)})))}),r.length&&e.push({key:me,title:`Parameters (${r.length})`,children:r.map((e=>({key:(0,k.GF)(y.RO.PARAMS,e),title:ye(e,u)})))}),a.length&&e.push({key:fe,title:`Tags (${a.length})`,children:a.map((e=>({key:(0,k.GF)(y.RO.TAGS,e),title:e})))}),e}),[b,u,t,Y]),R=(0,s.useCallback)(((e,t)=>{w(e?e=>e.filter((e=>!t.includes(e))):e=>[...e,...t])}),[w]),A=(0,s.useCallback)(((e,t)=>{w(t?t=>t.filter((t=>t!==e)):t=>[...t,e])}),[w]);(0,s.useEffect)((()=>{n&&(p(""),requestAnimationFrame((()=>{var e,t;null===h||void 0===h||null===(e=h.current)||void 0===e||e.scrollTo(0,0),null===(t=m.current)||void 0===t||t.focus({preventScroll:!0}),f.current&&f.current.scrollIntoView({block:"nearest",behavior:"smooth"})})))}),[n]);const M=(0,s.useCallback)(((e,t)=>{let{node:{key:n,checked:r}}=t;if((0,k.tG)(n.toString(),pe)){const e=(0,k.dz)(n.toString(),pe),t=S[e];t&&R(r,ve(t,u))}else A(n.toString(),r)}),[S,R,A,u]),_=(0,s.useCallback)((e=>{if("ArrowDown"===e.key){const e=(null===(t=h.current)||void 0===t?void 0:t.querySelector('[role="tree"] input'))||null;e&&e.focus()}var t}),[]),F=(0,x.FD)("div",{css:(0,I.AH)({backgroundColor:g.colors.backgroundPrimary,width:400,border:"1px solid",borderColor:g.colors.border,[g.responsive.mediaQueries.xs]:{width:"100vw"}},""),onKeyDown:e=>{var t;"Escape"===e.key&&(a(!1),null===(t=f.current)||void 0===t||t.focus())},children:[(0,x.Y)("div",{css:e=>({padding:e.spacing.md}),children:(0,x.Y)(c.f,{value:u,prefix:(0,x.Y)(r.WIv,{}),placeholder:"Search columns",allowClear:!0,ref:m,onChange:e=>{p(e.target.value)},onKeyDown:_})}),(0,x.Y)("div",{ref:h,css:(0,I.AH)({maxHeight:480,overflowY:"scroll",overflowX:"hidden",paddingBottom:g.spacing.md,"span[title]":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},[g.responsive.mediaQueries.xs]:{maxHeight:"calc(100vh - 100px)"}},""),children:(0,x.Y)(r.PH6,{"data-testid":"column-selector-tree",mode:"checkable",dangerouslySetAntdProps:{checkedKeys:i,onCheck:M},defaultExpandedKeys:[ge,me,he,fe],treeData:C})})]});return(0,x.Y)(r.msM,{overlay:F,placement:"bottomLeft",trigger:["click"],visible:n,onVisibleChange:a,children:(0,x.FD)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunscolumnselector.tsx_315",ref:f,style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",icon:(0,x.Y)(r.jng,{}),children:[(0,x.Y)(l.A,{id:"ny+fBZ",defaultMessage:"Columns"})," ",(0,x.Y)(r.D3D,{})]})})}));const be="seenBefore";var we={name:"b98nv4",styles:"position:absolute;inset:0"},Ye={name:"1ww443i",styles:"max-width:200px"},Se={name:"2qga7i",styles:"text-align:right"};const Ce=e=>{let{multipleRunsSelected:t,isTableMode:n}=e;const a=$("compareRunsTooltip"),[i,o]=(0,s.useState)(t&&!a.getItem(be));(0,s.useEffect)((()=>{const e=a.getItem(be);o(!(!t||!n||e))}),[t,n,a]);const d=(0,s.useCallback)((e=>{o(e),a.setItem(be,!0)}),[o,a]);return(0,x.Y)(x.FK,{children:(0,x.FD)(r.AMh.Root,{open:i,children:[(0,x.Y)(r.AMh.Trigger,{asChild:!0,children:(0,x.Y)("div",{css:we})}),(0,x.FD)(r.AMh.Content,{align:"start",children:[(0,x.FD)("div",{css:Ye,children:[(0,x.Y)(c.T.Paragraph,{children:(0,x.Y)(l.A,{id:"1ECve7",defaultMessage:"You can now switch to the chart view to compare runs"})}),(0,x.Y)("div",{css:Se,children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsmodeswitch.tsx_65",onClick:()=>d(!1),type:"primary",children:(0,x.Y)(l.A,{id:"khknxG",defaultMessage:"Got it"})})})]}),(0,x.Y)(r.AMh.Arrow,{})]})]})})},Ie=e=>{let{viewState:t,runsAreGrouped:n,hideBorder:s=!0}=e;const[a,i]=(0,se.a)(),{classNamePrefix:o}=(0,c.u)(),d=a||(0,se.m)();return(0,x.FD)(r.tUM,{dangerouslyAppendEmotionCSS:{[`.${o}-tabs-nav`]:{marginBottom:0,"::before":{display:s?"none":"block"}}},activeKey:d,onChange:e=>{d!==e&&i(e)},children:[(0,x.Y)(r.tUM.TabPane,{tab:(0,x.Y)("span",{"data-testid":"experiment-runs-mode-switch-list",children:(0,x.Y)(l.A,{id:"YOz/Dk",defaultMessage:"Table"})})},"TABLE"),(0,x.Y)(r.tUM.TabPane,{tab:(0,x.FD)(x.FK,{children:[(0,x.Y)("span",{"data-testid":"experiment-runs-mode-switch-compare",children:(0,x.Y)(l.A,{id:"KOQzJx",defaultMessage:"Chart"})}),(0,x.Y)(Ce,{isTableMode:"TABLE"===a,multipleRunsSelected:!!t&&Object.keys(t.runsSelected).length>1})]})},"CHART"),(0,x.Y)(r.tUM.TabPane,{tab:(0,x.Y)("span",{"data-testid":"experiment-runs-mode-switch-list",children:(0,x.Y)(l.A,{id:"CkfvAW",defaultMessage:"Experiment Log"})})},"LOGS"),(0,x.Y)(r.tUM.TabPane,{tab:(0,x.Y)("span",{"data-testid":"experiment-runs-mode-switch-list",children:(0,x.Y)(l.A,{id:"6bKE0u",defaultMessage:"Interactive Control Log"})})},"IC_LOGS")]})};var ke=n(69526),Re=n(98590),Ae=n(62862),Me=n(12772);const _e=(0,ke.YK)({minimum:{id:"iT8ODo",defaultMessage:"Minimum"},maximum:{id:"au61Yy",defaultMessage:"Maximum"},average:{id:"/LfvdB",defaultMessage:"Average"},attributes:{id:"cy9EfG",defaultMessage:"Attributes"},tags:{id:"LEiN8m",defaultMessage:"Tags"},params:{id:"i9OADf",defaultMessage:"Params"},dataset:{id:"RtKhwd",defaultMessage:"Dataset"},noParams:{id:"Q73eXs",defaultMessage:"No params"},noTags:{id:"jHWRLw",defaultMessage:"No tags"},aggregationTooltip:{id:"fKx4kG",defaultMessage:"Aggregation: {value}"},noResults:{id:"aaVp/T",defaultMessage:"No results"}});var Fe={name:"9q39xd",styles:"min-width:32px"},De={name:"o5v4ro",styles:"max-height:400px;overflow-y:scroll"};const Ee=e=>{let{runsData:t,onChange:n,groupBy:a}=e;const i=(0,L.A)(),o=(0,s.useRef)(null),d=(0,s.useRef)(null),u=(0,s.useRef)(null),p=(0,s.useRef)(null),g=i.formatMessage(_e.minimum),m=i.formatMessage(_e.maximum),h=i.formatMessage(_e.average),f=i.formatMessage(_e.dataset),v=(0,s.useMemo)((()=>(0,U.uniq)((0,U.values)(t.tagsList).flatMap((e=>(0,U.keys)(e).filter((e=>!e.startsWith(Re.nt))))))),[t.tagsList]),{aggregateFunction:y=Me.i.Average,groupByKeys:b=[]}=a||{},w={min:g,max:m,average:h}[y],{theme:Y}=(0,c.u)(),[S,C]=(0,s.useState)("");(0,s.useEffect)((()=>{requestAnimationFrame((()=>{p.current.focus()}))}),[]);const k=v.filter((e=>e.toLowerCase().includes(S.toLowerCase()))),R=t.paramKeyList.filter((e=>e.toLowerCase().includes(S.toLowerCase()))),A=(0,s.useMemo)((()=>!(0,U.isEmpty)((0,U.compact)(t.datasetsList))),[t.datasetsList])&&f.toLowerCase().includes(S.toLowerCase()),M=k.length>0||R.length>0||A,_=(0,s.useCallback)(((e,t,r)=>{if(r){const r=[...b];r.some((n=>n.mode===e&&n.groupByData===t))||r.push({mode:e,groupByData:t}),n({aggregateFunction:y,groupByKeys:r})}else{const r=b.filter((n=>!(n.mode===e&&n.groupByData===t)));if(!r.length)return void n(null);n({aggregateFunction:y,groupByKeys:r})}}),[y,b,n]),F=(e,t)=>b.some((n=>n.mode===e&&n.groupByData===t));return(0,x.FD)(x.FK,{children:[(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:Y.spacing.xs,padding:Y.spacing.sm},""),children:[(0,x.Y)(c.f,{value:S,onChange:e=>C(e.target.value),prefix:(0,x.Y)(r.WIv,{}),placeholder:"Search",autoFocus:!0,ref:p,onKeyDown:e=>{if("ArrowDown"!==e.key&&"Tab"!==e.key)"Escape"!==e.key&&e.stopPropagation();else{const e=o.current||d.current||u.current;null===e||void 0===e||e.focus()}}}),(0,x.FD)(r.rId.Root,{children:[(0,x.Y)(r.m_M,{placement:"right",title:(0,x.Y)(l.A,{..._e.aggregationTooltip,values:{value:w||y}}),children:(0,x.Y)(r.rId.Trigger,{asChild:!0,children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_168",icon:(0,x.Y)(r.L64,{}),css:Fe,"aria-label":"Change aggregation function"})})}),(0,x.Y)(r.rId.Content,{align:"start",side:"right",children:(0,x.FD)(r.rId.RadioGroup,{value:y,onValueChange:e=>{if((0,U.values)(Me.i).includes(e)){const t=e,r={...a,aggregateFunction:t};n(r)}},children:[(0,x.FD)(r.rId.RadioItem,{disabled:!b.length,value:Me.i.Min,children:[(0,x.Y)(r.rId.ItemIndicator,{}),g]},Me.i.Min),(0,x.FD)(r.rId.RadioItem,{disabled:!b.length,value:Me.i.Max,children:[(0,x.Y)(r.rId.ItemIndicator,{}),m]},Me.i.Max),(0,x.FD)(r.rId.RadioItem,{disabled:!b.length,value:Me.i.Average,children:[(0,x.Y)(r.rId.ItemIndicator,{}),h]},Me.i.Average)]})})]})]}),(0,x.FD)(r.rId.Group,{css:De,children:[A&&(0,x.FD)(x.FK,{children:[(0,x.Y)(r.rId.Label,{children:(0,x.Y)(l.A,{..._e.attributes})}),f.toLowerCase().includes(S.toLowerCase())&&(0,x.FD)(r.rId.CheckboxItem,{checked:F(Me.u.Dataset,"dataset"),ref:o,onCheckedChange:e=>_(Me.u.Dataset,"dataset",e),children:[(0,x.Y)(r.rId.ItemIndicator,{}),f]},(0,Ae._p)(Me.u.Dataset,"dataset",y)),(0,x.Y)(r.rId.Separator,{})]}),k.length>0&&(0,x.FD)(x.FK,{children:[(0,x.Y)(r.rId.Label,{children:(0,x.Y)(l.A,{..._e.tags})}),k.map(((e,t)=>{const n=(0,Ae._p)(Me.u.Tag,e,y);return(0,x.FD)(r.rId.CheckboxItem,{checked:F(Me.u.Tag,e),ref:0===t?d:void 0,onCheckedChange:t=>_(Me.u.Tag,e,t),children:[(0,x.Y)(r.rId.ItemIndicator,{}),e]},n)})),!v.length&&(0,x.FD)(r.rId.Item,{disabled:!0,children:[(0,x.Y)(r.rId.ItemIndicator,{})," ",(0,x.Y)(l.A,{..._e.noTags})]}),(0,x.Y)(r.rId.Separator,{})]}),R.length>0&&(0,x.FD)(x.FK,{children:[(0,x.Y)(r.rId.Label,{children:(0,x.Y)(l.A,{..._e.params})}),R.map(((e,t)=>{const n=(0,Ae._p)(Me.u.Param,e,y);return(0,x.FD)(r.rId.CheckboxItem,{checked:F(Me.u.Param,e),ref:0===t?u:void 0,onCheckedChange:t=>_(Me.u.Param,e,t),children:[(0,x.Y)(r.rId.ItemIndicator,{}),e]},n)})),!t.paramKeyList.length&&(0,x.Y)(r.rId.Item,{disabled:!0,children:(0,x.Y)(l.A,{..._e.noParams})})]}),!M&&(0,x.Y)(r.rId.Item,{disabled:!0,children:(0,x.Y)(l.A,{..._e.noResults})})]})]})};var Te={name:"taqmwb",styles:"margin-left:4px;margin-right:0"};const Le=s.memo((e=>{let{runsData:t,groupBy:n,isLoading:s,onChange:a}=e;const{theme:i}=(0,c.u)(),o=(0,Ae.Zp)(n)||{aggregateFunction:Me.i.Average,groupByKeys:[]},d=o&&!(0,U.isEmpty)(o.groupByKeys);return(0,x.FD)(r.rId.Root,{modal:!1,children:[(0,x.Y)(r.rId.Trigger,{asChild:!0,children:(0,x.FD)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsgroupbyselector.tsx_306",icon:(0,x.Y)(r.aTS,{}),style:{display:"flex",alignItems:"center"},"data-testid":"column-selection-dropdown",endIcon:(0,x.Y)(r.D3D,{}),children:[d?(0,x.Y)(l.A,{id:"AFI74W",defaultMessage:"Group by: {value}",values:{value:o.groupByKeys[0].groupByData}}):(0,x.Y)(l.A,{id:"fjM/KK",defaultMessage:"Group by"}),o.groupByKeys.length>1&&(0,x.FD)(r.vwO,{css:Te,children:["+",o.groupByKeys.length-1]}),n&&(0,x.Y)(r.htq,{"aria-hidden":"false",css:(0,I.AH)({color:i.colors.textPlaceholder,fontSize:i.typography.fontSizeSm,marginLeft:i.spacing.sm,":hover":{color:i.colors.actionTertiaryTextHover}},""),role:"button",onClick:()=>{a(null)},onPointerDownCapture:e=>{e.stopPropagation()}})]})}),(0,x.Y)(r.rId.Content,{children:s?(0,x.Y)(r.rId.Item,{children:(0,x.Y)(c.S,{})}):(0,x.Y)(Ee,{groupBy:o,onChange:a,runsData:t})})]})}));var Be={name:"1kxd8xu",styles:"max-height:400px;overflow-y:auto"},He={name:"1j5vobt",styles:"display:flex;align-items:center;gap:4px"};const Oe=e=>{let{sortOptions:t,orderByKey:n,orderByAsc:a,onOptionSelected:i}=e;const{theme:o}=(0,c.u)(),d=(0,ae.Px)(),u=(0,oe.e)(),p=(0,s.useRef)(null),[g,m]=(0,s.useState)(""),h=(0,s.useRef)(null),v=(0,s.useMemo)((()=>t.filter((e=>e.label.toLowerCase().includes(g.toLowerCase())))),[t,g]),y=e=>{d({orderByAsc:e}),i()};return(0,s.useEffect)((()=>{requestAnimationFrame((()=>{var e;null===(e=p.current)||void 0===e||e.focus()}))}),[]),(0,x.FD)(x.FK,{children:[(0,x.FD)("div",{css:(0,I.AH)({padding:`${o.spacing.sm}px ${o.spacing.lg/2}px ${o.spacing.sm}px`,width:"100%",display:"flex",gap:o.spacing.xs},""),children:[(0,x.Y)(c.f,{prefix:(0,x.Y)(r.WIv,{}),value:g,type:"search",onChange:e=>m(e.target.value),placeholder:"Search",autoFocus:!0,ref:p,onKeyDown:e=>{var t;"ArrowDown"!==e.key&&"Tab"!==e.key?e.stopPropagation():null===(t=h.current)||void 0===t||t.focus()}}),(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:o.spacing.xs},""),children:[(0,x.Y)(B.k,{pressed:!a,icon:(0,x.Y)(r.ZLN,{}),componentId:"mlflow.experiment_page.sort_select_v2.sort_desc",onClick:()=>y(!1),"aria-label":"Sort descending"}),(0,x.Y)(B.k,{pressed:a,icon:(0,x.Y)(r.Kpk,{}),componentId:"mlflow.experiment_page.sort_select_v2.sort_asc",onClick:()=>y(!0),"aria-label":"Sort ascending"})]})]}),(0,x.FD)(r.rId.Group,{css:Be,children:[v.map(((e,t)=>(0,x.FD)(r.rId.CheckboxItem,{onClick:()=>(e=>{d({orderByKey:e}),u((t=>t.selectedColumns.includes(e)?t:{...t,selectedColumns:[...t.selectedColumns,e]})),i()})(e.value),checked:e.value===n,"data-test-id":`sort-select-${e.label}`,ref:0===t?h:void 0,children:[(0,x.Y)(r.rId.ItemIndicator,{}),(0,x.Y)("span",{css:He,children:(0,f.fx)(e.label,50)})]},e.value))),!v.length&&(0,x.Y)(r.rId.Item,{disabled:!0,children:(0,x.Y)(l.A,{id:"EkUD0b",defaultMessage:"No results"})})]})]})};var Pe={name:"9q39xd",styles:"min-width:32px"};const Ke=s.memo((e=>{let{metricKeys:t,paramKeys:n,orderByAsc:a,orderByKey:i}=e;const o=(0,L.A)(),[l,d]=(0,s.useState)(!1),{theme:u}=(0,c.u)(),p=(0,s.useMemo)((()=>Object.keys(y.Eg).map((e=>({label:y.Eg[e],value:y.T8[e]})))),[]),g=(0,s.useMemo)((()=>t.map((e=>({label:e,value:`${(0,k.GF)(y.RO.METRICS,e)}`})))),[t]),m=(0,s.useMemo)((()=>n.map((e=>({label:e,value:`${(0,k.GF)(y.RO.PARAMS,e)}`})))),[n]),h=(0,s.useMemo)((()=>[...p,...g,...m]),[p,g,m]),f=(0,s.useMemo)((()=>{const e=h.find((e=>e.value===i));let t=null===e||void 0===e?void 0:e.label;if(!t){const e=i.match(/^.+\.`(.+)`$/);e&&(t=e[1])}return`${o.formatMessage({id:"sKaamx",defaultMessage:"Sort"})}: ${t}`}),[h,o,i]);return(0,x.FD)(r.rId.Root,{open:l,onOpenChange:d,modal:!1,children:[(0,x.Y)(r.rId.Trigger,{"data-test-id":"sort-select-dropdown",asChild:!0,children:(0,x.Y)(c.B,{componentId:"mlflow.experiment_page.sort_select_v2.toggle",icon:a?(0,x.Y)(r.GCP,{}):(0,x.Y)(r.MMv,{}),css:Pe,"aria-label":f,endIcon:(0,x.Y)(r.D3D,{}),children:f})}),(0,x.Y)(r.rId.Content,{minWidth:250,children:(0,x.Y)(Oe,{sortOptions:h,orderByKey:i,orderByAsc:a,onOptionSelected:()=>d(!1)})})]})})),Ne=s.memo((e=>{let{runsData:t,viewState:n,updateViewState:a,searchFacetsState:i,experimentId:o,requestError:d,expandRows:u,updateExpandRows:p,refreshRuns:g,uiState:m,isLoading:h}=e;const[f,b]=(0,se.a)(),{paramKeyList:w,metricKeyList:Y,tagsList:S}=t,{orderByAsc:C,orderByKey:R}=i,A=(0,oe.e)(),M="TABLE"!==f,_="ARTIFACT"===f,{theme:F}=(0,c.u)(),E=w,L=Y,B=v.A.getVisibleTagKeyList(S),H=(0,s.useCallback)((()=>(0,k.D1)(t,B,E,L)),[L,E,B,t]),O=((e,t)=>(0,s.useMemo)((()=>{let n=[];const r=[y.mh,y.KU];return n=[...Object.keys(y.Eg).reduce(((e,t)=>{const n=y.Eg[t];return r.forEach((r=>{e.push({label:n,value:y.T8[t]+y.KE+r,order:r})})),e}),[]),...e.reduce(((e,t)=>(r.forEach((n=>{e.push({label:t,value:`${(0,k.GF)(y.RO.METRICS,t)}${y.KE}${n}`,order:n})})),e)),[]),...t.reduce(((e,t)=>(r.forEach((n=>{e.push({label:t,value:`${(0,k.GF)(y.RO.PARAMS,t)}${y.KE}${n}`,order:n})})),e)),[])],n}),[e,t]))(L,E),P=Object.values(n.runsSelected).filter(Boolean).length,K=P>1||1===P||P>0,N=!_,U=(0,s.useCallback)((e=>a({columnSelectorVisible:e})),[a]),z=(0,s.useCallback)((()=>p(!u)),[u,p]),$=(0,s.useMemo)((()=>t.datasetsList.some((e=>(null===e||void 0===e?void 0:e.length)>1))),[t]);return(0,x.FD)("div",{css:(0,I.AH)({display:"flex",gap:F.spacing.sm,flexDirection:"column",marginTop:m.viewMaximized?void 0:F.spacing.md},""),children:[K&&(0,x.Y)(D,{runsData:t,searchFacetsState:i,viewState:n,refreshRuns:g}),!K&&(0,x.Y)(le,{onDownloadCsv:H,searchFacetsState:i,experimentId:o,viewState:n,updateViewState:a,runsData:t,requestError:d,refreshRuns:g,viewMaximized:m.viewMaximized,autoRefreshEnabled:m.autoRefreshEnabled,additionalControls:(0,x.FD)(x.FK,{children:[(0,T.Ir)()?(0,x.Y)(Ke,{orderByAsc:C,orderByKey:R,metricKeys:L,paramKeys:E}):(0,x.Y)(ue,{orderByAsc:C,orderByKey:R,sortOptions:O}),!M&&(0,x.Y)(xe,{columnSelectorVisible:n.columnSelectorVisible,onChangeColumnSelectorVisible:U,runsData:t,selectedColumns:m.selectedColumns}),!M&&$&&(0,x.Y)(r.ffE,{onClick:z,children:(0,x.Y)(l.A,{id:"mRc7MY",defaultMessage:"Expand rows"})}),N&&(0,x.Y)(Le,{groupBy:m.groupBy,onChange:e=>{A((t=>({...t,groupBy:e})))},runsData:t,isLoading:h})]})}),(0,x.Y)("div",{children:(0,x.Y)(Ie,{viewState:n,runsAreGrouped:Boolean(m.groupBy)})})]})}));var Ue=n(45959),ze=n.n(Ue),$e=n(51293),Ve=n(6604),Ge=n(95064),We=n(58898),qe=n(22392);const je=e=>{let{isFiltered:t,onClearFilters:n}=e;return(0,x.Y)("div",{css:Ze.noResultsWrapper,children:(0,x.Y)("div",{css:Ze.noResults,children:t?(0,x.Y)(r.SvL,{button:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunsemptytable.tsx_35",type:"primary",onClick:n,children:(0,x.Y)(l.A,{id:"pEpexK",defaultMessage:"Clear filters"})}),description:(0,x.Y)(l.A,{id:"Nnsm0p",defaultMessage:"All runs in this experiment have been filtered. Change or clear filters to view runs."}),title:(0,x.Y)(l.A,{id:"Tl63jz",defaultMessage:"All runs are filtered"}),image:(0,x.Y)(r.YGH,{})}):(0,x.Y)(r.SvL,{description:(0,x.Y)(l.A,{id:"coo35p",defaultMessage:"No runs have been logged yet. <link>Learn more</link> about how to create ML model training runs in this experiment.",values:{link:e=>(0,x.Y)("a",{target:"_blank",href:a.XO,rel:"noreferrer",children:e})}}),title:(0,x.Y)(l.A,{id:"sByLVU",defaultMessage:"No runs logged"}),image:(0,x.Y)(r.cuA,{})})})})},Ze={noResults:{maxWidth:360},noResultsWrapper:e=>({marginTop:e.spacing.lg,inset:0,backgroundColor:e.colors.backgroundPrimary,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"})},Qe=e=>{let{updateRunListHidden:t,runListHidden:n}=e;const{theme:r}=(0,c.u)();return(0,x.FD)("div",{css:(0,I.AH)({position:"absolute",top:0,bottom:0,width:2*r.spacing.md,right:-r.spacing.md,zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"transparent","&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${r.colors.primary}`}},opacity:n?1:0,transition:"opacity 0.2s"},""),children:[(0,x.Y)("div",{className:"bar",css:(0,I.AH)({transition:"opacity 0.2s",opacity:0,position:"absolute",left:r.spacing.md-2,top:0,backgroundColor:r.colors.primary,bottom:0,width:3,pointerEvents:"none"},"")}),(0,x.Y)("div",{className:"button",css:(0,I.AH)({transition:"border-color 0.2s",position:"relative",width:r.general.iconSize,height:r.general.iconSize,backgroundColor:r.colors.backgroundPrimary,borderRadius:r.general.iconSize,overflow:"hidden",border:`1px solid ${r.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center"},""),children:(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunstablecollapse.tsx_70",onClick:()=>t(!n),icon:n?(0,x.Y)(c.b,{}):(0,x.Y)(c.o,{}),size:"small"})})]})},Xe="is-out-of-viewport",Je="is-hidden",et="is-minimized",tt=".ag-root",nt=".ag-pinned-left-cols-container",rt=".ag-center-cols-container",st=".ag-header",at=".ag-body-viewport",it=e=>{let{onClick:t,gridContainerElement:n,isInitialized:a,visible:i,moreRunsAvailable:o,moreAvailableRunsTableColumnCount:d=0}=e;const u=(0,s.useRef)(null),p=(0,s.useRef)(),g=(0,s.useRef)(Boolean(o));(0,s.useEffect)((()=>{g.current=Boolean(o)}),[o]);const m=(0,s.useCallback)((e=>{if(!u.current||!window.ResizeObserver||!e)return;const t=u.current,n=e.querySelector(tt),r=e.querySelector(nt),s=e.querySelector(rt),a=e.querySelector(st),i=e.querySelector(at);let o=0,l=0,d=0,c=0,m=0,h=0;if(r&&s&&a&&n&&i){const e=new ResizeObserver((e=>{var u,f,v,y;for(const t of e)t.target===n&&(o=t.contentRect.width),t.target===r&&(l=t.contentRect.width,d=t.contentRect.height),t.target===i&&(m=t.contentRect.height),t.target===a&&(h=t.contentRect.height),t.target===s&&(c=t.contentRect.width);const x=l+c,b=h;x+180>=o?null===(u=p.current)||void 0===u||u.classList.add(Xe):null===(f=p.current)||void 0===f||f.classList.remove(Xe);const w=g.current?32:0,Y=d<m?d-w:m;Y<100?null===(v=p.current)||void 0===v||v.classList.add(et):null===(y=p.current)||void 0===y||y.classList.remove(et),t.style.transform=`translate3d(${x}px, ${b}px, 0)`,t.style.height=`${Y+1}px`}));return e.observe(r),e.observe(s),e.observe(a),e.observe(n),e.observe(i),()=>e.disconnect()}}),[]);return(0,s.useEffect)((()=>{a&&n&&(p.current=n,m(n))}),[m,a,n]),window.ResizeObserver?(0,x.Y)("div",{ref:u,css:ot.columnContainer,className:i?"":Je,children:i&&(0,x.Y)("div",{css:ot.buttonContainer,children:(0,x.FD)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_experimentviewrunstableaddcolumncta.tsx_218",css:ot.button,type:"link",onClick:t,children:[(0,x.Y)(r.GYj,{css:ot.buttonIcon}),(0,x.Y)("div",{css:ot.caption,children:(0,x.Y)(l.A,{id:"npHb2a",defaultMessage:"Show more columns {count, select, 0 {} other {({count} total)}}",values:{count:d}})})]})})}):null},ot={columnContainer:e=>({width:180,height:0,position:"absolute",border:`1px solid ${e.colors.borderDecorative}`,borderTop:0,top:0,left:0,willChange:"transform",transform:"translate3d(0, 0, 0)",[`.${et} &`]:{display:"flex",alignItems:"center"},[`&.${Je}, .${Xe} &`]:{display:"none"},pointerEvents:"none",display:"flex",alignItems:"center"}),buttonContainer:e=>({top:0,paddingLeft:e.spacing.lg,paddingRight:e.spacing.lg,width:"100%",[`.${et} &`]:{paddingTop:e.spacing.xs},pointerEvents:"all"}),button:{whiteSpace:"pre-wrap",width:"100%"},buttonIcon:e=>({color:e.colors.textSecondary}),caption:e=>({color:e.colors.textSecondary,[`.${et} &`]:{display:"none"}})},lt=e=>(0,x.Y)("strong",{children:e}),dt=e=>{let{isLoading:t,allRunsCount:n}=e;return(0,x.FD)("div",{css:ct.statusBar,children:[(0,x.Y)(c.T.Text,{size:"sm",color:t?"secondary":void 0,children:(0,x.Y)(l.A,{id:"gLj8lU",defaultMessage:"<strong>{length}</strong> matching {length, plural, =0 {runs} =1 {run} other {runs}}",values:{strong:lt,length:n}})}),t&&(0,x.Y)(c.S,{size:"small"})]})},ct={statusBar:e=>({height:28,display:"flex",gap:8,marginTop:-1,position:"relative",alignItems:"center",borderTop:`1px solid ${e.colors.border}`})};var ut=n(36740),pt=n(37752);const gt=(e,t,n)=>{n.forEachNode((n=>{var r;if(null!==(r=n.data)&&void 0!==r&&r.isLoadMoreRow)return;const{runInfo:s,runDateAndNestInfo:a}=n.data;if(!s)return;const i=s.runUuid;e.includes(i)&&(null!==a&&void 0!==a&&a.childrenIds&&e.push(...a.childrenIds),n.setSelected(t,!1,!0))}))};var mt=n(22853),ht=n(88492);var ft={name:"yqjhl6",styles:"display:flex;flex-direction:column;position:relative"};const vt=s.memo((e=>{let{experiments:t,searchFacetsState:n,runsData:a,isLoading:i,moreRunsAvailable:o,updateViewState:d,onAddColumnClicked:u,rowsData:p,loadMoreRunsFunc:g,onDatasetSelected:m,expandRows:h,viewState:f,uiState:b,compareRunsMode:w,showControllerNotification:Y,onOpenController:S}=e;const{theme:C}=(0,c.u)(),I=(0,oe.e)(),R=(0,ae.Px)(),{orderByKey:A,orderByAsc:M}=n,{selectedColumns:_,runsPinned:F,runsHidden:D,runListHidden:E}=b,L=(0,s.useCallback)((e=>{I((t=>({...t,runListHidden:e})))}),[I]),B="TABLE"!==w,{paramKeyList:H,metricKeyList:O,tagsList:P}=a,[K,N]=(0,s.useState)(),[z,$]=(0,s.useState)(),V=((0,s.useRef)([]),(0,s.useMemo)((()=>v.A.getVisibleTagKeyList(P)),[P])),G=(0,s.useRef)(null),W=(0,s.useMemo)((()=>p.some((e=>{var t;return null===(t=e.runDateAndNestInfo)||void 0===t?void 0:t.hasExpander}))),[p]),q=(0,s.useCallback)((e=>I((t=>{let{runsExpanded:n,...r}=t;return{...r,runsExpanded:{...n,[e]:!n[e]}}}))),[I]),j=(0,s.useCallback)((e=>{I((t=>({...t,runsPinned:t.runsPinned.includes(e)?t.runsPinned.filter((t=>t!==e)):[...t.runsPinned,e]})))}),[I]),Z=(0,mt.v)(p),Q=(0,s.useCallback)((e=>{I((t=>{if(e===We.oy.SHOWALL)return{...t,runsHidden:[]};if(e===We.oy.HIDEALL)return{...t,runsHidden:a.runInfos.map((e=>{let{runUuid:t}=e;return t}))};const n=e;return{...t,runsHidden:t.runsHidden.includes(n)?t.runsHidden.filter((e=>e!==n)):[...t.runsHidden,n]}}))}),[I,a]),X=(0,T.M1)()?Z:Q,J=(0,s.useCallback)((e=>{N(e.api),$(e.columnApi)}),[]),{handleRowSelected:ee,onSelectionChange:te}=(e=>{const t=(0,s.useCallback)((t=>{let{api:n}=t;const r=n.getSelectedRows().filter((e=>e.runInfo)).map((e=>{let{runInfo:t}=e;return t.runUuid}));e({runsSelected:r.reduce(((e,t)=>({...e,[t]:!0})),{})})}),[e]);return{handleRowSelected:(0,s.useCallback)((e=>{const t=Boolean(e.node.isSelected()),{runDateAndNestInfo:n,runInfo:r,groupParentInfo:s}=e.data;if(s&&gt(s.runUuids,t,e.api),!n)return;const{isParent:a,expanderOpen:i,childrenIds:o}=n;if(a&&i&&o)gt(o,t,e.api);else if(r){gt([r.runUuid],t,e.api);const n=(0,U.uniqBy)(e.api.getSelectedRows().filter((e=>Boolean(e.runUuid))),"runUuid");l=n,e.api.forEachNode((e=>{const t=e.data;t.groupParentInfo&&(t.groupParentInfo.runUuids.every((e=>l.some((t=>t.runUuid===e))))&&e.setSelected(!0,!1,!0),t.groupParentInfo.runUuids.some((e=>l.some((t=>t.runUuid===e))))||e.setSelected(!1,!1,!0))}))}var l}),[]),onSelectionChange:t}})(d),ne=a.runInfos.every((e=>{let{runUuid:t}=e;return D.includes(t)})),re=(0,Ge.ab)({selectedColumns:_,onExpand:q,compareExperiments:t.length>1,onTogglePin:j,onToggleVisibility:X,metricKeyList:O,paramKeyList:H,tagKeyList:V,columnApi:z,isComparingRuns:B,onDatasetSelected:m,expandRows:h,allRunsHidden:ne,runsHiddenMode:b.runsHiddenMode,showControllerNotification:Y,onOpenController:S}),se=(0,s.useCallback)((e=>{(0,T.Zt)()&&e&&B&&e.sizeColumnsToFit()}),[B]);(0,s.useEffect)((()=>{if(K)if(i)K.showLoadingOverlay();else{if(K.hideOverlay(),p.length&&o)return K.setRowData([...p,(0,qe.Q)()]),void se(K);K.setRowData(p),se(K)}}),[K,p,i,o,g,se]);const le=(0,s.useMemo)((()=>(0,Ge.NN)(t.length>1).length+(O.length+H.length+V.length)),[t.length,V.length,O.length,H.length]),de=_.length>=le,ce=Math.max(0,le-_.length),ue=(0,s.useMemo)((()=>a.runInfos.filter((e=>F.includes(e.runUuid)||a.runUuidsMatchingFilter.includes(e.runUuid))).length),[a,F]);(0,s.useLayoutEffect)((()=>{K&&(B&&(K.deselectAll(),K.sizeColumnsToFit()),K.resetRowHeights())}),[K,B]);const pe=(0,s.useCallback)((e=>{if(B||!h)return k.Fc;const t=(0,k.GF)(y.RO.ATTRIBUTES,y.qo.DATASET),n=_.includes(t);return(0,ut.NA)(n,e)}),[_,B,h]);(0,s.useEffect)((()=>{null===K||void 0===K||K.resetRowHeights()}),[K,_,h]);const[ge,me]=(0,s.useState)(null),he=(0,s.useCallback)((e=>{var t;let{column:n,data:r,value:s}=e;const a=null===(t=n.getParent())||void 0===t?void 0:t.getGroupId();(a===y.RO.METRICS||a===y.RO.PARAMS)&&(me({value:s,header:`Run name: ${r.runName}, Column name: ${n.getColId()}`}),d({previewPaneVisible:!0}))}),[d]),fe=!de&&!B&&p.length>0,ve=!B&&f.previewPaneVisible,ye=!E||!B,xe=!E,be=B&&!(0,T.Zt)(),we=p.length<1&&!i&&!E,Ye=(0,s.useMemo)((()=>({orderByAsc:M,orderByKey:A})),[M,A]);return(0,x.FD)("div",{css:e=>({display:"grid",flex:1,gridTemplateColumns:ve?"1fr auto":"1fr",borderTop:`1px solid ${e.colors.border}`}),className:B&&(0,T.M1)()?"is-table-comparing-runs-mode":void 0,children:[(0,x.FD)("div",{css:ft,children:[(0,x.FD)("div",{ref:G,className:ze()("ag-theme-balham ag-grid-sticky",{"ag-grid-expanders-visible":W,"is-table-comparing-runs-mode":B&&(0,T.M1)()}),css:[yt.agGridOverrides(C),{display:ye?"block":"hidden",height:"100%"},""],"aria-hidden":!ye,children:[(0,x.Y)(ht.a,{runsHiddenMode:b.runsHiddenMode,children:(0,x.Y)($e.p,{context:Ye,defaultColDef:Ge.Uc,columnDefs:re,rowSelection:"multiple",onGridReady:J,onSelectionChanged:te,getRowHeight:pe,headerHeight:k.Fc,onRowSelected:ee,suppressRowClickSelection:!0,suppressColumnMoveAnimation:!0,suppressScrollOnNewData:!0,isFullWidthRow:Ge.M1,fullWidthCellRenderer:"LoadMoreRowRenderer",fullWidthCellRendererParams:{loadMoreRunsFunc:g},suppressFieldDotNotation:!0,enableCellTextSelection:!0,components:(0,Ge.JA)(),suppressNoRowsOverlay:!0,loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:{showImmediately:!0},getRowId:Ge.uk,rowBuffer:101,onCellClicked:he,onGridSizeChanged:e=>{let{api:t}=e;return se(t)}})}),fe&&(0,x.Y)(it,{gridContainerElement:G.current,isInitialized:Boolean(K),onClick:u,visible:!i,moreRunsAvailable:o,moreAvailableRunsTableColumnCount:ce})]}),we&&(0,x.Y)(je,{onClearFilters:()=>{R((0,ie.G)())},isFiltered:(0,Ve.e9)(n)}),xe&&(0,x.Y)(dt,{allRunsCount:ue,isLoading:i}),be&&(0,x.Y)(Qe,{runListHidden:E,updateRunListHidden:L})]}),ve&&(0,x.Y)(pt.V,{content:null===ge||void 0===ge?void 0:ge.value,copyText:null===ge||void 0===ge?void 0:ge.value,headerText:null===ge||void 0===ge?void 0:ge.header,onClose:()=>d({previewPaneVisible:!1}),empty:(0,x.Y)(r.SvL,{description:(0,x.Y)(l.A,{id:"cAKSkQ",defaultMessage:"Select a cell to display preview"})})})]})})),yt={agGridOverrides:e=>{const t=(e=>({rowForeground:e.colors.textPrimary,rowBackground:e.colors.backgroundPrimary,rowBackgroundHover:`${e.colors.backgroundSecondary}0A`,rowBackgroundSelected:`${e.colors.backgroundSecondary}14`,rowBackgroundHoverSelected:`${e.colors.backgroundSecondary}1F`,columnSortedBy:`${e.colors.blue400}1F`,headerBackground:e.colors.backgroundSecondary,headerTextColor:e.colors.textSecondary,headerGroupTextColor:e.colors.textSecondary,borderColor:e.colors.borderDecorative,headerBorderColor:"transparent",checkboxBorderColor:e.colors.actionDefaultBorderDefault,checkboxBorderColorChecked:e.colors.backgroundPrimary,checkboxBackgroundColorChecked:e.colors.actionPrimaryBackgroundDefault,overlayBackground:`${e.colors.backgroundSecondary}99`}))(e);return{height:"100%",position:"relative","&.ag-theme-balham":{"--ag-border-color":t.borderColor,"--ag-row-border-color":t.borderColor,"--ag-foreground-color":t.rowForeground,"--ag-background-color":t.rowBackground,"--ag-odd-row-background-color":t.rowBackground,"--ag-row-hover-color":t.rowBackgroundHover,"--ag-selected-row-background-color":t.rowBackgroundSelected,"--ag-header-foreground-color":t.headerTextColor,"--ag-header-background-color":t.headerBackground,"--ag-modal-overlay-background-color":t.overlayBackground,"&.ag-grid-sticky .ag-header":{position:"sticky",top:0,zIndex:1},"&.ag-grid-sticky .ag-root":{overflow:"visible"},"&.ag-grid-sticky .ag-root-wrapper":{border:"0",borderRadius:"4px",overflow:"visible"},".ag-header::after":{content:'""',position:"absolute",top:k.Fc,left:0,right:0,height:1,backgroundColor:t.borderColor},".ag-cell":{display:"flex",overflow:"hidden","& > .ag-cell-wrapper":{overflow:"hidden"}},".ag-header-cell":{padding:0},".ag-header-cell .ag-checkbox":{padding:"0 7px",borderLeft:"1px solid transparent"},".ag-cell.is-ordered-by, .ag-header-cell > .is-ordered-by":{backgroundColor:t.columnSortedBy},".ag-header-row":{"--ag-border-color":t.headerBorderColor},".ag-header-row.ag-header-row-column-group":{"--ag-header-foreground-color":t.headerGroupTextColor},".ag-row.ag-row-selected.ag-row-hover":{backgroundColor:t.rowBackgroundHoverSelected},".ag-header:not(:hover) .ag-header-cell::after, .ag-header:not(:hover) .ag-header-group-cell::after":{opacity:0},".ag-pinned-left-header":{borderRight:"none"},".ag-overlay-loading-wrapper":{paddingTop:4*e.spacing.md,alignItems:"center",zIndex:2},".ag-overlay-loading-wrapper .ag-react-container":{flex:1},".ag-center-cols-container":{minHeight:0},".ag-full-width-row":{borderBottom:0,backgroundColor:"transparent",zIndex:1,"&.ag-row-hover":{backgroundColor:"transparent"}},".is-checkbox-cell":{display:"flex",alignItems:"center",paddingLeft:7,".is-multiline-cell .ag-cell-value":{height:"100%"}},".is-previewable-cell":{cursor:"pointer"},".ag-header-cell .ag-checkbox .ag-input-wrapper:not(.ag-indeterminate):not(.ag-checked)":{"--ag-checkbox-background-color":t.headerBackground},".ag-cell-wrapper .ag-selection-checkbox":{marginRight:20},".is-checkbox-cell, .ag-header-cell .ag-checkbox":{".ag-checkbox-input-wrapper::after":{color:t.checkboxBorderColor},".ag-checkbox-input-wrapper.ag-checked":{"--ag-checkbox-background-color":t.checkboxBackgroundColorChecked,"--ag-checkbox-checked-color":t.checkboxBorderColorChecked,"&::after":{color:t.checkboxBorderColorChecked}}}}}}};class xt{constructor(){this.runsSelected={},this.hiddenChildRunsSelected={},this.columnSelectorVisible=!1,this.previewPaneVisible=!1,this.artifactViewState={selectedTables:[],groupByCols:[],outputColumn:"",intersectingOnly:!1}}}var bt=n(57368);const wt="FETCHED_RUN_NOTIFICATION_KEY",Yt=e=>{const{formatMessage:t}=(0,L.A)(),n=(0,s.useCallback)(((e,n)=>e===n?t({id:"KJbYrw",defaultMessage:"Loaded {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{childRuns:n}):t({id:"ziIhFQ",defaultMessage:"Loaded {allRuns} {allRuns, plural, =1 {run} other {runs}}, including {childRuns} child {childRuns, plural, =1 {run} other {runs}}"},{allRuns:e,childRuns:n})),[t]);return(0,s.useCallback)(((t,r)=>{if(Array.isArray(t)){const{allRuns:s,childRuns:a}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const n=e.filter((e=>!t.some((t=>t.runUuid===e.info.runUuid)))),r=n.filter((e=>{var t;const n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.tags;return Array.isArray(n)&&n.some((e=>e.key===k.Ol&&Boolean(e.value)))}));return{allRuns:n.length,childRuns:r.length}}(t,r);if(a<1)return;e.close(wt),e.info({message:n(s,a),duration:3,placement:"bottomRight",key:wt})}}),[e,n])};var St=n(85343),Ct=n(72456),It=n(4972),kt=n(15230);var Rt={name:"1h0bf8r",styles:"body, :host{user-select:none;}"},At={name:"5ob2ly",styles:"display:flex;position:relative"};const Mt=e=>{let{runListHidden:t,width:n,onResize:r,children:a}=e;const i=(0,oe.e)(),[o,l]=(0,s.useState)(!1);return(0,x.FD)(x.FK,{children:[(0,x.Y)(kt.ResizableBox,{css:At,style:{flex:`0 0 ${t?0:n}px`},width:n,axis:"x",resizeHandles:["e"],minConstraints:[250,0],handle:(0,x.Y)(_t,{runListHidden:t,updateRunListHidden:e=>{i((t=>({...t,runListHidden:e})))}}),onResize:(e,n)=>{let{size:s}=n;t||r(s.width)},onResizeStart:()=>!t&&l(!0),onResizeStop:()=>l(!1),children:a}),o&&(0,x.Y)(I.mL,{styles:Rt})]})},_t=s.forwardRef(((e,t)=>{let{updateRunListHidden:n,runListHidden:r,...s}=e;const{theme:a}=(0,c.u)();return(0,x.FD)("div",{ref:t,...s,css:(0,I.AH)({transition:"opacity 0.2s",width:0,overflow:"visible",height:"100%",position:"relative",zIndex:10,display:"flex",opacity:r?1:0,"&:hover":{opacity:1,".bar":{opacity:1},".button":{border:`2px solid ${a.colors.actionDefaultBorderHover}`}}},""),children:[(0,x.Y)("div",{css:(0,I.AH)({position:"absolute",left:-a.general.iconSize/2,width:a.general.iconSize,cursor:r?void 0:"ew-resize",height:"100%",top:0,bottom:0},""),children:(0,x.Y)("div",{className:"button",css:(0,I.AH)({top:"50%",transition:"border-color 0.2s",position:"absolute",width:a.general.iconSize,height:a.general.iconSize,backgroundColor:a.colors.backgroundPrimary,borderRadius:a.general.iconSize,overflow:"hidden",border:`1px solid ${a.colors.border}`,display:"flex",alignItems:"center",justifyContent:"center",zIndex:11},""),children:(0,x.Y)(c.B,{componentId:"mlflow.experiment_page.table_resizer.collapse",onClick:()=>n(!r),icon:r?(0,x.Y)(c.b,{}):(0,x.Y)(c.o,{}),size:"small"})})}),(0,x.Y)("div",{className:"bar",css:(0,I.AH)({position:"absolute",opacity:0,left:-1.5,width:3,height:"100%",top:0,bottom:0,backgroundColor:a.colors.actionPrimaryBackgroundDefault},"")})]})}));var Ft=n(2028),Dt=n(16612);const Et="CONTROLLER_NOTIFICATION_KEY";var Tt=n(93664),Lt=n(72178);const Bt=()=>{const e=new Date;return e.setMilliseconds(0),e},Ht=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,T.Zt)()?{display:"flex"}:{display:"grid",gridTemplateColumns:e?t?"10px 1fr":"295px 1fr":"1fr"}};function Ot(e){return e.map((e=>e.replace(/(experiment\.py|ml_controller\.py):\d+ -|- INFO/g,"")))}const Pt=s.memo((e=>{const[t]=(0,se.a)(),[n,a]=(0,s.useState)(["No experiment logs available yet..."]),[i,o]=(0,s.useState)(["No interactive control logs available yet..."]),{theme:l}=(0,c.u)(),d=(0,oe.e)(),[u,g]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),{experiments:f,runsData:b,uiState:w,searchFacetsState:Y,isLoadingRuns:S,loadMoreRuns:C,moreRunsAvailable:I,requestError:k,refreshRuns:R}=e,[A,M]=(0,s.useState)(new xt),{experimentId:_}=f[0],F=$(_),[D,E]=(0,s.useState)("true"===F.getItem("expandRows"));(0,s.useEffect)((()=>{F.setItem("expandRows",D)}),[D,F]);const{paramKeyList:B,metricKeyList:H,tagsList:O,paramsList:P,metricsList:K,runInfos:N,runUuidsMatchingFilter:U,datasetsList:z}=b,V=(0,p.d4)((e=>{let{entities:t}=e;return t.modelVersionsByRunUuid})),G=(0,s.useMemo)((()=>N.map(((e,t)=>({runInfo:e,params:P[t],metrics:K[t],tags:O[t],datasets:z[t]})))),[z,K,P,N,O]),{orderByKey:W,searchFilter:q}=Y,{runsPinned:j,runsExpanded:Z,runsHidden:Q,runListHidden:X}=w,J="TABLE"!==t,ee=(0,s.useCallback)((e=>M((t=>({...t,...e})))),[]),te=(0,s.useCallback)((()=>{ee({columnSelectorVisible:!0})}),[ee]),ne=(0,s.useMemo)((()=>!W&&!q||W===y.T8.DATE),[W,q]),[ae,ie]=(0,s.useState)(Bt);(0,s.useEffect)((()=>{ie(Bt)}),[N]);const le=(0,s.useMemo)((()=>v.A.getVisibleTagKeyList(O)),[O]),[de,ce]=(0,s.useState)(),ue=(0,bt.ZU)({experiments:f,paramKeyList:B,metricKeyList:H,modelVersionsByRunUuid:V,runsExpanded:Z,tagKeyList:le,nestChildren:ne,referenceTime:ae,runData:G,runUuidsMatchingFilter:U,runsPinned:j,runsHidden:Q,groupBy:w.groupBy,groupsExpanded:w.groupsExpanded,runsHiddenMode:w.runsHiddenMode});(0,s.useEffect)((()=>{if("LOGS"===t){const e=async()=>{try{const e=await Dt.F.getLogs({experiment_name:f[0].name});if(e&&Array.isArray(e)&&(0===e.length||""===e[0]))return void a(["No experiment logs available yet..."]);const t=Ot(e);a(t)}catch(e){console.error("Failed to fetch logs:",e)}};if(f.length>1)return void a(["Please select a single experiment to view experiment logs."]);e()}if("IC_LOGS"===t){const e=async()=>{try{const e=await Dt.F.getICLogs({experiment_name:f[0].name});if(e&&Array.isArray(e)&&(0===e.length||""===e[0]))return void o(["No interactive control logs available yet..."]);const t=Ot(e);o(t)}catch(e){console.error("Failed to fetch logs:",e)}};if(f.length>1)return void o(["Please select a single experiment to view interactive control logs."]);e()}}),[t]);const[pe,ge]=(0,r.oL1)(),me=Yt(pe),he=(e=>{const{formatMessage:t}=(0,L.A)(),n=(0,s.useCallback)(((e,n)=>({resume:{success:t({id:"JC7Ug7",defaultMessage:"Run resumed successfully"}),error:t({id:"xnLgNA",defaultMessage:"Failed to resume run"})},clone_modify:{success:t({id:"KaBKuO",defaultMessage:"Run cloned and modified successfully"}),error:t({id:"RMIYqR",defaultMessage:"Failed to clone and modify run"})},stop:{success:t({id:"+0pcPC",defaultMessage:"Run stopped successfully"}),error:t({id:"NwnW5a",defaultMessage:"Failed to stop run"})},delete:{success:t({id:"lXsHPx",defaultMessage:"Run deleted successfully, page should refresh"}),error:t({id:"VBdZNK",defaultMessage:"Failed to delete run"})}}[e][n])),[t]);return(0,s.useCallback)(((t,r,s)=>{e.close(Et),e[r]({message:s||n(t,r),duration:120,placement:"topRight",key:Et})}),[e,n])})(pe),[fe,ve]=(0,s.useState)(295),ye=(0,s.useCallback)((()=>{I&&!S&&C().then((e=>{me(e,N)}))}),[I,S,C,N,me]),xe=(0,s.useCallback)(((e,t)=>{ce({datasetWithTags:e,runData:t}),g(!0)}),[]),be=(0,It.$)(),we=w.autoRefreshEnabled&&(0,T.Hn)()&&be,Ye=()=>{g(!1),h(null)},Se=(0,x.Y)(vt,{experiments:f,runsData:b,searchFacetsState:Y,viewState:A,isLoading:S,updateViewState:ee,onAddColumnClicked:te,rowsData:ue,loadMoreRunsFunc:ye,moreRunsAvailable:I,onDatasetSelected:xe,expandRows:D,uiState:w,compareRunsMode:t,showControllerNotification:he,onOpenController:(e,t)=>{h({runUuid:e,runName:t}),g(!0)}});return(0,x.FD)(re,{visibleRuns:ue,refreshRuns:R,children:[(0,x.Y)(Ne,{viewState:A,updateViewState:ee,runsData:b,searchFacetsState:Y,experimentId:_,requestError:k,expandRows:D,updateExpandRows:E,refreshRuns:R,uiState:w,isLoading:S}),(0,x.FD)("div",{css:["min-height:225px;height:100%;position:relative;",Ht(J,X),""],children:[J&&(0,T.Zt)()?(0,x.Y)(Mt,{onResize:ve,runListHidden:X,width:fe,children:Se}):Se,"CHART"===t&&(0,x.Y)(Ct.o,{isLoading:S,comparedRuns:ue,metricKeyList:b.metricKeyList,paramKeyList:b.paramKeyList,experimentTags:b.experimentTags,compareRunCharts:w.compareRunCharts,compareRunSections:w.compareRunSections,groupBy:w.groupBy,autoRefreshEnabled:we,showControllerNotification:he,refreshRuns:R}),"LOGS"===t&&(0,x.Y)(Ft.A,{logs:n}),"IC_LOGS"===t&&(0,x.Y)(Ft.A,{logs:i}),ge,de&&(0,x.Y)(St.O,{isOpen:u,setIsOpen:g,selectedDatasetWithRun:de,setSelectedDatasetWithRun:ce})]}),(0,x.Y)(Tt.A,{isOpen:u,onClose:Ye,width:700,showBackdrop:!0,closeOnBackdropClick:!0,closeOnEscape:!0,customHeader:(0,x.FD)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",padding:"0 20px"},children:[(0,x.Y)("div",{style:{fontSize:"18px",fontWeight:"600",color:l.colors.textPrimary},children:"Interactive Controller"}),(0,x.Y)("button",{onClick:Ye,style:{background:"none",border:"none",cursor:"pointer",padding:"8px",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:l.colors.textSecondary,transition:"all 0.2s ease"},"aria-label":"Close drawer",children:"\u2715"})]}),children:m&&(0,x.Y)(Lt.A,{runUuid:m.runUuid,runName:m.runName,onClose:Ye,showControllerNotification:he,onHideRun:e=>{d((t=>({...t,runsHidden:t.runsHidden.includes(e)?t.runsHidden.filter((t=>t!==e)):[...t.runsHidden,e]}))),null===R||void 0===R||R()},refreshRuns:R})})]})}));var Kt=n(89736);const Nt=()=>{const e=(0,s.useContext)(Kt.Y);if(!e)throw new Error("Trying to use GetExperimentsContext actions outside of the context!");return e};var Ut=n(857),zt=n(75532);var $t=n(98412),Vt=n(52350),Gt=n(69708);const Wt=(e,t,n)=>{if(!e||!t.length)return null;return{...(0,Ve.TB)(t,{...e,runsPinned:n},Date.now()),requestedFacets:e}},qt=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(0,p.wA)(),i=(0,p.d4)((e=>e.clusters.mlflowServer.status)),[o,l]=(0,s.useState)((()=>jt())),d=(0,s.useMemo)((()=>n?JSON.stringify(n.sort()):null),[n]),[c,u]=(0,s.useState)(!0),[m,h]=(0,s.useState)(!0),[f,y]=(0,s.useState)(null),[x,b]=(0,s.useState)(null),w=(0,s.useRef)([]),Y=(0,s.useRef)(null),S=(0,s.useRef)(null);(0,s.useEffect)((()=>{r||(h(!0),l(jt()))}),[d,r]);const C=(0,s.useCallback)(((e,t,n)=>{l((0,$t.r)(e,{datasetsFilter:n.datasetsFilter,lifecycleFilter:n.lifecycleFilter,modelVersionFilter:n.modelVersionFilter,experiments:[],experimentIds:t}))}),[]);(0,s.useEffect)((()=>{w.current=e.runsPinned}),[e.runsPinned]);const I=(0,s.useCallback)((e=>{(0,Ve.iH)(e||[],Gt.hY,a)}),[a]),k=(0,s.useCallback)((async()=>{const e=await(0,O.r)();return e!==i.isValid&&a({type:g.FY,payload:{isValid:e,uri:i.uri}}),e}),[a,i.isValid,i.uri]),R=(0,s.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await k()?a(((n,r)=>(t.isAutoRefreshing||(u(!0),S.current=e),n((e.pageToken?g.e$:g.bn)(e)).then((async n=>{var s;let{value:a}=n;return y(a.next_page_token||null),Y.current=Date.now(),u(!1),h(!1),S.current&&null!==(s=t.discardResultsFn)&&void 0!==s&&s.call(t,S.current)||(C(r(),e.experimentIds,e.requestedFacets),I(a.runs||[])),a})).catch((e=>{u(!1),h(!1),b(e),v.A.logErrorAndNotifyUser(e)}))))):(b(new Vt.s("MLflow server is not accessible")),[])}),[a,C,I,k]);(0,s.useEffect)((()=>{if(r)return;const e=Wt(t,n,w.current);e&&R(e)}),[R,a,r,t,n]);return(e=>{let{experimentIds:t,lastFetchedTime:n,fetchRuns:r,searchFacets:a,enabled:i,cachedPinnedRuns:o,runsData:l,isLoadingRuns:d,checkMLflowServerStatus:c}=e;const u=(0,s.useRef)(void 0),p=(0,s.useRef)(d),m=(0,s.useRef)(i),h=(0,s.useRef)(l.runInfos);h.current=l.runInfos,p.current=d,m.current=i,(0,s.useEffect)((()=>{if(window.clearTimeout(u.current),!i||d)return;const e=async()=>{const s=Boolean(n.current),i=n.current?Date.now()-n.current:0;if(a&&s&&i>=Ve.t4){const e=Math.ceil(h.current.length/g.Aj),n={...(0,Ve.TB)(t,{...a,runsPinned:o.current},Date.now()),requestedFacets:a,maxResults:e*g.Aj};await r(n,{isAutoRefreshing:!0,discardResultsFn:t=>{const r=Math.ceil(h.current.length/g.Aj);return!m.current||r!==e||!(0,U.isEqual)(t.requestedFacets,n.requestedFacets)}})}window.clearTimeout(u.current),m.current&&(u.current=window.setTimeout(e,Ve.t4))};return e(),()=>{clearTimeout(u.current)}}),[t,r,a,i,o,n,d])})({experimentIds:n,fetchRuns:R,searchFacets:t,enabled:e.autoRefreshEnabled&&(0,T.Hn)(),cachedPinnedRuns:w,runsData:o,isLoadingRuns:c,lastFetchedTime:Y,checkMLflowServerStatus:k}),{isLoadingRuns:c,moreRunsAvailable:Boolean(f),refreshRuns:()=>{const e=Wt(t,n,w.current);e&&R(e)},loadMoreRuns:async()=>{const e=Wt(t,n,w.current);return f&&e?R({...e,pageToken:f}):[]},isInitialLoadingRuns:m,runsData:o,requestError:x,mlflowServerStatus:i}},jt=()=>({datasetsList:[],experimentTags:{},metricKeyList:[],metricsList:[],modelVersionsByRunUuid:{},paramKeyList:[],paramsList:[],runInfos:[],runUuidsMatchingFilter:[],tagsList:[]});const Zt=[n(71923).L],Qt=(0,We.uY)();var Xt=n(9101),Jt=n(56928),en=n(75703),tn=n(11473);const nn=[["header","bold","italic","strikethrough"],["link","code","image"],["unordered-list","ordered-list"]],rn=(0,tn.T7)(),sn=e=>{if(e){const t=(0,tn.NW)(rn.makeHtml(e));return(0,tn.Yc)(t)}return null},an=e=>{let{experiment:t,editing:n,setEditing:a,setShowAddDescriptionButton:i}=e;const o=(0,p.d4)((e=>{const n=(0,Xt.xy)(t.experimentId,e);return n?(e=>{var t;return(null===(t=Object.values(e).find((e=>e.key===Jt.e)))||void 0===t?void 0:t.value)||void 0})(n):""}));i(!o);const[d,u]=(0,s.useState)(o),[g,m]=(0,s.useState)("write"),[h,f]=(0,s.useState)(!1),{theme:v}=(0,c.u)(),y=16+2*v.spacing.sm,{actions:{setExperimentTagApi:b}}=Nt(),w=(0,p.wA)(),Y=(0,s.useCallback)((e=>{a(!1),i(!e);const n=b(t.experimentId,Jt.e,e);w(n)}),[t.experimentId,b,w,a,i]);return(0,x.FD)("div",{children:[d&&(0,x.FD)("div",{style:{whiteSpace:h?"normal":"pre",lineHeight:v.typography.lineHeightSm,background:v.colors.backgroundSecondary,display:"flex",alignItems:"flex-start",padding:v.spacing.xs},children:[(0,x.Y)("div",{style:{flexGrow:1,marginRight:12,overflow:"hidden",overflowWrap:h?"break-word":void 0,padding:`${v.spacing.sm}px 12px`,maxHeight:h?"none":y+"px"},children:(0,x.Y)("div",{dangerouslySetInnerHTML:{__html:sn(d)}})}),(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_114",icon:(0,x.Y)(r.R2l,{}),onClick:()=>a(!0),style:{padding:`0px ${v.spacing.sm}px`}}),h?(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_120",icon:(0,x.Y)(r.Mtm,{}),onClick:()=>f(!1),style:{padding:`0px ${v.spacing.sm}px`}}):(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_experimentviewdescriptionnotes.tsx_126",icon:(0,x.Y)(r.D3D,{}),onClick:()=>f(!0),style:{padding:`0px ${v.spacing.sm}px`}})]}),(0,x.Y)(r.aFV,{title:(0,x.Y)(l.A,{id:"Vkr4Bs",defaultMessage:"Add description"}),visible:n,okText:(0,x.Y)(l.A,{id:"xUnYdk",defaultMessage:"Save"}),cancelText:(0,x.Y)(l.A,{id:"757GVc",defaultMessage:"Cancel"}),onOk:()=>{Y(d),a(!1)},onCancel:()=>{u(o),a(!1)},children:(0,x.Y)(s.Fragment,{children:(0,x.Y)(en.default,{value:d,minEditorHeight:200,maxEditorHeight:500,minPreviewHeight:20,toolbarCommands:nn,onChange:e=>u(e),selectedTab:g,onTabChange:e=>m(e),generateMarkdownPreview:()=>Promise.resolve(sn(d)),getIcon:e=>(0,x.Y)(r.m_M,{title:e,children:(0,x.Y)("span",{css:(0,I.AH)({color:v.colors.textPrimary},""),children:(0,x.Y)(en.SvgIcon,{icon:e})})})})})})]})},on=e=>{let{experiment:t,size:n}=e;const s=(0,L.A)();return(0,x.Y)(c.T.Text,{size:n,dangerouslySetAntdProps:{copyable:{text:t.name,icon:(0,x.Y)(r.TdU,{}),tooltips:[s.formatMessage({id:"A7R0ii",defaultMessage:"Copy path"}),s.formatMessage({id:"JCboZ7",defaultMessage:"Path copied"})]}}})},ln=e=>{let{artifactLocation:t}=e;return(0,x.Y)(x.FK,{children:t})},dn=e=>{let{experiment:t}=e;const n=(0,L.A)();return(0,x.Y)(c.T.Text,{size:"md",dangerouslySetAntdProps:{copyable:{text:t.experimentId,icon:(0,x.Y)(r.TdU,{}),tooltips:[n.formatMessage({id:"rytnce",defaultMessage:"Copy experiment id"}),n.formatMessage({id:"qH2cN+",defaultMessage:"Experiment id copied"})]}}})},cn=e=>{let{experiment:t}=e;const n=(0,L.A)();return(0,x.Y)(c.T.Text,{size:"md",dangerouslySetAntdProps:{copyable:{text:t.artifactLocation,icon:(0,x.Y)(r.TdU,{}),tooltips:[n.formatMessage({id:"cSSMIs",defaultMessage:"Copy artifact location"}),n.formatMessage({id:"5aZ7nE",defaultMessage:"Artifact location copied"})]}}})};var un={name:"1re1v0d",styles:"display:flex;flex-direction:column;flex-wrap:nowrap"};const pn=s.memo((e=>{let{experiment:t,searchFacetsState:n,uiState:a,showAddDescriptionButton:i,setEditing:o}=e;const u=(0,s.useMemo)((()=>t?[null===t||void 0===t?void 0:t.experimentId]:[]),[t]),{theme:p}=(0,c.u)(),g=(0,s.useMemo)((()=>t.name.split("/").pop()),[t.name]);y.Cm;return(0,x.Y)(d.z,{title:(0,x.Y)("div",{css:(0,I.AH)({[p.responsive.mediaQueries.xs]:{display:"inline",wordBreak:"break-all"},[p.responsive.mediaQueries.sm]:{display:"inline-block",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"70%",textOverflow:"ellipsis",verticalAlign:"middle"}},""),children:g}),titleAddOns:(0,x.FD)(x.FK,{children:[(0,x.Y)("div",{style:{display:"flex"},children:(0,x.Y)(r.m_M,{placement:"bottomLeft",dangerouslySetAntdProps:{overlayStyle:{maxWidth:"none"}},arrowPointAtCenter:!0,title:(0,x.FD)("div",{css:un,"data-testid":"experiment-view-header-info-tooltip-content",children:[(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"F8MqzZ",defaultMessage:"Path"}),": ",t.name+" ",(0,x.Y)(on,{experiment:t,size:"md"})]}),(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"PZGZHV",defaultMessage:"Experiment ID"}),": ",t.experimentId+" ",(0,x.Y)(dn,{experiment:t})]}),(0,x.FD)("div",{style:{whiteSpace:"nowrap"},children:[(0,x.Y)(l.A,{id:"8/7V3S",defaultMessage:"Artifact Location"}),": ",(0,x.Y)(ln,{artifactLocation:t.artifactLocation})," ",(0,x.Y)(cn,{experiment:t})]})]}),children:(0,x.Y)(c.B,{size:"small",type:"link",componentId:"mlflow.experiment_page.header.info_tooltip",icon:(0,x.Y)(r.mo0,{css:(0,I.AH)({color:p.colors.textSecondary},"")}),"data-testid":"experiment-view-header-info-tooltip","aria-label":"Info"})})}),i&&(0,x.Y)(c.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_header_experimentviewheaderv2.tsx_271",size:"small",onClick:()=>{o(!0)},css:(0,I.AH)({marginLeft:p.spacing.sm,background:`${p.colors.backgroundSecondary} !important`,border:"none"},""),children:(0,x.Y)(c.T.Text,{size:"md",children:"Add Description"})})]}),breadcrumbs:[],spacerSize:"sm",children:(0,x.Y)(S,{experimentIds:u,searchFacetsState:n,uiState:a})})}));var gn=n(4877),mn=n.n(gn);var hn={name:"1h8i7is",styles:"overflow-y:hidden;flex-shrink:0;transition:max-height .12s"};const fn=()=>{const e=(0,p.wA)(),[t,n]=(0,ae.sR)(),[l]=(0,se.a)(),d=(c=n,(0,p.d4)((e=>c.map((t=>e.entities.experimentsById[t])).filter(Boolean)),((e,t)=>(0,U.isEqual)(e,t))));var c;const[u]=d,{fetchExperiments:h,isLoadingExperiment:f,requestError:b}=Nt(),{elementHeight:w,observeHeight:Y}=(0,Ut.v)(),[S,I]=(0,s.useState)(!1),[k,A]=(0,s.useState)(!0),[M,_,F]=(e=>{const t=(0,s.useMemo)((()=>JSON.stringify(e.sort())),[e]),[{uiState:n,isFirstVisit:r},a]=((0,ae.Px)(),(0,s.useReducer)(((e,t)=>{if("UPDATE_UI_STATE"===t.type){const n="function"===typeof t.payload?t.payload(e.uiState):t.payload;return{...e,uiState:n}}return"INITIAL_UI_STATE_SEEDED"===t.type?e.isFirstVisit?{...e,isFirstVisit:!1}:e:"LOAD_NEW_EXPERIMENT"===t.type?{uiState:t.payload.uiState,isFirstVisit:t.payload.isFirstVisit,currentPersistKey:t.payload.newPersistKey}:e}),void 0,(()=>{const e=(0,zt.Y)(t),n=(0,U.keys)(e||{}).length,r=n?(0,U.pick)(e,We.HC):{};return{uiState:{...Qt,...r},isFirstVisit:!n,currentPersistKey:t}}))),i=(0,s.useCallback)((e=>{a({type:"UPDATE_UI_STATE",payload:e})}),[]),o=(0,s.useCallback)(((e,t)=>{r&&0!==e.length&&0!==t.runInfos.length&&(a({type:"INITIAL_UI_STATE_SEEDED"}),i((n=>Zt.reduce(((n,r)=>r(e,n,t)),{...n}))))}),[r,i]);return(0,s.useEffect)((()=>{const e=(0,zt.Y)(t),n=(0,U.pick)(e,We.HC),r=!(0,U.keys)(e||{}).length;a({type:"LOAD_NEW_EXPERIMENT",payload:{uiState:{...Qt,...n},isFirstVisit:r,newPersistKey:t}})}),[t]),[n,i,o]})(n),{isViewStateShared:D}=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const[r]=(0,R.ok)(),a=(0,L.A)(),i=r.get(y.ex),o=Boolean(i),l=(0,ae.Px)(),{sharedSearchFacetsState:d,sharedUiState:c,sharedStateError:u,sharedStateErrorMessage:p}=(0,s.useMemo)((()=>{if(!i||!t)return{sharedSearchFacetsState:null,sharedUiState:null,sharedStateError:null,sharedStateErrorMessage:null};const e=t.tags.find((e=>{let{key:t}=e;return t===`${y.o6}${i}`}));if(e)try{const t=JSON.parse(e.value);return{sharedSearchFacetsState:(0,U.pick)(t,ae.sO),sharedUiState:(0,U.pick)(t,We.HC),sharedStateError:null,sharedStateErrorMessage:null}}catch(n){return{sharedSearchFacetsState:null,sharedUiState:null,sharedStateError:"Error loading shared view state: share key is invalid",sharedStateErrorMessage:a.formatMessage({id:"Isig6r",defaultMessage:"Error loading shared view state: share key is invalid"})}}return{sharedSearchFacetsState:null,sharedUiState:null,sharedStateError:`Error loading shared view state: share key ${i} does not exist`,sharedStateErrorMessage:a.formatMessage({id:"s2L+xL",defaultMessage:'Error loading shared view state: share key "{viewStateShareKey}" does not exist'},{viewStateShareKey:i})}}),[t,i,a]);(0,s.useEffect)((()=>{d&&!n&&l(d,{replace:!0})}),[d,n]),(0,s.useEffect)((()=>{c&&!n&&e(c)}),[e,c,n]);const g=(0,R.Zp)();return(0,s.useEffect)((()=>{n||u&&t&&(v.A.logErrorAndNotifyUser(new Error(u)),v.A.displayGlobalErrorNotification(p,3),g(m.h.getExperimentPageRoute(t.experimentId),{replace:!0}))}),[u,p,t,g,n]),{isViewStateShared:o,sharedStateError:u}}(_,(0,U.first)(d)),E=M.viewMaximized,{isLoadingRuns:T,loadMoreRuns:B,runsData:H,moreRunsAvailable:O,requestError:P,refreshRuns:K}=qt(M,t,n);(0,s.useEffect)((()=>{h(n)}),[h,n]),(0,s.useEffect)((()=>{F(d,H)}),[F,d,H]),(0,s.useEffect)((()=>{const t=(0,g.wT)(n);e(t).catch((e=>{v.A.logErrorAndNotifyUser(e)}))}),[e,n]);const N=n.length>1;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=(0,ae.Px)(),i=(0,s.useMemo)((()=>n?JSON.stringify(n.sort()):null),[n]);(0,s.useEffect)((()=>{if(!r&&!t){const e=i?(0,zt.Y)(i):null,t=(0,U.pick)({...(0,ie.G)(),...e},ae.sO);a(t,{replace:!0})}}),[t,i,r]),(0,s.useEffect)((()=>{t&&i&&!r&&(0,zt.$)({...t,...e},i)}),[t,e,i,r])}(M,t,n,D);if(!Boolean(!f&&d[0]&&H&&t))return(0,x.Y)(r.PLz,{});if(b&&b.getErrorCode()===a.tG.PERMISSION_DENIED)return(0,x.Y)(o.A,{errorMessage:b.getMessageField()});if(b&&b.getErrorCode()===a.tG.RESOURCE_DOES_NOT_EXIST)return(0,x.Y)(i.A,{});mn()(t,"searchFacets should be initialized at this point");const z=f||!d[0];return(0,x.Y)(oe.i,{setUIState:_,children:(0,x.FD)("div",{css:vn.experimentViewWrapper,children:[z?(0,x.Y)(r.PLz,{title:!0,paragraph:!1,active:!0}):(0,x.Y)(x.FK,{children:N?(0,x.Y)(C,{experiments:d}):(0,x.FD)(x.FK,{children:[(0,x.Y)(pn,{experiment:u,searchFacetsState:t||void 0,uiState:M,showAddDescriptionButton:k,setEditing:I}),(0,x.Y)("div",{style:{maxHeight:E?0:w},css:hn,children:(0,x.Y)("div",{ref:Y,children:(0,x.Y)(an,{experiment:u,setShowAddDescriptionButton:A,editing:S,setEditing:I})})})]})}),(0,x.Y)(Pt,{isLoading:!1,experiments:d,isLoadingRuns:T,runsData:H,searchFacetsState:t,loadMoreRuns:B,moreRunsAvailable:O,requestError:P,refreshRuns:K,uiState:M})]})})},vn={experimentViewWrapper:{height:"100%",display:"flex",flexDirection:"column"}}},88492:function(e,t,n){n.d(t,{a:function(){return o},m:function(){return l}});var r=n(31014),s=n(58898),a=n(50111);const i=r.createContext({runsHiddenMode:s.oy.FIRST_10_RUNS}),o=e=>{let{children:t,runsHiddenMode:n}=e;return(0,a.Y)(i.Provider,{value:{runsHiddenMode:n},children:t})},l=()=>r.useContext(i)},28694:function(e,t,n){n.d(t,{X:function(){return i}});var r=n(89555),s=n(68254),a=n(50111);const i=e=>{var t;let{value:n,data:i}=e;const{theme:o}=(0,s.u)();return null!==(t=i.groupParentInfo)&&void 0!==t&&t.aggregateFunction?(0,a.FD)(s.T.Text,{children:[n," ",(0,a.FD)("span",{css:(0,r.AH)({color:o.colors.textSecondary},""),children:["(",i.groupParentInfo.aggregateFunction,")"]})]}):n}},68491:function(e,t,n){n.d(t,{O:function(){return l}});var r=n(89555),s=n(68254),a=n(82589),i=n(67694),o=n(50111);const l=e=>{let{enableSorting:t,canonicalSortKey:n,displayName:l,context:d}=e;const{orderByKey:c,orderByAsc:u}=d||{},p=(0,i.Px)(),{theme:g}=(0,s.u)();return(0,o.FD)("div",{role:"columnheader",css:(0,r.AH)({height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 12px",gap:g.spacing.sm,svg:{color:g.colors.textSecondary},"&:hover":{color:t?g.colors.actionTertiaryTextHover:"unset",svg:{color:g.colors.actionTertiaryTextHover}}},""),className:n===c?"is-ordered-by":"",onClick:t?()=>(()=>{let e=!u;n!==c&&(e=!1),p({orderByKey:n,orderByAsc:e})})():void 0,children:[(0,o.Y)("span",{"data-test-id":`sort-header-${l}`,children:l}),t&&n===c?u?(0,o.Y)(a.GCP,{}):(0,o.Y)(a.MMv,{}):null]})}},36740:function(e,t,n){n.d(t,{NA:function(){return y},Rz:function(){return v},oR:function(){return x}});var r=n(89555),s=n(9133),a=n(68254),i=n(82589),o=n(31014),l=n(25866),d=n(21616),c=n(50111);var u={name:"rnnx2x",styles:"font-size:12px"},p={name:"rnnx2x",styles:"font-size:12px"};const g=e=>{let{datasetWithTags:t,onDatasetSelected:n,appendComma:s=!1,inPopover:o=!1}=e;const{theme:d}=(0,a.u)(),{dataset:g,tags:m}=t;if(!g)return null;const h=null===m||void 0===m?void 0:m.find((e=>{let{key:t}=e;return t===l.AS}));return(0,c.FD)("div",{css:(0,r.AH)({display:"flex",flexShrink:0,alignItems:"center",overflow:"hidden",marginRight:d.spacing.xs},""),children:[(0,c.Y)(i.KbA,{css:(0,r.AH)({color:d.colors.textSecondary,marginRight:d.spacing.xs},"")})," ",(0,c.Y)("span",{css:(0,r.AH)({minWidth:32,marginRight:d.spacing.xs,flexShrink:0},""),title:`${g.name} (${g.digest})`,children:o?(0,c.Y)(i.AMh.Close,{asChild:!0,children:(0,c.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_49",type:"link",onClick:n,tabIndex:0,children:(0,c.FD)("span",{css:u,children:[g.name," (",g.digest,")"]})})}):(0,c.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_56",type:"link",onClick:n,"data-testid":"open-dataset-drawer",tabIndex:0,children:(0,c.FD)("span",{children:[g.name," (",g.digest,")"]})})}),h&&(0,c.Y)(i.vwO,{css:(0,r.AH)({textTransform:"capitalize",marginRight:d.spacing.xs},""),children:(0,c.Y)("span",{css:p,children:h.value})}),s&&(0,c.Y)(c.FK,{children:","})]})};var m={name:"zjik7",styles:"display:flex"},h={name:"eq7f8j",styles:"display:flex;align-items:flex-end"},f={name:"h1n7cn",styles:"max-height:400px;overflow:auto"};const v=o.memo((e=>{let{value:t,data:n,onDatasetSelected:l,expandRows:d}=e;const u=(0,o.useRef)(null),[p,v]=(0,o.useState)(0),[y,x]=(0,o.useState)(!1),b=(0,o.useMemo)((()=>(t||[]).slice(0,3)),[t]),{theme:w}=(0,a.u)(),Y=(t||[]).length;(0,o.useEffect)((()=>{if(!u.current)return()=>{};const e=(0,s.throttle)((e=>{let[t]=e;if(d){const e=t.contentRect.height;let n=0,r=0;for(let s=0;s<t.target.children.length;s++){const a=t.target.children.item(s);if(r+a.clientHeight>e)break;r+=a.clientHeight,n++}v(n),x(n<Y)}else{const e=t.contentRect.width;if(0===e&&Y)return v(0),void x(!0);let n=0,r=0;for(let a=0;a<t.target.children.length;a++){const s=t.target.children.item(a);if(r+s.clientWidth>=e)break;r+=s.clientWidth,n++}const s=Math.min(Y,n+1);v(s),x(n<Y)}}),100),t=new ResizeObserver(e);return t.observe(u.current),()=>t.disconnect()}),[d,Y]);const S=Y-p;if(!t||Y<1)return(0,c.Y)(c.FK,{children:"-"});const C=d?b:t;return(0,c.FD)("div",{css:m,children:[(0,c.Y)("div",{css:(0,r.AH)({overflow:"hidden",display:"flex",flexDirection:d?"column":"row"},""),ref:u,children:C.map(((e,t)=>(0,c.Y)(g,{appendComma:!d&&t<C.length-1,datasetWithTags:e,onDatasetSelected:()=>null===l||void 0===l?void 0:l(e,n)},`${e.dataset.name}-${e.dataset.digest}`)))}),(S>0||y)&&(0,c.FD)("div",{css:h,children:[!d&&y&&(0,c.Y)("span",{css:(0,r.AH)({paddingLeft:0,paddingRight:w.spacing.xs},""),children:"\u2026"}),S>0&&(0,c.FD)(i.AMh.Root,{modal:!1,children:[(0,c.Y)(i.AMh.Trigger,{asChild:!0,children:(0,c.Y)(a.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_datasetscellrenderer.tsx_172",size:"small",style:{borderRadius:"8px",width:"40px"},tabIndex:0,children:(0,c.FD)(a.T.Text,{color:"secondary",children:["+",S]})})}),(0,c.Y)(i.AMh.Content,{align:"start",css:f,children:t.slice(Y-S).map((e=>(0,c.Y)("div",{css:(0,r.AH)({height:w.general.heightSm,display:"flex",alignItems:"center"},""),children:(0,c.Y)(g,{datasetWithTags:e,onDatasetSelected:()=>null===l||void 0===l?void 0:l(e,n),inPopover:!0})},`${e.dataset.name}-${e.dataset.digest}`)))})]})]})]})})),y=(e,t)=>{if(e){var n;const{data:e}=t,r=Math.min((null===(n=e.datasets)||void 0===n?void 0:n.length)||1,3);return d.Fc*r}return d.Fc},x=e=>{let{event:t}=e;return"Tab"===t.key&&t.target instanceof HTMLElement&&(t.target.classList.contains("ag-cell")||t.target instanceof HTMLButtonElement)}},56535:function(e,t,n){n.d(t,{c:function(){return o}});var r=n(31014),s=n(76010),a=n(76758),i=n(50111);const o=r.memo((e=>{let{value:t}=e;const{startTime:n,referenceTime:r,runStatus:o}=t||{};return n?(0,i.FD)("span",{css:l.cellWrapper,title:s.A.formatTimestamp(n),children:[(0,i.Y)(a.F,{status:o}),s.A.timeSinceStr(n,r)]}):(0,i.Y)(i.FK,{children:"-"})})),l={cellWrapper:e=>({display:"flex",alignItems:"center",gap:e.spacing.sm})}},8235:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(31014),s=n(48624),a=n(58481),i=n(50111);const o=r.memo((e=>{let{data:t,value:n}=e;return t.experimentId?(0,i.Y)(s.N_,{to:a.h.getExperimentPageRoute(t.experimentId),title:n.name,children:n.basename}):null}))},94769:function(e,t,n){n.d(t,{m:function(){return o}});var r=n(68254),s=n(10389),a=n(50111);const i={cellWrapper:{name:"2vfvbc",styles:"display:flex;align-items:center;justify-content:center;width:100%;height:100%;position:relative;z-index:10"}},o=e=>{const{runUuid:t,runName:n}=e.data,{onOpenController:o}=e;return o?(0,a.Y)("div",{css:i.cellWrapper,children:(0,a.Y)(r.B,{icon:(0,a.Y)(s.U,{}),onClick:()=>o(t,n),componentId:"interactive-controller-button"})}):(0,a.Y)("div",{css:i.cellWrapper,children:"-"})}},22392:function(e,t,n){n.d(t,{Q:function(){return l},X:function(){return c}});var r=n(68254),s=n(9133),a=n(31014),i=n(88443),o=n(50111);const l=()=>({runUuid:"",rowUuid:(0,s.uniqueId)("load_more"),isLoadMoreRow:!0});var d={name:"gikiyg",styles:"display:flex;justify-content:center;align-items:center;height:32px"};const c=a.memo((e=>{let{loadMoreRunsFunc:t}=e;return(0,o.Y)("div",{css:d,children:(0,o.Y)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_loadmorerowrenderer.tsx_20",type:"primary",onClick:t,size:"small",children:(0,o.Y)(i.A,{id:"9CqEWy",defaultMessage:"Load more"})})})}))},62921:function(e,t,n){n.d(t,{G:function(){return b}});var r=n(89555),s=n(31014),a=n(68254),i=n(82589),o=n(76010),l=n(69869),d=n(58481),c=n(48624),u=n(21317),p=n(88443),g=n(50111);var m={name:"1989ovb",styles:"vertical-align:middle"},h={name:"1p2zdak",styles:"margin-right:0;vertical-align:middle"},f={name:"osm46o",styles:"width:20px;display:flex;align-items:center;justify-content:flex-start;flex-shrink:0"},v={name:"167129t",styles:"text-overflow:ellipsis;overflow:hidden;cursor:pointer"};const y=e=>{let{model:{isUc:t,registeredModelName:n,registeredModelVersion:s,flavors:o,artifactPath:y}={},experimentId:x,runUuid:b}=e;const{theme:w}=(0,a.u)();return(0,g.FD)("div",{css:(0,r.AH)({display:"flex",alignItems:"center",gap:w.spacing.xs,overflow:"hidden"},""),children:[(0,g.Y)("div",{css:f,children:n?(0,g.Y)(u.h,{css:(0,r.AH)({color:w.colors.actionPrimaryBackgroundDefault},"")}):(0,g.Y)(i.oiI,{css:(0,r.AH)({color:w.colors.actionPrimaryBackgroundDefault},"")})}),(0,g.Y)(c.N_,{to:n&&s?l.fM.getModelVersionPageRoute(n,s):d.h.getRunPageRoute(x,b,y),target:"_blank",css:v,children:(()=>{const e=`${n} v${s}`;if(n)return(0,g.FD)(i.m_M,{title:e,placement:"topLeft",children:[(0,g.Y)("span",{css:m,children:n})," ",(0,g.FD)(i.vwO,{css:h,children:["v",s]})]});return(null===o||void 0===o?void 0:o[0])||(0,g.Y)(p.A,{id:"giZdtW",defaultMessage:"Model"})})()})]})};var x={name:"1xsgnar",styles:"width:100%;&>div{max-width:100%;display:flex;}"};const b=s.memo((e=>{if(!e.value)return(0,g.Y)(g.FK,{children:"-"});const{registeredModels:t,loggedModels:n,experimentId:r,runUuid:s}=e.value,a=o.A.mergeLoggedAndRegisteredModels(n,t);return a&&a.length?(0,g.Y)("div",{css:x,children:(0,g.Y)(i.nEg,{children:a.map(((e,t)=>(0,g.Y)(y,{model:e,experimentId:r,runUuid:s},e.artifactPath||t)))})}):(0,g.Y)(g.FK,{children:"-"})}))},75622:function(e,t,n){n.d(t,{M:function(){return y},h:function(){return v}});var r=n(68254),s=n(82589),a=n(1670),i=n(31014),o=n(69526),l=n(88443),d=n(91144),c=n(21879),u=n(58898),p=n(62862),g=n(50111);const m={visibility:{groups:(0,o.YK)({unhide:{id:"8Gz0OE",defaultMessage:"Unhide group"},hide:{id:"TfuAgs",defaultMessage:"Hide group"}}),runs:(0,o.YK)({unhide:{id:"xmpvlI",defaultMessage:"Unhide run"},hide:{id:"qTjYVU",defaultMessage:"Hide run"}})},pinning:{groups:(0,o.YK)({unpin:{id:"jkeYf8",defaultMessage:"Unpin group"},pin:{id:"8hpS0b",defaultMessage:"Pin group"}}),runs:(0,o.YK)({unpin:{id:"ugm2f6",defaultMessage:"Unpin run"},pin:{id:"fjiojF",defaultMessage:"Pin run"}})}},h=()=>(0,d.M1)()?(0,g.Y)(r.I,{component:a.h}):(0,g.Y)(s.kFX,{}),f={mouseEnterDelay:0,mouseLeaveDelay:0},v=i.memo((e=>{var t;const n=(0,c.e)(),{theme:a}=(0,r.u)(),{groupParentInfo:i}=e.data,o=Boolean(i),{pinned:v,hidden:y}=e.value,{runUuid:b,rowUuid:w}=e.data,Y=i?w:b,S=o?y?m.visibility.groups.unhide:m.visibility.groups.hide:y?m.visibility.runs.unhide:m.visibility.runs.hide,C=o?v?m.pinning.groups.unpin:m.pinning.groups.pin:v?m.pinning.runs.unpin:m.pinning.runs.pin,I=!(0,d.M1)()||i&&!(0,p.mC)(i)||b&&!(null!==(t=e.data.runDateAndNestInfo)&&void 0!==t&&t.belongsToGroup);return(0,g.FD)("div",{css:x.actionsContainer,children:[I?(0,g.Y)(s.m_M,{dangerouslySetAntdProps:f,placement:"right",title:(0,g.Y)(l.A,{...S}),children:(0,g.FD)("label",{css:[x.actionCheckbox(a),(0,d.M1)()&&x.showOnlyInCompareMode,""],className:"is-visibility-toggle",children:[(0,g.Y)("span",{css:r.v,children:(0,g.Y)(l.A,{...S})}),(0,g.Y)("input",{type:"checkbox",className:"is-visibility-toggle-checkbox",checked:!y,onChange:()=>{Y&&((0,d.M1)()?e.onToggleVisibility(u.oy.CUSTOM,Y):e.onToggleVisibility(Y))}}),y?(0,g.Y)(s.DAb,{}):(0,g.Y)(h,{})]})}):(0,g.Y)("div",{css:[x.showOnlyInCompareMode,{width:a.general.iconFontSize},""]}),(e.data.pinnable&&b||i)&&(0,g.Y)(s.m_M,{dangerouslySetAntdProps:f,placement:"right",title:(0,g.Y)(l.A,{...C}),children:(0,g.FD)("label",{css:x.actionCheckbox(a),className:"is-pin-toggle","data-testid":"column-pin-toggle",children:[(0,g.Y)("span",{css:r.v,children:(0,g.Y)(l.A,{...C})}),(0,g.Y)("input",{type:"checkbox",checked:v,onChange:()=>{const t=i?e.data.rowUuid:b;n((e=>t?{...e,runsPinned:e.runsPinned.includes(t)?e.runsPinned.filter((e=>e!==t)):[...e.runsPinned,t]}:e))}}),v?(0,g.Y)(s.aS3,{}):(0,g.Y)(s.tsw,{})]})},Math.random())]})}),((e,t)=>e.value.hidden===t.value.hidden&&e.value.pinned===t.value.pinned)),y=e=>{let{event:t}=e;return!!("Tab"===t.key&&t.target instanceof HTMLElement&&(t.target.classList.contains("ag-cell")||t.target.classList.contains("is-visibility-toggle-checkbox")))},x={actionsContainer:{display:"flex",gap:18},showOnlyInCompareMode:{display:"none",".is-table-comparing-runs-mode &":{display:"flex"}},actionCheckbox:e=>({input:{width:0,appearance:"none"},cursor:"pointer",display:"flex",svg:{width:e.general.iconFontSize,height:e.general.iconFontSize,cursor:"pointer"},"&.is-pin-toggle svg":{color:"transparent",".ag-row:hover &":{color:e.colors.grey500}},"&.is-visibility-toggle svg":{color:e.colors.grey400,".ag-row:hover &":{color:e.colors.grey500}},"& input:checked + span svg":{color:e.colors.grey500},"& input:focus-visible + span svg":{color:e.colors.grey500}})}},19973:function(e,t,n){n.d(t,{o:function(){return h}});var r=n(68254),s=n(82589),a=n(31014),i=n(88464),o=n(88443),l=n(58898),d=n(91144),c=n(1670),u=n(88492),p=n(50111);const g=()=>(0,d.M1)()?(0,p.Y)(r.I,{component:c.h}):(0,p.Y)(s.kFX,{}),m=a.memo((e=>{let{allRunsHidden:t,onToggleVisibility:n}=e;const{theme:a}=(0,r.u)(),c=(0,i.A)(),{runsHiddenMode:m}=(0,u.m)();return(0,p.FD)(s.rId.Root,{modal:!1,children:[(0,p.Y)(s.rId.Trigger,{asChild:!0,children:(0,p.Y)("button",{css:[f.actionButton(a),(0,d.M1)()&&f.showOnlyInCompareMode,""],"data-testid":"experiment-view-runs-visibility-column-header","aria-label":c.formatMessage({id:"9HXup+",defaultMessage:"Toggle visibility of runs"}),children:m===l.oy.HIDEALL||t?(0,p.Y)(s.DAb,{}):(0,p.Y)(g,{})})}),(0,p.Y)(s.rId.Content,{children:(0,p.FD)(s.rId.RadioGroup,{value:m,onValueChange:e=>n(e),children:[(0,p.FD)(s.rId.RadioItem,{value:l.oy.FIRST_10_RUNS,children:[(0,p.Y)(s.rId.ItemIndicator,{}),(0,p.Y)(o.A,{id:"w39cZ4",defaultMessage:"Show first 10"})]}),(0,p.FD)(s.rId.RadioItem,{value:l.oy.FIRST_20_RUNS,children:[(0,p.Y)(s.rId.ItemIndicator,{}),(0,p.Y)(o.A,{id:"ONIiUE",defaultMessage:"Show first 20"})]}),(0,p.FD)(s.rId.RadioItem,{value:l.oy.SHOWALL,children:[(0,p.Y)(s.rId.ItemIndicator,{}),(0,p.Y)(o.A,{id:"4yjF8O",defaultMessage:"Show all runs"})]}),(0,p.FD)(s.rId.RadioItem,{value:l.oy.HIDEALL,children:[(0,p.Y)(s.rId.ItemIndicator,{}),(0,p.Y)(o.A,{id:"Qi6Etm",defaultMessage:"Hide all runs"})]})]})})]})})),h=a.memo((e=>{const t=(0,i.A)();return(0,a.useEffect)((()=>{var n;const r=null===(n=e.eGridHeader)||void 0===n?void 0:n.querySelector("input");r&&(r.ariaLabel=t.formatMessage({id:"Csmj/2",defaultMessage:"Select all runs"}))}),[e.eGridHeader,t]),(0,d.M1)()?(0,p.Y)(m,{...e}):(0,p.FD)(s.rId.Root,{modal:!1,children:[(0,p.Y)(s.rId.Trigger,{asChild:!0,children:(0,p.Y)("button",{css:[f.actionButton,""],"data-testid":"experiment-view-runs-visibility-column-header",children:e.allRunsHidden?(0,p.Y)(s.DAb,{}):(0,p.Y)(g,{})})}),(0,p.FD)(s.rId.Content,{children:[(0,p.FD)(s.rId.Item,{onClick:()=>e.onToggleVisibility(l.oy.HIDEALL),"data-testid":"experiment-view-runs-visibility-hide-all",children:[(0,p.Y)(s.rId.IconWrapper,{children:(0,p.Y)(s.DAb,{})}),(0,p.Y)(o.A,{id:"UEESlL",defaultMessage:"Hide all runs"})]}),(0,p.FD)(s.rId.Item,{onClick:()=>e.onToggleVisibility(l.oy.SHOWALL),"data-testid":"experiment-view-runs-visibility-show-all",children:[(0,p.Y)(s.rId.IconWrapper,{children:(0,p.Y)(g,{})}),(0,p.Y)(o.A,{id:"4yjF8O",defaultMessage:"Show all runs"})]})]})]})})),f={actionButton:e=>({background:"transparent",border:"none",cursor:"pointer",padding:"8px",".ag-checkbox:not(.ag-hidden) + &":{padding:"0 1px"},svg:{width:e.general.iconFontSize,height:e.general.iconFontSize,cursor:"pointer",color:e.colors.grey500}}),showOnlyInCompareMode:{display:"none",".is-table-comparing-runs-mode &":{display:"flex"}}}},69276:function(e,t,n){n.d(t,{m:function(){return Y}});var r=n(68254),s=n(82589),a=n(31014),i=n(48624),o=n(58481),l=n(89555),d=n(62862),c=n(21879),u=n(79432),p=n(4877),g=n.n(p),m=n(88443),h=n(70403),f=n(50111);var v={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"},y={name:"mlsake",styles:"margin-left:0;margin-right:0"};const x=e=>{let{data:t}=e;const n=t.groupParentInfo;g()(n,"groupParentInfo should be defined");const{theme:i}=(0,r.u)(),o=(0,h.LE)(),p=(0,h.MQ)(),x=(0,c.e)(),b=(0,a.useCallback)(((e,t)=>{x((n=>{const{groupsExpanded:r}=n;return{...n,groupsExpanded:{...r,[e]:t}}}))}),[x]),w=(0,d.QD)(n);return(0,f.FD)("div",{css:(0,l.AH)({display:"flex",gap:i.spacing.sm,alignItems:"center"},""),children:[n.expanderOpen?(0,f.Y)(s.D3D,{role:"button",onClick:()=>{b(n.groupId,!1)}}):(0,f.Y)(r.b,{role:"button",onClick:()=>{b(n.groupId,!0)}}),!(0,d.mC)(n)&&(0,f.Y)(u.E,{color:o(n.groupId),onChangeColor:e=>{p({groupUuid:n.groupId,colorValue:e})}}),(0,f.FD)("div",{css:(0,l.AH)({display:"inline-flex",gap:i.spacing.sm,alignItems:"center",overflow:"hidden",textOverflow:"ellipsis"},""),children:[(0,d.mC)(n)?(0,f.Y)(m.A,{id:"PKYh23",defaultMessage:"Additional runs"}):(0,f.Y)("span",{title:w,css:v,children:(0,f.Y)(m.A,{id:"jq95vC",defaultMessage:"Group: {groupName}",values:{groupName:w}})}),(0,f.Y)(s.vwO,{css:y,children:n.runUuids.length})]})]})};var b=n(91144);var w={name:"xahbfd",styles:"width:12px;height:12px;flex-shrink:0"};const Y=a.memo((e=>{const{theme:t}=(0,r.u)(),n=(0,h.MQ)(),a=(0,h.LE)();if(e.data.groupParentInfo)return(0,f.Y)(x,{...e});const{onExpand:l,data:d}=e,{runName:c,experimentId:p,runUuid:m,runDateAndNestInfo:v,hidden:y}=d;g()(p,"experimentId should be set for run rows"),g()(m,"runUuid should be set for run rows"),g()(v,"runDateAndNestInfo should be set for run rows");const{hasExpander:Y,expanderOpen:C,childrenIds:I,level:k,belongsToGroup:R}=v,A=!isNaN(k)&&Y;return(0,f.FD)("div",{css:S.cellWrapper,children:[(0,f.Y)("div",{css:S.expanderWrapper,children:(0,f.Y)("div",{css:S.nestLevel(t),style:{width:(k+1)*t.spacing.lg},children:A&&(0,f.Y)(r.B,{componentId:"codegen_mlflow_app_src_experiment-tracking_components_experiment-page_components_runs_cells_runnamecellrenderer.tsx_46",css:S.expanderButton,size:"small",onClick:()=>{l(m,I)},type:"link",icon:C?(0,f.Y)(s.pgH,{}):(0,f.Y)(s.Xeq,{})},"Expander-"+m)})}),(0,f.FD)("div",{css:S.runLink,children:[R?(0,f.Y)("div",{css:w}):(0,f.Y)(u.E,{color:a(m),hidden:(0,b.M1)()&&!R&&e.isComparingRuns&&y,"data-testid":"experiment-view-table-run-color",onChangeColor:e=>n({runUuid:m,colorValue:e})}),(0,f.Y)(i.N_,{to:o.h.getRunPageRoute(p,m),css:S.runLink,tabIndex:0,children:(0,f.Y)("span",{css:S.runName,children:c})})]})]})})),S={link:e=>({display:"inline-block",minWidth:e.typography.fontSizeBase,minHeight:e.typography.fontSizeBase}),cellWrapper:{display:"flex"},expanderButton:{svg:{width:12,height:12}},runLink:{overflow:"hidden",display:"flex",gap:8,alignItems:"center","&:focus-visible":{textDecoration:"underline"}},runName:{overflow:"hidden",textOverflow:"ellipsis"},expanderWrapper:{display:"none",".ag-grid-expanders-visible &":{display:"block"}},nestLevel:e=>({display:"flex",justifyContent:"flex-end",height:e.spacing.lg})}},15164:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(89555),s=n(31014),a=n(76010),i=n(68254),o=n(1323),l=n(50111);var d={name:"1gz2b5f",styles:"overflow:hidden;text-overflow:ellipsis"};const c=s.memo((e=>{var t;let{value:n}=e;const{theme:s}=(0,i.u)();if(!n)return(0,l.Y)(l.FK,{children:"-"});const c=(null===(t=n[a.A.sourceTypeTag])||void 0===t?void 0:t.value)||"",u=a.A.renderSource(n||{},void 0,void 0);return u?(0,l.FD)("div",{css:(0,r.AH)({display:"flex",gap:s.spacing.xs,alignItems:"center"},""),children:[(0,l.Y)(o.m,{sourceType:c,css:(0,r.AH)({color:s.colors.textSecondary},"")}),(0,l.Y)("span",{css:d,children:u})]}):(0,l.Y)(l.FK,{children:"-"})}))},92341:function(e,t,n){n.d(t,{S:function(){return i}});var r=n(31014),s=n(76010),a=n(50111);const i=r.memo((e=>{let{value:t}=e;if(!t)return(0,a.Y)(a.FK,{children:"-"});const{version:n,name:r,type:i}=t;return s.A.renderSourceVersion(n,r,i)||(0,a.Y)(a.FK,{children:"-"})}))},89736:function(e,t,n){n.d(t,{Y:function(){return d},Z:function(){return c}});var r=n(9133),s=n(31014),a=n(3769),i=n(76010),o=n(10811),l=n(50111);const d=(0,s.createContext)(null),c=e=>{let{children:t,actions:n}=e;const[c,u]=(0,s.useState)([]),[p,g]=(0,s.useState)(!1),[m,h]=(0,s.useState)(null),f=(0,o.wA)(),v=(0,s.useCallback)((e=>{h(null),(()=>{const t=e.map((e=>{const t=n.getExperimentApi(e);return f(t).catch((e=>{i.A.logErrorAndNotifyUser(e)})),t.meta.id}));u((e=>(0,r.isEqual)(t,e)?e:t))})()}),[n,f]),y=(0,s.useMemo)((()=>({fetchExperiments:v,isLoadingExperiment:p,requestError:m,actions:n})),[n,v,p,m]);return(0,l.Y)(d.Provider,{value:y,children:(0,l.Y)(a.Ay,{shouldOptimisticallyRender:!0,requestIds:c,children:(e,n,r)=>(g(r.some((e=>c.includes(e.id)&&e.active))),m||r.forEach((e=>{e.error&&h(e.error)})),t)})})}},67694:function(e,t,n){n.d(t,{Px:function(){return c},sO:function(){return l},sR:function(){return d}});var r=n(9133),s=n(31014),a=n(48624),i=n(83028),o=n(43651);const l=["searchFilter","orderByKey","orderByAsc","startTime","lifecycleFilter","modelVersionFilter","datasetsFilter"],d=()=>{const[e]=(0,a.ok)(),t=(0,s.useMemo)((()=>(0,r.pick)(Object.fromEntries(e.entries()),l)),[e]),{searchFilter:n,orderByKey:d,orderByAsc:c,startTime:u,lifecycleFilter:p,modelVersionFilter:g,datasetsFilter:m}=t,h=(0,r.keys)(t).length<1,{experimentId:f}=(0,a.g)(),v=e.get("experiments"),y=(0,s.useMemo)((()=>f?[f]:v?(e=>{try{return e?JSON.parse(e):[]}catch{return[]}})(v):[]),[f,v]);return[(0,s.useMemo)((()=>{if(h)return null;const e=(0,o.oI)((0,r.omitBy)({searchFilter:n,orderByKey:d,orderByAsc:c,startTime:u,lifecycleFilter:p,modelVersionFilter:g,datasetsFilter:m},r.isNil));return(0,r.assign)((0,i.G)(),e)}),[n,d,c,u,p,g,m,h]),y]},c=()=>{const[,e]=(0,a.ok)();return(t,n)=>{const s=(0,o.Wz)(t);e((e=>((0,r.entries)(s).forEach((t=>{let[n,r]=t;e.set(n,r)})),e)),n)}}},53660:function(e,t,n){n.d(t,{a:function(){return o},m:function(){return i}});var r=n(91144),s=n(48624);const a="compareRunsMode",i=()=>(0,r.xt)()?"CHART":"TABLE",o=()=>{const[e,t]=(0,s.ok)();return[e.get(a)||i(),e=>{t((t=>(t.set(a,e||""),t)),{replace:!1})}]}},22853:function(e,t,n){n.d(t,{v:function(){return i}});var r=n(31014),s=n(21879),a=n(58898);const i=e=>{const t=(0,s.e)(),n=(0,r.useRef)(e);n.current=e;return(0,r.useCallback)(((e,r)=>{t((t=>{if(e===a.oy.SHOWALL)return{...t,runsHiddenMode:a.oy.SHOWALL,runsHidden:[]};if(e===a.oy.HIDEALL)return{...t,runsHiddenMode:a.oy.HIDEALL,runsHidden:[]};if(e===a.oy.FIRST_10_RUNS)return{...t,runsHiddenMode:a.oy.FIRST_10_RUNS,runsHidden:[]};if(e===a.oy.FIRST_20_RUNS)return{...t,runsHiddenMode:a.oy.FIRST_20_RUNS,runsHidden:[]};if(r){const e=n.current.filter((e=>{let{hidden:t}=e;return t})).map((e=>{let{groupParentInfo:t,rowUuid:n,runUuid:r}=e;return t?n:r})),s=e.includes(r)?e.filter((e=>e!==r)):[...e,r];return{...t,runsHiddenMode:a.oy.CUSTOM,runsHidden:s}}return t}))}),[t])}},83028:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(25866);const s=()=>({searchFilter:"",orderByKey:r.XM,orderByAsc:r.z$,startTime:r.xx,lifecycleFilter:r.ae,datasetsFilter:[],modelVersionFilter:r.eR})}}]);