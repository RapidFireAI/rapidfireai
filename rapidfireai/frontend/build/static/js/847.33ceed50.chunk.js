/*! For license information please see 847.33ceed50.chunk.js.LICENSE.txt */
(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[847],{5980:function(e,r,t){"use strict";const o=t(81128),n=t(76266),a=t(69726),i=t(14955),l=t(40973),s=t(88927),f=t(25501),u=t(91018),{float32:c,fract32:d}=t(69968),p=t(33),h=t(94947),g=t(1789);function y(e,r){if(!(this instanceof y))return new y(e,r);if("function"===typeof e?(r||(r={}),r.regl=e):r=e,r.length&&(r.positions=r),!(e=r.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=e._gl,this.regl=e,this.passes=[],this.shaders=y.shaders.has(e)?y.shaders.get(e):y.shaders.set(e,y.createShaders(e)).get(e),this.update(r)}e.exports=y,y.dashMult=2,y.maxPatternLength=256,y.precisionThreshold=3e6,y.maxPoints=1e4,y.maxLines=2048,y.shaders=new p,y.createShaders=function(e){let r,t=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),o={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:(e,r)=>"round"===r.join?2:1,miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashTexture:e.prop("dashTexture"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),dashLength:e.prop("dashLength"),viewport:(e,r)=>[r.viewport.x,r.viewport.y,e.viewportWidth,e.viewportHeight],depth:e.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:(e,r)=>!r.overlay},stencil:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport")},n=e(a({vert:i("./rect-vert.glsl"),frag:i("./rect-frag.glsl"),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},o));try{r=e(a({cull:{enable:!0,face:"back"},vert:i("./miter-vert.glsl"),frag:i("./miter-frag.glsl"),attributes:{lineEnd:{buffer:t,divisor:0,stride:8,offset:0},lineTop:{buffer:t,divisor:0,stride:8,offset:4},aColor:{buffer:e.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:e.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:e.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},o))}catch(l){r=n}return{fill:e({primitive:"triangle",elements:(e,r)=>r.triangles,offset:0,vert:i("./fill-vert.glsl"),frag:i("./fill-frag.glsl"),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:(e,r)=>[r.viewport.x,r.viewport.y,e.viewportWidth,e.viewportHeight]},attributes:{position:{buffer:e.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:e.prop("positionFractBuffer"),stride:8,offset:8}},blend:o.blend,depth:{enable:!1},scissor:o.scissor,stencil:o.stencil,viewport:o.viewport}),rect:n,miter:r}},y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},y.prototype.render=function(){arguments.length&&this.update(...arguments),this.draw()},y.prototype.draw=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return(r.length?r:this.passes).forEach(((e,r)=>{if(e&&Array.isArray(e))return this.draw(...e);"number"===typeof e&&(e=this.passes[e]),e&&e.count>1&&e.opacity&&(this.regl._refresh(),e.fill&&e.triangles&&e.triangles.length>2&&this.shaders.fill(e),e.thickness&&(e.scale[0]*e.viewport.width>y.precisionThreshold||e.scale[1]*e.viewport.height>y.precisionThreshold||"rect"===e.join||!e.join&&(e.thickness<=2||e.count>=y.maxPoints)?this.shaders.rect(e):this.shaders.miter(e)))})),this},y.prototype.update=function(e){if(!e)return;null!=e.length?"number"===typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);let{regl:r,gl:t}=this;if(e.forEach(((e,i)=>{let p=this.passes[i];if(void 0!==e)if(null!==e){if("number"===typeof e[0]&&(e={positions:e}),e=l(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),p||(this.passes[i]=p={id:i,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:r.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:r.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:r.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},e=a({},y.defaults,e)),null!=e.thickness&&(p.thickness=parseFloat(e.thickness)),null!=e.opacity&&(p.opacity=parseFloat(e.opacity)),null!=e.miterLimit&&(p.miterLimit=parseFloat(e.miterLimit)),null!=e.overlay&&(p.overlay=!!e.overlay,i<y.maxLines&&(p.depth=2*(y.maxLines-1-i%y.maxLines)/y.maxLines-1)),null!=e.join&&(p.join=e.join),null!=e.hole&&(p.hole=e.hole),null!=e.fill&&(p.fill=e.fill?o(e.fill,"uint8"):null),null!=e.viewport&&(p.viewport=h(e.viewport)),p.viewport||(p.viewport=h([t.drawingBufferWidth,t.drawingBufferHeight])),null!=e.close&&(p.close=e.close),null===e.positions&&(e.positions=[]),e.positions){let r,t;if(e.positions.x&&e.positions.y){let o=e.positions.x,n=e.positions.y;t=p.count=Math.max(o.length,n.length),r=new Float64Array(2*t);for(let e=0;e<t;e++)r[2*e]=o[e],r[2*e+1]=n[e]}else r=s(e.positions,"float64"),t=p.count=Math.floor(r.length/2);let o=p.bounds=n(r,2);if(p.fill){let t=[],o={},n=0;for(let e=0,a=0,i=p.count;e<i;e++){let i=r[2*e],l=r[2*e+1];isNaN(i)||isNaN(l)||null==i||null==l?(i=r[2*n],l=r[2*n+1],o[e]=n):n=e,t[a++]=i,t[a++]=l}if(e.splitNull){p.count-1 in o||(o[p.count]=p.count-1);let e=Object.keys(o).map(Number).sort(((e,r)=>e-r)),r=[],n=0,a=null!=p.hole?p.hole[0]:null;if(null!=a){let r=g(e,(e=>e>=a));e=e.slice(0,r),e.push(a)}for(let o=0;o<e.length;o++){let i=t.slice(2*n,2*e[o]).concat(a?t.slice(2*a):[]),l=(p.hole||[]).map((r=>r-a+(e[o]-n))),s=f(i,l);s=s.map((r=>r+n+(r+n<e[o]?0:a-e[o]))),r.push(...s),n=e[o]+1}for(let t=0,i=r.length;t<i;t++)null!=o[r[t]]&&(r[t]=o[r[t]]);p.triangles=r}else{let e=f(t,p.hole||[]);for(let r=0,t=e.length;r<t;r++)null!=o[e[r]]&&(e[r]=o[e[r]]);p.triangles=e}}let a=new Float64Array(r);u(a,2,o);let i=new Float64Array(2*t+6);p.close?r[0]===r[2*t-2]&&r[1]===r[2*t-1]?(i[0]=a[2*t-4],i[1]=a[2*t-3]):(i[0]=a[2*t-2],i[1]=a[2*t-1]):(i[0]=a[0],i[1]=a[1]),i.set(a,2),p.close?r[0]===r[2*t-2]&&r[1]===r[2*t-1]?(i[2*t+2]=a[2],i[2*t+3]=a[3],p.count-=1):(i[2*t+2]=a[0],i[2*t+3]=a[1],i[2*t+4]=a[2],i[2*t+5]=a[3]):(i[2*t+2]=a[2*t-2],i[2*t+3]=a[2*t-1],i[2*t+4]=a[2*t-2],i[2*t+5]=a[2*t-1]);var v=c(i);p.positionBuffer(v);var x=d(i,v);p.positionFractBuffer(x)}if(e.range?p.range=e.range:p.range||(p.range=p.bounds),(e.range||e.positions)&&p.count){let e=p.bounds,r=e[2]-e[0],t=e[3]-e[1],o=p.range[2]-p.range[0],n=p.range[3]-p.range[1];p.scale=[r/o,t/n],p.translate=[-p.range[0]/o+e[0]/o||0,-p.range[1]/n+e[1]/n||0],p.scaleFract=d(p.scale),p.translateFract=d(p.translate)}if(e.dashes){let r,t=0;if(!e.dashes||e.dashes.length<2)t=1,r=new Uint8Array([255,255,255,255,255,255,255,255]);else{t=0;for(let r=0;r<e.dashes.length;++r)t+=e.dashes[r];r=new Uint8Array(t*y.dashMult);let o=0,n=255;for(let t=0;t<2;t++)for(let a=0;a<e.dashes.length;++a){for(let t=0,i=e.dashes[a]*y.dashMult*.5;t<i;++t)r[o++]=n;n^=255}}p.dashLength=t,p.dashTexture({channels:1,data:r,width:r.length,height:1,mag:"linear",min:"linear"},0,0)}if(e.color){let r=p.count,t=e.color;t||(t="transparent");let n=new Uint8Array(4*r+4);if(Array.isArray(t)&&"number"!==typeof t[0]){for(let e=0;e<r;e++){let r=o(t[e],"uint8");n.set(r,4*e)}n.set(o(t[0],"uint8"),4*r)}else{let e=o(t,"uint8");for(let t=0;t<r+1;t++)n.set(e,4*t)}p.colorBuffer({usage:"dynamic",type:"uint8",data:n})}}else this.passes[i]=null})),e.length<this.passes.length){for(let r=e.length;r<this.passes.length;r++){let e=this.passes[r];e&&(e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy())}this.passes.length=e.length}let i=[];for(let o=0;o<this.passes.length;o++)null!==this.passes[o]&&i.push(this.passes[o]);return this.passes=i,this},y.prototype.destroy=function(){return this.passes.forEach((e=>{e.colorBuffer.destroy(),e.positionBuffer.destroy(),e.dashTexture.destroy()})),this.passes.length=0,this}},25501:function(e){"use strict";function r(e,r,a){a=a||2;var i,l,s,c,d,h,g,y=r&&r.length,v=y?r[0]*a:e.length,x=t(e,0,v,a,!0),b=[];if(!x||x.next===x.prev)return b;if(y&&(x=function(e,r,n,a){var i,l,s,c=[];for(i=0,l=r.length;i<l;i++)(s=t(e,r[i]*a,i<l-1?r[i+1]*a:e.length,a,!1))===s.next&&(s.steiner=!0),c.push(p(s));for(c.sort(f),i=0;i<c.length;i++)u(c[i],n),n=o(n,n.next);return n}(e,r,x,a)),e.length>80*a){i=s=e[0],l=c=e[1];for(var m=a;m<v;m+=a)(d=e[m])<i&&(i=d),(h=e[m+1])<l&&(l=h),d>s&&(s=d),h>c&&(c=h);g=0!==(g=Math.max(s-i,c-l))?1/g:0}return n(x,b,a,i,l,g),b}function t(e,r,t,o,n){var a,i;if(n===B(e,r,t,o)>0)for(a=r;a<t;a+=o)i=z(a,e[a],e[a+1],i);else for(a=t-o;a>=r;a-=o)i=z(a,e[a],e[a+1],i);return i&&v(i,i.next)&&(S(i),i=i.next),i}function o(e,r){if(!e)return e;r||(r=e);var t,o=e;do{if(t=!1,o.steiner||!v(o,o.next)&&0!==y(o.prev,o,o.next))o=o.next;else{if(S(o),(o=r=o.prev)===o.next)break;t=!0}}while(t||o!==r);return r}function n(e,r,t,f,u,c,p){if(e){!p&&c&&function(e,r,t,o){var n=e;do{null===n.z&&(n.z=d(n.x,n.y,r,t,o)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){var r,t,o,n,a,i,l,s,f=1;do{for(t=e,e=null,a=null,i=0;t;){for(i++,o=t,l=0,r=0;r<f&&(l++,o=o.nextZ);r++);for(s=f;l>0||s>0&&o;)0!==l&&(0===s||!o||t.z<=o.z)?(n=t,t=t.nextZ,l--):(n=o,o=o.nextZ,s--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;t=o}a.nextZ=null,f*=2}while(i>1)}(n)}(e,f,u,c);for(var h,g,y=e;e.prev!==e.next;)if(h=e.prev,g=e.next,c?i(e,f,u,c):a(e))r.push(h.i/t),r.push(e.i/t),r.push(g.i/t),S(e),e=g.next,y=g.next;else if((e=g)===y){p?1===p?n(e=l(o(e),r,t),r,t,f,u,c,2):2===p&&s(e,r,t,f,u,c):n(o(e),r,t,f,u,c,1);break}}}function a(e){var r=e.prev,t=e,o=e.next;if(y(r,t,o)>=0)return!1;for(var n=e.next.next;n!==e.prev;){if(h(r.x,r.y,t.x,t.y,o.x,o.y,n.x,n.y)&&y(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function i(e,r,t,o){var n=e.prev,a=e,i=e.next;if(y(n,a,i)>=0)return!1;for(var l=n.x<a.x?n.x<i.x?n.x:i.x:a.x<i.x?a.x:i.x,s=n.y<a.y?n.y<i.y?n.y:i.y:a.y<i.y?a.y:i.y,f=n.x>a.x?n.x>i.x?n.x:i.x:a.x>i.x?a.x:i.x,u=n.y>a.y?n.y>i.y?n.y:i.y:a.y>i.y?a.y:i.y,c=d(l,s,r,t,o),p=d(f,u,r,t,o),g=e.prevZ,v=e.nextZ;g&&g.z>=c&&v&&v.z<=p;){if(g!==e.prev&&g!==e.next&&h(n.x,n.y,a.x,a.y,i.x,i.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,v!==e.prev&&v!==e.next&&h(n.x,n.y,a.x,a.y,i.x,i.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;g&&g.z>=c;){if(g!==e.prev&&g!==e.next&&h(n.x,n.y,a.x,a.y,i.x,i.y,g.x,g.y)&&y(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;v&&v.z<=p;){if(v!==e.prev&&v!==e.next&&h(n.x,n.y,a.x,a.y,i.x,i.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function l(e,r,t){var n=e;do{var a=n.prev,i=n.next.next;!v(a,i)&&x(a,n,n.next,i)&&w(a,i)&&w(i,a)&&(r.push(a.i/t),r.push(n.i/t),r.push(i.i/t),S(n),S(n.next),n=e=i),n=n.next}while(n!==e);return o(n)}function s(e,r,t,a,i,l){var s=e;do{for(var f=s.next.next;f!==s.prev;){if(s.i!==f.i&&g(s,f)){var u=C(s,f);return s=o(s,s.next),u=o(u,u.next),n(s,r,t,a,i,l),void n(u,r,t,a,i,l)}f=f.next}s=s.next}while(s!==e)}function f(e,r){return e.x-r.x}function u(e,r){if(r=function(e,r){var t,o=r,n=e.x,a=e.y,i=-1/0;do{if(a<=o.y&&a>=o.next.y&&o.next.y!==o.y){var l=o.x+(a-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(l<=n&&l>i){if(i=l,l===n){if(a===o.y)return o;if(a===o.next.y)return o.next}t=o.x<o.next.x?o:o.next}}o=o.next}while(o!==r);if(!t)return null;if(n===i)return t;var s,f=t,u=t.x,d=t.y,p=1/0;o=t;do{n>=o.x&&o.x>=u&&n!==o.x&&h(a<d?n:i,a,u,d,a<d?i:n,a,o.x,o.y)&&(s=Math.abs(a-o.y)/(n-o.x),w(o,e)&&(s<p||s===p&&(o.x>t.x||o.x===t.x&&c(t,o)))&&(t=o,p=s)),o=o.next}while(o!==f);return t}(e,r),r){var t=C(r,e);o(r,r.next),o(t,t.next)}}function c(e,r){return y(e.prev,e,r.prev)<0&&y(r.next,e,e.next)<0}function d(e,r,t,o,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-t)*n)|e<<8))|e<<4))|e<<2))|e<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=32767*(r-o)*n)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function p(e){var r=e,t=e;do{(r.x<t.x||r.x===t.x&&r.y<t.y)&&(t=r),r=r.next}while(r!==e);return t}function h(e,r,t,o,n,a,i,l){return(n-i)*(r-l)-(e-i)*(a-l)>=0&&(e-i)*(o-l)-(t-i)*(r-l)>=0&&(t-i)*(a-l)-(n-i)*(o-l)>=0}function g(e,r){return e.next.i!==r.i&&e.prev.i!==r.i&&!function(e,r){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==r.i&&t.next.i!==r.i&&x(t,t.next,e,r))return!0;t=t.next}while(t!==e);return!1}(e,r)&&(w(e,r)&&w(r,e)&&function(e,r){var t=e,o=!1,n=(e.x+r.x)/2,a=(e.y+r.y)/2;do{t.y>a!==t.next.y>a&&t.next.y!==t.y&&n<(t.next.x-t.x)*(a-t.y)/(t.next.y-t.y)+t.x&&(o=!o),t=t.next}while(t!==e);return o}(e,r)&&(y(e.prev,e,r.prev)||y(e,r.prev,r))||v(e,r)&&y(e.prev,e,e.next)>0&&y(r.prev,r,r.next)>0)}function y(e,r,t){return(r.y-e.y)*(t.x-r.x)-(r.x-e.x)*(t.y-r.y)}function v(e,r){return e.x===r.x&&e.y===r.y}function x(e,r,t,o){var n=m(y(e,r,t)),a=m(y(e,r,o)),i=m(y(t,o,e)),l=m(y(t,o,r));return n!==a&&i!==l||(!(0!==n||!b(e,t,r))||(!(0!==a||!b(e,o,r))||(!(0!==i||!b(t,e,o))||!(0!==l||!b(t,r,o)))))}function b(e,r,t){return r.x<=Math.max(e.x,t.x)&&r.x>=Math.min(e.x,t.x)&&r.y<=Math.max(e.y,t.y)&&r.y>=Math.min(e.y,t.y)}function m(e){return e>0?1:e<0?-1:0}function w(e,r){return y(e.prev,e,e.next)<0?y(e,r,e.next)>=0&&y(e,e.prev,r)>=0:y(e,r,e.prev)<0||y(e,e.next,r)<0}function C(e,r){var t=new A(e.i,e.x,e.y),o=new A(r.i,r.x,r.y),n=e.next,a=r.prev;return e.next=r,r.prev=e,t.next=n,n.prev=t,o.next=t,t.prev=o,a.next=o,o.prev=a,o}function z(e,r,t,o){var n=new A(e,r,t);return o?(n.next=o.next,n.prev=o,o.next.prev=n,o.next=n):(n.prev=n,n.next=n),n}function S(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function A(e,r,t){this.i=e,this.x=r,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function B(e,r,t,o){for(var n=0,a=r,i=t-o;a<t;a+=o)n+=(e[i]-e[a])*(e[a+1]+e[i+1]),i=a;return n}e.exports=r,e.exports.default=r,r.deviation=function(e,r,t,o){var n=r&&r.length,a=n?r[0]*t:e.length,i=Math.abs(B(e,0,a,t));if(n)for(var l=0,s=r.length;l<s;l++){var f=r[l]*t,u=l<s-1?r[l+1]*t:e.length;i-=Math.abs(B(e,f,u,t))}var c=0;for(l=0;l<o.length;l+=3){var d=o[l]*t,p=o[l+1]*t,h=o[l+2]*t;c+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return 0===i&&0===c?0:Math.abs((c-i)/i)},r.flatten=function(e){for(var r=e[0][0].length,t={vertices:[],holes:[],dimensions:r},o=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var i=0;i<r;i++)t.vertices.push(e[n][a][i]);n>0&&(o+=e[n-1].length,t.holes.push(o))}return t}},67030:function(e,r,t){"use strict";function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var o,n,a=[],i=!0,l=!1;try{for(t=t.call(e);!(i=(o=t.next()).done)&&(a.push(o.value),!r||a.length!==r);i=!0);}catch(s){l=!0,n=s}finally{try{i||null==t.return||t.return()}finally{if(l)throw n}}return a}(e,r)||a(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){if(e){if("string"===typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var l=t(81128),s=t(76266),f=t(83668),u=t(31575),c=t(69726),d=t(14955),p=t(40973),h=t(98162),g=t(88927),y=t(33290),v=t(69968),x=t(94947),b=m;function m(e,r){var t=this;if(!(this instanceof m))return new m(e,r);"function"===typeof e?(r||(r={}),r.regl=e):(r=e,e=null),r&&r.length&&(r.positions=r);var o,n=(e=r.regl)._gl,a=[],i=255;this.tooManyColors=y,o=e.texture({data:new Uint8Array(1020),width:i,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),c(this,{regl:e,gl:n,groups:[],markerCache:[null],markerTextures:[null],palette:a,paletteIds:{},paletteTexture:o,maxColors:i,maxSize:100,canvas:n.canvas}),this.update(r);var l={uniforms:{constPointSize:!!r.constPointSize,opacity:e.prop("opacity"),paletteSize:function(e,r){return[t.tooManyColors?0:i,o.height]},pixelRatio:e.context("pixelRatio"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),markerTexture:e.prop("markerTexture"),paletteTexture:o},attributes:{x:function(e,r){return r.xAttr||{buffer:r.positionBuffer,stride:8,offset:0}},y:function(e,r){return r.yAttr||{buffer:r.positionBuffer,stride:8,offset:4}},xFract:function(e,r){return r.xAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:0}},yFract:function(e,r){return r.yAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:4}},size:function(e,r){return r.size.length?{buffer:r.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*r.size/t.maxSize)]}},borderSize:function(e,r){return r.borderSize.length?{buffer:r.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*r.borderSize/t.maxSize)]}},colorId:function(e,r){return r.color.length?{buffer:r.colorBuffer,stride:t.tooManyColors?8:4,offset:0}:{constant:t.tooManyColors?a.slice(4*r.color,4*r.color+4):[r.color]}},borderColorId:function(e,r){return r.borderColor.length?{buffer:r.colorBuffer,stride:t.tooManyColors?8:4,offset:t.tooManyColors?4:2}:{constant:t.tooManyColors?a.slice(4*r.borderColor,4*r.borderColor+4):[r.borderColor]}},isActive:function(e,r){return!0===r.activation?{constant:[1]}:r.activation?r.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},s=c({},l);s.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),s.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=e(s);var f=c({},l);f.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),f.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),y&&(f.frag=f.frag.replace("smoothstep","smoothStep"),s.frag=s.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(f)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},m.prototype.draw=function(){for(var e=this,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];var n=this.groups;if(1===t.length&&Array.isArray(t[0])&&(null===t[0][0]||Array.isArray(t[0][0]))&&(t=t[0]),this.regl._refresh(),t.length)for(var a=0;a<t.length;a++)this.drawItem(a,t[a]);else n.forEach((function(r,t){e.drawItem(t)}));return this},m.prototype.drawItem=function(e,r){var t=this.groups,o=t[e];if("number"===typeof r&&(e=r,o=t[r],r=null),o&&o.count&&o.opacity){o.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,o,r));for(var a=[],i=1;i<o.activation.length;i++)o.activation[i]&&(!0===o.activation[i]||o.activation[i].data.length)&&a.push.apply(a,n(this.getMarkerDrawOptions(i,o,r)));a.length&&this.drawMarker(a)}},m.prototype.getMarkerDrawOptions=function(e,r,t){var n=r.range,a=r.tree,i=r.viewport,l=r.activation,s=r.selectionBuffer,f=r.count;this.regl;if(!a)return t?[c({},r,{markerTexture:this.markerTextures[e],activation:l[e],count:t.length,elements:t,offset:0})]:[c({},r,{markerTexture:this.markerTextures[e],activation:l[e],offset:0})];var u=[],d=a.range(n,{lod:!0,px:[(n[2]-n[0])/i.width,(n[3]-n[1])/i.height]});if(t){for(var p=l[e].data,h=new Uint8Array(f),g=0;g<t.length;g++){var y=t[g];h[y]=p?p[y]:1}s.subdata(h)}for(var v=d.length;v--;){var x=o(d[v],2),b=x[0],m=x[1];u.push(c({},r,{markerTexture:this.markerTextures[e],activation:t?s:l[e],offset:b,count:m-b}))}return u},m.prototype.update=function(){for(var e=this,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];if(t.length){1===t.length&&Array.isArray(t[0])&&(t=t[0]);var n=this.groups,a=this.gl,i=this.regl,l=this.maxSize,f=this.maxColors,d=this.palette;this.groups=n=t.map((function(r,t){var o=n[t];if(void 0===r)return o;null===r?r={positions:null}:"function"===typeof r?r={ondraw:r}:"number"===typeof r[0]&&(r={positions:r}),null===(r=p(r,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(r.positions=[]),null!=r.tooManyColors&&(e.tooManyColors=r.tooManyColors),o||(n[t]=o={id:t,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:i.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},r=c({},m.defaults,r)),r.positions&&!("marker"in r)&&(r.marker=o.marker,delete o.marker),r.marker&&!("positions"in r)&&(r.positions=o.positions,delete o.positions);var y=0,b=0;if(h(o,r,[{snap:!0,size:function(e,r){return null==e&&(e=m.defaults.size),y+=e&&e.length?1:0,e},borderSize:function(e,r){return null==e&&(e=m.defaults.borderSize),y+=e&&e.length?1:0,e},opacity:parseFloat,color:function(r,t){return null==r&&(r=m.defaults.color),r=e.updateColor(r),b++,r},borderColor:function(r,t){return null==r&&(r=m.defaults.borderColor),r=e.updateColor(r),b++,r},bounds:function(e,r,t){return"range"in t||(t.range=null),e},positions:function(e,r,t){var o=r.snap,n=r.positionBuffer,a=r.positionFractBuffer,l=r.selectionBuffer;if(e.x||e.y)return e.x.length?r.xAttr={buffer:i.buffer(e.x),offset:0,stride:4,count:e.x.length}:r.xAttr={buffer:e.x.buffer,offset:4*e.x.offset||0,stride:4*(e.x.stride||1),count:e.x.count},e.y.length?r.yAttr={buffer:i.buffer(e.y),offset:0,stride:4,count:e.y.length}:r.yAttr={buffer:e.y.buffer,offset:4*e.y.offset||0,stride:4*(e.y.stride||1),count:e.y.count},r.count=Math.max(r.xAttr.count,r.yAttr.count),e;e=g(e,"float64");var f=r.count=Math.floor(e.length/2),c=r.bounds=f?s(e,2):null;if(t.range||r.range||(delete r.range,t.range=c),t.marker||r.marker||(delete r.marker,t.marker=null),o&&(!0===o||f>o)?r.tree=u(e,{bounds:c}):o&&o.length&&(r.tree=o),r.tree){var d={primitive:"points",usage:"static",data:r.tree,type:"uint32"};r.elements?r.elements(d):r.elements=i.elements(d)}var p=v.float32(e);return n({data:p,usage:"dynamic"}),a({data:v.fract32(e,p),usage:"dynamic"}),l({data:new Uint8Array(f),type:"uint8",usage:"stream"}),e}},{marker:function(r,t,o){var n=t.activation;if(n.forEach((function(e){return e&&e.destroy&&e.destroy()})),n.length=0,r&&"number"!==typeof r[0]){for(var a=[],l=0,s=Math.min(r.length,t.count);l<s;l++){var f=e.addMarker(r[l]);a[f]||(a[f]=new Uint8Array(t.count)),a[f][l]=1}for(var u=0;u<a.length;u++)if(a[u]){var c={data:a[u],type:"uint8",usage:"static"};n[u]?n[u](c):n[u]=i.buffer(c),n[u].data=a[u]}}else{n[e.addMarker(r)]=!0}return r},range:function(e,r,t){var o=r.bounds;if(o)return e||(e=o),r.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],r.translate=[-e[0],-e[1]],r.scaleFract=v.fract(r.scale),r.translateFract=v.fract(r.translate),e},viewport:function(e){return x(e||[a.drawingBufferWidth,a.drawingBufferHeight])}}]),y){var w=o,C=w.count,z=w.size,S=w.borderSize,A=w.sizeBuffer,B=new Uint8Array(2*C);if(z.length||S.length)for(var k=0;k<C;k++)B[2*k]=Math.round(255*(null==z[k]?z:z[k])/l),B[2*k+1]=Math.round(255*(null==S[k]?S:S[k])/l);A({data:B,usage:"dynamic"})}if(b){var F,M=o,L=M.count,T=M.color,I=M.borderColor,P=M.colorBuffer;if(e.tooManyColors){if(T.length||I.length){F=new Uint8Array(8*L);for(var U=0;U<L;U++){var R=T[U];F[8*U]=d[4*R],F[8*U+1]=d[4*R+1],F[8*U+2]=d[4*R+2],F[8*U+3]=d[4*R+3];var _=I[U];F[8*U+4]=d[4*_],F[8*U+5]=d[4*_+1],F[8*U+6]=d[4*_+2],F[8*U+7]=d[4*_+3]}}}else if(T.length||I.length){F=new Uint8Array(4*L+2);for(var W=0;W<L;W++)null!=T[W]&&(F[4*W]=T[W]%f,F[4*W+1]=Math.floor(T[W]/f)),null!=I[W]&&(F[4*W+2]=I[W]%f,F[4*W+3]=Math.floor(I[W]/f))}P({data:F||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return o}))}},m.prototype.addMarker=function(e){var r,t=this.markerTextures,o=this.regl,n=this.markerCache,a=null==e?0:n.indexOf(e);if(a>=0)return a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)r=e;else{r=new Uint8Array(e.length);for(var i=0,l=e.length;i<l;i++)r[i]=255*e[i]}var s=Math.floor(Math.sqrt(r.length));return a=t.length,n.push(e),t.push(o.texture({channels:1,data:r,radius:s,mag:"linear",min:"linear"})),a},m.prototype.updateColor=function(e){var r=this.paletteIds,t=this.palette,o=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if("number"===typeof e[0]){var a=[];if(Array.isArray(e))for(var i=0;i<e.length;i+=4)a.push(e.slice(i,i+4));else for(var s=0;s<e.length;s+=4)a.push(e.subarray(s,s+4));e=a}for(var u=0;u<e.length;u++){var c=e[u];c=l(c,"uint8");var d=f(c,!1);if(null==r[d]){var p=t.length;r[d]=Math.floor(p/4),t[p]=c[0],t[p+1]=c[1],t[p+2]=c[2],t[p+3]=c[3]}n[u]=r[d]}return!this.tooManyColors&&t.length>4*o&&(this.tooManyColors=!0),this.updatePalette(t),1===n.length?n[0]:n},m.prototype.updatePalette=function(e){if(!this.tooManyColors){var r=this.maxColors,t=this.paletteTexture,o=Math.ceil(.25*e.length/r);if(o>1)for(var n=.25*(e=e.slice()).length%r;n<o*r;n++)e.push(0,0,0,0);t.height<o&&t.resize(r,o),t.subimage({width:Math.min(.25*e.length,r),height:o,data:e},0,0)}},m.prototype.destroy=function(){return this.groups.forEach((function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach((function(e){return e&&e.destroy&&e.destroy()})),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()})),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach((function(e){return e&&e.destroy&&e.destroy()})),this};var w=t(69726);e.exports=function(e,r){var t=new b(e,r),o=t.render.bind(t);return w(o,{render:o,update:t.update.bind(t),draw:t.draw.bind(t),destroy:t.destroy.bind(t),regl:t.regl,gl:t.gl,canvas:t.gl.canvas,groups:t.groups,markers:t.markerCache,palette:t.palette}),o}},58233:function(e,r,t){"use strict";const o=t(8084),n=t(40973),a=t(76266),i=t(60940),l=t(84168),s=t(94947),f=t(88927);function u(e,r){if(!(this instanceof u))return new u(e,r);this.traces=[],this.passes={},this.regl=e,this.scatter=o(e),this.canvas=this.scatter.canvas}function c(e,r,t){return(null!=e.id?e.id:e)<<16|(255&r)<<8|255&t}function d(e,r,t){let o,n,a,i,l,s,f,u,c=e[r],d=e[t];return c.length>2?(o=c[0],a=c[2],n=c[1],i=c[3]):c.length?(o=n=c[0],a=i=c[1]):(o=c.x,n=c.y,a=c.x+c.width,i=c.y+c.height),d.length>2?(l=d[0],f=d[2],s=d[1],u=d[3]):d.length?(l=s=d[0],f=u=d[1]):(l=d.x,s=d.y,f=d.x+d.width,u=d.y+d.height),[l,n,f,i]}function p(e){if("number"===typeof e)return[e,e,e,e];if(2===e.length)return[e[0],e[1],e[0],e[1]];{let r=s(e);return[r.x,r.y,r.x+r.width,r.y+r.height]}}e.exports=u,u.prototype.render=function(){return arguments.length&&this.update(...arguments),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=i((()=>{this.draw(),this.dirty=!0,this.planned=null}))):(this.draw(),this.dirty=!0,i((()=>{this.dirty=!1}))),this)},u.prototype.update=function(){if(!arguments.length)return;for(let t=0;t<arguments.length;t++)this.updateItem(t,t<0||arguments.length<=t?void 0:arguments[t]);this.traces=this.traces.filter(Boolean);let e=[],r=0;for(let t=0;t<this.traces.length;t++){let o=this.traces[t],n=this.traces[t].passes;for(let r=0;r<n.length;r++)e.push(this.passes[n[r]]);o.passOffset=r,r+=o.passes.length}return this.scatter.update(...e),this},u.prototype.updateItem=function(e,r){let{regl:t}=this;if(null===r)return this.traces[e]=null,this;if(!r)return this;let o,i=n(r,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),l=this.traces[e]||(this.traces[e]={id:e,buffer:t.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:s([t._gl.drawingBufferWidth,t._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=i.color&&(l.color=i.color),null!=i.size&&(l.size=i.size),null!=i.marker&&(l.marker=i.marker),null!=i.borderColor&&(l.borderColor=i.borderColor),null!=i.borderSize&&(l.borderSize=i.borderSize),null!=i.opacity&&(l.opacity=i.opacity),i.viewport&&(l.viewport=s(i.viewport)),null!=i.diagonal&&(l.diagonal=i.diagonal),null!=i.upper&&(l.upper=i.upper),null!=i.lower&&(l.lower=i.lower),i.data){l.buffer(f(i.data)),l.columns=i.data.length,l.count=i.data[0].length,l.bounds=[];for(let e=0;e<l.columns;e++)l.bounds[e]=a(i.data[e],1)}i.range&&(l.range=i.range,o=l.range&&"number"!==typeof l.range[0]),i.domain&&(l.domain=i.domain);let u=!1;null!=i.padding&&(Array.isArray(i.padding)&&i.padding.length===l.columns&&"number"===typeof i.padding[i.padding.length-1]?(l.padding=i.padding.map(p),u=!0):l.padding=p(i.padding));let h=l.columns,g=l.count,y=l.viewport.width,v=l.viewport.height,x=l.viewport.x,b=l.viewport.y,m=y/h,w=v/h;l.passes=[];for(let n=0;n<h;n++)for(let e=0;e<h;e++){if(!l.diagonal&&e===n)continue;if(!l.upper&&n>e)continue;if(!l.lower&&n<e)continue;let r=c(l.id,n,e),t=this.passes[r]||(this.passes[r]={});if(i.data&&(i.transpose?t.positions={x:{buffer:l.buffer,offset:e,count:g,stride:h},y:{buffer:l.buffer,offset:n,count:g,stride:h}}:t.positions={x:{buffer:l.buffer,offset:e*g,count:g},y:{buffer:l.buffer,offset:n*g,count:g}},t.bounds=d(l.bounds,n,e)),i.domain||i.viewport||i.data){let r=u?d(l.padding,n,e):l.padding;if(l.domain){let[o,a,i,s]=d(l.domain,n,e);t.viewport=[x+o*y+r[0],b+a*v+r[1],x+i*y-r[2],b+s*v-r[3]]}else t.viewport=[x+e*m+m*r[0],b+n*w+w*r[1],x+(e+1)*m-m*r[2],b+(n+1)*w-w*r[3]]}i.color&&(t.color=l.color),i.size&&(t.size=l.size),i.marker&&(t.marker=l.marker),i.borderSize&&(t.borderSize=l.borderSize),i.borderColor&&(t.borderColor=l.borderColor),i.opacity&&(t.opacity=l.opacity),i.range&&(t.range=o?d(l.range,n,e):l.range||t.bounds),l.passes.push(r)}return this},u.prototype.draw=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];if(r.length){let e=[];for(let t=0;t<r.length;t++)if("number"===typeof r[t]){let{passes:o,passOffset:n}=this.traces[r[t]];e.push(...l(n,n+o.length))}else if(r[t].length){let o=r[t],{passes:n,passOffset:a}=this.traces[t];n=n.map(((r,t)=>{e[a+t]=o}))}this.scatter.draw(...e)}else this.scatter.draw();return this},u.prototype.destroy=function(){return this.traces.forEach((e=>{e.buffer&&e.buffer.destroy&&e.buffer.destroy()})),this.traces=null,this.passes=null,this.scatter.destroy(),this}},8084:function(e,r,t){"use strict";function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],o=!0,n=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(o=(i=l.next()).done)&&(t.push(i.value),!r||t.length!==r);o=!0);}catch(s){n=!0,a=s}finally{try{o||null==l.return||l.return()}finally{if(n)throw a}}return t}(e,r)||a(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,r){if(e){if("string"===typeof e)return i(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?i(e,r):void 0}}function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}var l=t(81128),s=t(76266),f=t(83668),u=t(31575),c=t(69726),d=t(14955),p=t(40973),h=t(98162),g=t(88927),y=t(33290),v=t(69968),x=t(94947),b=m;function m(e,r){var t=this;if(!(this instanceof m))return new m(e,r);"function"===typeof e?(r||(r={}),r.regl=e):(r=e,e=null),r&&r.length&&(r.positions=r);var o,n=(e=r.regl)._gl,a=[],i=255;this.tooManyColors=y,o=e.texture({data:new Uint8Array(1020),width:i,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),c(this,{regl:e,gl:n,groups:[],markerCache:[null],markerTextures:[null],palette:a,paletteIds:{},paletteTexture:o,maxColors:i,maxSize:100,canvas:n.canvas}),this.update(r);var l={uniforms:{constPointSize:!!r.constPointSize,pixelRatio:e.context("pixelRatio"),palette:o,paletteSize:function(e,r){return[t.tooManyColors?0:i,o.height]},scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),opacity:e.prop("opacity"),marker:e.prop("markerTexture")},attributes:{x:function(e,r){return r.xAttr||{buffer:r.positionBuffer,stride:8,offset:0}},y:function(e,r){return r.yAttr||{buffer:r.positionBuffer,stride:8,offset:4}},xFract:function(e,r){return r.xAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:0}},yFract:function(e,r){return r.yAttr?{constant:[0,0]}:{buffer:r.positionFractBuffer,stride:8,offset:4}},size:function(e,r){return r.size.length?{buffer:r.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*r.size/t.maxSize)]}},borderSize:function(e,r){return r.borderSize.length?{buffer:r.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*r.borderSize/t.maxSize)]}},colorId:function(e,r){return r.color.length?{buffer:r.colorBuffer,stride:t.tooManyColors?8:4,offset:0}:{constant:t.tooManyColors?a.slice(4*r.color,4*r.color+4):[r.color]}},borderColorId:function(e,r){return r.borderColor.length?{buffer:r.colorBuffer,stride:t.tooManyColors?8:4,offset:t.tooManyColors?4:2}:{constant:t.tooManyColors?a.slice(4*r.borderColor,4*r.borderColor+4):[r.borderColor]}},isActive:function(e,r){return!0===r.activation?{constant:[1]}:r.activation?r.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"},s=c({},l);s.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),s.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=e(s);var f=c({},l);f.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),f.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform bool constPointSize;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(palette,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),y&&(f.frag=f.frag.replace("smoothstep","smoothStep"),s.frag=s.frag.replace("smoothstep","smoothStep")),this.drawCircle=e(f)}m.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},m.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},m.prototype.draw=function(){for(var e=this,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];var n=this.groups;if(1===t.length&&Array.isArray(t[0])&&(null===t[0][0]||Array.isArray(t[0][0]))&&(t=t[0]),this.regl._refresh(),t.length)for(var a=0;a<t.length;a++)this.drawItem(a,t[a]);else n.forEach((function(r,t){e.drawItem(t)}));return this},m.prototype.drawItem=function(e,r){var t=this.groups,o=t[e];if("number"===typeof r&&(e=r,o=t[r],r=null),o&&o.count&&o.opacity){o.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,o,r));for(var a=[],i=1;i<o.activation.length;i++)o.activation[i]&&(!0===o.activation[i]||o.activation[i].data.length)&&a.push.apply(a,n(this.getMarkerDrawOptions(i,o,r)));a.length&&this.drawMarker(a)}},m.prototype.getMarkerDrawOptions=function(e,r,t){var n=r.range,a=r.tree,i=r.viewport,l=r.activation,s=r.selectionBuffer,f=r.count;this.regl;if(!a)return t?[c({},r,{markerTexture:this.markerTextures[e],activation:l[e],count:t.length,elements:t,offset:0})]:[c({},r,{markerTexture:this.markerTextures[e],activation:l[e],offset:0})];var u=[],d=a.range(n,{lod:!0,px:[(n[2]-n[0])/i.width,(n[3]-n[1])/i.height]});if(t){for(var p=l[e].data,h=new Uint8Array(f),g=0;g<t.length;g++){var y=t[g];h[y]=p?p[y]:1}s.subdata(h)}for(var v=d.length;v--;){var x=o(d[v],2),b=x[0],m=x[1];u.push(c({},r,{markerTexture:this.markerTextures[e],activation:t?s:l[e],offset:b,count:m-b}))}return u},m.prototype.update=function(){for(var e=this,r=arguments.length,t=new Array(r),o=0;o<r;o++)t[o]=arguments[o];if(t.length){1===t.length&&Array.isArray(t[0])&&(t=t[0]);var n=this.groups,a=this.gl,i=this.regl,l=this.maxSize,f=this.maxColors,d=this.palette;this.groups=n=t.map((function(r,t){var o=n[t];if(void 0===r)return o;null===r?r={positions:null}:"function"===typeof r?r={ondraw:r}:"number"===typeof r[0]&&(r={positions:r}),null===(r=p(r,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(r.positions=[]),null!=r.tooManyColors&&(e.tooManyColors=r.tooManyColors),o||(n[t]=o={id:t,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:i.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:i.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},r=c({},m.defaults,r)),r.positions&&!("marker"in r)&&(r.marker=o.marker,delete o.marker),r.marker&&!("positions"in r)&&(r.positions=o.positions,delete o.positions);var y=0,b=0;if(h(o,r,[{snap:!0,size:function(e,r){return null==e&&(e=m.defaults.size),y+=e&&e.length?1:0,e},borderSize:function(e,r){return null==e&&(e=m.defaults.borderSize),y+=e&&e.length?1:0,e},opacity:parseFloat,color:function(r,t){return null==r&&(r=m.defaults.color),r=e.updateColor(r),b++,r},borderColor:function(r,t){return null==r&&(r=m.defaults.borderColor),r=e.updateColor(r),b++,r},bounds:function(e,r,t){return"range"in t||(t.range=null),e},positions:function(e,r,t){var o=r.snap,n=r.positionBuffer,a=r.positionFractBuffer,l=r.selectionBuffer;if(e.x||e.y)return e.x.length?r.xAttr={buffer:i.buffer(e.x),offset:0,stride:4,count:e.x.length}:r.xAttr={buffer:e.x.buffer,offset:4*e.x.offset||0,stride:4*(e.x.stride||1),count:e.x.count},e.y.length?r.yAttr={buffer:i.buffer(e.y),offset:0,stride:4,count:e.y.length}:r.yAttr={buffer:e.y.buffer,offset:4*e.y.offset||0,stride:4*(e.y.stride||1),count:e.y.count},r.count=Math.max(r.xAttr.count,r.yAttr.count),e;e=g(e,"float64");var f=r.count=Math.floor(e.length/2),c=r.bounds=f?s(e,2):null;if(t.range||r.range||(delete r.range,t.range=c),t.marker||r.marker||(delete r.marker,t.marker=null),o&&(!0===o||f>o)?r.tree=u(e,{bounds:c}):o&&o.length&&(r.tree=o),r.tree){var d={primitive:"points",usage:"static",data:r.tree,type:"uint32"};r.elements?r.elements(d):r.elements=i.elements(d)}return n({data:v.float(e),usage:"dynamic"}),a({data:v.fract(e),usage:"dynamic"}),l({data:new Uint8Array(f),type:"uint8",usage:"stream"}),e}},{marker:function(r,t,o){var n=t.activation;if(n.forEach((function(e){return e&&e.destroy&&e.destroy()})),n.length=0,r&&"number"!==typeof r[0]){for(var a=[],l=0,s=Math.min(r.length,t.count);l<s;l++){var f=e.addMarker(r[l]);a[f]||(a[f]=new Uint8Array(t.count)),a[f][l]=1}for(var u=0;u<a.length;u++)if(a[u]){var c={data:a[u],type:"uint8",usage:"static"};n[u]?n[u](c):n[u]=i.buffer(c),n[u].data=a[u]}}else{n[e.addMarker(r)]=!0}return r},range:function(e,r,t){var o=r.bounds;if(o)return e||(e=o),r.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],r.translate=[-e[0],-e[1]],r.scaleFract=v.fract(r.scale),r.translateFract=v.fract(r.translate),e},viewport:function(e){return x(e||[a.drawingBufferWidth,a.drawingBufferHeight])}}]),y){var w=o,C=w.count,z=w.size,S=w.borderSize,A=w.sizeBuffer,B=new Uint8Array(2*C);if(z.length||S.length)for(var k=0;k<C;k++)B[2*k]=Math.round(255*(null==z[k]?z:z[k])/l),B[2*k+1]=Math.round(255*(null==S[k]?S:S[k])/l);A({data:B,usage:"dynamic"})}if(b){var F,M=o,L=M.count,T=M.color,I=M.borderColor,P=M.colorBuffer;if(e.tooManyColors){if(T.length||I.length){F=new Uint8Array(8*L);for(var U=0;U<L;U++){var R=T[U];F[8*U]=d[4*R],F[8*U+1]=d[4*R+1],F[8*U+2]=d[4*R+2],F[8*U+3]=d[4*R+3];var _=I[U];F[8*U+4]=d[4*_],F[8*U+5]=d[4*_+1],F[8*U+6]=d[4*_+2],F[8*U+7]=d[4*_+3]}}}else if(T.length||I.length){F=new Uint8Array(4*L+2);for(var W=0;W<L;W++)null!=T[W]&&(F[4*W]=T[W]%f,F[4*W+1]=Math.floor(T[W]/f)),null!=I[W]&&(F[4*W+2]=I[W]%f,F[4*W+3]=Math.floor(I[W]/f))}P({data:F||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return o}))}},m.prototype.addMarker=function(e){var r,t=this.markerTextures,o=this.regl,n=this.markerCache,a=null==e?0:n.indexOf(e);if(a>=0)return a;if(e instanceof Uint8Array||e instanceof Uint8ClampedArray)r=e;else{r=new Uint8Array(e.length);for(var i=0,l=e.length;i<l;i++)r[i]=255*e[i]}var s=Math.floor(Math.sqrt(r.length));return a=t.length,n.push(e),t.push(o.texture({channels:1,data:r,radius:s,mag:"linear",min:"linear"})),a},m.prototype.updateColor=function(e){var r=this.paletteIds,t=this.palette,o=this.maxColors;Array.isArray(e)||(e=[e]);var n=[];if("number"===typeof e[0]){var a=[];if(Array.isArray(e))for(var i=0;i<e.length;i+=4)a.push(e.slice(i,i+4));else for(var s=0;s<e.length;s+=4)a.push(e.subarray(s,s+4));e=a}for(var u=0;u<e.length;u++){var c=e[u];c=l(c,"uint8");var d=f(c,!1);if(null==r[d]){var p=t.length;r[d]=Math.floor(p/4),t[p]=c[0],t[p+1]=c[1],t[p+2]=c[2],t[p+3]=c[3]}n[u]=r[d]}return!this.tooManyColors&&t.length>4*o&&(this.tooManyColors=!0),this.updatePalette(t),1===n.length?n[0]:n},m.prototype.updatePalette=function(e){if(!this.tooManyColors){var r=this.maxColors,t=this.paletteTexture,o=Math.ceil(.25*e.length/r);if(o>1)for(var n=.25*(e=e.slice()).length%r;n<o*r;n++)e.push(0,0,0,0);t.height<o&&t.resize(r,o),t.subimage({width:Math.min(.25*e.length,r),height:o,data:e},0,0)}},m.prototype.destroy=function(){return this.groups.forEach((function(e){e.sizeBuffer.destroy(),e.positionBuffer.destroy(),e.positionFractBuffer.destroy(),e.colorBuffer.destroy(),e.activation.forEach((function(e){return e&&e.destroy&&e.destroy()})),e.selectionBuffer.destroy(),e.elements&&e.elements.destroy()})),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach((function(e){return e&&e.destroy&&e.destroy()})),this};var w=t(69726);e.exports=function(e,r){var t=new b(e,r),o=t.render.bind(t);return w(o,{render:o,update:t.update.bind(t),draw:t.draw.bind(t),destroy:t.destroy.bind(t),regl:t.regl,gl:t.gl,canvas:t.gl.canvas,groups:t.groups,markers:t.markerCache,palette:t.palette}),o}},92438:function(e){"use strict";var r,t="";e.exports=function(e,o){if("string"!==typeof e)throw new TypeError("expected a string");if(1===o)return e;if(2===o)return e+e;var n=e.length*o;if(r!==e||"undefined"===typeof r)r=e,t="";else if(t.length>=n)return t.substr(0,n);for(;n>t.length&&o>1;)1&o&&(t+=e),o>>=1,e+=e;return t=(t+=e).substr(0,n)}},94390:function(e,r,t){e.exports=t.g.performance&&t.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}}]);