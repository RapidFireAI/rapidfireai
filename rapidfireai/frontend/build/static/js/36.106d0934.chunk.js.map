{"version":3,"file":"static/js/36.106d0934.chunk.js","mappings":"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","sources":["common/components/PageContainer.tsx","shared/web-shared/unified-tagging/components/TagAssignmentUI/TagAssignmentRowContainer.tsx","shared/web-shared/unified-tagging/context/TagAssignmentContextProvider.tsx","shared/web-shared/unified-tagging/components/TagAssignmentRoot.tsx","shared/web-shared/unified-tagging/components/TagAssignmentRow.tsx","shared/web-shared/unified-tagging/components/TagAssignmentLabel.tsx","shared/web-shared/unified-tagging/components/TagAssignmentField/TagAssignmentInput.tsx","shared/web-shared/unified-tagging/components/TagAssignmentKey.tsx","shared/web-shared/unified-tagging/components/TagAssignmentValue.tsx","shared/web-shared/unified-tagging/components/TagAssignmentUI/TagAssignmentRemoveButtonUI.tsx","shared/web-shared/unified-tagging/components/TagAssignmentRemoveButton.tsx","shared/web-shared/unified-tagging/hooks/useTagAssignmentFieldArray.ts","shared/web-shared/unified-tagging/hooks/useTagAssignmentForm.tsx","common/components/UnifiedTaggingForm.tsx","common/hooks/useTagAssignmentModal.tsx","common/utils/StringUtils.ts","experiment-tracking/components/NotFoundPage.tsx","experiment-tracking/utils/ExperimentKindUtils.ts","graphql/get-graphql-error.ts","experiment-tracking/components/run-page/RunViewArtifactTab.tsx","experiment-tracking/components/run-page/useRunViewActiveTab.tsx","experiment-tracking/components/run-page/RunViewModeSwitch.tsx","experiment-tracking/components/run-page/RunViewHeaderRegisterModelButton.tsx","experiment-tracking/components/run-page/RunViewHeader.tsx","experiment-tracking/components/run-page/overview/RunViewStatusBox.tsx","experiment-tracking/components/run-page/overview/RunViewUserLinkBox.tsx","experiment-tracking/components/run-page/overview/RunViewMetricsTable.tsx","experiment-tracking/components/run-page/overview/RunViewDatasetBox.tsx","experiment-tracking/components/run-page/overview/RunViewParentRunBox.tsx","experiment-tracking/components/run-page/overview/RunViewTagsBox.tsx","experiment-tracking/components/run-page/overview/RunViewDescriptionBox.tsx","experiment-tracking/components/run-page/overview/RunViewRegisteredModelsBox.tsx","experiment-tracking/pages/prompts/hooks/usePromptVersionsForRunQuery.tsx","experiment-tracking/components/run-page/overview/RunViewRegisteredPromptsBox.tsx","experiment-tracking/components/run-page/overview/RunViewLoggedModelsBox.tsx","experiment-tracking/components/run-page/overview/RunViewSourceBox.tsx","experiment-tracking/components/run-page/overview/RunViewLoggedModelsTable.tsx","experiment-tracking/hooks/logged-models/useCombinedRunInputsOutputsModels.tsx","experiment-tracking/components/run-page/overview/RunViewDatasetBoxV2.tsx","experiment-tracking/components/run-page/hooks/useRunDetailsPageOverviewSectionsV2.tsx","experiment-tracking/components/run-page/RunViewOverview.tsx","experiment-tracking/components/RunNotFoundView.tsx","experiment-tracking/components/run-page/RunViewChartTooltipBody.tsx","experiment-tracking/components/run-page/RunViewMetricCharts.tsx","experiment-tracking/components/experiment-page/hooks/useLoggedModelsForExperimentRunV2.tsx","experiment-tracking/components/evaluations/hooks/useCompareToRunUuid.tsx","experiment-tracking/components/evaluations/EvaluationRunCompareSelector.tsx","experiment-tracking/components/evaluations/hooks/useRunLoggedTraceTableArtifacts.tsx","experiment-tracking/components/run-page/hooks/useSearchRunsQuery.tsx","experiment-tracking/components/evaluations/RunViewEvaluationsTabArtifacts.tsx","experiment-tracking/components/evaluations/RunViewEvaluationsTab.tsx","experiment-tracking/components/run-page/RunPage.tsx","experiment-tracking/components/experiment-page/hooks/useLoggedModelsForExperimentRun.tsx"],"sourcesContent":["/**\n * NOTE: this code file was automatically migrated to TypeScript using ts-migrate and\n * may contain multiple `any` type annotations and `@ts-expect-error` directives.\n * If possible, please improve types while making changes to this file. If the type\n * annotations are already looking good, please remove this comment.\n */\n\nimport React from 'react';\nimport { PageWrapper, Spacer } from '@databricks/design-system';\n\ntype OwnProps = {\n  usesFullHeight?: boolean;\n  children?: React.ReactNode;\n};\n\n// @ts-expect-error TS(2565): Property 'defaultProps' is used before being assig... Remove this comment to see the full error message\ntype Props = OwnProps & typeof PageContainer.defaultProps;\n\nexport function PageContainer(props: Props) {\n  const { usesFullHeight, ...restProps } = props;\n  return (\n    // @ts-expect-error TS(2322): Type '{ height: string; display: string; flexDirec... Remove this comment to see the full error message\n    <PageWrapper css={usesFullHeight ? styles.useFullHeightLayout : styles.wrapper}>\n      {/* @ts-expect-error TS(2322): Type '{ css: { flexShrink: number; }; }' is not as... Remove this comment to see the full error message */}\n      <Spacer css={styles.fixedSpacer} />\n      {usesFullHeight ? props.children : <div {...restProps} css={styles.container} />}\n    </PageWrapper>\n  );\n}\n\nPageContainer.defaultProps = {\n  usesFullHeight: false,\n};\n\nconst styles = {\n  useFullHeightLayout: {\n    height: 'calc(100% - 60px)', // 60px comes from header height\n    display: 'flex',\n    flexDirection: 'column',\n    '&:last-child': {\n      flexGrow: 1,\n    },\n  },\n  wrapper: { flex: 1 },\n  fixedSpacer: {\n    // Ensure spacer's fixed height regardless of flex\n    flexShrink: 0,\n  },\n  container: {\n    width: '100%',\n    flexGrow: 1,\n    paddingBottom: 24,\n  },\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\n\nexport function TagAssignmentRowContainer({ children }: { children: React.ReactNode }) {\n  const { theme } = useDesignSystemTheme();\n  return <div css={{ display: 'flex', flexDirection: 'column', gap: theme.spacing.sm }}>{children}</div>;\n}\n","import invariant from 'invariant';\nimport { createContext, useContext } from 'react';\nimport type { FieldValues, ArrayPath, FieldArray } from 'react-hook-form';\n\nimport type { UseTagAssignmentFormReturn } from '../hooks/useTagAssignmentForm';\n\nexport const TagAssignmentContext = createContext<UseTagAssignmentFormReturn | null>(null);\n\nexport function TagAssignmentContextProvider<\n  T extends FieldValues = FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n>({ children, ...props }: { children: React.ReactNode } & UseTagAssignmentFormReturn<T, K, V>) {\n  return <TagAssignmentContext.Provider value={props as any}>{children}</TagAssignmentContext.Provider>;\n}\n\nexport function useTagAssignmentContext<\n  T extends FieldValues = FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n>() {\n  const context = useContext(TagAssignmentContext as React.Context<UseTagAssignmentFormReturn<T, K, V> | null>);\n  invariant(context, 'useTagAssignmentContext must be used within a TagAssignmentRoot');\n  return context;\n}\n","import invariant from 'invariant';\nimport type { ArrayPath, FieldArray, FieldValues } from 'react-hook-form';\nimport { FormProvider, useFormContext } from 'react-hook-form';\n\nimport { TagAssignmentRowContainer } from './TagAssignmentUI/TagAssignmentRowContainer';\nimport { TagAssignmentContextProvider } from '../context/TagAssignmentContextProvider';\nimport type { UseTagAssignmentFormReturn } from '../hooks/useTagAssignmentForm';\n\nexport function TagAssignmentRoot<\n  T extends FieldValues = FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n>({ children, ...props }: { children: React.ReactNode } & UseTagAssignmentFormReturn<T, K, V>) {\n  const formCtx = useFormContext();\n\n  const Component = (\n    <TagAssignmentContextProvider {...props}>\n      <TagAssignmentRowContainer>{children}</TagAssignmentRowContainer>\n    </TagAssignmentContextProvider>\n  );\n\n  if (formCtx) {\n    return Component;\n  }\n\n  invariant(props.form, 'Nest your component on a FormProvider or pass a form prop');\n\n  return <FormProvider {...props.form}>{Component}</FormProvider>;\n}\n","import invariant from 'invariant';\nimport React from 'react';\n\nimport { useDesignSystemTheme } from '@databricks/design-system';\n\nexport function TagAssignmentRow({ children }: { children: React.ReactNode }) {\n  const { theme } = useDesignSystemTheme();\n\n  const stableChildren = React.Children.toArray(children);\n  invariant(stableChildren.length <= 3, 'TagAssignmentRow must have 3 children or less');\n\n  const parsedChildren = Array(3)\n    .fill(null)\n    .map((_, i) => stableChildren[i] ?? <span key={i} style={{ width: theme.general.heightSm }} />); // Sync width with only icon button width\n\n  return (\n    <div css={{ display: 'grid', gridTemplateColumns: '1fr 1fr min-content', gap: theme.spacing.sm }}>\n      {parsedChildren}\n    </div>\n  );\n}\n","import { Typography } from '@databricks/design-system';\n\nexport function TagAssignmentLabel({ children }: { children: React.ReactNode }) {\n  return <Typography.Text bold>{children}</Typography.Text>;\n}\n","import { forwardRef } from 'react';\n\nimport type { InputProps, InputRef } from '@databricks/design-system';\nimport { FormUI, Input } from '@databricks/design-system';\n\ninterface TagAssignmentInputProps extends InputProps {\n  errorMessage?: string;\n}\n\nexport const TagAssignmentInput: React.ForwardRefExoticComponent<\n  TagAssignmentInputProps & React.RefAttributes<InputRef>\n> = forwardRef<InputRef, TagAssignmentInputProps>(({ errorMessage, ...otherProps }: TagAssignmentInputProps, ref) => {\n  return (\n    <div css={{ flex: 1 }}>\n      <Input validationState={errorMessage ? 'error' : 'info'} {...otherProps} ref={ref} />\n      {errorMessage && <FormUI.Message message={errorMessage} type=\"error\" />}\n    </div>\n  );\n});\n","// Do not modify this file\n\nimport React from 'react';\nimport type { ControllerProps, FieldValues, Path, UseControllerProps } from 'react-hook-form';\nimport { Controller } from 'react-hook-form';\n\nimport { TagAssignmentInput } from './TagAssignmentField/TagAssignmentInput';\nimport { useTagAssignmentContext } from '../context/TagAssignmentContextProvider';\n\ninterface TagAssignmentKeyProps<T extends FieldValues> {\n  index: number;\n  rules?: UseControllerProps<T>['rules'];\n  render?: ControllerProps<T>['render'];\n}\n\nexport function TagAssignmentKey<T extends FieldValues>({ index, rules, render }: TagAssignmentKeyProps<T>) {\n  const { name, keyProperty, getTagsValues, emptyValue, appendIfPossible } = useTagAssignmentContext<T>();\n\n  return (\n    <Controller\n      name={`${name}.${index}.${keyProperty}` as Path<T>}\n      rules={rules}\n      render={({ field, fieldState, formState }) => {\n        const legacyChange = field.onChange;\n\n        function handleChange(e: React.ChangeEvent<HTMLInputElement>) {\n          legacyChange(e);\n\n          const tags = getTagsValues();\n          if (!tags?.at(-1)?.[keyProperty]) return;\n          appendIfPossible(emptyValue, { shouldFocus: false });\n        }\n        field.onChange = handleChange;\n\n        if (render) {\n          return render({ field, fieldState, formState });\n        }\n\n        return (\n          <TagAssignmentInput\n            componentId=\"TagAssignmentKey.Default.Input\"\n            errorMessage={fieldState.error?.message}\n            {...field}\n          />\n        );\n      }}\n    />\n  );\n}\n","// Do not modify this file\n\nimport type { ControllerProps, FieldValues, Path } from 'react-hook-form';\nimport { Controller } from 'react-hook-form';\n\nimport { TagAssignmentInput } from './TagAssignmentField/TagAssignmentInput';\nimport { useTagAssignmentContext } from '../context/TagAssignmentContextProvider';\n\ninterface TagAssignmentValueProps<T extends FieldValues> {\n  rules?: ControllerProps<T>['rules'];\n  index: number;\n  render?: ControllerProps<T>['render'];\n}\n\nexport function TagAssignmentValue<T extends FieldValues>({ rules, index, render }: TagAssignmentValueProps<T>) {\n  const { name, valueProperty } = useTagAssignmentContext<T>();\n\n  return (\n    <Controller\n      rules={rules}\n      name={`${name}.${index}.${valueProperty}` as Path<T>}\n      render={({ field, fieldState, formState }) => {\n        if (render) {\n          return render({ field, fieldState, formState });\n        }\n\n        return (\n          <TagAssignmentInput\n            componentId=\"TagAssignmentValue.Default.Input\"\n            errorMessage={fieldState.error?.message}\n            {...field}\n          />\n        );\n      }}\n    />\n  );\n}\n","import type { ButtonProps } from '@databricks/design-system';\nimport { Button, TrashIcon } from '@databricks/design-system';\n\nexport function TagAssignmentRemoveButtonUI(props: Omit<ButtonProps, 'icon'>) {\n  return <Button icon={<TrashIcon />} {...props} />;\n}\n","import type { ButtonProps } from '@databricks/design-system';\n\nimport { TagAssignmentRemoveButtonUI } from './TagAssignmentUI/TagAssignmentRemoveButtonUI';\nimport { useTagAssignmentContext } from '../context/TagAssignmentContextProvider';\n\nexport interface TagAssignmentRemoveButtonProps extends Omit<ButtonProps, 'onClick' | 'icon'> {\n  index: number;\n}\n\nexport function TagAssignmentRemoveButton({ index, ...props }: TagAssignmentRemoveButtonProps) {\n  const { removeOrUpdate } = useTagAssignmentContext();\n\n  return <TagAssignmentRemoveButtonUI onClick={() => removeOrUpdate(index)} {...props} />;\n}\n","import invariant from 'invariant';\nimport { useCallback, useState } from 'react';\nimport type { ArrayPath, FieldArray, FieldArrayMethodProps, FieldValues, Path } from 'react-hook-form';\nimport { useFieldArray, useFormContext } from 'react-hook-form';\n\nimport { useIntl } from 'react-intl';\nimport type { IntlShape } from 'react-intl';\n\nimport type { UseTagAssignmentProps } from './useTagAssignmentForm';\n\nfunction getTagAssignmentRules(maxLength: number | undefined, intl: IntlShape) {\n  if (maxLength === undefined) return undefined;\n  if (maxLength === 0) {\n    invariant(false, 'maxLength must be greater than 0');\n  }\n  return {\n    maxLength: {\n      value: maxLength,\n      message: intl.formatMessage(\n        {\n          defaultMessage: `You can set a maximum of {maxLength} values`,\n          description:\n            'Error message when trying to submit a key-value pair form with more than the maximum allowed values',\n        },\n        {\n          maxLength,\n        },\n      ),\n    },\n  };\n}\n\ntype UseTagAssignmentFieldArrayProps<\n  T extends FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n> = Pick<UseTagAssignmentProps<T, K, V>, 'name' | 'maxLength' | 'emptyValue' | 'form' | 'keyProperty'>;\n\n/**\n * Alternative to useTagAssignmentForm that only provides a wrapper around RHF's useFieldArray without any\n * side effects to initialize the form state.\n *\n * As with useFieldArray, the caller is expected to manage the form state themselves using these methods.\n * For conformance to the unified tagging pattern, there are 2 key things you are responsible for:\n *   1. Initialize the form state with an empty tag\n *   2. Call appendIfPossible when the user inputs something into the last tag key field\n */\nexport function useTagAssignmentFieldArray<\n  T extends FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n>({ name, maxLength, emptyValue, form, keyProperty }: UseTagAssignmentFieldArrayProps<T, K, V>) {\n  const intl = useIntl();\n\n  const formCtx = useFormContext<T>();\n  const shouldUseFormContext = Boolean(formCtx) && !form;\n  const internalForm = shouldUseFormContext ? formCtx : form;\n\n  invariant(internalForm, 'Nest your component on a FormProvider or pass a form prop');\n\n  const [_emptyValue] = useState(emptyValue);\n  const {\n    append: originalAppend,\n    update,\n    remove: originalRemove,\n    ...fieldArrayMethods\n  } = useFieldArray<T, K>({\n    name,\n    control: internalForm.control,\n    rules: getTagAssignmentRules(maxLength, intl),\n  });\n\n  const { getValues } = internalForm;\n\n  const getTagsValues = useCallback(() => {\n    return getValues(name as Path<T>) as V[] | undefined;\n  }, [getValues, name]);\n\n  const appendIfPossible = useCallback(\n    (value: V | V[], options: FieldArrayMethodProps) => {\n      const tags = getTagsValues();\n      if (maxLength && tags && tags.length >= maxLength) return;\n      originalAppend(value, options);\n    },\n    [getTagsValues, maxLength, originalAppend],\n  );\n\n  const removeOrUpdate = useCallback(\n    (index: number) => {\n      const tags = getTagsValues();\n      if (tags && index === tags.length - 1) {\n        return update(index, _emptyValue);\n      }\n      const lastTag = tags?.at(-1);\n      if (lastTag?.[keyProperty]) {\n        originalRemove(index);\n        originalAppend(_emptyValue, { shouldFocus: false });\n        return;\n      }\n      originalRemove(index);\n    },\n    [_emptyValue, getTagsValues, keyProperty, originalAppend, originalRemove, update],\n  );\n\n  return {\n    form: internalForm,\n    ...fieldArrayMethods,\n    originalAppend,\n    update,\n    originalRemove,\n    appendIfPossible,\n    removeOrUpdate,\n    getTagsValues,\n  };\n}\n\nexport type UseTagAssignmentFieldArrayReturn<\n  T extends FieldValues = FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n> = ReturnType<typeof useTagAssignmentFieldArray<T, K, V>>;\n","import invariant from 'invariant';\nimport { useEffect, useState } from 'react';\nimport type { ArrayPath, FieldArray, FieldValues, Path, PathValue, UseFormReturn } from 'react-hook-form';\nimport { useFormContext } from 'react-hook-form';\n\nimport { useTagAssignmentFieldArray } from './useTagAssignmentFieldArray';\n\nexport interface UseTagAssignmentProps<\n  T extends FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n> {\n  name: K;\n  maxLength?: number;\n  emptyValue: V;\n  loading?: boolean;\n  defaultValues?: V[];\n  form?: UseFormReturn<T>;\n  keyProperty: keyof V extends string ? keyof V : never;\n  valueProperty: keyof V extends string ? keyof V : never;\n}\n\nexport function useTagAssignmentForm<\n  T extends FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n>({\n  name,\n  maxLength,\n  emptyValue,\n  defaultValues,\n  loading,\n  form,\n  keyProperty,\n  valueProperty,\n}: UseTagAssignmentProps<T, K, V>) {\n  const [_emptyValue] = useState(emptyValue);\n\n  const formCtx = useFormContext<T>();\n  const shouldUseFormContext = Boolean(formCtx) && !form;\n  const internalForm = shouldUseFormContext ? formCtx : form;\n\n  invariant(internalForm, 'Nest your component on a FormProvider or pass a form prop');\n  invariant(!(defaultValues && shouldUseFormContext), 'Define defaultValues at form context level');\n\n  const { setValue } = internalForm;\n\n  const fieldArrayMethods = useTagAssignmentFieldArray({\n    name,\n    maxLength,\n    emptyValue,\n    form: internalForm,\n    keyProperty,\n  });\n  const getTagsValues = fieldArrayMethods.getTagsValues;\n\n  useEffect(() => {\n    if (loading) return;\n    if (defaultValues) {\n      const newValues = [...defaultValues];\n      if (!maxLength || (maxLength && newValues.length < maxLength)) {\n        newValues.push(_emptyValue);\n      }\n      setValue(name as Path<T>, newValues as PathValue<T, Path<T>>);\n      return;\n    }\n\n    if (shouldUseFormContext) {\n      const existentValues = getTagsValues() ?? [];\n      if (!maxLength || (maxLength && existentValues.length < maxLength)) {\n        existentValues.push(_emptyValue);\n      }\n      setValue(name as Path<T>, existentValues as PathValue<T, Path<T>>);\n      return;\n    }\n\n    setValue(name as Path<T>, [_emptyValue] as PathValue<T, Path<T>>);\n  }, [defaultValues, setValue, loading, maxLength, name, _emptyValue, shouldUseFormContext, getTagsValues]);\n\n  return {\n    ...fieldArrayMethods,\n    form: internalForm,\n    maxLength,\n    emptyValue,\n    name,\n    keyProperty,\n    valueProperty,\n  };\n}\n\nexport type UseTagAssignmentFormReturn<\n  T extends FieldValues = FieldValues,\n  K extends ArrayPath<T> = ArrayPath<T>,\n  V extends FieldArray<T, K> = FieldArray<T, K>,\n> = ReturnType<typeof useTagAssignmentForm<T, K, V>>;\n","import {\n  useTagAssignmentForm,\n  TagAssignmentRoot,\n  TagAssignmentRow,\n  TagAssignmentLabel,\n  TagAssignmentKey,\n  TagAssignmentValue,\n  TagAssignmentRemoveButton,\n} from '@databricks/web-shared/unified-tagging';\nimport { UseFormReturn } from 'react-hook-form';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { KeyValueEntity } from '../types';\n\nconst keyProperty = 'key';\nconst valueProperty = 'value';\n\ninterface Props {\n  name: string;\n  form: UseFormReturn<any>;\n  initialTags?: KeyValueEntity[];\n}\n\n/**\n * A component used for displaying the unified tagging form.\n */\nexport const UnifiedTaggingForm = ({ form, name, initialTags }: Props) => {\n  const intl = useIntl();\n\n  const tagsForm = useTagAssignmentForm({\n    name,\n    emptyValue: { key: '', value: '' },\n    keyProperty,\n    valueProperty,\n    form,\n    defaultValues: initialTags,\n  });\n\n  return (\n    <TagAssignmentRoot {...tagsForm}>\n      <TagAssignmentRow>\n        <TagAssignmentLabel>\n          <FormattedMessage defaultMessage=\"Key\" description=\"Tag assignment modal > Key label\" />\n        </TagAssignmentLabel>\n        <TagAssignmentLabel>\n          <FormattedMessage defaultMessage=\"Value\" description=\"Tag assignment modal > Value label\" />\n        </TagAssignmentLabel>\n      </TagAssignmentRow>\n\n      {tagsForm.fields.map((field, index) => {\n        return (\n          <TagAssignmentRow key={field.id}>\n            <TagAssignmentKey\n              index={index}\n              rules={{\n                validate: {\n                  unique: (value) => {\n                    const tags = tagsForm.getTagsValues();\n                    if (tags?.findIndex((tag) => tag[keyProperty] === value) !== index) {\n                      return intl.formatMessage({\n                        defaultMessage: 'Key must be unique',\n                        description: 'Error message for unique key in tag assignment modal',\n                      });\n                    }\n                    return true;\n                  },\n                  required: (value) => {\n                    const tags = tagsForm.getTagsValues();\n                    if (tags?.at(index)?.[valueProperty] && !value) {\n                      return intl.formatMessage({\n                        defaultMessage: 'Key is required if value is present',\n                        description: 'Error message for required key in tag assignment modal',\n                      });\n                    }\n                    return true;\n                  },\n                },\n              }}\n            />\n            <TagAssignmentValue index={index} />\n            <TagAssignmentRemoveButton index={index} componentId=\"endpoint-tags-section.remove-button\" />\n          </TagAssignmentRow>\n        );\n      })}\n    </TagAssignmentRoot>\n  );\n};\n","import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { Modal, Button, Alert, useDesignSystemTheme } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport type { FieldValues } from 'react-hook-form';\nimport { KeyValueEntity } from '../types';\nimport { UnifiedTaggingForm } from '../components/UnifiedTaggingForm';\n\ninterface Params {\n  componentIdPrefix: string;\n  title?: React.ReactNode;\n  isLoading?: boolean;\n  visible?: boolean;\n  initialTags?: KeyValueEntity[];\n  error?: string;\n  onSubmit: (newTags: KeyValueEntity[], deletedTags: KeyValueEntity[]) => Promise<any>;\n  onSuccess?: () => void;\n  onClose?: () => void;\n}\n\nconst keyProperty = 'key' as const;\nconst valueProperty = 'value' as const;\nconst formName = 'tags';\n\nconst emptyValue = { key: '', value: '' };\n\nexport const useTagAssignmentModal = ({\n  componentIdPrefix,\n  title,\n  visible,\n  initialTags,\n  isLoading = false,\n  error,\n  onSubmit,\n  onSuccess,\n  onClose,\n}: Params) => {\n  const baseComponentId = `${componentIdPrefix}.tag-assignment-modal`;\n\n  const [isVisible, setIsVisible] = useState(false);\n  const { theme } = useDesignSystemTheme();\n  const form = useForm<{ tags: KeyValueEntity[] }>({ mode: 'onChange' });\n\n  const showTagAssignmentModal = () => {\n    setIsVisible(true);\n  };\n\n  const hideTagAssignmentModal = () => {\n    setIsVisible(false);\n    form.reset({ [formName]: [emptyValue] });\n    onClose?.();\n  };\n\n  const handleSubmit = (data: FieldValues) => {\n    const tags: KeyValueEntity[] = data[formName].filter((tag: FieldValues) => Boolean(tag[keyProperty]));\n    const newTags =\n      tags.filter(\n        (tag) =>\n          !initialTags?.some((t) => t[keyProperty] === tag[keyProperty] && t[valueProperty] === tag[valueProperty]),\n      ) ?? [];\n    const deletedTags =\n      initialTags?.filter(\n        (tag) => !tags.some((t) => t[keyProperty] === tag[keyProperty] && t[valueProperty] === tag[valueProperty]),\n      ) ?? [];\n\n    onSubmit(newTags, deletedTags).then(() => {\n      hideTagAssignmentModal();\n      onSuccess?.();\n    });\n  };\n\n  const defaultTitleNode = (\n    <FormattedMessage defaultMessage=\"Add tags\" description=\"Tag assignment modal > Title of the add tags modal\" />\n  );\n\n  const TagAssignmentModal = (\n    <Modal\n      componentId={`${baseComponentId}`}\n      title={title ?? defaultTitleNode}\n      visible={visible ?? isVisible}\n      destroyOnClose\n      onCancel={hideTagAssignmentModal}\n      footer={\n        <>\n          <Button\n            componentId={`${baseComponentId}.submit-button`}\n            onClick={hideTagAssignmentModal}\n            disabled={isLoading}\n          >\n            <FormattedMessage defaultMessage=\"Cancel\" description=\"Tag assignment modal > Cancel button\" />\n          </Button>\n          <Button\n            componentId={`${baseComponentId}.submit-button`}\n            type=\"primary\"\n            onClick={form.handleSubmit(handleSubmit)}\n            loading={isLoading}\n            disabled={isLoading}\n          >\n            <FormattedMessage defaultMessage=\"Save\" description=\"Tag assignment modal > Save button\" />\n          </Button>\n        </>\n      }\n    >\n      {error && (\n        <Alert\n          type=\"error\"\n          message={error}\n          componentId={`${baseComponentId}.error`}\n          closable={false}\n          css={{ marginBottom: theme.spacing.sm }}\n        />\n      )}\n      <UnifiedTaggingForm name={formName} form={form} initialTags={initialTags} />\n    </Modal>\n  );\n\n  return {\n    TagAssignmentModal,\n    showTagAssignmentModal,\n    hideTagAssignmentModal,\n  };\n};\n\nexport type { Params as TagAssignmentModalParams };\n","import _ from 'lodash';\n// Import pako lazily to reduce bundle size\nconst lazyPako = () => import('pako');\n\nexport const truncateToFirstLineWithMaxLength = (str: string, maxLength: number): string => {\n  const truncated = _.truncate(str, {\n    length: maxLength,\n  });\n  return _.takeWhile(truncated, (char) => char !== '\\n').join('');\n};\n\nexport const capitalizeFirstChar = (str: unknown) => {\n  if (!str || typeof str !== 'string' || str.length < 1) {\n    return str;\n  }\n  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();\n};\n\nexport const middleTruncateStr = (str: string, maxLen: number) => {\n  if (str.length > maxLen) {\n    const firstPartLen = Math.floor((maxLen - 3) / 2);\n    const lastPartLen = maxLen - 3 - firstPartLen;\n    return str.substring(0, firstPartLen) + '...' + str.substring(str.length - lastPartLen, str.length);\n  } else {\n    return str;\n  }\n};\n\nconst capitalizeFirstLetter = (string: string) => {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n};\n\nconst _keyStr = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\n/* eslint-disable no-bitwise */\n/**\n * UTF-8 safe version of base64 encoder\n * Source: http://www.webtoolkit.info/javascript_base64.html\n *\n * @param {string} input - Text to encode\n */\nexport const btoaUtf8 = (input: string) => {\n  let output = '';\n  let i = 0;\n\n  const result = _utf8_encode(input);\n\n  while (i < result.length) {\n    const chr1 = result.charCodeAt(i++);\n    const chr2 = result.charCodeAt(i++);\n    const chr3 = result.charCodeAt(i++);\n\n    const enc1 = chr1 >> 2;\n    const enc2 = ((chr1 & 3) << 4) | (chr2 >> 4);\n    let enc3 = ((chr2 & 15) << 2) | (chr3 >> 6);\n    let enc4 = chr3 & 63;\n\n    if (isNaN(chr2)) {\n      enc4 = 64;\n      enc3 = enc4;\n    } else if (isNaN(chr3)) {\n      enc4 = 64;\n    }\n\n    output = output + _keyStr.charAt(enc1) + _keyStr.charAt(enc2) + _keyStr.charAt(enc3) + _keyStr.charAt(enc4);\n  }\n\n  return output;\n};\n\n/**\n * UTF-8 safe version of base64 decoder\n * Source: http://www.webtoolkit.info/javascript_base64.html\n *\n * @param {string} input - Text to decode\n */\nexport const atobUtf8 = (input: string) => {\n  let output = '';\n  let i = 0;\n\n  const result = input?.replace(/[^A-Za-z0-9+/=]/g, '') || '';\n\n  while (i < result.length) {\n    const enc1 = _keyStr.indexOf(result.charAt(i++));\n    const enc2 = _keyStr.indexOf(result.charAt(i++));\n    const enc3 = _keyStr.indexOf(result.charAt(i++));\n    const enc4 = _keyStr.indexOf(result.charAt(i++));\n\n    const chr1 = (enc1 << 2) | (enc2 >> 4);\n    const chr2 = ((enc2 & 15) << 4) | (enc3 >> 2);\n    const chr3 = ((enc3 & 3) << 6) | enc4;\n\n    output += String.fromCharCode(chr1);\n\n    if (enc3 !== 64) {\n      output += String.fromCharCode(chr2);\n    }\n\n    if (enc4 !== 64) {\n      output += String.fromCharCode(chr3);\n    }\n  }\n\n  return _utf8_decode(output);\n};\n\n/**\n * (private method) does a UTF-8 encoding\n *\n * @private\n * @param {string} string - Text to encode\n */\nconst _utf8_encode = (string = '') => {\n  const result = string.replace(/\\r\\n/g, '\\n');\n  let utftext = '';\n\n  for (let n = 0; n < result.length; n++) {\n    const c = result.charCodeAt(n);\n\n    if (c < 128) {\n      utftext += String.fromCharCode(c);\n    } else if (c > 127 && c < 2048) {\n      utftext += String.fromCharCode((c >> 6) | 192) + String.fromCharCode((c & 63) | 128);\n    } else {\n      utftext +=\n        String.fromCharCode((c >> 12) | 224) +\n        String.fromCharCode(((c >> 6) & 63) | 128) +\n        String.fromCharCode((c & 63) | 128);\n    }\n  }\n\n  return utftext;\n};\n\n/**\n * (private method) does a UTF-8 decoding\n *\n * @private\n * @param {string} utftext - UTF-8 text to dencode\n */\nconst _utf8_decode = (utftext = '') => {\n  let string = '';\n  let i = 0;\n\n  while (i < utftext.length) {\n    const c = utftext.charCodeAt(i);\n\n    if (c < 128) {\n      string += String.fromCharCode(c);\n      i++;\n    } else if (c > 191 && c < 224) {\n      const c2 = utftext.charCodeAt(i + 1);\n      string += String.fromCharCode(((c & 31) << 6) | (c2 & 63));\n      i += 2;\n    } else {\n      const c2 = utftext.charCodeAt(i + 1);\n      const c3 = utftext.charCodeAt(i + 2);\n      string += String.fromCharCode(((c & 15) << 12) | ((c2 & 63) << 6) | (c3 & 63));\n      i += 3;\n    }\n  }\n  return string;\n};\n/* eslint-enable no-bitwise */\n\n/**\n * Returns a SHA256 hash of the input string\n */\nexport const getStringSHA256 = (input: string) => {\n  return crypto.subtle.digest('SHA-256', new TextEncoder().encode(input)).then((arrayBuffer) => {\n    return Array.prototype.map.call(new Uint8Array(arrayBuffer), (x) => ('00' + x.toString(16)).slice(-2)).join('');\n  });\n};\n\nconst COMPRESSED_TEXT_DEFLATE_PREFIX = 'deflate;';\n\nexport const textCompressDeflate = async (text: string) => {\n  const pako = await lazyPako();\n  const binaryData = pako.deflate(text);\n\n  // Buffer-based implementation\n  if (typeof Buffer !== 'undefined') {\n    const b64encoded = Buffer.from(binaryData).toString('base64');\n    return `${COMPRESSED_TEXT_DEFLATE_PREFIX}${b64encoded}`;\n  }\n\n  // btoa-based implementation\n  const binaryString = Array.from(binaryData, (byte) => String.fromCodePoint(byte)).join('');\n  return `${COMPRESSED_TEXT_DEFLATE_PREFIX}${btoa(binaryString)}`;\n};\n\nexport const textDecompressDeflate = async (compressedText: string) => {\n  const pako = await lazyPako();\n  if (!compressedText.startsWith(COMPRESSED_TEXT_DEFLATE_PREFIX)) {\n    throw new Error('Invalid compressed text, payload header invalid');\n  }\n  const compressedTextWithoutPrefix = compressedText.slice(COMPRESSED_TEXT_DEFLATE_PREFIX.length);\n\n  // Buffer-based implementation\n  if (typeof Buffer !== 'undefined') {\n    const binaryString = Buffer.from(compressedTextWithoutPrefix, 'base64');\n    return pako.inflate(\n      // This doesn't fail in Mlflow-Copybara-Tester-Pr. TODO: check why.\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore [FEINF-4084] No overload matches this call.\n      binaryString,\n      { to: 'string' },\n    );\n  }\n\n  // atob-based implementation\n  const binaryString = atob(compressedTextWithoutPrefix);\n  return pako.inflate(\n    Uint8Array.from(binaryString, (m) => m.codePointAt(0) ?? 0),\n    { to: 'string' },\n  );\n};\n\nexport const isTextCompressedDeflate = (text: string) => text.startsWith(COMPRESSED_TEXT_DEFLATE_PREFIX);\n","import React, { Component } from 'react';\n\nclass NotFoundPage extends Component {\n  render() {\n    return <div>Resource not found.</div>;\n  }\n}\n\nexport default NotFoundPage;\n","import { ExperimentKind } from '../constants';\nimport { defineMessage, MessageDescriptor } from 'react-intl';\nimport { KeyValueEntity } from '../../common/types';\n\nexport const EXPERIMENT_KIND_TAG_KEY = 'mlflow.experimentKind';\n\nexport const getExperimentKindFromTags = (\n  experimentTags?:\n    | ({ __typename: 'MlflowExperimentTag'; key: string | null; value: string | null }[] | null)\n    | KeyValueEntity[],\n): ExperimentKind | undefined =>\n  experimentTags?.find((tag) => tag.key === EXPERIMENT_KIND_TAG_KEY)?.value as ExperimentKind;\n\nexport const isEditableExperimentKind = (experimentKind: ExperimentKind): boolean =>\n  experimentKind === ExperimentKind.GENAI_DEVELOPMENT_INFERRED ||\n  experimentKind === ExperimentKind.CUSTOM_MODEL_DEVELOPMENT_INFERRED ||\n  experimentKind === ExperimentKind.NO_INFERRED_TYPE ||\n  experimentKind === ExperimentKind.GENAI_DEVELOPMENT ||\n  experimentKind === ExperimentKind.CUSTOM_MODEL_DEVELOPMENT ||\n  experimentKind === ExperimentKind.EMPTY;\n\nexport const normalizeInferredExperimentKind = (experimentKind: ExperimentKind): ExperimentKind => {\n  if (experimentKind === ExperimentKind.GENAI_DEVELOPMENT_INFERRED) {\n    return ExperimentKind.GENAI_DEVELOPMENT;\n  }\n  if (experimentKind === ExperimentKind.CUSTOM_MODEL_DEVELOPMENT_INFERRED) {\n    return ExperimentKind.CUSTOM_MODEL_DEVELOPMENT;\n  }\n  return experimentKind;\n};\n\nexport const ExperimentKindDropdownLabels: Record<ExperimentKind, MessageDescriptor> = {\n  [ExperimentKind.GENAI_DEVELOPMENT]: defineMessage({\n    defaultMessage: 'GenAI apps & agents',\n    description: 'Label for experiments focused on generative AI model development',\n  }),\n  [ExperimentKind.CUSTOM_MODEL_DEVELOPMENT]: defineMessage({\n    defaultMessage: 'Machine learning',\n    description: 'Label for custom experiments focused on machine learning',\n  }),\n  [ExperimentKind.GENAI_DEVELOPMENT_INFERRED]: defineMessage({\n    defaultMessage: 'GenAI apps & agents',\n    description: 'Label for experiments automatically identified as generative AI development',\n  }),\n  [ExperimentKind.CUSTOM_MODEL_DEVELOPMENT_INFERRED]: defineMessage({\n    defaultMessage: 'Machine learning',\n    description: 'Label for custom experiments automatically identified as being focused on machine learning',\n  }),\n  [ExperimentKind.NO_INFERRED_TYPE]: defineMessage({\n    defaultMessage: 'None',\n    description: 'Label for experiments with no automatically inferred experiment type',\n  }),\n  [ExperimentKind.FINETUNING]: defineMessage({\n    defaultMessage: 'Finetuning',\n    description: 'Label for experiments focused on model finetuning',\n  }),\n  [ExperimentKind.REGRESSION]: defineMessage({\n    defaultMessage: 'Regression',\n    description: 'Label for experiments focused on regression modeling',\n  }),\n  [ExperimentKind.CLASSIFICATION]: defineMessage({\n    defaultMessage: 'Classification',\n    description: 'Label for experiments focused on classification modeling',\n  }),\n  [ExperimentKind.FORECASTING]: defineMessage({\n    defaultMessage: 'Forecasting',\n    description: 'Label for experiments focused on time series forecasting',\n  }),\n  [ExperimentKind.AUTOML]: defineMessage({\n    defaultMessage: 'AutoML',\n    description: 'Label for generic AutoML experiments',\n  }),\n  [ExperimentKind.EMPTY]: defineMessage({\n    defaultMessage: 'None',\n    description: 'Label for experiments with no experiment kind',\n  }),\n};\n\nexport const ExperimentKindShortLabels: Record<ExperimentKind, MessageDescriptor> = {\n  [ExperimentKind.GENAI_DEVELOPMENT]: defineMessage({\n    defaultMessage: 'GenAI apps & agents',\n    description: 'A short label for custom experiments focused on generative AI app and agent development',\n  }),\n  [ExperimentKind.CUSTOM_MODEL_DEVELOPMENT]: defineMessage({\n    defaultMessage: 'Machine learning',\n    description: 'A short label for custom experiments focused on machine learning',\n  }),\n  [ExperimentKind.GENAI_DEVELOPMENT_INFERRED]: defineMessage({\n    defaultMessage: 'GenAI apps & agents',\n    description:\n      'A short label for custom experiments automatically identified as being focused on generative AI app and agent development',\n  }),\n  [ExperimentKind.CUSTOM_MODEL_DEVELOPMENT_INFERRED]: defineMessage({\n    defaultMessage: 'Machine learning',\n    description: 'A short label for custom experiments automatically identified as being focused on machine learning',\n  }),\n  [ExperimentKind.NO_INFERRED_TYPE]: defineMessage({\n    defaultMessage: 'None',\n    description: 'A short label for experiments with no automatically inferred experiment type',\n  }),\n  [ExperimentKind.FINETUNING]: defineMessage({\n    defaultMessage: 'finetuning',\n    description: 'A short label for experiments focused on model finetuning',\n  }),\n  [ExperimentKind.REGRESSION]: defineMessage({\n    defaultMessage: 'regression',\n    description: 'A short label for experiments focused on regression modeling',\n  }),\n  [ExperimentKind.CLASSIFICATION]: defineMessage({\n    defaultMessage: 'classification',\n    description: 'A short label for experiments focused on classification modeling',\n  }),\n  [ExperimentKind.FORECASTING]: defineMessage({\n    defaultMessage: 'forecasting',\n    description: 'A short label for experiments focused on time series forecasting',\n  }),\n  [ExperimentKind.AUTOML]: defineMessage({\n    defaultMessage: 'AutoML',\n    description: 'A short label for generic AutoML experiments',\n  }),\n  [ExperimentKind.EMPTY]: defineMessage({\n    defaultMessage: 'None',\n    description: 'A short label for experiments with no experiment kind',\n  }),\n};\n\n// Returns list of experiment kinds that are user-selectable in the dropdown\nexport const getSelectableExperimentKinds = () => [\n  ExperimentKind.GENAI_DEVELOPMENT,\n  ExperimentKind.CUSTOM_MODEL_DEVELOPMENT,\n];\n","import { ApolloError } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\n\ninterface CommonGraphQLApiError {\n  code: string | null;\n  message: string | null;\n}\n\nexport const getGraphQLErrorMessage = (error?: CommonGraphQLApiError | ApolloError | Error | any) => {\n  if (!error) {\n    return undefined;\n  }\n  if (error instanceof ApolloError) {\n    if (error.graphQLErrors.length > 0) {\n      return error.graphQLErrors.map((e) => e.toString()).join(', ');\n    }\n  }\n\n  if ('message' in error) {\n    return error.message;\n  }\n\n  return error.toString();\n};\n","import { useDesignSystemTheme } from '@databricks/design-system';\nimport type { KeyValueEntity } from '../../../common/types';\nimport ArtifactPage from '../ArtifactPage';\nimport { useMediaQuery } from '@databricks/web-shared/hooks';\nimport { UseGetRunQueryResponseOutputs } from './hooks/useGetRunQuery';\n\n/**\n * A run page tab containing the artifact browser\n */\nexport const RunViewArtifactTab = ({\n  runTags,\n  experimentId,\n  runOutputs,\n  artifactUri,\n  runUuid,\n}: {\n  runUuid: string;\n  experimentId: string;\n  artifactUri?: string;\n  runOutputs?: UseGetRunQueryResponseOutputs;\n  runTags: Record<string, KeyValueEntity>;\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  // Use scrollable artifact area only for non-xs screens\n  const useFullHeightPage = useMediaQuery(`(min-width: ${theme.responsive.breakpoints.sm}px)`);\n\n  return (\n    <div\n      css={{\n        flex: 1,\n        overflow: 'hidden',\n        display: 'flex',\n        paddingBottom: theme.spacing.md,\n        position: 'relative',\n      }}\n    >\n      <ArtifactPage\n        runUuid={runUuid}\n        runTags={runTags}\n        runOutputs={runOutputs}\n        useAutoHeight={useFullHeightPage}\n        artifactRootUri={artifactUri}\n        experimentId={experimentId}\n      />\n    </div>\n  );\n};\n","import { useParams } from '../../../common/utils/RoutingUtils';\nimport { RunPageTabName } from '../../constants';\n\n/**\n * Returns the run view's active tab.\n * - Supports multi-slash artifact paths (hence '*' catch-all param)\n * - Supports both new (/artifacts/...) and previous (/artifactPath/...) routes\n */\nexport const useRunViewActiveTab = (): RunPageTabName => {\n  const { '*': tabParam } = useParams<{ '*': string }>();\n  if (tabParam === 'model-metrics') {\n    return RunPageTabName.MODEL_METRIC_CHARTS;\n  }\n  if (tabParam === 'system-metrics') {\n    return RunPageTabName.SYSTEM_METRIC_CHARTS;\n  }\n  if (tabParam === 'traces') {\n    return RunPageTabName.TRACES;\n  }\n  if (tabParam?.match(/^(artifactPath|artifacts)/)) {\n    return RunPageTabName.ARTIFACTS;\n  }\n\n  return RunPageTabName.OVERVIEW;\n};\n","import { InfoPopover, LegacyTabs, useDesignSystemTheme, Typography } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { useNavigate, useParams } from '../../../common/utils/RoutingUtils';\nimport Routes from '../../routes';\nimport { RunPageTabName } from '../../constants';\nimport { useRunViewActiveTab } from './useRunViewActiveTab';\nimport { useState } from 'react';\n\n// Set of tabs that when active, the margin of the tab selector should be removed for better displaying\nconst TABS_WITHOUT_MARGIN = [RunPageTabName.ARTIFACTS, RunPageTabName.EVALUATIONS];\n\n/**\n * Mode switcher for the run details page.\n */\nexport const RunViewModeSwitch = () => {\n  const { experimentId, runUuid } = useParams<{ runUuid: string; experimentId: string }>();\n  const navigate = useNavigate();\n  const { theme } = useDesignSystemTheme();\n  const currentTab = useRunViewActiveTab();\n  const [removeTabMargin, setRemoveTabMargin] = useState(TABS_WITHOUT_MARGIN.includes(currentTab));\n\n  const onTabChanged = (newTabKey: string) => {\n    if (!experimentId || !runUuid || currentTab === newTabKey) {\n      return;\n    }\n\n    setRemoveTabMargin(TABS_WITHOUT_MARGIN.includes(newTabKey as RunPageTabName));\n\n    if (newTabKey === RunPageTabName.OVERVIEW) {\n      navigate(Routes.getRunPageRoute(experimentId, runUuid));\n      return;\n    }\n    navigate(Routes.getRunPageTabRoute(experimentId, runUuid, newTabKey));\n  };\n\n  const getLegacyTracesTabLink = () => {\n    return (\n      <LegacyTabs.TabPane\n        tab={<FormattedMessage defaultMessage=\"Traces\" description=\"Run details page > tab selector > Traces tab\" />}\n        key={RunPageTabName.TRACES}\n      />\n    );\n  };\n\n  return (\n    // @ts-expect-error TS(2322)\n    <LegacyTabs activeKey={currentTab} onChange={onTabChanged} tabBarStyle={{ margin: removeTabMargin && '0px' }}>\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage defaultMessage=\"Overview\" description=\"Run details page > tab selector > overview tab\" />\n        }\n        key={RunPageTabName.OVERVIEW}\n      />\n\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage\n            defaultMessage=\"Model metrics\"\n            description=\"Run details page > tab selector > Model metrics tab\"\n          />\n        }\n        key={RunPageTabName.MODEL_METRIC_CHARTS}\n      />\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage\n            defaultMessage=\"System metrics\"\n            description=\"Run details page > tab selector > Model metrics tab\"\n          />\n        }\n        key={RunPageTabName.SYSTEM_METRIC_CHARTS}\n      />\n      {getLegacyTracesTabLink()}\n      <LegacyTabs.TabPane\n        tab={\n          <FormattedMessage defaultMessage=\"Artifacts\" description=\"Run details page > tab selector > artifacts tab\" />\n        }\n        key={RunPageTabName.ARTIFACTS}\n      />\n    </LegacyTabs>\n  );\n};\n","import {\n  Button,\n  ChevronDownIcon,\n  DropdownMenu,\n  NewWindowIcon,\n  Tag,\n  LegacyTooltip,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { first, last, orderBy } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { Link } from '../../../common/utils/RoutingUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { RegisterModel } from '../../../model-registry/components/RegisterModel';\nimport { ModelVersionStatusIcons } from '../../../model-registry/constants';\nimport { ModelRegistryRoutes } from '../../../model-registry/routes';\nimport Routes from '../../routes';\nimport { ModelVersionInfoEntity } from '../../types';\nimport { KeyValueEntity } from '../../../common/types';\nimport { ReactComponent as RegisteredModelOkIcon } from '../../../common/static/registered-model-grey-ok.svg';\nimport { RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\ninterface LoggedModelWithRegistrationInfo {\n  path: string;\n  absolutePath: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}\n\nfunction LoggedModelsDropdownContent({\n  models,\n  onRegisterClick,\n  experimentId,\n  runUuid,\n}: {\n  models: LoggedModelWithRegistrationInfo[];\n  onRegisterClick: (model: LoggedModelWithRegistrationInfo) => void;\n  experimentId: string;\n  runUuid: string;\n}) {\n  const { theme } = useDesignSystemTheme();\n  const renderSection = (title: string, sectionModels: LoggedModelWithRegistrationInfo[]) => {\n    return (\n      <DropdownMenu.Group>\n        <DropdownMenu.Label>{title}</DropdownMenu.Label>\n        {sectionModels.map((model) => {\n          const registeredModelSummary = first(model.registeredModelVersionSummaries);\n          if (!registeredModelSummary) {\n            return (\n              <DropdownMenu.Item\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_50\"\n                onClick={() => onRegisterClick(model)}\n                key={model.absolutePath}\n              >\n                <div css={{ marginRight: theme.spacing.md }}>{last(model.path.split('/'))}</div>\n                <DropdownMenu.HintColumn>\n                  <Link\n                    target=\"_blank\"\n                    to={Routes.getRunPageTabRoute(experimentId, runUuid, 'artifacts/' + model.path)}\n                  >\n                    <Button\n                      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_58\"\n                      type=\"link\"\n                      size=\"small\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                      }}\n                      endIcon={<NewWindowIcon />}\n                    >\n                      <FormattedMessage\n                        defaultMessage=\"View model\"\n                        description=\"Run page > Header > Register model dropdown > View model button label\"\n                      />\n                    </Button>\n                  </Link>\n                </DropdownMenu.HintColumn>\n              </DropdownMenu.Item>\n            );\n          }\n          const { status, displayedName, version, link } = registeredModelSummary;\n\n          return (\n            <Link target=\"_blank\" to={link} key={model.absolutePath}>\n              <DropdownMenu.Item componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_80\">\n                <DropdownMenu.IconWrapper css={{ display: 'flex', alignItems: 'center' }}>\n                  {status === 'READY' ? <RegisteredModelOkIcon /> : status ? ModelVersionStatusIcons[status] : null}\n                </DropdownMenu.IconWrapper>\n                <span css={{ marginRight: theme.spacing.md }}>\n                  {displayedName}\n                  <Tag\n                    componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_90\"\n                    css={{ marginLeft: 8, marginRight: 4 }}\n                  >\n                    v{version}\n                  </Tag>\n                </span>\n                <DropdownMenu.HintColumn>\n                  <Button\n                    componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_89\"\n                    type=\"link\"\n                    size=\"small\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                    }}\n                    endIcon={<NewWindowIcon />}\n                  >\n                    <FormattedMessage\n                      defaultMessage=\"Go to model\"\n                      description=\"Run page > Header > Register model dropdown > Go to model button label\"\n                    />\n                  </Button>\n                </DropdownMenu.HintColumn>\n              </DropdownMenu.Item>\n            </Link>\n          );\n        })}\n      </DropdownMenu.Group>\n    );\n  };\n  const registeredModels = models.filter((model) => model.registeredModelVersionSummaries.length > 0);\n  const unregisteredModels = models.filter((model) => !model.registeredModelVersionSummaries.length);\n  return (\n    <>\n      {unregisteredModels.length ? renderSection('Unregistered models', unregisteredModels) : null}\n      {unregisteredModels.length && registeredModels.length ? <DropdownMenu.Separator /> : null}\n      {registeredModels.length ? renderSection('Registered models', registeredModels) : null}\n    </>\n  );\n}\n\nconst getRegisteredModelVersionLink = (modelVersion: ModelVersionInfoEntity) => {\n  const { name, version } = modelVersion;\n  return ModelRegistryRoutes.getModelVersionPageRoute(name, version);\n};\n\nexport const RunViewHeaderRegisterModelButton = ({\n  runUuid,\n  experimentId,\n  runTags,\n  artifactRootUri,\n  registeredModelVersionSummaries,\n}: {\n  runUuid: string;\n  experimentId: string;\n  runTags: Record<string, KeyValueEntity>;\n  artifactRootUri?: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  const loggedModelPaths = useMemo(\n    () => (runTags ? Utils.getLoggedModelsFromTags(runTags).map(({ artifactPath }) => artifactPath) : []),\n    [runTags],\n  );\n\n  const models = useMemo<LoggedModelWithRegistrationInfo[]>(\n    () =>\n      orderBy(\n        loggedModelPaths.map((path) => ({\n          path,\n          absolutePath: `${artifactRootUri}/${path}`,\n          registeredModelVersionSummaries:\n            registeredModelVersionSummaries?.filter(({ source }) => source === `${artifactRootUri}/${path}`) || [],\n        })),\n        (model) => parseInt(model.registeredModelVersionSummaries[0]?.version || '0', 10),\n        'desc',\n      ),\n    [loggedModelPaths, registeredModelVersionSummaries, artifactRootUri],\n  );\n\n  const [selectedModelToRegister, setSelectedModelToRegister] = useState<LoggedModelWithRegistrationInfo | null>(null);\n\n  if (models.length > 1) {\n    const modelsRegistered = models.filter((model) => model.registeredModelVersionSummaries.length > 0);\n\n    return (\n      <>\n        {selectedModelToRegister && (\n          <RegisterModel\n            runUuid={runUuid}\n            modelPath={selectedModelToRegister.absolutePath}\n            modelRelativePath={selectedModelToRegister.path}\n            disabled={false}\n            showButton={false}\n            modalVisible\n            onCloseModal={() => setSelectedModelToRegister(null)}\n          />\n        )}\n        <DropdownMenu.Root modal={false}>\n          <LegacyTooltip\n            placement=\"bottom\"\n            title={\n              <FormattedMessage\n                defaultMessage=\"{registeredCount}/{loggedCount} logged models are registered\"\n                description=\"Run page > Header > Register model dropdown > Button tooltip\"\n                values={{ registeredCount: modelsRegistered.length, loggedCount: models.length }}\n              />\n            }\n          >\n            <DropdownMenu.Trigger asChild>\n              <Button\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_195\"\n                type=\"primary\"\n                endIcon={<ChevronDownIcon />}\n              >\n                <FormattedMessage\n                  defaultMessage=\"Register model\"\n                  description=\"Run page > Header > Register model dropdown > Button label when some models are not registered\"\n                />\n              </Button>\n            </DropdownMenu.Trigger>\n          </LegacyTooltip>\n          <DropdownMenu.Content align=\"end\">\n            <LoggedModelsDropdownContent\n              models={models}\n              onRegisterClick={setSelectedModelToRegister}\n              experimentId={experimentId}\n              runUuid={runUuid}\n            />\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      </>\n    );\n  }\n\n  const singleModel = first(models);\n\n  if (!singleModel) {\n    return null;\n  }\n\n  const registeredModelVersionSummary = first(singleModel.registeredModelVersionSummaries);\n\n  if (registeredModelVersionSummary) {\n    return (\n      <Link to={registeredModelVersionSummary.link} target=\"_blank\" css={{ marginLeft: theme.spacing.sm }}>\n        <Button\n          componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewheaderregistermodelbutton.tsx_231\"\n          endIcon={<NewWindowIcon />}\n          type=\"link\"\n        >\n          Model registered\n        </Button>\n      </Link>\n    );\n  }\n  return (\n    <RegisterModel\n      disabled={false}\n      runUuid={runUuid}\n      modelPath={singleModel.absolutePath}\n      modelRelativePath={singleModel.path}\n      showButton\n      buttonType=\"primary\"\n    />\n  );\n};\n","import { FormattedMessage } from 'react-intl';\nimport { Link } from '../../../common/utils/RoutingUtils';\nimport { OverflowMenu, PageHeader } from '../../../shared/building_blocks/PageHeader';\nimport Routes, { PageId as ExperimentTrackingPageId } from '../../routes';\nimport type { ExperimentEntity } from '../../types';\nimport { KeyValueEntity } from '../../../common/types';\nimport { RunViewModeSwitch } from './RunViewModeSwitch';\nimport Utils from '../../../common/utils/Utils';\nimport { RunViewHeaderRegisterModelButton } from './RunViewHeaderRegisterModelButton';\nimport type { UseGetRunQueryResponseExperiment } from './hooks/useGetRunQuery';\nimport type { RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\nimport { ExperimentPageTabName } from '@mlflow/mlflow/src/experiment-tracking/constants';\nimport { shouldEnableExperimentPageHeaderV2 } from '../../../common/utils/FeatureUtils';\n\n/**\n * Run details page header component, common for all page view modes\n */\nexport const RunViewHeader = ({\n  hasComparedExperimentsBefore,\n  comparedExperimentIds = [],\n  experiment,\n  runDisplayName,\n  runTags,\n  runParams,\n  runUuid,\n  handleRenameRunClick,\n  handleDeleteRunClick,\n  artifactRootUri,\n  registeredModelVersionSummaries,\n  isLoading,\n}: {\n  hasComparedExperimentsBefore?: boolean;\n  comparedExperimentIds?: string[];\n  runDisplayName: string;\n  runUuid: string;\n  runTags: Record<string, KeyValueEntity>;\n  runParams: Record<string, KeyValueEntity>;\n  experiment: ExperimentEntity | UseGetRunQueryResponseExperiment;\n  handleRenameRunClick: () => void;\n  handleDeleteRunClick?: () => void;\n  artifactRootUri?: string;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n  isLoading?: boolean;\n}) => {\n  function getExperimentPageLink() {\n    return hasComparedExperimentsBefore && comparedExperimentIds ? (\n      <Link to={Routes.getCompareExperimentsPageRoute(comparedExperimentIds)}>\n        <FormattedMessage\n          defaultMessage=\"Displaying Runs from {numExperiments} Experiments\"\n          // eslint-disable-next-line max-len\n          description=\"Breadcrumb nav item to link to the compare-experiments page on compare runs page\"\n          values={{\n            numExperiments: comparedExperimentIds.length,\n          }}\n        />\n      </Link>\n    ) : (\n      <Link to={Routes.getExperimentPageRoute(experiment?.experimentId ?? '')} data-testid=\"experiment-runs-link\">\n        {experiment.name}\n      </Link>\n    );\n  }\n\n  const breadcrumbs = [getExperimentPageLink()];\n  if (shouldEnableExperimentPageHeaderV2() && experiment.experimentId) {\n    breadcrumbs.push(\n      <Link\n        to={Routes.getExperimentPageTabRoute(experiment.experimentId, ExperimentPageTabName.Runs)}\n        data-testid=\"experiment-observatory-link-runs\"\n      >\n        <FormattedMessage\n          defaultMessage=\"Runs\"\n          description=\"Breadcrumb nav item to link to the list of runs on the parent experiment\"\n        />\n      </Link>,\n    );\n  }\n\n  const renderRegisterModelButton = () => {\n    return (\n      <RunViewHeaderRegisterModelButton\n        runUuid={runUuid}\n        experimentId={experiment?.experimentId ?? ''}\n        runTags={runTags}\n        artifactRootUri={artifactRootUri}\n        registeredModelVersionSummaries={registeredModelVersionSummaries}\n      />\n    );\n  };\n\n  return (\n    <div css={{ flexShrink: 0 }}>\n      <PageHeader\n        title={<span data-testid=\"runs-header\">{runDisplayName}</span>}\n        breadcrumbs={breadcrumbs}\n        /* prettier-ignore */\n      >\n        <OverflowMenu\n          menu={[\n            {\n              id: 'overflow-rename-button',\n              onClick: handleRenameRunClick,\n              itemName: (\n                <FormattedMessage defaultMessage=\"Rename\" description=\"Menu item to rename an experiment run\" />\n              ),\n            },\n            ...(handleDeleteRunClick\n              ? [\n                  {\n                    id: 'overflow-delete-button',\n                    onClick: handleDeleteRunClick,\n                    itemName: (\n                      <FormattedMessage defaultMessage=\"Delete\" description=\"Menu item to delete an experiment run\" />\n                    ),\n                  },\n                ]\n              : []),\n          ]}\n        />\n\n        {renderRegisterModelButton()}\n      </PageHeader>\n      <RunViewModeSwitch />\n    </div>\n  );\n};\n","import { Tag, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { RunInfoEntity } from '../../../types';\nimport { RunStatusIcon } from '../../RunStatusIcon';\nimport { FormattedMessage } from 'react-intl';\nimport type { MlflowRunStatus } from '../../../../graphql/__generated__/graphql';\n\n/**\n * Displays run status cell in run detail overview.\n */\nexport const RunViewStatusBox = ({ status }: { status: RunInfoEntity['status'] | MlflowRunStatus | null }) => {\n  const { theme } = useDesignSystemTheme();\n  const getTagColor = () => {\n    if (status === 'FINISHED') {\n      return theme.isDarkMode ? theme.colors.green800 : theme.colors.green100;\n    }\n    if (status === 'KILLED' || status === 'FAILED') {\n      return theme.isDarkMode ? theme.colors.red800 : theme.colors.red100;\n    }\n    if (status === 'SCHEDULED' || status === 'RUNNING') {\n      return theme.isDarkMode ? theme.colors.blue800 : theme.colors.blue100;\n    }\n\n    return undefined;\n  };\n\n  const getStatusLabel = () => {\n    if (status === 'FINISHED') {\n      return (\n        <Typography.Text color=\"success\">\n          <FormattedMessage\n            defaultMessage=\"Finished\"\n            description=\"Run page > Overview > Run status cell > Value for finished state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'KILLED') {\n      return (\n        <Typography.Text color=\"error\">\n          <FormattedMessage\n            defaultMessage=\"Killed\"\n            description=\"Run page > Overview > Run status cell > Value for killed state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'FAILED') {\n      return (\n        <Typography.Text color=\"error\">\n          <FormattedMessage\n            defaultMessage=\"Failed\"\n            description=\"Run page > Overview > Run status cell > Value for failed state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'RUNNING') {\n      return (\n        <Typography.Text color=\"info\">\n          <FormattedMessage\n            defaultMessage=\"Running\"\n            description=\"Run page > Overview > Run status cell > Value for running state\"\n          />\n        </Typography.Text>\n      );\n    }\n    if (status === 'SCHEDULED') {\n      return (\n        <Typography.Text color=\"info\">\n          <FormattedMessage\n            defaultMessage=\"Scheduled\"\n            description=\"Run page > Overview > Run status cell > Value for scheduled state\"\n          />\n        </Typography.Text>\n      );\n    }\n    return status;\n  };\n\n  return (\n    <Tag\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewstatusbox.tsx_81\"\n      css={{ backgroundColor: getTagColor() }}\n    >\n      {status && <RunStatusIcon status={status} />}{' '}\n      <Typography.Text css={{ marginLeft: theme.spacing.sm }}>{getStatusLabel()}</Typography.Text>\n    </Tag>\n  );\n};\n","import { Link } from '../../../../common/utils/RoutingUtils';\nimport Utils from '../../../../common/utils/Utils';\nimport Routes from '../../../routes';\nimport type { RunInfoEntity } from '../../../types';\nimport { KeyValueEntity } from '../../../../common/types';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\nexport const RunViewUserLinkBox = ({\n  runInfo,\n  tags,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n}) => {\n  const user = Utils.getUser(runInfo, tags);\n  return <Link to={Routes.searchRunsByUser(runInfo?.experimentId ?? '', user)}>{user}</Link>;\n};\n","import {\n  Empty,\n  Input,\n  Overflow,\n  SearchIcon,\n  Table,\n  TableCell,\n  TableHeader,\n  TableRow,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { LoggedModelProto, MetricEntitiesByName, MetricEntity, RunInfoEntity } from '../../../types';\nimport { compact, flatMap, groupBy, isEmpty, keyBy, mapValues, sum, values } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { RunPageTabName } from '../../../constants';\nimport { FormattedMessage, defineMessages, useIntl } from 'react-intl';\nimport { isSystemMetricKey } from '../../../utils/MetricsUtils';\nimport { ColumnDef, Table as TableDef, flexRender, getCoreRowModel, useReactTable } from '@tanstack/react-table';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\nimport { useExperimentTrackingDetailsPageLayoutStyles } from '../../../hooks/useExperimentTrackingDetailsPageLayoutStyles';\n\nconst { systemMetricsLabel, modelMetricsLabel } = defineMessages({\n  systemMetricsLabel: {\n    defaultMessage: 'System metrics',\n    description: 'Run page > Overview > Metrics table > System charts section > title',\n  },\n  modelMetricsLabel: {\n    defaultMessage: 'Model metrics',\n    description: 'Run page > Overview > Metrics table > Model charts section > title',\n  },\n});\n\nconst metricKeyMatchesFilter =\n  (filter: string) =>\n  ({ key }: MetricEntity) =>\n    key.toLowerCase().includes(filter.toLowerCase());\n\ninterface MetricEntityWithLoggedModels extends MetricEntity {\n  loggedModels?: LoggedModelProto[];\n}\n\nconst RunViewMetricsTableSection = ({\n  metricsList,\n  runInfo,\n  header,\n  table,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  metricsList: MetricEntityWithLoggedModels[];\n  header?: React.ReactNode;\n  table: TableDef<MetricEntityWithLoggedModels>;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const [{ column: keyColumn }, ...otherColumns] = table.getLeafHeaders();\n\n  const valueColumn = otherColumns.find((column) => column.id === 'value')?.column;\n\n  const anyRowHasModels = metricsList.some(({ loggedModels }) => !isEmpty(loggedModels));\n  const modelColumn = otherColumns.find((column) => column.id === 'models')?.column;\n\n  return metricsList.length ? (\n    <>\n      {header && (\n        <TableRow>\n          <TableCell css={{ flex: 1, backgroundColor: theme.colors.backgroundSecondary }}>\n            <Typography.Text bold>\n              {header} ({metricsList.length})\n            </Typography.Text>\n          </TableCell>\n        </TableRow>\n      )}\n      {metricsList.map(\n        ({\n          // Get metric key and value to display in table\n          key,\n          value,\n          loggedModels,\n        }) => (\n          <TableRow key={key}>\n            <TableCell\n              style={{\n                flex: keyColumn.getCanResize() ? keyColumn.getSize() / 100 : undefined,\n              }}\n            >\n              <Link\n                to={Routes.getRunPageTabRoute(\n                  runInfo.experimentId ?? '',\n                  runInfo.runUuid ?? '',\n                  RunPageTabName.MODEL_METRIC_CHARTS,\n                )}\n              >\n                {key}\n              </Link>\n            </TableCell>\n            <TableCell\n              css={{\n                flex: valueColumn?.getCanResize() ? valueColumn.getSize() / 100 : undefined,\n              }}\n            >\n              {value.toString()}\n            </TableCell>\n            {anyRowHasModels && (\n              <TableCell\n                css={{\n                  flex: modelColumn?.getCanResize() ? modelColumn.getSize() / 100 : undefined,\n                }}\n              >\n                {!isEmpty(loggedModels) ? (\n                  <Overflow>\n                    {loggedModels?.map((model) => (\n                      <Link\n                        key={model.info?.model_id}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        to={Routes.getExperimentLoggedModelDetailsPage(\n                          model.info?.experiment_id ?? '',\n                          model.info?.model_id ?? '',\n                        )}\n                      >\n                        {model.info?.name}\n                      </Link>\n                    ))}\n                  </Overflow>\n                ) : (\n                  '-'\n                )}\n              </TableCell>\n            )}\n          </TableRow>\n        ),\n      )}\n    </>\n  ) : null;\n};\n\n/**\n * Displays table with metrics key/values in run detail overview.\n */\nexport const RunViewMetricsTable = ({\n  latestMetrics,\n  runInfo,\n  loggedModels,\n}: {\n  latestMetrics: MetricEntitiesByName;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  loggedModels?: LoggedModelProto[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const {\n    detailsPageTableStyles,\n    detailsPageNoEntriesStyles,\n    detailsPageNoResultsWrapperStyles,\n    usingUnifiedDetailsLayout,\n  } = useExperimentTrackingDetailsPageLayoutStyles();\n  const intl = useIntl();\n  const [filter, setFilter] = useState('');\n\n  /**\n   * Aggregate logged models by metric key.\n   * This is used to display the models associated with each metric in the table.\n   */\n  const loggedModelsByMetricKey = useMemo(() => {\n    if (!loggedModels) {\n      return {};\n    }\n    const metricsWithModels = compact(\n      flatMap(loggedModels, (model) => model.data?.metrics?.map(({ key }) => ({ key, model }))),\n    );\n    const groupedMetrics = groupBy(metricsWithModels, 'key');\n    return mapValues(groupedMetrics, (group) => group.map(({ model }) => model));\n  }, [loggedModels]);\n\n  /**\n   * Enrich the metric list with related logged models.\n   */\n  const metricValues = useMemo<MetricEntityWithLoggedModels[]>(() => {\n    const metricList = values(latestMetrics);\n\n    if (isEmpty(loggedModelsByMetricKey)) {\n      return metricList;\n    }\n    return metricList.map((metric) => ({\n      ...metric,\n      loggedModels: loggedModelsByMetricKey[metric.key] ?? [],\n    }));\n  }, [latestMetrics, loggedModelsByMetricKey]);\n\n  const anyRowHasModels = metricValues.some(({ loggedModels }) => !isEmpty(loggedModels));\n\n  const modelColumnDefs: ColumnDef<MetricEntityWithLoggedModels>[] = useMemo(\n    () => [\n      {\n        id: 'models',\n        header: intl.formatMessage({\n          defaultMessage: 'Models',\n          description: 'Run page > Overview > Metrics table > Models column header',\n        }),\n        accessorKey: 'models',\n        enableResizing: true,\n      },\n    ],\n    [intl],\n  );\n\n  const columns = useMemo(() => {\n    const columnDefs: ColumnDef<MetricEntityWithLoggedModels>[] = [\n      {\n        id: 'key',\n        accessorKey: 'key',\n        header: () => (\n          <FormattedMessage\n            defaultMessage=\"Metric\"\n            description=\"Run page > Overview > Metrics table > Key column header\"\n          />\n        ),\n        enableResizing: true,\n        size: 240,\n      },\n      {\n        id: 'value',\n        header: () => (\n          <FormattedMessage\n            defaultMessage=\"Value\"\n            description=\"Run page > Overview > Metrics table > Value column header\"\n          />\n        ),\n        accessorKey: 'value',\n        enableResizing: true,\n      },\n    ];\n\n    if (anyRowHasModels) {\n      columnDefs.push(...modelColumnDefs);\n    }\n\n    return columnDefs;\n  }, [anyRowHasModels, modelColumnDefs]);\n\n  // Break down metric lists into system and model segments. If no system (or model) metrics\n  // are detected, return a single segment.\n  const metricSegments = useMemo(() => {\n    const systemMetrics = metricValues.filter(({ key }) => isSystemMetricKey(key));\n    const modelMetrics = metricValues.filter(({ key }) => !isSystemMetricKey(key));\n    const isSegmented = systemMetrics.length > 0 && modelMetrics.length > 0;\n    if (!isSegmented) {\n      return [{ header: undefined, metrics: metricValues.filter(metricKeyMatchesFilter(filter)) }];\n    }\n    return [\n      {\n        header: intl.formatMessage(systemMetricsLabel),\n        metrics: systemMetrics.filter(metricKeyMatchesFilter(filter)),\n      },\n      {\n        header: intl.formatMessage(modelMetricsLabel),\n        metrics: modelMetrics.filter(metricKeyMatchesFilter(filter)),\n      },\n    ];\n  }, [filter, metricValues, intl]);\n\n  const table = useReactTable<MetricEntity>({\n    data: metricValues,\n    getCoreRowModel: getCoreRowModel(),\n    getRowId: (row) => row.key,\n    enableColumnResizing: true,\n    columnResizeMode: 'onChange',\n    columns,\n  });\n\n  const renderTableContent = () => {\n    if (!metricValues.length) {\n      return (\n        <div css={detailsPageNoEntriesStyles}>\n          <Empty\n            description={\n              <FormattedMessage\n                defaultMessage=\"No metrics recorded\"\n                description=\"Run page > Overview > Metrics table > No metrics recorded\"\n              />\n            }\n          />\n        </div>\n      );\n    }\n\n    const areAllResultsFiltered = sum(metricSegments.map(({ metrics }) => metrics.length)) < 1;\n\n    return (\n      <>\n        <div css={{ marginBottom: theme.spacing.sm }}>\n          <Input\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_186\"\n            prefix={<SearchIcon />}\n            placeholder={intl.formatMessage({\n              defaultMessage: 'Search metrics',\n              description: 'Run page > Overview > Metrics table > Filter input placeholder',\n            })}\n            value={filter}\n            onChange={(e) => setFilter(e.target.value)}\n            allowClear\n          />\n        </div>\n\n        <Table\n          scrollable\n          empty={\n            areAllResultsFiltered ? (\n              <div css={detailsPageNoResultsWrapperStyles}>\n                <Empty\n                  description={\n                    <FormattedMessage\n                      defaultMessage=\"No metrics match the search filter\"\n                      description=\"Message displayed when no metrics match the search filter in the run details page details metrics table\"\n                    />\n                  }\n                />\n              </div>\n            ) : null\n          }\n          css={detailsPageTableStyles}\n        >\n          <TableRow isHeader>\n            {table.getLeafHeaders().map((header) => (\n              <TableHeader\n                componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewmetricstable.tsx_312\"\n                key={header.id}\n                header={header}\n                column={header.column}\n                setColumnSizing={table.setColumnSizing}\n                isResizing={header.column.getIsResizing()}\n                style={{\n                  flex: header.column.getCanResize() ? header.column.getSize() / 100 : undefined,\n                }}\n              >\n                {flexRender(header.column.columnDef.header, header.getContext())}\n              </TableHeader>\n            ))}\n          </TableRow>\n          {metricSegments.map((segment, index) => (\n            <RunViewMetricsTableSection\n              key={segment.header || index}\n              metricsList={segment.metrics}\n              runInfo={runInfo}\n              header={segment.header}\n              table={table}\n            />\n          ))}\n        </Table>\n      </>\n    );\n  };\n  return (\n    <div\n      css={{\n        flex: usingUnifiedDetailsLayout ? '0 0 auto' : 1,\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      <Typography.Title level={4} css={{ flexShrink: 0 }}>\n        <FormattedMessage\n          defaultMessage=\"Metrics ({length})\"\n          description=\"Run page > Overview > Metrics table > Section title\"\n          values={{ length: metricValues.filter(metricKeyMatchesFilter(filter)).length }}\n        />\n      </Typography.Title>\n      <div\n        css={{\n          padding: theme.spacing.sm,\n          border: `1px solid ${theme.colors.borderDecorative}`,\n          borderRadius: theme.general.borderRadiusBase,\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n          overflow: 'hidden',\n        }}\n      >\n        {renderTableContent()}\n      </div>\n    </div>\n  );\n};\n","import type { RunDatasetWithTags, RunInfoEntity } from '../../../types';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { Button, DropdownMenu, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { ExperimentViewDatasetWithContext } from '../../experiment-page/components/runs/ExperimentViewDatasetWithContext';\nimport { useState } from 'react';\nimport {\n  DatasetWithRunType,\n  ExperimentViewDatasetDrawer,\n} from '../../experiment-page/components/runs/ExperimentViewDatasetDrawer';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\n/**\n * Renders single dataset, either in overview table cell or within a dropdown\n */\nconst DatasetEntry = ({ dataset, onClick }: { dataset: RunDatasetWithTags; onClick: () => void }) => {\n  return (\n    <Typography.Link\n      componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_16\"\n      role=\"link\"\n      css={{\n        textAlign: 'left',\n      }}\n      onClick={onClick}\n    >\n      <ExperimentViewDatasetWithContext datasetWithTags={dataset} displayTextAsLink css={{ margin: 0 }} />\n    </Typography.Link>\n  );\n};\n\n/**\n * Displays run datasets section in run detail overview.\n */\nexport const RunViewDatasetBox = ({\n  tags,\n  runInfo,\n  datasets,\n}: {\n  tags: Record<string, KeyValueEntity>;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  datasets: RunDatasetWithTags[];\n}) => {\n  const [selectedDatasetWithRun, setSelectedDatasetWithRun] = useState<DatasetWithRunType | null>(null);\n  const { theme } = useDesignSystemTheme();\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n\n  if (!datasets || !datasets.length) {\n    return null;\n  }\n\n  const firstDataset = datasets[0];\n  const remainingDatasets = datasets.slice(1);\n\n  const datasetClicked = (dataset: RunDatasetWithTags) => {\n    setSelectedDatasetWithRun({\n      datasetWithTags: dataset,\n      runData: {\n        experimentId: runInfo.experimentId ?? undefined,\n        runUuid: runInfo.runUuid ?? '',\n        runName: runInfo.runName ?? undefined,\n        datasets: datasets,\n        tags: tags,\n      },\n    });\n    setIsDrawerOpen(true);\n  };\n\n  return (\n    <div css={{ display: 'flex', gap: theme.spacing.sm, alignItems: 'center' }}>\n      <DatasetEntry dataset={firstDataset} onClick={() => datasetClicked(firstDataset)} />\n      {remainingDatasets.length ? (\n        <DropdownMenu.Root modal={false}>\n          <DropdownMenu.Trigger asChild>\n            <Button\n              componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_70\"\n              size=\"small\"\n            >\n              +{remainingDatasets.length}\n            </Button>\n          </DropdownMenu.Trigger>\n          <DropdownMenu.Content>\n            {remainingDatasets.map((datasetWithTags) => {\n              return (\n                <DropdownMenu.Item\n                  componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdatasetbox.tsx_81\"\n                  key={datasetWithTags.dataset.digest}\n                >\n                  <DatasetEntry dataset={datasetWithTags} onClick={() => datasetClicked(datasetWithTags)} />\n                </DropdownMenu.Item>\n              );\n            })}\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      ) : null}\n      {selectedDatasetWithRun && (\n        <ExperimentViewDatasetDrawer\n          isOpen={isDrawerOpen}\n          setIsOpen={setIsDrawerOpen}\n          selectedDatasetWithRun={selectedDatasetWithRun}\n          setSelectedDatasetWithRun={setSelectedDatasetWithRun}\n        />\n      )}\n    </div>\n  );\n};\n","import { useDispatch, useSelector } from 'react-redux';\nimport { ReduxState, ThunkDispatch } from '../../../../redux-types';\nimport { useEffect, useMemo } from 'react';\nimport { getRunApi } from '../../../actions';\nimport { ParagraphSkeleton } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport Routes from '../../../routes';\nimport { FormattedMessage } from 'react-intl';\nimport { shouldEnableGraphQLRunDetailsPage } from '../../../../common/utils/FeatureUtils';\nimport { useGetRunQuery } from '../hooks/useGetRunQuery';\n\nexport const RunViewParentRunBox = ({ parentRunUuid }: { parentRunUuid: string }) => {\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  const parentRunInfoRedux = useSelector(({ entities }: ReduxState) => {\n    return entities.runInfosByUuid[parentRunUuid];\n  });\n\n  const parentRunInfoGraphql = useGetRunQuery({\n    runUuid: parentRunUuid,\n    disabled: !shouldEnableGraphQLRunDetailsPage(),\n  });\n\n  const parentRunInfo = useMemo(() => {\n    return shouldEnableGraphQLRunDetailsPage() ? parentRunInfoGraphql?.data?.info : parentRunInfoRedux;\n  }, [parentRunInfoGraphql, parentRunInfoRedux]);\n\n  useEffect(() => {\n    // Don't call REST API if GraphQL is enabled\n    if (shouldEnableGraphQLRunDetailsPage()) {\n      return;\n    }\n    if (!parentRunInfo) {\n      dispatch(getRunApi(parentRunUuid));\n    }\n  }, [dispatch, parentRunUuid, parentRunInfo]);\n\n  if (!parentRunInfo) {\n    return (\n      <ParagraphSkeleton\n        loading\n        label={\n          <FormattedMessage\n            defaultMessage=\"Parent run name loading\"\n            description=\"Run page > Overview > Parent run name loading\"\n          />\n        }\n      />\n    );\n  }\n\n  if (!parentRunInfo.experimentId || !parentRunInfo.runUuid) {\n    return null;\n  }\n\n  return (\n    <Link to={Routes.getRunPageRoute(parentRunInfo.experimentId, parentRunInfo.runUuid)}>{parentRunInfo.runName}</Link>\n  );\n};\n","import { Button, PencilIcon, Spinner, Tooltip, useDesignSystemTheme } from '@databricks/design-system';\nimport { shouldUseSharedTaggingUI } from '../../../../common/utils/FeatureUtils';\nimport { useEditKeyValueTagsModal } from '../../../../common/hooks/useEditKeyValueTagsModal';\nimport { useTagAssignmentModal } from '../../../../common/hooks/useTagAssignmentModal';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { KeyValueTag } from '../../../../common/components/KeyValueTag';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { keys, values } from 'lodash';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from '../../../../redux-types';\nimport { setRunTagsBulkApi, saveRunTagsApi } from '../../../actions';\nimport { useMemo, useState } from 'react';\nimport { isUserFacingTag } from '../../../../common/utils/TagUtils';\n\n/**\n * Displays run tags cell in run detail overview.\n */\nexport const RunViewTagsBox = ({\n  runUuid,\n  tags,\n  onTagsUpdated,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  onTagsUpdated: () => void;\n}) => {\n  const sharedTaggingUIEnabled = shouldUseSharedTaggingUI();\n\n  const [isSavingTags, setIsSavingTags] = useState(false);\n\n  const { theme } = useDesignSystemTheme();\n  const dispatch = useDispatch<ThunkDispatch>();\n  const intl = useIntl();\n\n  // Get keys and tag entities while excluding system tags\n  const [visibleTagKeys, visibleTagEntities] = useMemo(\n    () => [keys(tags).filter(isUserFacingTag), values(tags).filter(({ key }) => isUserFacingTag(key))],\n    [tags],\n  );\n\n  const tagsKeyValueMap: KeyValueEntity[] = visibleTagEntities.map(({ key, value }) => ({ key, value }));\n\n  const { TagAssignmentModal, showTagAssignmentModal } = useTagAssignmentModal({\n    componentIdPrefix: 'mlflow.run-view-tags-box',\n    initialTags: tagsKeyValueMap,\n    isLoading: isSavingTags,\n    onSubmit: (newTags: KeyValueEntity[], deletedTags: KeyValueEntity[]) => {\n      setIsSavingTags(true);\n      return dispatch(saveRunTagsApi(runUuid, newTags, deletedTags)).then(() => {\n        setIsSavingTags(false);\n      });\n    },\n    onSuccess: onTagsUpdated,\n  });\n\n  const { EditTagsModal, showEditTagsModal, isLoading } = useEditKeyValueTagsModal({\n    valueRequired: true,\n    allAvailableTags: visibleTagKeys,\n    saveTagsHandler: async (_, existingTags, newTags) =>\n      dispatch(setRunTagsBulkApi(runUuid, existingTags, newTags)).then(onTagsUpdated),\n  });\n\n  const showEditModal = () => {\n    if (sharedTaggingUIEnabled) {\n      showTagAssignmentModal();\n      return;\n    }\n\n    showEditTagsModal({ tags: visibleTagEntities });\n  };\n\n  const editTagsLabel = intl.formatMessage({\n    defaultMessage: 'Edit tags',\n    description: \"Run page > Overview > Tags cell > 'Edit' button label\",\n  });\n\n  return (\n    <div\n      css={{\n        paddingTop: theme.spacing.xs,\n        paddingBottom: theme.spacing.xs,\n        display: 'flex',\n        flexWrap: 'wrap',\n        alignItems: 'center',\n        '> *': {\n          marginRight: '0 !important',\n        },\n        gap: theme.spacing.xs,\n      }}\n    >\n      {tagsKeyValueMap.length < 1 ? (\n        <Button\n          componentId=\"mlflow.run_details.overview.tags.add_button\"\n          size=\"small\"\n          type=\"tertiary\"\n          onClick={showEditModal}\n        >\n          <FormattedMessage\n            defaultMessage=\"Add tags\"\n            description=\"Run page > Overview > Tags cell > 'Add' button label\"\n          />\n        </Button>\n      ) : (\n        <>\n          {tagsKeyValueMap.map((tag) => (\n            <KeyValueTag tag={tag} key={`${tag.key}-${tag.value}`} enableFullViewModal css={{ marginRight: 0 }} />\n          ))}\n          <Tooltip componentId=\"mlflow.run_details.overview.tags.edit_button.tooltip\" content={editTagsLabel}>\n            <Button\n              componentId=\"mlflow.run_details.overview.tags.edit_button\"\n              aria-label={editTagsLabel}\n              size=\"small\"\n              icon={<PencilIcon />}\n              onClick={showEditModal}\n            />\n          </Tooltip>\n        </>\n      )}\n      {isLoading && <Spinner size=\"small\" />}\n      {/** Old modal for editing tags */}\n      {EditTagsModal}\n      {/** New modal for editing tags, using shared tagging UI */}\n      {TagAssignmentModal}\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { EditableNote } from '../../../../common/components/EditableNote';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { NOTE_CONTENT_TAG } from '../../../utils/NoteUtils';\nimport { Button, PencilIcon, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { useDispatch } from 'react-redux';\nimport { ThunkDispatch } from '../../../../redux-types';\nimport { setTagApi } from '../../../actions';\nimport { FormattedMessage, useIntl } from 'react-intl';\n\n/**\n * Displays editable description section in run detail overview.\n */\nexport const RunViewDescriptionBox = ({\n  runUuid,\n  tags,\n  onDescriptionChanged,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  onDescriptionChanged: () => void | Promise<void>;\n}) => {\n  const noteContent = tags[NOTE_CONTENT_TAG]?.value || '';\n\n  const [showNoteEditor, setShowNoteEditor] = useState(false);\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n\n  const dispatch = useDispatch<ThunkDispatch>();\n\n  const handleSubmitEditNote = (markdown: string) =>\n    dispatch(setTagApi(runUuid, NOTE_CONTENT_TAG, markdown))\n      .then(onDescriptionChanged)\n      .then(() => setShowNoteEditor(false));\n  const handleCancelEditNote = () => setShowNoteEditor(false);\n\n  const isEmpty = !noteContent;\n\n  return (\n    <div css={{ marginBottom: theme.spacing.md }}>\n      <Typography.Title level={4} css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.xs }}>\n        <FormattedMessage\n          defaultMessage=\"Description\"\n          description=\"Run page > Overview > Description section > Section title\"\n        />\n        <Button\n          componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewdescriptionbox.tsx_46\"\n          size=\"small\"\n          type=\"tertiary\"\n          aria-label={intl.formatMessage({\n            defaultMessage: 'Edit description',\n            description: 'Run page > Overview > Description section > Edit button label',\n          })}\n          onClick={() => setShowNoteEditor(true)}\n          icon={<PencilIcon />}\n        />\n      </Typography.Title>\n      {isEmpty && !showNoteEditor && (\n        <Typography.Hint>\n          <FormattedMessage\n            defaultMessage=\"No description\"\n            description=\"Run page > Overview > Description section > Empty value placeholder\"\n          />\n        </Typography.Hint>\n      )}\n      {(!isEmpty || showNoteEditor) && (\n        <EditableNote\n          defaultMarkdown={noteContent}\n          onSubmit={handleSubmitEditNote}\n          onCancel={handleCancelEditNote}\n          showEditor={showNoteEditor}\n        />\n      )}\n    </div>\n  );\n};\n","import { Overflow, Tag, useDesignSystemTheme } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { ReactComponent as RegisteredModelOkIcon } from '../../../../common/static/registered-model-grey-ok.svg';\nimport type { RunPageModelVersionSummary } from '../hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\n\n/**\n * Displays list of registered models in run detail overview.\n * TODO: expand with logged models after finalizing design\n */\nexport const RunViewRegisteredModelsBox = ({\n  registeredModelVersionSummaries,\n}: {\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  return (\n    <Overflow>\n      {registeredModelVersionSummaries?.map((modelSummary) => (\n        <Link\n          key={modelSummary.displayedName}\n          to={modelSummary.link}\n          css={{ display: 'flex', alignItems: 'center', gap: theme.spacing.sm }}\n        >\n          <RegisteredModelOkIcon /> {modelSummary.displayedName}{' '}\n          <Tag\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewregisteredmodelsbox.tsx_40\"\n            css={{ cursor: 'pointer' }}\n          >\n            v{modelSummary.version}\n          </Tag>\n        </Link>\n      ))}\n    </Overflow>\n  );\n};\n","import { QueryFunctionContext, useQuery, UseQueryOptions } from '@mlflow/mlflow/src/common/utils/reactQueryHooks';\nimport type { PromptVersionsForRunResponse, RegisteredPromptDetailsResponse, RegisteredPromptVersion } from '../types';\nimport { RegisteredPromptsApi } from '../api';\n\nconst queryFn = async ({ queryKey }: QueryFunctionContext<PromptVersionsForRunQueryKey>) => {\n  const [, { runUuid }] = queryKey;\n  return RegisteredPromptsApi.getPromptVersionsForRun(runUuid);\n};\n\ntype PromptVersionsForRunQueryKey = ['run_uuid', { runUuid: string }];\n\nexport const usePromptVersionsForRunQuery = (\n  { runUuid }: { runUuid: string },\n  options: UseQueryOptions<\n    PromptVersionsForRunResponse,\n    Error,\n    PromptVersionsForRunResponse,\n    PromptVersionsForRunQueryKey\n  > = {},\n) => {\n  const queryResult = useQuery<\n    PromptVersionsForRunResponse,\n    Error,\n    PromptVersionsForRunResponse,\n    PromptVersionsForRunQueryKey\n  >(['run_uuid', { runUuid }], {\n    queryFn,\n    retry: false,\n    ...options,\n  });\n\n  return {\n    data: queryResult.data,\n    error: queryResult.error ?? undefined,\n    isLoading: queryResult.isLoading,\n    refetch: queryResult.refetch,\n  };\n};\n","import { ParagraphSkeleton, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport type { KeyValueEntity } from '@mlflow/mlflow/src/common/types';\n\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { usePromptVersionsForRunQuery } from '../../../pages/prompts/hooks/usePromptVersionsForRunQuery';\nimport Routes from '../../../routes';\nimport { parseLinkedPromptsFromRunTags } from '../../../pages/prompts/utils';\n\nexport const RunViewRegisteredPromptsBox = ({\n  tags,\n  runUuid,\n}: {\n  tags: Record<string, KeyValueEntity>;\n  runUuid: string;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  // This part is for supporting prompt versions created using mlflow < 3.1.0\n  const { data, error, isLoading } = usePromptVersionsForRunQuery({ runUuid });\n  const promptVersionsFromPromptTags = data?.model_versions || [];\n  const promptVersionsFromRunTags = parseLinkedPromptsFromRunTags(tags);\n  const promptVersions = [...promptVersionsFromPromptTags, ...promptVersionsFromRunTags];\n\n  if (isLoading) {\n    return <ParagraphSkeleton />;\n  }\n\n  if (error || !promptVersions || promptVersions.length === 0) {\n    return <Typography.Hint></Typography.Hint>;\n  }\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        flexDirection: 'row',\n        gap: theme.spacing.sm,\n        flexWrap: 'wrap',\n        padding: `${theme.spacing.sm}px 0px`,\n      }}\n    >\n      {promptVersions.map((promptVersion, index) => {\n        const to = Routes.getPromptDetailsPageRoute(encodeURIComponent(promptVersion.name));\n        const displayText = `${promptVersion.name} (v${promptVersion.version})`;\n        return (\n          <Typography.Text key={displayText} css={{ whiteSpace: 'nowrap' }}>\n            <Link to={to}>{displayText}</Link>\n            {index < promptVersions.length - 1 && ','}\n          </Typography.Text>\n        );\n      })}\n    </div>\n  );\n};\n","import { ModelsIcon, Overflow, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { Link } from '../../../../common/utils/RoutingUtils';\nimport { RunInfoEntity } from '../../../types';\nimport { type LoggedModelProto } from '../../../types';\nimport Routes from '../../../routes';\nimport { first } from 'lodash';\nimport { FormattedMessage } from 'react-intl';\nimport { useMemo } from 'react';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\n/**\n * Displays list of registered models in run detail overview.\n */\nexport const RunViewLoggedModelsBox = ({\n  loggedModels,\n  loggedModelsV3,\n  runInfo,\n}: {\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  loggedModelsV3: LoggedModelProto[];\n  loggedModels: {\n    artifactPath: string;\n    flavors: string[];\n    utcTimeCreated: number;\n  }[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { experimentId, runUuid } = runInfo;\n\n  const getModelFlavorName = (flavors: string[]) => {\n    return (\n      first(flavors) || (\n        <FormattedMessage\n          defaultMessage=\"Model\"\n          description=\"Run page > Overview > Logged models > Unknown model flavor\"\n        />\n      )\n    );\n  };\n\n  // Check if list has models with same flavor names.\n  // If true, display artifact path in dropdown menu to reduce ambiguity.\n  const shouldDisplayArtifactPaths = useMemo(() => {\n    const flavors = loggedModels.map((model) => getModelFlavorName(model.flavors));\n    const uniqueFlavors = new Set(flavors);\n    return uniqueFlavors.size !== flavors.length;\n  }, [loggedModels]);\n\n  return (\n    <Overflow>\n      {loggedModels.map((model, index) => {\n        return (\n          <Link\n            to={Routes.getRunPageRoute(experimentId ?? '', runUuid ?? '', model.artifactPath)}\n            key={model.artifactPath}\n            css={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: theme.spacing.sm,\n              cursor: 'pointer',\n              height: shouldDisplayArtifactPaths && index > 0 ? theme.general.heightBase : theme.general.heightSm,\n            }}\n          >\n            <ModelsIcon />\n            <div>\n              {getModelFlavorName(model.flavors)}\n              {shouldDisplayArtifactPaths && index > 0 && <Typography.Hint>{model.artifactPath}</Typography.Hint>}\n            </div>\n          </Link>\n        );\n      })}\n      {loggedModelsV3.map((model, index) => {\n        return (\n          <Link\n            to={Routes.getExperimentLoggedModelDetailsPageRoute(experimentId ?? '', model.info?.model_id ?? '')}\n            key={model.info?.model_id ?? index}\n            css={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: theme.spacing.sm,\n              cursor: 'pointer',\n              height: shouldDisplayArtifactPaths && index > 0 ? theme.general.heightBase : theme.general.heightSm,\n            }}\n          >\n            <ModelsIcon />\n            <div>{model.info?.name}</div>\n          </Link>\n        );\n      })}\n    </Overflow>\n  );\n};\n","import {\n  BranchIcon,\n  CopyIcon,\n  GitCommitIcon,\n  Tag,\n  LegacyTooltip,\n  Typography,\n  useDesignSystemTheme,\n  Popover,\n} from '@databricks/design-system';\nimport Utils from '../../../../common/utils/Utils';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG } from '../../../constants';\nimport { CopyButton } from '@mlflow/mlflow/src/shared/building_blocks/CopyButton';\nimport { ExperimentSourceTypeIcon } from '../../ExperimentSourceTypeIcon';\n\nexport const RunViewSourceBox = ({\n  runUuid,\n  tags,\n  search,\n  className,\n}: {\n  runUuid: string;\n  tags: Record<string, KeyValueEntity>;\n  search: string;\n  className?: string;\n}) => {\n  const branchName = tags?.[MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG]?.value;\n  const commitHash = tags?.[Utils.gitCommitTag]?.value;\n  const runSource = Utils.renderSource(tags, search, runUuid, branchName);\n\n  const { theme } = useDesignSystemTheme();\n  return runSource ? (\n    <div\n      css={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: theme.spacing.sm,\n        paddingTop: theme.spacing.sm,\n        paddingBottom: theme.spacing.sm,\n        flexWrap: 'wrap',\n      }}\n      className={className}\n    >\n      <ExperimentSourceTypeIcon\n        sourceType={tags[Utils.sourceTypeTag]?.value}\n        css={{ color: theme.colors.actionPrimaryBackgroundDefault }}\n      />\n      {runSource}{' '}\n      {branchName && (\n        <LegacyTooltip title={branchName}>\n          <Tag\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_overview_runviewsourcebox.tsx_48\"\n            css={{ marginRight: 0 }}\n          >\n            <div css={{ display: 'flex', gap: 4, whiteSpace: 'nowrap' }}>\n              <BranchIcon /> {branchName}\n            </div>\n          </Tag>\n        </LegacyTooltip>\n      )}\n      {commitHash && (\n        <Popover.Root componentId=\"mlflow.run_details.overview.source.commit_hash_popover\">\n          <Popover.Trigger asChild>\n            <Tag\n              componentId=\"mlflow.run_details.overview.source.commit_hash\"\n              css={{ marginRight: 0, '&>div': { paddingRight: 0 } }}\n            >\n              <div css={{ display: 'flex', gap: theme.spacing.xs, whiteSpace: 'nowrap', alignContent: 'center' }}>\n                <GitCommitIcon />\n                {commitHash.slice(0, 7)}\n              </div>\n            </Tag>\n          </Popover.Trigger>\n          <Popover.Content align=\"start\">\n            <Popover.Arrow />\n            <div css={{ display: 'flex', gap: theme.spacing.xs, alignItems: 'center' }}>\n              {commitHash}\n              <CopyButton showLabel={false} size=\"small\" type=\"tertiary\" copyText={commitHash} icon={<CopyIcon />} />\n            </div>\n          </Popover.Content>\n        </Popover.Root>\n      )}\n    </div>\n  ) : (\n    <Typography.Hint></Typography.Hint>\n  );\n};\n","import {\n  Alert,\n  Button,\n  ColumnsIcon,\n  getShadowScrollStyles,\n  Spacer,\n  Typography,\n  useDesignSystemTheme,\n} from '@databricks/design-system';\nimport { Theme } from '@emotion/react';\nimport { useMemo, useState } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { useCombinedRunInputsOutputsModels } from '../../../hooks/logged-models/useCombinedRunInputsOutputsModels';\nimport { LoggedModelProto, RunInfoEntity } from '../../../types';\nimport { ExperimentLoggedModelListPageTable } from '../../experiment-logged-models/ExperimentLoggedModelListPageTable';\nimport {\n  ExperimentLoggedModelListPageKnownColumns,\n  useExperimentLoggedModelListPageTableColumns,\n} from '../../experiment-logged-models/hooks/useExperimentLoggedModelListPageTableColumns';\nimport { ExperimentLoggedModelOpenDatasetDetailsContextProvider } from '../../experiment-logged-models/hooks/useExperimentLoggedModelOpenDatasetDetails';\nimport {\n  UseGetRunQueryResponseInputs,\n  UseGetRunQueryResponseOutputs,\n  UseGetRunQueryResponseRunInfo,\n} from '../hooks/useGetRunQuery';\nimport { ExperimentLoggedModelListPageColumnSelector } from '../../experiment-logged-models/ExperimentLoggedModelListPageColumnSelector';\n\nconst supportedAttributeColumnKeys = [\n  ExperimentLoggedModelListPageKnownColumns.RelationshipType,\n  ExperimentLoggedModelListPageKnownColumns.Step,\n  ExperimentLoggedModelListPageKnownColumns.Name,\n  ExperimentLoggedModelListPageKnownColumns.Status,\n  ExperimentLoggedModelListPageKnownColumns.CreationTime,\n  ExperimentLoggedModelListPageKnownColumns.RegisteredModels,\n  ExperimentLoggedModelListPageKnownColumns.Dataset,\n];\n\nexport const RunViewLoggedModelsTable = ({\n  inputs,\n  outputs,\n  runInfo,\n  loggedModelsV3,\n  isLoadingLoggedModels = false,\n  loggedModelsError,\n}: {\n  inputs?: UseGetRunQueryResponseInputs;\n  outputs?: UseGetRunQueryResponseOutputs;\n  runInfo?: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  loggedModelsV3: LoggedModelProto[];\n  isLoadingLoggedModels?: boolean;\n  loggedModelsError?: Error;\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  const { models: loggedModels } = useCombinedRunInputsOutputsModels(inputs, outputs, runInfo, loggedModelsV3);\n\n  const [columnVisibility, setColumnVisibility] = useState<Record<string, boolean>>({});\n\n  const { columnDefs } = useExperimentLoggedModelListPageTableColumns({\n    loggedModels: loggedModels,\n    columnVisibility,\n    disablePinnedColumns: true,\n    disableOrderBy: true,\n    supportedAttributeColumnKeys,\n  });\n\n  return (\n    <div css={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\n      <div css={{ display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center' }}>\n        <Typography.Title level={4} css={{ flexShrink: 0 }}>\n          <FormattedMessage\n            defaultMessage=\"Logged models ({length})\"\n            description=\"A header for a table of logged models displayed on the run page. The 'length' variable is being replaced with the number of displayed logged models.\"\n            values={{ length: loggedModels.length }}\n          />\n        </Typography.Title>\n        <ExperimentLoggedModelListPageColumnSelector\n          columnDefs={columnDefs}\n          onUpdateColumns={setColumnVisibility}\n          columnVisibility={columnVisibility}\n          customTrigger={<Button componentId=\"mlflow.logged_model.list.columns\" icon={<ColumnsIcon />} />}\n        />\n      </div>\n      <Spacer size=\"sm\" shrinks={false} />\n      <div\n        css={{\n          padding: theme.spacing.sm,\n          border: `1px solid ${theme.colors.border}`,\n          borderRadius: theme.general.borderRadiusBase,\n          display: 'flex',\n          flexDirection: 'column',\n          flex: 1,\n          overflow: 'hidden',\n        }}\n      >\n        {loggedModelsError instanceof Error && loggedModelsError.message && (\n          <>\n            <Alert\n              type=\"error\"\n              description={loggedModelsError.message}\n              message={\n                <FormattedMessage\n                  defaultMessage=\"Error loading logged models\"\n                  description=\"Error message displayed in the experiment run details page when loading logged models fails\"\n                />\n              }\n              closable={false}\n              componentId=\"mlflow.run_page.logged_model.list.error\"\n            />\n            <Spacer size=\"sm\" shrinks={false} />\n          </>\n        )}\n        <ExperimentLoggedModelOpenDatasetDetailsContextProvider>\n          <ExperimentLoggedModelListPageTable\n            columnDefs={columnDefs}\n            loggedModels={loggedModels}\n            columnVisibility={columnVisibility}\n            isLoading={isLoadingLoggedModels}\n            isLoadingMore={false}\n            moreResultsAvailable={false}\n            disableLoadMore\n            css={getTableTheme(theme)}\n            displayShowExampleButton={false}\n          />\n        </ExperimentLoggedModelOpenDatasetDetailsContextProvider>\n      </div>\n    </div>\n  );\n};\n\nconst getTableTheme = (theme: Theme) => ({\n  '&.ag-theme-balham': {\n    '--ag-border-color': theme.colors.border,\n    '--ag-row-border-color': theme.colors.border,\n    '--ag-foreground-color': theme.colors.textPrimary,\n    '--ag-background-color': 'transparent',\n    '--ag-odd-row-background-color': 'transparent',\n    '--ag-row-hover-color': theme.colors.actionDefaultBackgroundHover,\n    '--ag-selected-row-background-color': theme.colors.actionDefaultBackgroundPress,\n    '--ag-header-foreground-color': theme.colors.textPrimary,\n    '--ag-header-background-color': theme.colors.backgroundPrimary,\n    '--ag-modal-overlay-background-color': theme.colors.overlayOverlay,\n    '.ag-header-row.ag-header-row-column-group': {\n      '--ag-header-foreground-color': theme.colors.textPrimary,\n    },\n    borderTop: 0,\n    fontSize: theme.typography.fontSizeBase,\n    '.ag-center-cols-viewport': {\n      ...getShadowScrollStyles(theme, {\n        orientation: 'horizontal',\n      }),\n    },\n  },\n});\n","import { compact, uniq, uniqBy } from 'lodash';\nimport { useMemo } from 'react';\nimport type {\n  UseGetRunQueryResponseInputs,\n  UseGetRunQueryResponseOutputs,\n  UseGetRunQueryResponseRunInfo,\n} from '../../components/run-page/hooks/useGetRunQuery';\nimport type { LoggedModelProto, RunInfoEntity } from '../../types';\n\ntype LoggedModelProtoWithRunDirection = LoggedModelProto & { direction: 'input' | 'output'; step?: string };\n\nconst filterMetricsByMatchingRunId = (runUuid?: string | null) => (loggedModel: LoggedModelProtoWithRunDirection) => {\n  if (loggedModel.data?.metrics) {\n    return {\n      ...loggedModel,\n      data: {\n        ...loggedModel.data,\n        metrics: loggedModel.data.metrics.filter((metric) => !runUuid || metric.run_id === runUuid),\n      },\n    };\n  }\n  return loggedModel;\n};\n\nexport const useCombinedRunInputsOutputsModels = (\n  inputs?: UseGetRunQueryResponseInputs,\n  outputs?: UseGetRunQueryResponseOutputs,\n  runInfo?: RunInfoEntity | UseGetRunQueryResponseRunInfo,\n  loggedModelsV3?: LoggedModelProto[],\n) => {\n  const inputLoggedModels = useMemo(() => {\n    const inputModelIds = compact(uniq(inputs?.modelInputs?.map((modelInput) => modelInput.modelId)));\n    return inputModelIds.map<LoggedModelProtoWithRunDirection | undefined>((model_id) => {\n      const model = loggedModelsV3?.find((model) => model.info?.model_id === model_id);\n      if (!model) return undefined;\n      return { ...model, direction: 'input' as const };\n    });\n  }, [inputs?.modelInputs, loggedModelsV3]);\n\n  const outputLoggedModels = useMemo(() => {\n    const outputModelIds = compact(uniq(outputs?.modelOutputs?.map((modelOutput) => modelOutput.modelId)));\n    return outputModelIds.map<LoggedModelProtoWithRunDirection | undefined>((model_id) => {\n      const model = loggedModelsV3?.find((model) => model.info?.model_id === model_id);\n\n      const correspondingOutputEntry = outputs?.modelOutputs?.find(({ modelId }) => modelId === model?.info?.model_id);\n\n      if (!model) return undefined;\n      return { ...model, direction: 'output' as const, step: correspondingOutputEntry?.step ?? undefined };\n    });\n  }, [outputs?.modelOutputs, loggedModelsV3]);\n\n  const modelsWithDirection = useMemo(() => {\n    return (\n      uniqBy(\n        compact([...inputLoggedModels, ...outputLoggedModels]).map(filterMetricsByMatchingRunId(runInfo?.runUuid)),\n        (modelData) => modelData.info?.model_id,\n      ) ?? []\n    );\n  }, [inputLoggedModels, outputLoggedModels, runInfo]);\n\n  return { models: modelsWithDirection };\n};\n","import { Overflow, Typography, useDesignSystemTheme } from '@databricks/design-system';\nimport { useState } from 'react';\nimport type { RunDatasetWithTags, RunInfoEntity } from '../../../types';\nimport { KeyValueEntity } from '../../../../common/types';\nimport {\n  DatasetWithRunType,\n  ExperimentViewDatasetDrawer,\n} from '../../experiment-page/components/runs/ExperimentViewDatasetDrawer';\nimport { ExperimentViewDatasetWithContext } from '../../experiment-page/components/runs/ExperimentViewDatasetWithContext';\nimport type { UseGetRunQueryResponseRunInfo } from '../hooks/useGetRunQuery';\n\n/**\n * Displays run datasets section in run detail overview.\n */\nexport const RunViewDatasetBoxV2 = ({\n  tags,\n  runInfo,\n  datasets,\n}: {\n  tags: Record<string, KeyValueEntity>;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  datasets: RunDatasetWithTags[];\n}) => {\n  const [selectedDatasetWithRun, setSelectedDatasetWithRun] = useState<DatasetWithRunType | null>(null);\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false);\n  const { theme } = useDesignSystemTheme();\n\n  if (!datasets || !datasets.length) {\n    return null;\n  }\n\n  const datasetClicked = (dataset: RunDatasetWithTags) => {\n    setSelectedDatasetWithRun({\n      datasetWithTags: dataset,\n      runData: {\n        experimentId: runInfo.experimentId ?? undefined,\n        runUuid: runInfo.runUuid ?? '',\n        runName: runInfo.runName ?? undefined,\n        datasets: datasets,\n        tags: tags,\n      },\n    });\n    setIsDrawerOpen(true);\n  };\n\n  return (\n    <>\n      <Overflow>\n        {datasets.map((datasetWithTags) => (\n          // eslint-disable-next-line react/jsx-key\n          <Typography.Link\n            componentId=\"mlflow.run_details.datasets_box.dataset_link\"\n            css={{\n              textAlign: 'left',\n              '.anticon': {\n                fontSize: theme.general.iconFontSize,\n              },\n            }}\n            onClick={() => datasetClicked(datasetWithTags)}\n          >\n            <ExperimentViewDatasetWithContext datasetWithTags={datasetWithTags} displayTextAsLink css={{ margin: 0 }} />\n          </Typography.Link>\n        ))}\n      </Overflow>\n      {selectedDatasetWithRun && (\n        <ExperimentViewDatasetDrawer\n          isOpen={isDrawerOpen}\n          setIsOpen={setIsDrawerOpen}\n          selectedDatasetWithRun={selectedDatasetWithRun}\n          setSelectedDatasetWithRun={setSelectedDatasetWithRun}\n        />\n      )}\n    </>\n  );\n};\n","import { Button, FileIcon, useDesignSystemTheme } from '@databricks/design-system';\nimport { KeyValueProperty, NoneCell, AsideSections } from '@databricks/web-shared/utils';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { LoggedModelProto, RunDatasetWithTags, RunInfoEntity } from '../../../types';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { UseGetRunQueryResponseRunInfo } from './useGetRunQuery';\nimport Utils from '../../../../common/utils/Utils';\nimport { RunViewTagsBox } from '../overview/RunViewTagsBox';\nimport { RunViewUserLinkBox } from '../overview/RunViewUserLinkBox';\nimport { DetailsOverviewCopyableIdBox } from '../../DetailsOverviewCopyableIdBox';\nimport { RunViewStatusBox } from '../overview/RunViewStatusBox';\nimport { RunViewParentRunBox } from '../overview/RunViewParentRunBox';\nimport { EXPERIMENT_PARENT_ID_TAG } from '../../experiment-page/utils/experimentPage.common-utils';\nimport { RunViewDatasetBoxV2 } from '../overview/RunViewDatasetBoxV2';\nimport { RunViewSourceBox } from '../overview/RunViewSourceBox';\nimport { Link, useLocation } from '../../../../common/utils/RoutingUtils';\nimport { RunViewLoggedModelsBox } from '../overview/RunViewLoggedModelsBox';\nimport { useMemo } from 'react';\nimport { RunPageModelVersionSummary } from './useUnifiedRegisteredModelVersionsSummariesForRun';\nimport { RunViewRegisteredModelsBox } from '../overview/RunViewRegisteredModelsBox';\nimport Routes from '../../../routes';\n\nenum RunDetailsPageMetadataSections {\n  DETAILS = 'DETAILS',\n  DATASETS = 'DATASETS',\n  TAGS = 'TAGS',\n  REGISTERED_MODELS = 'REGISTERED_MODELS',\n}\n\nexport const useRunDetailsPageOverviewSectionsV2 = ({\n  runUuid,\n  runInfo,\n  tags,\n  onTagsUpdated,\n  datasets,\n  shouldRenderLoggedModelsBox,\n  loggedModelsV3,\n  registeredModelVersionSummaries,\n}: {\n  runUuid: string;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n  onTagsUpdated: () => void;\n  datasets?: RunDatasetWithTags[];\n  shouldRenderLoggedModelsBox?: boolean;\n  loggedModelsV3: LoggedModelProto[];\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n}): AsideSections => {\n  const intl = useIntl();\n  const { theme } = useDesignSystemTheme();\n  const { search } = useLocation();\n  const loggedModelsFromTags = useMemo(() => Utils.getLoggedModelsFromTags(tags), [tags]);\n\n  const parentRunIdTag = tags[EXPERIMENT_PARENT_ID_TAG];\n\n  const detailsContent = runInfo && (\n    <>\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Created at',\n          description: 'Run page > Overview > Run start time section label',\n        })}\n        value={runInfo.startTime ? Utils.formatTimestamp(runInfo.startTime, intl) : <NoneCell />}\n      />\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Created by',\n          description: 'Run page > Overview > Run author section label',\n        })}\n        value={<RunViewUserLinkBox runInfo={runInfo} tags={tags} />}\n      />\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Experiment ID',\n          description: 'Run page > Overview > experiment ID section label',\n        })}\n        value={\n          <DetailsOverviewCopyableIdBox\n            value={runInfo?.experimentId ?? ''}\n            element={\n              runInfo?.experimentId ? (\n                <Link to={Routes.getExperimentPageRoute(runInfo.experimentId)}>{runInfo?.experimentId}</Link>\n              ) : undefined\n            }\n          />\n        }\n      />\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Status',\n          description: 'Run page > Overview > Run status section label',\n        })}\n        value={<RunViewStatusBox status={runInfo.status} />}\n      />\n\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Run ID',\n          description: 'Run page > Overview > Run ID section label',\n        })}\n        value={<DetailsOverviewCopyableIdBox value={runInfo.runUuid ?? ''} />}\n      />\n\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Duration',\n          description: 'Run page > Overview > Run duration section label',\n        })}\n        value={Utils.getDuration(runInfo.startTime, runInfo.endTime)}\n      />\n\n      {parentRunIdTag && (\n        <KeyValueProperty\n          keyValue={intl.formatMessage({\n            defaultMessage: 'Parent run',\n            description: 'Run page > Overview > Parent run',\n          })}\n          value={<RunViewParentRunBox parentRunUuid={parentRunIdTag.value} />}\n        />\n      )}\n      <KeyValueProperty\n        keyValue={intl.formatMessage({\n          defaultMessage: 'Source',\n          description: 'Run page > Overview > Run source section label',\n        })}\n        value={\n          <RunViewSourceBox\n            tags={tags}\n            search={search}\n            runUuid={runUuid}\n            css={{\n              paddingTop: theme.spacing.xs,\n              paddingBottom: theme.spacing.xs,\n            }}\n          />\n        }\n      />\n      {shouldRenderLoggedModelsBox && (\n        <KeyValueProperty\n          keyValue={intl.formatMessage({\n            defaultMessage: 'Logged models',\n            description: 'Run page > Overview > Run models section label',\n          })}\n          value={\n            <RunViewLoggedModelsBox\n              // Pass the run info and logged models\n              runInfo={runInfo}\n              loggedModels={loggedModelsFromTags}\n              loggedModelsV3={loggedModelsV3}\n            />\n          }\n        />\n      )}\n    </>\n  );\n\n  return [\n    {\n      id: RunDetailsPageMetadataSections.DETAILS,\n      title: intl.formatMessage({\n        defaultMessage: 'About this run',\n        description: 'Title for the details/metadata section on the run details page',\n      }),\n      content: detailsContent,\n    },\n    {\n      id: RunDetailsPageMetadataSections.DATASETS,\n      title: intl.formatMessage({\n        defaultMessage: 'Datasets',\n        description: 'Title for the datasets section on the run details page',\n      }),\n      content: datasets?.length ? (\n        <RunViewDatasetBoxV2 tags={tags} runInfo={runInfo} datasets={datasets} />\n      ) : (\n        <NoneCell />\n      ),\n    },\n    {\n      id: RunDetailsPageMetadataSections.TAGS,\n      title: intl.formatMessage({\n        defaultMessage: 'Tags',\n        description: 'Title for the tags section on the run details page',\n      }),\n      content: <RunViewTagsBox runUuid={runInfo.runUuid ?? ''} tags={tags} onTagsUpdated={onTagsUpdated} />,\n    },\n    {\n      id: RunDetailsPageMetadataSections.REGISTERED_MODELS,\n      title: intl.formatMessage({\n        defaultMessage: 'Registered models',\n        description: 'Title for the registered models section on the run details page',\n      }),\n      content:\n        registeredModelVersionSummaries?.length > 0 ? (\n          <RunViewRegisteredModelsBox registeredModelVersionSummaries={registeredModelVersionSummaries} />\n        ) : (\n          <NoneCell />\n        ),\n    },\n  ];\n};\n","import { FormattedMessage, useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { useMemo } from 'react';\n\nimport { Button, FileIcon, Spacer, Spinner, Typography, useDesignSystemTheme } from '@databricks/design-system';\n\nimport Utils from '../../../common/utils/Utils';\nimport type { ReduxState } from '../../../redux-types';\nimport { useLocation } from '../../../common/utils/RoutingUtils';\nimport { EXPERIMENT_PARENT_ID_TAG } from '../experiment-page/utils/experimentPage.common-utils';\n\nimport { RunViewStatusBox } from './overview/RunViewStatusBox';\nimport { RunViewUserLinkBox } from './overview/RunViewUserLinkBox';\nimport { DetailsOverviewParamsTable } from '../DetailsOverviewParamsTable';\nimport { RunViewMetricsTable } from './overview/RunViewMetricsTable';\nimport { RunViewDatasetBox } from './overview/RunViewDatasetBox';\nimport { RunViewParentRunBox } from './overview/RunViewParentRunBox';\nimport { RunViewTagsBox } from './overview/RunViewTagsBox';\nimport { RunViewDescriptionBox } from './overview/RunViewDescriptionBox';\nimport { DetailsOverviewMetadataRow } from '../DetailsOverviewMetadataRow';\nimport { RunViewRegisteredModelsBox } from './overview/RunViewRegisteredModelsBox';\nimport { RunViewRegisteredPromptsBox } from './overview/RunViewRegisteredPromptsBox';\nimport { RunViewLoggedModelsBox } from './overview/RunViewLoggedModelsBox';\nimport { RunViewSourceBox } from './overview/RunViewSourceBox';\nimport { DetailsOverviewMetadataTable } from '@mlflow/mlflow/src/experiment-tracking/components/DetailsOverviewMetadataTable';\nimport type { LoggedModelProto } from '../../types';\nimport { useExperimentLoggedModelRegisteredVersions } from '../experiment-logged-models/hooks/useExperimentLoggedModelRegisteredVersions';\nimport { DetailsOverviewCopyableIdBox } from '../DetailsOverviewCopyableIdBox';\nimport type { RunInfoEntity } from '../../types';\nimport type {\n  UseGetRunQueryResponseInputs,\n  UseGetRunQueryResponseOutputs,\n  UseGetRunQueryResponseRunInfo,\n} from './hooks/useGetRunQuery';\nimport type { MetricEntitiesByName, RunDatasetWithTags } from '../../types';\nimport { KeyValueEntity } from '../../../common/types';\nimport { type RunPageModelVersionSummary } from './hooks/useUnifiedRegisteredModelVersionsSummariesForRun';\nimport { isEmpty, uniqBy } from 'lodash';\nimport { RunViewLoggedModelsTable } from './overview/RunViewLoggedModelsTable';\nimport { isRunPageLoggedModelsTableEnabled } from '../../../common/utils/FeatureUtils';\nimport { useExperimentTrackingDetailsPageLayoutStyles } from '../../hooks/useExperimentTrackingDetailsPageLayoutStyles';\nimport { DetailsPageLayout } from '../../../common/components/details-page-layout/DetailsPageLayout';\nimport { useRunDetailsPageOverviewSectionsV2 } from './hooks/useRunDetailsPageOverviewSectionsV2';\n\nconst EmptyValue = () => <Typography.Hint></Typography.Hint>;\n\nexport const RunViewOverview = ({\n  runUuid,\n  onRunDataUpdated,\n  tags,\n  runInfo,\n  datasets,\n  params,\n  latestMetrics,\n  runInputs,\n  runOutputs,\n  registeredModelVersionSummaries: registeredModelVersionSummariesForRun,\n  loggedModelsV3 = [],\n  isLoadingLoggedModels = false,\n  loggedModelsError,\n}: {\n  runUuid: string;\n  onRunDataUpdated: () => void | Promise<any>;\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  tags: Record<string, KeyValueEntity>;\n  latestMetrics: MetricEntitiesByName;\n  runInputs?: UseGetRunQueryResponseInputs;\n  runOutputs?: UseGetRunQueryResponseOutputs;\n  datasets?: RunDatasetWithTags[];\n  params: Record<string, KeyValueEntity>;\n  registeredModelVersionSummaries: RunPageModelVersionSummary[];\n  loggedModelsV3?: LoggedModelProto[];\n  isLoadingLoggedModels?: boolean;\n  loggedModelsError?: Error;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const { usingUnifiedDetailsLayout } = useExperimentTrackingDetailsPageLayoutStyles();\n  const { search } = useLocation();\n  const intl = useIntl();\n\n  const loggedModelsFromTags = useMemo(() => Utils.getLoggedModelsFromTags(tags), [tags]);\n  const parentRunIdTag = tags[EXPERIMENT_PARENT_ID_TAG];\n  const containsLoggedModelsFromInputsOutputs = !isEmpty(runInputs?.modelInputs) || !isEmpty(runOutputs?.modelOutputs);\n  const shouldRenderLoggedModelsBox = !isRunPageLoggedModelsTableEnabled() || !containsLoggedModelsFromInputsOutputs;\n\n  // We have two flags for controlling the visibility of the \"logged models\" section:\n  // - `shouldRenderLoggedModelsBox` determines if \"logged models\" section should be rendered.\n  //   It is hidden if any IAv3 logged models are detected in inputs/outputs, in this case we're\n  //   displaying a big table instead.\n  // - `shouldDisplayContentsOfLoggedModelsBox` determines if the contents of the \"logged models\"\n  //   section should be displayed. It is hidden if there are no logged models to display.\n  const shouldDisplayContentsOfLoggedModelsBox = loggedModelsFromTags?.length > 0 || loggedModelsV3?.length > 0;\n  const { modelVersions: loggedModelsV3RegisteredModels } = useExperimentLoggedModelRegisteredVersions({\n    loggedModels: loggedModelsV3,\n  });\n\n  /**\n   * We have to query multiple sources for registered model versions (logged models API, models API, UC)\n   * and it's possible to end up with duplicates.\n   * We can dedupe them using `link` field, which should be unique for each model.\n   */\n  const registeredModelVersionSummaries = uniqBy(\n    [...registeredModelVersionSummariesForRun, ...loggedModelsV3RegisteredModels],\n    (model) => model?.link,\n  );\n\n  const renderPromptMetadataRow = () => {\n    return (\n      <DetailsOverviewMetadataRow\n        title={\n          <FormattedMessage\n            defaultMessage=\"Registered prompts\"\n            description=\"Run page > Overview > Run prompts section label\"\n          />\n        }\n        value={<RunViewRegisteredPromptsBox tags={tags} runUuid={runUuid} />}\n      />\n    );\n  };\n\n  const renderDetails = () => {\n    return (\n      <DetailsOverviewMetadataTable>\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Created at\"\n              description=\"Run page > Overview > Run start time section label\"\n            />\n          }\n          value={runInfo.startTime ? Utils.formatTimestamp(runInfo.startTime, intl) : <EmptyValue />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Created by\"\n              description=\"Run page > Overview > Run author section label\"\n            />\n          }\n          value={<RunViewUserLinkBox runInfo={runInfo} tags={tags} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Experiment ID\"\n              description=\"Run page > Overview > experiment ID section label\"\n            />\n          }\n          value={<DetailsOverviewCopyableIdBox value={runInfo?.experimentId ?? ''} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage defaultMessage=\"Status\" description=\"Run page > Overview > Run status section label\" />\n          }\n          value={<RunViewStatusBox status={runInfo.status} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={<FormattedMessage defaultMessage=\"Run ID\" description=\"Run page > Overview > Run ID section label\" />}\n          value={<DetailsOverviewCopyableIdBox value={runInfo.runUuid ?? ''} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Duration\"\n              description=\"Run page > Overview > Run duration section label\"\n            />\n          }\n          value={Utils.getDuration(runInfo.startTime, runInfo.endTime)}\n        />\n        {parentRunIdTag && (\n          <DetailsOverviewMetadataRow\n            title={<FormattedMessage defaultMessage=\"Parent run\" description=\"Run page > Overview > Parent run\" />}\n            value={<RunViewParentRunBox parentRunUuid={parentRunIdTag.value} />}\n          />\n        )}\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Datasets used\"\n              description=\"Run page > Overview > Run datasets section label\"\n            />\n          }\n          value={\n            datasets?.length ? <RunViewDatasetBox tags={tags} runInfo={runInfo} datasets={datasets} /> : <EmptyValue />\n          }\n        />\n        <DetailsOverviewMetadataRow\n          title={<FormattedMessage defaultMessage=\"Tags\" description=\"Run page > Overview > Run tags section label\" />}\n          value={<RunViewTagsBox runUuid={runInfo.runUuid ?? ''} tags={tags} onTagsUpdated={onRunDataUpdated} />}\n        />\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage defaultMessage=\"Source\" description=\"Run page > Overview > Run source section label\" />\n          }\n          value={<RunViewSourceBox tags={tags} search={search} runUuid={runUuid} />}\n        />\n        {shouldRenderLoggedModelsBox && (\n          <DetailsOverviewMetadataRow\n            title={\n              <FormattedMessage\n                defaultMessage=\"Logged models\"\n                description=\"Run page > Overview > Run models section label\"\n              />\n            }\n            value={\n              isLoadingLoggedModels ? (\n                <Spinner />\n              ) : shouldDisplayContentsOfLoggedModelsBox ? (\n                <RunViewLoggedModelsBox\n                  // Pass the run info and logged models\n                  runInfo={runInfo}\n                  loggedModels={loggedModelsFromTags}\n                  // Provide loggedModels from IA v3\n                  loggedModelsV3={loggedModelsV3}\n                />\n              ) : (\n                <EmptyValue />\n              )\n            }\n          />\n        )}\n        <DetailsOverviewMetadataRow\n          title={\n            <FormattedMessage\n              defaultMessage=\"Registered models\"\n              description=\"Run page > Overview > Run models section label\"\n            />\n          }\n          value={\n            registeredModelVersionSummaries?.length > 0 ? (\n              <RunViewRegisteredModelsBox registeredModelVersionSummaries={registeredModelVersionSummaries} />\n            ) : (\n              <EmptyValue />\n            )\n          }\n        />\n        {renderPromptMetadataRow()}\n      </DetailsOverviewMetadataTable>\n    );\n  };\n\n  const renderParams = () => {\n    return <DetailsOverviewParamsTable params={params} />;\n  };\n\n  const detailsSectionsV2 = useRunDetailsPageOverviewSectionsV2({\n    runUuid,\n    runInfo,\n    tags,\n    onTagsUpdated: onRunDataUpdated,\n    datasets,\n    loggedModelsV3,\n    shouldRenderLoggedModelsBox,\n    registeredModelVersionSummaries,\n  });\n  const usingSidebarLayout = usingUnifiedDetailsLayout;\n  return (\n    <DetailsPageLayout\n      css={{ flex: 1, alignSelf: 'flex-start' }}\n      //\n      // Enable sidebar layout based on feature flag\n      usingSidebarLayout={usingSidebarLayout}\n      secondarySections={detailsSectionsV2}\n    >\n      <RunViewDescriptionBox runUuid={runUuid} tags={tags} onDescriptionChanged={onRunDataUpdated} />\n      {!usingSidebarLayout && (\n        <>\n          <Typography.Title level={4}>\n            <FormattedMessage defaultMessage=\"Details\" description=\"Run page > Overview > Details section title\" />\n          </Typography.Title>\n          {renderDetails()}\n        </>\n      )}\n      <div\n        // Use different grid setup for unified details page layout\n        css={[\n          usingSidebarLayout ? { flexDirection: 'column' } : { minHeight: 360, maxHeight: 760 },\n          { display: 'flex', gap: theme.spacing.lg, overflow: 'hidden' },\n        ]}\n      >\n        <RunViewMetricsTable latestMetrics={latestMetrics} runInfo={runInfo} loggedModels={loggedModelsV3} />\n        {renderParams()}\n      </div>\n      {isRunPageLoggedModelsTableEnabled() && containsLoggedModelsFromInputsOutputs && (\n        <>\n          <Spacer />\n          <div css={{ minHeight: 360, maxHeight: 760, overflow: 'hidden', display: 'flex' }}>\n            <RunViewLoggedModelsTable\n              loggedModelsV3={loggedModelsV3}\n              isLoadingLoggedModels={isLoadingLoggedModels}\n              inputs={runInputs}\n              outputs={runOutputs}\n              runInfo={runInfo}\n              loggedModelsError={loggedModelsError}\n            />\n          </div>\n        </>\n      )}\n      {!usingSidebarLayout && <Spacer />}\n    </DetailsPageLayout>\n  );\n};\n","import Routes from '../routes';\nimport { ErrorView } from '../../common/components/ErrorView';\n\ntype Props = {\n  runId: string;\n};\n\nexport function RunNotFoundView({ runId }: Props) {\n  return (\n    <ErrorView\n      statusCode={404}\n      subMessage={`Run ID ${runId} does not exist`}\n      fallbackHomePageReactRoute={Routes.rootRoute}\n    />\n  );\n}\n","import type { MetricHistoryByName, RunInfoEntity } from '../../types';\nimport {\n  containsMultipleRunsTooltipData,\n  RunsChartsTooltipMode,\n  type RunsChartsTooltipBodyProps,\n} from '../runs-charts/hooks/useRunsChartsTooltip';\nimport { isSystemMetricKey } from '../../utils/MetricsUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { isUndefined } from 'lodash';\nimport type {\n  RunsCompareMultipleTracesTooltipData,\n  RunsMetricsSingleTraceTooltipData,\n} from '../runs-charts/components/RunsMetricsLinePlot';\nimport type { RunsMetricsBarPlotHoverData } from '../runs-charts/components/RunsMetricsBarPlot';\nimport { RunsMultipleTracesTooltipBody } from '../runs-charts/components/RunsMultipleTracesTooltipBody';\nimport { Spacer, Typography } from '@databricks/design-system';\n\n/**\n * Tooltip body displayed when hovering over run view metric charts\n */\nexport const RunViewChartTooltipBody = ({\n  contextData: { metricsForRun },\n  hoverData,\n  chartData: { metricKey },\n  isHovering,\n  mode,\n}: RunsChartsTooltipBodyProps<\n  { metricsForRun: MetricHistoryByName },\n  { metricKey: string },\n  RunsMetricsBarPlotHoverData | RunsMetricsSingleTraceTooltipData | RunsCompareMultipleTracesTooltipData\n>) => {\n  const singleTraceHoverData = containsMultipleRunsTooltipData(hoverData) ? hoverData.hoveredDataPoint : hoverData;\n  const intl = useIntl();\n\n  if (\n    mode === RunsChartsTooltipMode.MultipleTracesWithScanline &&\n    containsMultipleRunsTooltipData(hoverData) &&\n    isHovering\n  ) {\n    return <RunsMultipleTracesTooltipBody hoverData={hoverData} />;\n  }\n\n  if (!singleTraceHoverData?.metricEntity) {\n    return null;\n  }\n\n  const { timestamp, step, value } = singleTraceHoverData.metricEntity;\n\n  const metricContainsHistory = metricsForRun?.[metricKey]?.length > 1;\n  const isSystemMetric = isSystemMetricKey(metricKey);\n  const displayTimestamp = metricContainsHistory && isSystemMetric && !isUndefined(timestamp);\n  const displayStep = metricContainsHistory && !isSystemMetric && !isUndefined(step);\n\n  return (\n    <div>\n      {displayStep && (\n        <div css={styles.valueField}>\n          <strong>\n            <FormattedMessage defaultMessage=\"Step\" description=\"Run page > Charts tab > Chart tooltip > Step label\" />:\n          </strong>{' '}\n          {step}\n        </div>\n      )}\n      {displayTimestamp && (\n        <div css={styles.valueField}>\n          <strong>\n            <FormattedMessage\n              defaultMessage=\"Timestamp\"\n              description=\"Run page > Charts tab > Chart tooltip > Timestamp label\"\n            />\n            :\n          </strong>{' '}\n          {Utils.formatTimestamp(timestamp, intl)}\n        </div>\n      )}\n      {value && (\n        <div>\n          <Typography.Text bold>{metricKey}</Typography.Text>\n          <Spacer size=\"xs\" />\n          <Typography.Text>{value}</Typography.Text>\n        </div>\n      )}\n    </div>\n  );\n};\n\nconst styles = {\n  valueField: {\n    whiteSpace: 'nowrap' as const,\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n  },\n};\n","import { TableSkeleton, ToggleButton, useDesignSystemTheme } from '@databricks/design-system';\nimport { compact, mapValues, values } from 'lodash';\nimport { ReactNode, useEffect, useMemo, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport { ReduxState } from '../../../redux-types';\nimport type { MetricEntitiesByName, RunInfoEntity } from '../../types';\nimport { KeyValueEntity } from '../../../common/types';\n\nimport { RunsChartsTooltipWrapper } from '../runs-charts/hooks/useRunsChartsTooltip';\nimport { RunViewChartTooltipBody } from './RunViewChartTooltipBody';\nimport { RunsChartType, RunsChartsCardConfig } from '../runs-charts/runs-charts.types';\nimport type { RunsChartsRunData } from '../runs-charts/components/RunsCharts.common';\nimport { RunsChartsLineChartXAxisType } from '../runs-charts/components/RunsCharts.common';\nimport type { ExperimentRunsChartsUIConfiguration } from '../experiment-page/models/ExperimentPageUIState';\nimport { RunsChartsSectionAccordion } from '../runs-charts/components/sections/RunsChartsSectionAccordion';\nimport { RunsChartsConfigureModal } from '../runs-charts/components/RunsChartsConfigureModal';\nimport {\n  RunsChartsUIConfigurationContextProvider,\n  useConfirmChartCardConfigurationFn,\n  useInsertRunsChartsFn,\n  useRemoveRunsChartFn,\n  useReorderRunsChartsFn,\n} from '../runs-charts/hooks/useRunsChartsUIConfiguration';\nimport {\n  LOG_IMAGE_TAG_INDICATOR,\n  MLFLOW_MODEL_METRIC_NAME,\n  MLFLOW_SYSTEM_METRIC_NAME,\n  MLFLOW_SYSTEM_METRIC_PREFIX,\n} from '../../constants';\nimport LocalStorageUtils from '../../../common/utils/LocalStorageUtils';\nimport { RunsChartsFullScreenModal } from '../runs-charts/components/RunsChartsFullScreenModal';\nimport { useIsTabActive } from '../../../common/hooks/useIsTabActive';\nimport { shouldEnableRunDetailsPageAutoRefresh } from '../../../common/utils/FeatureUtils';\nimport { usePopulateImagesByRunUuid } from '../experiment-page/hooks/usePopulateImagesByRunUuid';\nimport type { UseGetRunQueryResponseRunInfo } from './hooks/useGetRunQuery';\nimport { RunsChartsGlobalChartSettingsDropdown } from '../runs-charts/components/RunsChartsGlobalChartSettingsDropdown';\nimport { RunsChartsDraggableCardsGridContextProvider } from '../runs-charts/components/RunsChartsDraggableCardsGridContext';\nimport { RunsChartsFilterInput } from '../runs-charts/components/RunsChartsFilterInput';\n\ninterface RunViewMetricChartsProps {\n  metricKeys: string[];\n  runInfo: RunInfoEntity | UseGetRunQueryResponseRunInfo;\n  /**\n   * Whether to display model or system metrics. This affects labels and tooltips.\n   */\n  mode: 'model' | 'system';\n\n  latestMetrics?: MetricEntitiesByName;\n  tags?: Record<string, KeyValueEntity>;\n  params?: Record<string, KeyValueEntity>;\n}\n\n/**\n * Component displaying metric charts for a single run\n */\nconst RunViewMetricChartsImpl = ({\n  runInfo,\n  metricKeys,\n  mode,\n  chartUIState,\n  updateChartsUIState,\n  latestMetrics = {},\n  params = {},\n  tags = {},\n}: RunViewMetricChartsProps & {\n  chartUIState: ExperimentRunsChartsUIConfiguration;\n  updateChartsUIState: (\n    stateSetter: (state: ExperimentRunsChartsUIConfiguration) => ExperimentRunsChartsUIConfiguration,\n  ) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const [search, setSearch] = useState('');\n  const { formatMessage } = useIntl();\n\n  const { compareRunCharts, compareRunSections, chartsSearchFilter } = chartUIState;\n\n  // For the draggable grid layout, we filter visible cards on this level\n  const visibleChartCards = useMemo(() => {\n    return compareRunCharts?.filter((chart) => !chart.deleted) ?? [];\n  }, [compareRunCharts]);\n\n  const [fullScreenChart, setFullScreenChart] = useState<\n    | {\n        config: RunsChartsCardConfig;\n        title: string | ReactNode;\n        subtitle: ReactNode;\n      }\n    | undefined\n  >(undefined);\n\n  const metricsForRun = useSelector(({ entities }: ReduxState) => {\n    return mapValues(entities.sampledMetricsByRunUuid[runInfo.runUuid ?? ''], (metricsByRange) => {\n      return compact(\n        values(metricsByRange)\n          .map(({ metricsHistory }) => metricsHistory)\n          .flat(),\n      );\n    });\n  });\n\n  const tooltipContextValue = useMemo(() => ({ runInfo, metricsForRun }), [runInfo, metricsForRun]);\n\n  const { imagesByRunUuid } = useSelector((state: ReduxState) => ({\n    imagesByRunUuid: state.entities.imagesByRunUuid,\n  }));\n\n  const [configuredCardConfig, setConfiguredCardConfig] = useState<RunsChartsCardConfig | null>(null);\n\n  const reorderCharts = useReorderRunsChartsFn();\n\n  const addNewChartCard = (metricSectionId: string) => (type: RunsChartType) =>\n    setConfiguredCardConfig(RunsChartsCardConfig.getEmptyChartCardByType(type, false, undefined, metricSectionId));\n\n  const insertCharts = useInsertRunsChartsFn();\n\n  const startEditChart = (chartCard: RunsChartsCardConfig) => setConfiguredCardConfig(chartCard);\n\n  const removeChart = useRemoveRunsChartFn();\n\n  const confirmChartCardConfiguration = useConfirmChartCardConfigurationFn();\n\n  const submitForm = (configuredCard: Partial<RunsChartsCardConfig>) => {\n    confirmChartCardConfiguration(configuredCard);\n\n    // Hide the modal\n    setConfiguredCardConfig(null);\n  };\n\n  // Create a single run data object to be used in charts\n  const chartData: RunsChartsRunData[] = useMemo(\n    () => [\n      {\n        displayName: runInfo.runName ?? '',\n        metrics: latestMetrics,\n        params,\n        tags,\n        images: imagesByRunUuid[runInfo.runUuid ?? ''] || {},\n        metricHistory: {},\n        uuid: runInfo.runUuid ?? '',\n        color: theme.colors.primary,\n        runInfo,\n      },\n    ],\n    [runInfo, latestMetrics, params, tags, imagesByRunUuid, theme],\n  );\n\n  useEffect(() => {\n    if ((!compareRunSections || !compareRunCharts) && chartData.length > 0) {\n      const { resultChartSet, resultSectionSet } = RunsChartsCardConfig.getBaseChartAndSectionConfigs({\n        runsData: chartData,\n        enabledSectionNames: [mode === 'model' ? MLFLOW_MODEL_METRIC_NAME : MLFLOW_SYSTEM_METRIC_NAME],\n        // Filter only model or system metrics\n        filterMetricNames: (name) => {\n          const isSystemMetric = name.startsWith(MLFLOW_SYSTEM_METRIC_PREFIX);\n          return mode === 'model' ? !isSystemMetric : isSystemMetric;\n        },\n      });\n\n      updateChartsUIState((current) => ({\n        ...current,\n        compareRunCharts: resultChartSet,\n        compareRunSections: resultSectionSet,\n      }));\n    }\n  }, [compareRunCharts, compareRunSections, chartData, mode, updateChartsUIState]);\n\n  /**\n   * Update charts with the latest metrics if new are found\n   */\n  useEffect(() => {\n    updateChartsUIState((current) => {\n      if (!current.compareRunCharts || !current.compareRunSections) {\n        return current;\n      }\n      const { resultChartSet, resultSectionSet, isResultUpdated } = RunsChartsCardConfig.updateChartAndSectionConfigs({\n        compareRunCharts: current.compareRunCharts,\n        compareRunSections: current.compareRunSections,\n        runsData: chartData,\n        isAccordionReordered: current.isAccordionReordered,\n        // Filter only model or system metrics\n        filterMetricNames: (name) => {\n          const isSystemMetric = name.startsWith(MLFLOW_SYSTEM_METRIC_PREFIX);\n          return mode === 'model' ? !isSystemMetric : isSystemMetric;\n        },\n      });\n\n      if (!isResultUpdated) {\n        return current;\n      }\n      return {\n        ...current,\n        compareRunCharts: resultChartSet,\n        compareRunSections: resultSectionSet,\n      };\n    });\n  }, [chartData, updateChartsUIState, mode]);\n\n  const isTabActive = useIsTabActive();\n  const autoRefreshEnabled = chartUIState.autoRefreshEnabled && shouldEnableRunDetailsPageAutoRefresh() && isTabActive;\n\n  // Determine if run contains images logged by `mlflow.log_image()`\n  const containsLoggedImages = Boolean(tags[LOG_IMAGE_TAG_INDICATOR]);\n\n  usePopulateImagesByRunUuid({\n    runUuids: [runInfo.runUuid ?? ''],\n    runUuidsIsActive: [runInfo.status === 'RUNNING'],\n    autoRefreshEnabled,\n    enabled: containsLoggedImages,\n  });\n\n  return (\n    <div\n      css={{\n        flex: 1,\n        display: 'flex',\n        flexDirection: 'column',\n        overflow: 'hidden',\n      }}\n    >\n      <div\n        css={{\n          paddingBottom: theme.spacing.md,\n          display: 'flex',\n          gap: theme.spacing.sm,\n          flex: '0 0 auto',\n        }}\n      >\n        <RunsChartsFilterInput chartsSearchFilter={chartsSearchFilter} />\n        {shouldEnableRunDetailsPageAutoRefresh() && (\n          <ToggleButton\n            componentId=\"codegen_mlflow_app_src_experiment-tracking_components_run-page_runviewmetricchartsv2.tsx_244\"\n            pressed={chartUIState.autoRefreshEnabled}\n            onPressedChange={(pressed) => {\n              updateChartsUIState((current) => ({ ...current, autoRefreshEnabled: pressed }));\n            }}\n          >\n            {formatMessage({\n              defaultMessage: 'Auto-refresh',\n              description: 'Run page > Charts tab > Auto-refresh toggle button',\n            })}\n          </ToggleButton>\n        )}\n        <RunsChartsGlobalChartSettingsDropdown\n          metricKeyList={metricKeys}\n          globalLineChartConfig={chartUIState.globalLineChartConfig}\n          updateUIState={updateChartsUIState}\n        />\n      </div>\n      <div\n        css={{\n          flex: 1,\n          overflow: 'auto',\n        }}\n      >\n        <RunsChartsTooltipWrapper contextData={tooltipContextValue} component={RunViewChartTooltipBody}>\n          <RunsChartsDraggableCardsGridContextProvider visibleChartCards={visibleChartCards}>\n            <RunsChartsSectionAccordion\n              compareRunSections={compareRunSections}\n              compareRunCharts={visibleChartCards}\n              reorderCharts={reorderCharts}\n              insertCharts={insertCharts}\n              chartData={chartData}\n              startEditChart={startEditChart}\n              removeChart={removeChart}\n              addNewChartCard={addNewChartCard}\n              search={chartsSearchFilter ?? ''}\n              supportedChartTypes={[RunsChartType.LINE, RunsChartType.BAR, RunsChartType.IMAGE]}\n              setFullScreenChart={setFullScreenChart}\n              autoRefreshEnabled={autoRefreshEnabled}\n              globalLineChartConfig={chartUIState.globalLineChartConfig}\n              groupBy={null}\n            />\n          </RunsChartsDraggableCardsGridContextProvider>\n        </RunsChartsTooltipWrapper>\n      </div>\n      {configuredCardConfig && (\n        <RunsChartsConfigureModal\n          chartRunData={chartData}\n          metricKeyList={metricKeys}\n          paramKeyList={[]}\n          config={configuredCardConfig}\n          onSubmit={submitForm}\n          onCancel={() => setConfiguredCardConfig(null)}\n          groupBy={null}\n          supportedChartTypes={[RunsChartType.LINE, RunsChartType.BAR, RunsChartType.IMAGE]}\n          globalLineChartConfig={chartUIState.globalLineChartConfig}\n        />\n      )}\n      <RunsChartsFullScreenModal\n        fullScreenChart={fullScreenChart}\n        onCancel={() => setFullScreenChart(undefined)}\n        chartData={chartData}\n        tooltipContextValue={tooltipContextValue}\n        tooltipComponent={RunViewChartTooltipBody}\n        autoRefreshEnabled={autoRefreshEnabled}\n        groupBy={null}\n      />\n    </div>\n  );\n};\n\nexport const RunViewMetricCharts = (props: RunViewMetricChartsProps) => {\n  const persistenceIdentifier = `${props.runInfo.runUuid}-${props.mode}`;\n\n  const localStore = useMemo(\n    () => LocalStorageUtils.getStoreForComponent('RunPage', persistenceIdentifier),\n    [persistenceIdentifier],\n  );\n\n  const [chartUIState, updateChartsUIState] = useState<ExperimentRunsChartsUIConfiguration>(() => {\n    const defaultChartState: ExperimentRunsChartsUIConfiguration = {\n      isAccordionReordered: false,\n      compareRunCharts: undefined,\n      compareRunSections: undefined,\n      // Auto-refresh is enabled by default only if the flag is set\n      autoRefreshEnabled: shouldEnableRunDetailsPageAutoRefresh(),\n      globalLineChartConfig: {\n        xAxisKey: RunsChartsLineChartXAxisType.STEP,\n        lineSmoothness: 0,\n        selectedXAxisMetricKey: '',\n      },\n    };\n    try {\n      const persistedChartState = localStore.getItem('chartUIState');\n\n      if (!persistedChartState) {\n        return defaultChartState;\n      }\n      return JSON.parse(persistedChartState);\n    } catch {\n      return defaultChartState;\n    }\n  });\n\n  useEffect(() => {\n    localStore.setItem('chartUIState', JSON.stringify(chartUIState));\n  }, [chartUIState, localStore]);\n\n  return (\n    <RunsChartsUIConfigurationContextProvider updateChartsUIState={updateChartsUIState}>\n      <RunViewMetricChartsImpl {...props} chartUIState={chartUIState} updateChartsUIState={updateChartsUIState} />\n    </RunsChartsUIConfigurationContextProvider>\n  );\n};\n\nconst RunViewMetricChartsSkeleton = ({ className }: { className?: string }) => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div\n      css={{\n        flex: 1,\n        display: 'grid',\n        gridTemplateColumns: '1fr 1fr 1fr',\n        gridTemplateRows: '200px',\n        gap: theme.spacing.md,\n      }}\n      className={className}\n    >\n      {new Array(6).fill(null).map((_, index) => (\n        <TableSkeleton key={index} lines={5} seed={index.toString()} />\n      ))}\n    </div>\n  );\n};\n","import { useMemo } from 'react';\nimport { useGetLoggedModelsQuery } from '../../../hooks/logged-models/useGetLoggedModelsQuery';\nimport { UseGetRunQueryResponseInputs, UseGetRunQueryResponseOutputs } from '../../run-page/hooks/useGetRunQuery';\nimport { compact, isEmpty, uniq } from 'lodash';\n\nexport const useLoggedModelsForExperimentRunV2 = ({\n  runInputs,\n  runOutputs,\n  enabled = true,\n}: {\n  runInputs?: UseGetRunQueryResponseInputs;\n  runOutputs?: UseGetRunQueryResponseOutputs;\n  enabled?: boolean;\n}) => {\n  const modelIds = useMemo(() => {\n    const inputs = runInputs?.modelInputs ?? [];\n    const outputs = runOutputs?.modelOutputs ?? [];\n    const allModels = [...inputs, ...outputs];\n    const modelIds = uniq(compact(allModels.map(({ modelId }) => modelId)));\n\n    if (isEmpty(modelIds)) {\n      return undefined;\n    }\n\n    return modelIds;\n  }, [runInputs, runOutputs]);\n\n  const isHookEnabled = enabled && !isEmpty(modelIds);\n\n  const {\n    data: loggedModelsData,\n    isLoading,\n    error,\n  } = useGetLoggedModelsQuery(\n    {\n      modelIds,\n    },\n    {\n      enabled: isHookEnabled,\n    },\n  );\n\n  return { models: loggedModelsData, isLoading: isHookEnabled && isLoading, error };\n};\n","import { useCallback } from 'react';\nimport { useSearchParams } from '@mlflow/mlflow/src/common/utils/RoutingUtils';\n\nconst QUERY_PARAM_KEY = 'compareToRunUuid';\n\n/**\n * Query param-powered hook that returns the compare to run uuid when comparison is enabled.\n */\nexport const useCompareToRunUuid = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const compareToRunUuid = searchParams.get(QUERY_PARAM_KEY) ?? undefined;\n\n  const setCompareToRunUuid = useCallback(\n    (compareToRunId: string | undefined) => {\n      setSearchParams((params) => {\n        if (compareToRunId === undefined) {\n          params.delete(QUERY_PARAM_KEY);\n          return params;\n        }\n        params.set(QUERY_PARAM_KEY, compareToRunId);\n        return params;\n      });\n    },\n    [setSearchParams],\n  );\n\n  return [compareToRunUuid, setCompareToRunUuid] as const;\n};\n","import {\n  Typography,\n  useDesignSystemTheme,\n  DialogCombobox,\n  DialogComboboxContent,\n  DialogComboboxOptionList,\n  DialogComboboxOptionListSelectItem,\n  DialogComboboxCustomButtonTriggerWrapper,\n  Button,\n  ChevronDownIcon,\n  XCircleFillIcon,\n} from '@databricks/design-system';\nimport { useCallback, useMemo } from 'react';\nimport { useGetExperimentRunColor } from '../experiment-page/hooks/useExperimentRunColor';\nimport { useIntl } from '@databricks/i18n';\nimport Routes from '../../routes';\nimport {\n  useGenAiExperimentRunsForComparison,\n  COMPARE_TO_RUN_DROPDOWN_COMPONENT_ID,\n} from '@databricks/web-shared/genai-traces-table';\nimport { RunColorPill } from '../experiment-page/components/RunColorPill';\n\nexport const EvaluationRunCompareSelector = ({\n  experimentId,\n  currentRunUuid,\n  setCompareToRunUuid,\n  compareToRunUuid,\n  setCurrentRunUuid: setCurrentRunUuidProp,\n}: {\n  experimentId: string;\n  currentRunUuid?: string;\n  setCompareToRunUuid?: (runUuid: string | undefined) => void;\n  compareToRunUuid?: string;\n  // used in evaluation runs tab\n  setCurrentRunUuid?: (runUuid: string) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const intl = useIntl();\n  const getRunColor = useGetExperimentRunColor();\n\n  const { runInfos: experimentRunInfos } = useGenAiExperimentRunsForComparison(experimentId);\n\n  const currentRunOptions = useMemo(() => {\n    if (!experimentRunInfos) return undefined;\n    return experimentRunInfos\n      .map((runInfo) => ({\n        key: runInfo.runUuid,\n        value: runInfo.runName ?? runInfo.runUuid,\n      }))\n      .filter((result) => result.key) as {\n      key: string;\n      value: string;\n    }[];\n  }, [experimentRunInfos]);\n\n  const compareToRunOptions = useMemo(() => {\n    if (!experimentRunInfos) return undefined;\n    return experimentRunInfos\n      .filter((runInfo) => runInfo.runUuid !== currentRunUuid)\n      .map((runInfo) => ({\n        key: runInfo.runUuid,\n        value: runInfo.runName ?? runInfo.runUuid,\n      }))\n      .filter((result) => Boolean(result.key)) as {\n      key: string;\n      value: string;\n    }[];\n  }, [experimentRunInfos, currentRunUuid]);\n\n  const currentRunInfo = experimentRunInfos?.find((runInfo) => runInfo.runUuid === currentRunUuid);\n  const compareToRunInfo = experimentRunInfos?.find((runInfo) => runInfo.runUuid === compareToRunUuid);\n\n  const defaultSetCurrentRunUuid = useCallback(\n    (runUuid: string) => {\n      const link = Routes.getRunPageRoute(experimentId, runUuid) + '/evaluations';\n      // Propagate all the current URL query params.\n      const currentParams = new URLSearchParams(window.location.search);\n\n      const newUrl = new URL(link, window.location.origin);\n      currentParams.forEach((value, key) => {\n        newUrl.searchParams.set(key, value);\n      });\n\n      window.location.href = newUrl.toString();\n    },\n    [experimentId],\n  );\n\n  const setCurrentRunUuid = setCurrentRunUuidProp ?? defaultSetCurrentRunUuid;\n\n  if (!currentRunUuid) {\n    return <></>;\n  }\n\n  return (\n    <div\n      css={{\n        display: 'flex',\n        gap: theme.spacing.sm,\n        alignItems: 'center',\n      }}\n    >\n      <div\n        css={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'flex-start',\n          gap: theme.spacing.sm,\n        }}\n      >\n        <DialogCombobox\n          componentId={COMPARE_TO_RUN_DROPDOWN_COMPONENT_ID}\n          id=\"compare-to-run-combobox\"\n          value={currentRunUuid ? [currentRunUuid] : undefined}\n        >\n          <DialogComboboxCustomButtonTriggerWrapper>\n            <Button\n              endIcon={<ChevronDownIcon />}\n              componentId=\"mlflow.evaluations_review.table_ui.compare_to_run_button\"\n              css={{\n                justifyContent: 'flex-start !important',\n              }}\n            >\n              <div\n                css={{\n                  display: 'flex',\n                  gap: theme.spacing.sm,\n                  alignItems: 'center',\n                  fontSize: `${theme.typography.fontSizeSm}px !important`,\n                }}\n              >\n                <RunColorPill color={getRunColor(currentRunUuid)} />\n                {currentRunInfo?.runName ? (\n                  <Typography.Hint>{currentRunInfo?.runName}</Typography.Hint>\n                ) : (\n                  // eslint-disable-next-line formatjs/enforce-description\n                  intl.formatMessage({ defaultMessage: 'Select baseline run' })\n                )}\n              </div>\n            </Button>\n          </DialogComboboxCustomButtonTriggerWrapper>\n          <DialogComboboxContent>\n            <DialogComboboxOptionList>\n              {(currentRunOptions || []).map((item, i) => (\n                <DialogComboboxOptionListSelectItem\n                  key={i}\n                  value={item.value}\n                  onChange={(e) => setCurrentRunUuid(item.key)}\n                  checked={item.key === currentRunUuid}\n                >\n                  <div\n                    css={{\n                      display: 'flex',\n                      gap: theme.spacing.sm,\n                      alignItems: 'center',\n                    }}\n                  >\n                    <RunColorPill color={getRunColor(item.key)} />\n                    {item.value}\n                  </div>\n                </DialogComboboxOptionListSelectItem>\n              ))}\n            </DialogComboboxOptionList>\n          </DialogComboboxContent>\n        </DialogCombobox>\n      </div>\n      <span css={{}}>\n        {intl.formatMessage({\n          defaultMessage: 'compare to',\n          description: 'Label for \"to\" in compare to, which is split between two dropdowns of two runs to compare',\n        })}\n      </span>\n      {setCompareToRunUuid && (\n        <div\n          css={{\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n          }}\n        >\n          <div\n            css={{\n              display: 'flex',\n              flexDirection: 'row',\n              alignItems: 'center',\n            }}\n          >\n            <DialogCombobox\n              componentId={COMPARE_TO_RUN_DROPDOWN_COMPONENT_ID}\n              id=\"compare-to-run-combobox\"\n              value={compareToRunUuid ? [compareToRunUuid] : undefined}\n            >\n              <DialogComboboxCustomButtonTriggerWrapper>\n                <Button\n                  endIcon={<ChevronDownIcon />}\n                  componentId=\"mlflow.evaluations_review.table_ui.compare_to_run_button\"\n                  css={{\n                    justifyContent: 'flex-start !important',\n                  }}\n                >\n                  <div\n                    css={{\n                      display: 'flex',\n                      gap: theme.spacing.sm,\n                      alignItems: 'center',\n                      fontSize: `${theme.typography.fontSizeSm}px !important`,\n                    }}\n                  >\n                    {compareToRunInfo?.runName ? (\n                      <>\n                        <RunColorPill color={getRunColor(compareToRunUuid)} />\n                        <Typography.Hint>{compareToRunInfo?.runName}</Typography.Hint>\n                      </>\n                    ) : (\n                      <span\n                        css={{\n                          color: theme.colors.textPlaceholder,\n                        }}\n                      >\n                        {/* eslint-disable-next-line formatjs/enforce-description */}\n                        {intl.formatMessage({ defaultMessage: 'baseline run' })}\n                      </span>\n                    )}\n                  </div>\n                </Button>\n              </DialogComboboxCustomButtonTriggerWrapper>\n              <DialogComboboxContent>\n                <DialogComboboxOptionList>\n                  {(compareToRunOptions || []).map((item, i) => (\n                    <DialogComboboxOptionListSelectItem\n                      key={i}\n                      value={item.value}\n                      onChange={(e) => setCompareToRunUuid(item.key)}\n                      checked={item.key === compareToRunUuid}\n                    >\n                      <div\n                        css={{\n                          display: 'flex',\n                          gap: theme.spacing.sm,\n                          alignItems: 'center',\n                        }}\n                      >\n                        <RunColorPill color={getRunColor(item.key)} />\n                        {item.value}\n                      </div>\n                    </DialogComboboxOptionListSelectItem>\n                  ))}\n                </DialogComboboxOptionList>\n              </DialogComboboxContent>\n            </DialogCombobox>\n            {compareToRunInfo?.runName && (\n              <XCircleFillIcon\n                aria-hidden=\"false\"\n                css={{\n                  color: theme.colors.textPlaceholder,\n                  fontSize: theme.typography.fontSizeSm,\n                  marginLeft: theme.spacing.sm,\n\n                  ':hover': {\n                    color: theme.colors.actionTertiaryTextHover,\n                  },\n                }}\n                role=\"button\"\n                onClick={() => {\n                  setCompareToRunUuid(undefined);\n                }}\n                onPointerDownCapture={(e) => {\n                  // Prevents the dropdown from opening when clearing\n                  e.stopPropagation();\n                }}\n              />\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import { intersection } from 'lodash';\nimport { KeyValueEntity } from '../../../../common/types';\nimport { extractLoggedTablesFromRunTags } from '../../../utils/ArtifactUtils';\nimport { GenAiTraceEvaluationArtifactFile } from '@databricks/web-shared/genai-traces-table';\nimport { useMemo } from 'react';\n\n/**\n * Returns the list of known evaluation table artifacts that are logged for a run based on its tags.\n */\nexport const useRunLoggedTraceTableArtifacts = (runTags?: Record<string, KeyValueEntity>) =>\n  useMemo(() => {\n    if (!runTags) {\n      return [];\n    }\n    return intersection(extractLoggedTablesFromRunTags(runTags), [\n      GenAiTraceEvaluationArtifactFile.Evaluations,\n      GenAiTraceEvaluationArtifactFile.Metrics,\n      GenAiTraceEvaluationArtifactFile.Assessments,\n    ]) as GenAiTraceEvaluationArtifactFile[];\n  }, [runTags]);\n","import { type ApolloError, type ApolloQueryResult, gql } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\nimport { useQuery } from '@mlflow/mlflow/src/common/utils/graphQLHooks';\nimport { first } from 'lodash';\nimport { SearchRuns } from '../../../../graphql/__generated__/graphql';\n\nconst SEARCH_RUNS_QUERY = gql`\n  query SearchRuns($data: MlflowSearchRunsInput!) {\n    mlflowSearchRuns(input: $data) {\n      apiError {\n        helpUrl\n        code\n        message\n      }\n      runs {\n        info {\n          runName\n          status\n          runUuid\n          experimentId\n          artifactUri\n          endTime\n          lifecycleStage\n          startTime\n          userId\n        }\n        experiment {\n          experimentId\n          name\n          tags {\n            key\n            value\n          }\n          artifactLocation\n          lifecycleStage\n          lastUpdateTime\n        }\n        data {\n          metrics {\n            key\n            value\n            step\n            timestamp\n          }\n          params {\n            key\n            value\n          }\n          tags {\n            key\n            value\n          }\n        }\n        inputs {\n          datasetInputs {\n            dataset {\n              digest\n              name\n              profile\n              schema\n              source\n              sourceType\n            }\n            tags {\n              key\n              value\n            }\n          }\n          modelInputs {\n            modelId\n          }\n        }\n        outputs {\n          modelOutputs {\n            modelId\n            step\n          }\n        }\n        modelVersions {\n          version\n          name\n          creationTimestamp\n          status\n          source\n        }\n      }\n    }\n  }\n`;\n\nexport type UseSearchRunsQueryResponseDataMetrics = NonNullable<\n  NonNullable<NonNullable<UseSearchRunsQueryDataResponseSingleRun>['data']>['metrics']\n>;\nexport type UseSearchRunsQueryDataResponseSingleRun = NonNullable<\n  NonNullable<SearchRuns['mlflowSearchRuns']>['runs']\n>[0];\nexport type UseSearchRunsQueryDataApiError = NonNullable<SearchRuns['mlflowSearchRuns']>['apiError'];\nexport type UseSearchRunsQueryResponse = {\n  data?: UseSearchRunsQueryDataResponseSingleRun;\n  loading: boolean;\n  apolloError?: ApolloError;\n  apiError?: UseSearchRunsQueryDataApiError;\n  refetchRun: () => Promise<ApolloQueryResult<SearchRuns>>;\n};\n\nexport const useSearchRunsQuery = ({\n  filter,\n  experimentIds,\n  disabled = false,\n}: {\n  filter?: string;\n  experimentIds: string[];\n  disabled?: boolean;\n}): UseSearchRunsQueryResponse => {\n  const {\n    data,\n    loading,\n    error: apolloError,\n    refetch,\n  } = useQuery<any, any>(SEARCH_RUNS_QUERY, {\n    variables: {\n      data: {\n        filter,\n        experimentIds,\n      },\n    },\n    skip: disabled,\n  });\n\n  return {\n    loading,\n    data: first(data?.mlflowSearchRuns?.runs ?? []),\n    refetchRun: refetch,\n    apolloError,\n    apiError: data?.mlflowSearchRuns?.apiError,\n  } as const;\n};\n","import { isNil } from 'lodash';\nimport { Empty, LegacySkeleton } from '@databricks/design-system';\nimport { FormattedMessage } from 'react-intl';\nimport { type KeyValueEntity } from '../../../common/types';\nimport { useDesignSystemTheme } from '@databricks/design-system';\nimport { useCompareToRunUuid } from './hooks/useCompareToRunUuid';\nimport Utils from '@mlflow/mlflow/src/common/utils/Utils';\nimport { EvaluationRunCompareSelector } from './EvaluationRunCompareSelector';\nimport { MlflowService } from '../../sdk/MlflowService';\nimport { ModelTrace } from '@databricks/web-shared/model-trace-explorer';\nimport {\n  EXECUTION_DURATION_COLUMN_ID,\n  GenAiTraceEvaluationArtifactFile,\n  GenAiTracesTable,\n  GenAiTracesMarkdownConverterProvider,\n  STATE_COLUMN_ID,\n  TAGS_COLUMN_ID,\n  TracesTableColumn,\n  TracesTableColumnType,\n  RunEvaluationTracesDataEntry,\n  useGenAiTraceEvaluationArtifacts,\n} from '@databricks/web-shared/genai-traces-table';\nimport { useMarkdownConverter } from '../../../common/utils/MarkdownUtils';\nimport { useSearchRunsQuery } from '../run-page/hooks/useSearchRunsQuery';\nimport { useRunLoggedTraceTableArtifacts } from './hooks/useRunLoggedTraceTableArtifacts';\n\nasync function getTrace(requestId?: string, traceId?: string): Promise<ModelTrace | undefined> {\n  const [traceInfo, traceData] = await Promise.all([\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    MlflowService.getExperimentTraceInfo(requestId!).then((response) => response.trace_info || {}),\n    // get-trace-artifact is only currently supported in mlflow 2.0 apis\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    MlflowService.getExperimentTraceData(requestId!),\n  ]);\n  return traceData\n    ? {\n        info: traceInfo,\n        data: traceData,\n      }\n    : undefined;\n}\n\nexport const RunViewEvaluationsTabArtifacts = ({\n  experimentId,\n  runUuid,\n  runTags,\n  runDisplayName,\n  data,\n}: {\n  experimentId: string;\n  runUuid: string;\n  runTags?: Record<string, KeyValueEntity>;\n  runDisplayName: string;\n  data: RunEvaluationTracesDataEntry[];\n}) => {\n  const { theme } = useDesignSystemTheme();\n\n  // Determine which tables are logged in the run\n  const traceTablesLoggedInRun = useRunLoggedTraceTableArtifacts(runTags);\n\n  const noEvaluationTablesLogged = data?.length === 0;\n\n  const [compareToRunUuid, setCompareToRunUuid] = useCompareToRunUuid();\n\n  const makeHtmlFromMarkdown = useMarkdownConverter();\n\n  const {\n    data: compareToRunData,\n    displayName: compareToRunDisplayName,\n    loading: compareToRunLoading,\n  } = useGetCompareToDataWithArtifacts(experimentId, compareToRunUuid, traceTablesLoggedInRun);\n\n  if (compareToRunLoading) {\n    // TODO: Implement proper skeleton for this page\n    return <LegacySkeleton />;\n  }\n\n  const initialSelectedColumns = (allColumns: TracesTableColumn[]) => {\n    return allColumns.filter(\n      (col) =>\n        col.type === TracesTableColumnType.ASSESSMENT ||\n        col.type === TracesTableColumnType.INPUT ||\n        (col.type === TracesTableColumnType.TRACE_INFO &&\n          [EXECUTION_DURATION_COLUMN_ID, STATE_COLUMN_ID, TAGS_COLUMN_ID].includes(col.id)),\n    );\n  };\n\n  /**\n   * Determine whether to render the component from the shared codebase (GenAiTracesTable)\n   * or the legacy one from the local codebase (EvaluationsOverview).\n   */\n  const getOverviewTableComponent = () => {\n    const componentProps = {\n      experimentId,\n      currentRunDisplayName: runDisplayName,\n      currentEvaluationResults: data || [],\n      compareToEvaluationResults: compareToRunData,\n      runUuid,\n      compareToRunUuid,\n      compareToRunDisplayName,\n      compareToRunLoading,\n      getTrace,\n      initialSelectedColumns,\n    } as const;\n    return (\n      <GenAiTracesMarkdownConverterProvider makeHtml={makeHtmlFromMarkdown}>\n        <GenAiTracesTable {...componentProps} />\n      </GenAiTracesMarkdownConverterProvider>\n    );\n  };\n\n  if (noEvaluationTablesLogged) {\n    return (\n      <div css={{ flex: 1, display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n        <Empty\n          title={\n            <FormattedMessage\n              defaultMessage=\"No evaluation tables logged\"\n              description=\"Run page > Evaluations tab > No evaluation tables logged\"\n            />\n          }\n          description={null}\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div\n      css={{\n        marginTop: theme.spacing.sm,\n        width: '100%',\n        overflowY: 'hidden',\n      }}\n    >\n      <div\n        css={{\n          width: '100%',\n          padding: `${theme.spacing.xs}px 0`,\n        }}\n      >\n        <EvaluationRunCompareSelector\n          experimentId={experimentId}\n          currentRunUuid={runUuid}\n          compareToRunUuid={compareToRunUuid}\n          setCompareToRunUuid={setCompareToRunUuid}\n        />\n      </div>\n      {getOverviewTableComponent()}\n    </div>\n  );\n};\n\nconst useGetCompareToDataWithArtifacts = (\n  experimentId: string,\n  compareToRunUuid: string | undefined,\n  traceTablesLoggedInRun: GenAiTraceEvaluationArtifactFile[],\n): {\n  data: RunEvaluationTracesDataEntry[] | undefined;\n  displayName: string;\n  loading: boolean;\n} => {\n  const { data, isLoading: loading } = useGenAiTraceEvaluationArtifacts(\n    {\n      runUuid: compareToRunUuid || '',\n      artifacts: traceTablesLoggedInRun,\n    },\n    { disabled: isNil(compareToRunUuid) },\n  );\n\n  const { data: runData, loading: runDetailsLoading } = useSearchRunsQuery({\n    experimentIds: [experimentId],\n    filter: `attributes.runId = \"${compareToRunUuid}\"`,\n    disabled: isNil(compareToRunUuid),\n  });\n\n  return {\n    data,\n    displayName: Utils.getRunDisplayName(runData?.info, compareToRunUuid),\n    loading: loading || runDetailsLoading,\n  };\n};\n","import { isNil } from 'lodash';\nimport { ParagraphSkeleton } from '@databricks/design-system';\nimport { type KeyValueEntity } from '../../../common/types';\nimport { useDesignSystemTheme } from '@databricks/design-system';\nimport { useCompareToRunUuid } from './hooks/useCompareToRunUuid';\nimport Utils from '@mlflow/mlflow/src/common/utils/Utils';\nimport { EvaluationRunCompareSelector } from './EvaluationRunCompareSelector';\nimport { MlflowService } from '../../sdk/MlflowService';\nimport { ModelTrace } from '@databricks/web-shared/model-trace-explorer';\nimport { getEvalTabTotalTracesLimit } from '@mlflow/mlflow/src/common/utils/FeatureUtils';\nimport {\n  EXECUTION_DURATION_COLUMN_ID,\n  GenAiTracesMarkdownConverterProvider,\n  RUN_EVALUATION_RESULTS_TAB_COMPARE_RUNS,\n  RUN_EVALUATION_RESULTS_TAB_SINGLE_RUN,\n  getTracesTagKeys,\n  STATE_COLUMN_ID,\n  RESPONSE_COLUMN_ID,\n  TracesTableColumn,\n  TracesTableColumnType,\n  useMlflowTracesTableMetadata,\n  useSelectedColumns,\n  useSearchMlflowTraces,\n  TraceActions,\n  GenAITracesTableToolbar,\n  GenAITracesTableProvider,\n  GenAITracesTableBodyContainer,\n  TraceInfoV3,\n  useGenAiTraceEvaluationArtifacts,\n  useFilters,\n  useTableSort,\n  TOKENS_COLUMN_ID,\n  invalidateMlflowSearchTracesCache,\n} from '@databricks/web-shared/genai-traces-table';\nimport { useRunLoggedTraceTableArtifacts } from './hooks/useRunLoggedTraceTableArtifacts';\nimport { useMarkdownConverter } from '../../../common/utils/MarkdownUtils';\nimport { useSearchRunsQuery } from '../run-page/hooks/useSearchRunsQuery';\nimport { useEditExperimentTraceTags } from '../traces/hooks/useEditExperimentTraceTags';\nimport { useCallback, useMemo, useState } from 'react';\nimport { useDeleteTracesMutation } from './hooks/useDeleteTraces';\nimport { RunViewEvaluationsTabArtifacts } from './RunViewEvaluationsTabArtifacts';\nimport { useGetExperimentRunColor } from '../experiment-page/hooks/useExperimentRunColor';\nimport { useQueryClient } from '@databricks/web-shared/query-client';\n\nasync function getTrace(requestId?: string, traceId?: string): Promise<ModelTrace | undefined> {\n  const [traceInfo, traceData] = await Promise.all([\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    MlflowService.getExperimentTraceInfoV3(requestId!).then((response) => response.trace?.trace_info || {}),\n    // get-trace-artifact is only currently supported in mlflow 2.0 apis\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    MlflowService.getExperimentTraceData(requestId!),\n  ]);\n  return traceData\n    ? {\n        info: traceInfo,\n        data: traceData,\n      }\n    : undefined;\n}\n\nconst RunViewEvaluationsTabInner = ({\n  experimentId,\n  runUuid,\n  runTags,\n  runDisplayName,\n  setCurrentRunUuid,\n}: {\n  experimentId: string;\n  runUuid: string;\n  runTags?: Record<string, KeyValueEntity>;\n  runDisplayName: string;\n  setCurrentRunUuid?: (runUuid: string) => void;\n}) => {\n  const { theme } = useDesignSystemTheme();\n  const makeHtmlFromMarkdown = useMarkdownConverter();\n\n  const [compareToRunUuid, setCompareToRunUuid] = useCompareToRunUuid();\n\n  // Get table metadata\n  const {\n    assessmentInfos,\n    allColumns,\n    totalCount,\n    isLoading: isTableMetadataLoading,\n    error: tableMetadataError,\n    tableFilterOptions,\n  } = useMlflowTracesTableMetadata({\n    experimentId,\n    runUuid,\n    otherRunUuid: compareToRunUuid,\n  });\n\n  // Setup table states\n  const [searchQuery, setSearchQuery] = useState<string>('');\n  const [filters, setFilters] = useFilters();\n  const getRunColor = useGetExperimentRunColor();\n  const queryClient = useQueryClient();\n\n  const defaultSelectedColumns = useCallback((columns: TracesTableColumn[]) => {\n    return columns.filter(\n      (col) =>\n        col.type === TracesTableColumnType.ASSESSMENT ||\n        col.type === TracesTableColumnType.INPUT ||\n        (col.type === TracesTableColumnType.TRACE_INFO &&\n          [EXECUTION_DURATION_COLUMN_ID, RESPONSE_COLUMN_ID, STATE_COLUMN_ID, TOKENS_COLUMN_ID].includes(col.id)),\n    );\n  }, []);\n\n  const { selectedColumns, toggleColumns, setSelectedColumns } = useSelectedColumns(\n    experimentId,\n    allColumns,\n    defaultSelectedColumns,\n    runUuid,\n  );\n\n  const [tableSort, setTableSort] = useTableSort(selectedColumns);\n\n  // Get traces data\n  const {\n    data: traceInfos,\n    isLoading: traceInfosLoading,\n    error: traceInfosError,\n    refetchMlflowTraces,\n  } = useSearchMlflowTraces({\n    experimentId,\n    currentRunDisplayName: runDisplayName,\n    searchQuery,\n    filters,\n    runUuid,\n    tableSort,\n  });\n\n  const deleteTracesMutation = useDeleteTracesMutation();\n\n  const {\n    data: compareToRunData,\n    displayName: compareToRunDisplayName,\n    loading: compareToRunLoading,\n  } = useGetCompareToData(experimentId, compareToRunUuid);\n\n  const countInfo = useMemo(() => {\n    return {\n      currentCount: traceInfos?.length,\n      logCountLoading: traceInfosLoading,\n      totalCount: totalCount,\n      maxAllowedCount: getEvalTabTotalTracesLimit(),\n    };\n  }, [traceInfos, traceInfosLoading, totalCount]);\n\n  // TODO: We should update this to use web-shared/unified-tagging components for the\n  // tag editor and react-query mutations for the apis.\n  const { showEditTagsModalForTrace, EditTagsModal } = useEditExperimentTraceTags({\n    onSuccess: () => invalidateMlflowSearchTracesCache({ queryClient }),\n    existingTagKeys: getTracesTagKeys(traceInfos || []),\n    useV3Apis: true,\n  });\n\n  const traceActions: TraceActions = useMemo(() => {\n    return {\n      deleteTracesAction: {\n        deleteTraces: (experimentId: string, traceIds: string[]) =>\n          deleteTracesMutation.mutateAsync({ experimentId, traceRequestIds: traceIds }),\n      },\n      exportToEvals: {\n        exportToEvalsInstanceEnabled: true,\n        getTrace,\n      },\n      editTags: {\n        showEditTagsModalForTrace,\n        EditTagsModal,\n      },\n    };\n  }, [deleteTracesMutation, showEditTagsModalForTrace, EditTagsModal]);\n\n  const isTableLoading = traceInfosLoading || compareToRunLoading;\n\n  if (isTableMetadataLoading) {\n    return <LoadingSkeleton />;\n  }\n\n  if (tableMetadataError) {\n    return (\n      <div>\n        <pre>{String(tableMetadataError)}</pre>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      css={{\n        marginTop: theme.spacing.sm,\n        width: '100%',\n        overflowY: 'hidden',\n      }}\n    >\n      <div\n        css={{\n          width: '100%',\n          padding: `${theme.spacing.xs}px 0`,\n        }}\n      >\n        <EvaluationRunCompareSelector\n          experimentId={experimentId}\n          currentRunUuid={runUuid}\n          compareToRunUuid={compareToRunUuid}\n          setCompareToRunUuid={setCompareToRunUuid}\n          setCurrentRunUuid={setCurrentRunUuid}\n        />\n      </div>\n      <GenAITracesTableProvider>\n        <div\n          css={{\n            overflowY: 'hidden',\n            height: '100%',\n            display: 'flex',\n            flexDirection: 'column',\n          }}\n        >\n          <GenAITracesTableToolbar\n            experimentId={experimentId}\n            searchQuery={searchQuery}\n            setSearchQuery={setSearchQuery}\n            filters={filters}\n            setFilters={setFilters}\n            assessmentInfos={assessmentInfos}\n            countInfo={countInfo}\n            traceActions={traceActions}\n            tableSort={tableSort}\n            setTableSort={setTableSort}\n            allColumns={allColumns}\n            selectedColumns={selectedColumns}\n            setSelectedColumns={setSelectedColumns}\n            toggleColumns={toggleColumns}\n            traceInfos={traceInfos}\n            tableFilterOptions={tableFilterOptions}\n          />\n          {isTableLoading ? (\n            <LoadingSkeleton />\n          ) : traceInfosError ? (\n            <div>\n              <pre>{String(traceInfosError)}</pre>\n            </div>\n          ) : (\n            <GenAiTracesMarkdownConverterProvider makeHtml={makeHtmlFromMarkdown}>\n              <GenAITracesTableBodyContainer\n                experimentId={experimentId}\n                currentRunDisplayName={runDisplayName}\n                compareToRunDisplayName={compareToRunDisplayName}\n                compareToRunUuid={compareToRunUuid}\n                getTrace={getTrace}\n                getRunColor={getRunColor}\n                assessmentInfos={assessmentInfos}\n                setFilters={setFilters}\n                filters={filters}\n                selectedColumns={selectedColumns}\n                allColumns={allColumns}\n                tableSort={tableSort}\n                currentTraceInfoV3={traceInfos || []}\n                compareToTraceInfoV3={compareToRunData}\n                onTraceTagsEdit={showEditTagsModalForTrace}\n              />\n            </GenAiTracesMarkdownConverterProvider>\n          )}\n          {EditTagsModal}\n        </div>\n      </GenAITracesTableProvider>\n    </div>\n  );\n};\n\nexport const RunViewEvaluationsTab = ({\n  experimentId,\n  runUuid,\n  runTags,\n  runDisplayName,\n  setCurrentRunUuid,\n}: {\n  experimentId: string;\n  runUuid: string;\n  runTags?: Record<string, KeyValueEntity>;\n  runDisplayName: string;\n  // used in evaluation runs tab\n  setCurrentRunUuid?: (runUuid: string) => void;\n}) => {\n  // Determine which tables are logged in the run\n  const traceTablesLoggedInRun = useRunLoggedTraceTableArtifacts(runTags);\n  const isArtifactCallEnabled = Boolean(runUuid);\n\n  const { data: artifactData, isLoading: isArtifactLoading } = useGenAiTraceEvaluationArtifacts(\n    {\n      runUuid: runUuid || '',\n      ...{ artifacts: traceTablesLoggedInRun ? traceTablesLoggedInRun : undefined },\n    },\n    { disabled: !isArtifactCallEnabled },\n  );\n\n  if (isArtifactLoading) {\n    return <LoadingSkeleton />;\n  }\n\n  if (!isNil(artifactData) && artifactData.length > 0) {\n    return (\n      <RunViewEvaluationsTabArtifacts\n        experimentId={experimentId}\n        runUuid={runUuid}\n        runDisplayName={runDisplayName}\n        data={artifactData}\n        runTags={runTags}\n      />\n    );\n  }\n\n  return (\n    <RunViewEvaluationsTabInner\n      experimentId={experimentId}\n      runUuid={runUuid}\n      runDisplayName={runDisplayName}\n      setCurrentRunUuid={setCurrentRunUuid}\n    />\n  );\n};\n\nconst LoadingSkeleton = () => {\n  const { theme } = useDesignSystemTheme();\n  return (\n    <div css={{ display: 'block', marginTop: theme.spacing.md, height: '100%', width: '100%' }}>\n      {[...Array(10).keys()].map((i) => (\n        <ParagraphSkeleton label=\"Loading...\" key={i} seed={`s-${i}`} />\n      ))}\n    </div>\n  );\n};\n\nconst useGetCompareToData = (\n  experimentId: string,\n  compareToRunUuid: string | undefined,\n): {\n  data: TraceInfoV3[] | undefined;\n  displayName: string;\n  loading: boolean;\n} => {\n  const { data: traceInfos, isLoading: traceInfosLoading } = useSearchMlflowTraces({\n    experimentId,\n    currentRunDisplayName: undefined,\n    runUuid: compareToRunUuid,\n    disabled: isNil(compareToRunUuid),\n  });\n\n  const { data: runData, loading: runDetailsLoading } = useSearchRunsQuery({\n    experimentIds: [experimentId],\n    filter: `attributes.runId = \"${compareToRunUuid}\"`,\n    disabled: isNil(compareToRunUuid),\n  });\n\n  return {\n    data: traceInfos,\n    displayName: Utils.getRunDisplayName(runData?.info, compareToRunUuid),\n    loading: traceInfosLoading || runDetailsLoading,\n  };\n};\n","import { DangerIcon, Empty, ParagraphSkeleton, TitleSkeleton, useDesignSystemTheme } from '@databricks/design-system';\nimport { useSelector } from 'react-redux';\nimport invariant from 'invariant';\nimport { useMemo, useState } from 'react';\n\nimport { PageContainer } from '../../../common/components/PageContainer';\nimport { useNavigate, useParams } from '../../../common/utils/RoutingUtils';\nimport Utils from '../../../common/utils/Utils';\nimport { RunPageTabName } from '../../constants';\nimport { RenameRunModal } from '../modals/RenameRunModal';\nimport { RunViewArtifactTab } from './RunViewArtifactTab';\nimport { RunViewHeader } from './RunViewHeader';\nimport { RunViewOverview } from './RunViewOverview';\nimport { useRunDetailsPageData } from './hooks/useRunDetailsPageData';\nimport { useRunViewActiveTab } from './useRunViewActiveTab';\nimport { ReduxState } from '../../../redux-types';\nimport { ErrorWrapper } from '../../../common/utils/ErrorWrapper';\nimport { RunNotFoundView } from '../RunNotFoundView';\nimport { ErrorCodes } from '../../../common/constants';\nimport NotFoundPage from '../NotFoundPage';\nimport { FormattedMessage } from 'react-intl';\nimport { isSystemMetricKey } from '../../utils/MetricsUtils';\nimport DeleteRunModal from '../modals/DeleteRunModal';\nimport Routes from '../../routes';\nimport { RunViewMetricCharts } from './RunViewMetricCharts';\nimport {\n  shouldEnableGraphQLRunDetailsPage,\n  shouldUseGetLoggedModelsBatchAPI,\n} from '@mlflow/mlflow/src/common/utils/FeatureUtils';\nimport { useMediaQuery } from '@databricks/web-shared/hooks';\nimport { RunViewTracesTab } from './RunViewTracesTab';\nimport { getGraphQLErrorMessage } from '../../../graphql/get-graphql-error';\nimport { useLoggedModelsForExperimentRun } from '../experiment-page/hooks/useLoggedModelsForExperimentRun';\nimport { useLoggedModelsForExperimentRunV2 } from '../experiment-page/hooks/useLoggedModelsForExperimentRunV2';\nimport { RunViewEvaluationsTab } from '../evaluations/RunViewEvaluationsTab';\n\nconst RunPageLoadingState = () => (\n  <PageContainer>\n    <TitleSkeleton\n      loading\n      label={<FormattedMessage defaultMessage=\"Run page loading\" description=\"Run page > Loading state\" />}\n    />\n    {[...Array(3).keys()].map((i) => (\n      <ParagraphSkeleton key={i} seed={`s-${i}`} />\n    ))}\n  </PageContainer>\n);\n\nexport const RunPage = () => {\n  const { runUuid, experimentId } = useParams<{\n    runUuid: string;\n    experimentId: string;\n  }>();\n  const navigate = useNavigate();\n  const { theme } = useDesignSystemTheme();\n  const [renameModalVisible, setRenameModalVisible] = useState(false);\n  const [deleteModalVisible, setDeleteModalVisible] = useState(false);\n\n  invariant(runUuid, '[RunPage] Run UUID route param not provided');\n  invariant(experimentId, '[RunPage] Experiment ID route param not provided');\n\n  const {\n    experiment,\n    error,\n    latestMetrics,\n    loading,\n    params,\n    refetchRun,\n    runInfo,\n    tags,\n    experimentFetchError,\n    runFetchError,\n    apiError,\n    datasets,\n    runInputs,\n    runOutputs,\n    registeredModelVersionSummaries,\n  } = useRunDetailsPageData({\n    experimentId,\n    runUuid,\n  });\n\n  const [modelMetricKeys, systemMetricKeys] = useMemo<[string[], string[]]>(() => {\n    if (!latestMetrics) {\n      return [[], []];\n    }\n\n    return [\n      Object.keys(latestMetrics).filter((metricKey) => !isSystemMetricKey(metricKey)),\n      Object.keys(latestMetrics).filter((metricKey) => isSystemMetricKey(metricKey)),\n    ];\n  }, [latestMetrics]);\n\n  const { comparedExperimentIds = [], hasComparedExperimentsBefore = false } = useSelector(\n    (state: ReduxState) => state.comparedExperiments || {},\n  );\n\n  const activeTab = useRunViewActiveTab();\n\n  const isUsingGetLoggedModelsApi = shouldUseGetLoggedModelsBatchAPI();\n\n  const loggedModelsForRun = useLoggedModelsForExperimentRun(\n    experimentId,\n    runUuid,\n    runInputs,\n    runOutputs,\n    !isUsingGetLoggedModelsApi,\n  );\n  const loggedModelsForRunV2 = useLoggedModelsForExperimentRunV2({\n    runInputs,\n    runOutputs,\n    enabled: isUsingGetLoggedModelsApi,\n  });\n\n  const {\n    error: loggedModelsError,\n    isLoading: isLoadingLoggedModels,\n    models: loggedModelsV3,\n  } = isUsingGetLoggedModelsApi ? loggedModelsForRunV2 : loggedModelsForRun;\n\n  const renderActiveTab = () => {\n    if (!runInfo) {\n      return null;\n    }\n    switch (activeTab) {\n      case RunPageTabName.MODEL_METRIC_CHARTS:\n        return (\n          <RunViewMetricCharts\n            key=\"model\"\n            mode=\"model\"\n            metricKeys={modelMetricKeys}\n            runInfo={runInfo}\n            latestMetrics={latestMetrics}\n            tags={tags}\n            params={params}\n          />\n        );\n\n      case RunPageTabName.SYSTEM_METRIC_CHARTS:\n        return (\n          <RunViewMetricCharts\n            key=\"system\"\n            mode=\"system\"\n            metricKeys={systemMetricKeys}\n            runInfo={runInfo}\n            latestMetrics={latestMetrics}\n            tags={tags}\n            params={params}\n          />\n        );\n      case RunPageTabName.ARTIFACTS:\n        return (\n          <RunViewArtifactTab\n            runUuid={runUuid}\n            runTags={tags}\n            runOutputs={runOutputs}\n            experimentId={experimentId}\n            artifactUri={runInfo.artifactUri ?? undefined}\n          />\n        );\n      case RunPageTabName.TRACES:\n        return (\n          <RunViewEvaluationsTab\n            runUuid={runUuid}\n            runTags={tags}\n            experimentId={experimentId}\n            runDisplayName={Utils.getRunDisplayName(runInfo, runUuid)}\n          />\n        );\n    }\n\n    return (\n      <RunViewOverview\n        runInfo={runInfo}\n        tags={tags}\n        params={params}\n        latestMetrics={latestMetrics}\n        runUuid={runUuid}\n        onRunDataUpdated={refetchRun}\n        runInputs={runInputs}\n        runOutputs={runOutputs}\n        datasets={datasets}\n        registeredModelVersionSummaries={registeredModelVersionSummaries}\n        loggedModelsV3={loggedModelsV3}\n        isLoadingLoggedModels={isLoadingLoggedModels}\n        loggedModelsError={loggedModelsError ?? undefined}\n      />\n    );\n  };\n\n  // Use full height page with scrollable tab area only for non-xs screens\n  const useFullHeightPage = useMediaQuery(`(min-width: ${theme.responsive.breakpoints.sm}px)`);\n\n  const initialLoading = loading && (!runInfo || !experiment);\n\n  // Handle \"run not found\" error\n  if (\n    // For REST API:\n    (runFetchError instanceof ErrorWrapper && runFetchError.getErrorCode() === ErrorCodes.RESOURCE_DOES_NOT_EXIST) ||\n    // For GraphQL:\n    apiError?.code === ErrorCodes.RESOURCE_DOES_NOT_EXIST ||\n    (error && getGraphQLErrorMessage(error).match(/not found$/))\n  ) {\n    return <RunNotFoundView runId={runUuid} />;\n  }\n\n  // Handle experiment not found error\n  if (\n    experimentFetchError instanceof ErrorWrapper &&\n    experimentFetchError.getErrorCode() === ErrorCodes.RESOURCE_DOES_NOT_EXIST\n  ) {\n    return <NotFoundPage />;\n  }\n\n  // Catch-all for legacy REST API errors\n  if (runFetchError || experimentFetchError) {\n    return null;\n  }\n\n  // Catch-all for GraphQL errors\n  if (shouldEnableGraphQLRunDetailsPage() && (error || apiError)) {\n    return (\n      <div css={{ marginTop: theme.spacing.lg }}>\n        <Empty\n          title={\n            <FormattedMessage\n              defaultMessage=\"Can't load run details\"\n              description=\"Run page > error loading page title\"\n            />\n          }\n          description={getGraphQLErrorMessage(apiError ?? error)}\n          image={<DangerIcon />}\n        />\n      </div>\n    );\n  }\n\n  // Display spinner/skeleton for the initial data load\n  if (initialLoading || !runInfo || !experiment) {\n    return <RunPageLoadingState />;\n  }\n\n  return (\n    <>\n      <PageContainer usesFullHeight={useFullHeightPage}>\n        {/* Header fixed on top */}\n        <RunViewHeader\n          comparedExperimentIds={comparedExperimentIds}\n          experiment={experiment}\n          handleRenameRunClick={() => setRenameModalVisible(true)}\n          handleDeleteRunClick={() => setDeleteModalVisible(true)}\n          hasComparedExperimentsBefore={hasComparedExperimentsBefore}\n          runDisplayName={Utils.getRunDisplayName(runInfo, runUuid)}\n          runTags={tags}\n          runParams={params}\n          runUuid={runUuid}\n          artifactRootUri={runInfo?.artifactUri ?? undefined}\n          registeredModelVersionSummaries={registeredModelVersionSummaries}\n          isLoading={loading || isLoadingLoggedModels}\n        />\n        {/* Scroll tab contents independently within own container */}\n        <div css={{ flex: 1, overflow: 'auto', marginBottom: theme.spacing.sm, display: 'flex' }}>\n          {renderActiveTab()}\n        </div>\n      </PageContainer>\n      <RenameRunModal\n        runUuid={runUuid}\n        onClose={() => setRenameModalVisible(false)}\n        runName={runInfo.runName ?? ''}\n        isOpen={renameModalVisible}\n        onSuccess={refetchRun}\n      />\n      <DeleteRunModal\n        selectedRunIds={[runUuid]}\n        onClose={() => setDeleteModalVisible(false)}\n        isOpen={deleteModalVisible}\n        onSuccess={() => {\n          navigate(Routes.getExperimentPageRoute(experimentId));\n        }}\n      />\n    </>\n  );\n};\n\nexport default RunPage;\n","import { useMemo } from 'react';\nimport { useSearchLoggedModelsQuery } from '../../../hooks/logged-models/useSearchLoggedModelsQuery';\nimport { UseGetRunQueryResponseInputs, UseGetRunQueryResponseOutputs } from '../../run-page/hooks/useGetRunQuery';\nimport { compact, isEmpty, uniq } from 'lodash';\n\nexport const useLoggedModelsForExperimentRun = (\n  experimentId: string,\n  runId: string,\n  runInputs?: UseGetRunQueryResponseInputs,\n  runOutputs?: UseGetRunQueryResponseOutputs,\n  enabled = true,\n) => {\n  const searchQuery = useMemo(() => {\n    const inputs = runInputs?.modelInputs ?? [];\n    const outputs = runOutputs?.modelOutputs ?? [];\n    const allModels = [...inputs, ...outputs];\n    const modelIds = uniq(compact(allModels.map(({ modelId }) => modelId)));\n\n    if (isEmpty(modelIds)) {\n      return undefined;\n    }\n\n    return `attributes.model_id IN (${modelIds.map((id) => `'${id}'`).join(',')})`;\n  }, [runInputs, runOutputs]);\n\n  const isHookEnabled = enabled && Boolean(searchQuery);\n\n  const {\n    data: loggedModelsData,\n    isLoading,\n    error,\n  } = useSearchLoggedModelsQuery(\n    { experimentIds: [experimentId], searchQuery },\n    {\n      enabled: isHookEnabled,\n    },\n  );\n\n  return {\n    // We explicitly check if the hook is supposed to be enabled before returning data,\n    // otherwise react-query might erroneously return data from the cache.\n    models: isHookEnabled ? loggedModelsData : undefined,\n    // Same goes for `isLoading` which sometimes returns `true` despite the hook being disabled.\n    isLoading: isHookEnabled && isLoading,\n    error,\n  };\n};\n"],"names":["PageContainer","props","usesFullHeight","restProps","_jsxs","PageWrapper","css","styles","useFullHeightLayout","wrapper","children","_jsx","Spacer","fixedSpacer","container","defaultProps","height","display","flexDirection","flexGrow","flex","flexShrink","width","paddingBottom","TagAssignmentRowContainer","theme","useDesignSystemTheme","_css","gap","spacing","sm","TagAssignmentContext","createContext","TagAssignmentContextProvider","Provider","value","useTagAssignmentContext","context","useContext","invariant","TagAssignmentRoot","formCtx","useFormContext","Component","form","FormProvider","TagAssignmentRow","stableChildren","React","toArray","length","parsedChildren","Array","fill","map","_","i","_stableChildren$i","style","general","heightSm","gridTemplateColumns","TagAssignmentLabel","Typography","Text","bold","_ref","name","TagAssignmentInput","forwardRef","errorMessage","otherProps","ref","Input","validationState","FormUI","Message","message","type","TagAssignmentKey","index","rules","render","keyProperty","getTagsValues","emptyValue","appendIfPossible","Controller","field","fieldState","formState","_fieldState$error","legacyChange","onChange","e","_tags$at","tags","at","shouldFocus","componentId","error","TagAssignmentValue","valueProperty","TagAssignmentRemoveButtonUI","Button","icon","TrashIcon","TagAssignmentRemoveButton","removeOrUpdate","onClick","getTagAssignmentRules","maxLength","intl","undefined","formatMessage","id","defaultMessage","useTagAssignmentForm","defaultValues","loading","_emptyValue","useState","shouldUseFormContext","Boolean","internalForm","setValue","fieldArrayMethods","useIntl","append","originalAppend","update","remove","originalRemove","useFieldArray","control","getValues","useCallback","options","lastTag","useTagAssignmentFieldArray","useEffect","newValues","push","_getTagsValues","existentValues","UnifiedTaggingForm","initialTags","tagsForm","key","FormattedMessage","fields","validate","unique","findIndex","tag","required","formName","useTagAssignmentModal","componentIdPrefix","title","visible","isLoading","onSubmit","onSuccess","onClose","baseComponentId","isVisible","setIsVisible","useForm","mode","hideTagAssignmentModal","reset","defaultTitleNode","TagAssignmentModal","Modal","destroyOnClose","onCancel","footer","_Fragment","disabled","handleSubmit","data","_tags$filter","_initialTags$filter","filter","newTags","some","t","deletedTags","then","Alert","closable","marginBottom","showTagAssignmentModal","lazyPako","truncateToFirstLineWithMaxLength","str","truncated","char","join","middleTruncateStr","maxLen","firstPartLen","Math","floor","lastPartLen","substring","_keyStr","btoaUtf8","input","output","result","_utf8_encode","chr1","charCodeAt","chr2","chr3","enc1","enc2","enc3","enc4","isNaN","charAt","atobUtf8","replace","indexOf","String","fromCharCode","_utf8_decode","string","utftext","n","c","c2","c3","getStringSHA256","crypto","subtle","digest","TextEncoder","encode","arrayBuffer","prototype","call","Uint8Array","x","toString","slice","COMPRESSED_TEXT_DEFLATE_PREFIX","textCompressDeflate","async","binaryData","deflate","text","Buffer","b64encoded","from","binaryString","byte","fromCodePoint","btoa","textDecompressDeflate","pako","compressedText","startsWith","Error","compressedTextWithoutPrefix","inflate","to","atob","m","_m$codePointAt","codePointAt","isTextCompressedDeflate","NotFoundPage","getExperimentKindFromTags","experimentTags","_experimentTags$find","find","isEditableExperimentKind","experimentKind","ExperimentKind","GENAI_DEVELOPMENT_INFERRED","CUSTOM_MODEL_DEVELOPMENT_INFERRED","NO_INFERRED_TYPE","GENAI_DEVELOPMENT","CUSTOM_MODEL_DEVELOPMENT","EMPTY","normalizeInferredExperimentKind","ExperimentKindDropdownLabels","defineMessage","FINETUNING","REGRESSION","CLASSIFICATION","FORECASTING","AUTOML","ExperimentKindShortLabels","getSelectableExperimentKinds","getGraphQLErrorMessage","ApolloError","graphQLErrors","RunViewArtifactTab","runTags","experimentId","runOutputs","artifactUri","runUuid","useFullHeightPage","useMediaQuery","responsive","breakpoints","overflow","md","position","ArtifactPage","useAutoHeight","artifactRootUri","useRunViewActiveTab","tabParam","useParams","RunPageTabName","MODEL_METRIC_CHARTS","SYSTEM_METRIC_CHARTS","TRACES","match","ARTIFACTS","OVERVIEW","TABS_WITHOUT_MARGIN","EVALUATIONS","RunViewModeSwitch","navigate","useNavigate","currentTab","removeTabMargin","setRemoveTabMargin","includes","LegacyTabs","activeKey","newTabKey","Routes","getRunPageTabRoute","getRunPageRoute","tabBarStyle","margin","TabPane","tab","_ref2","LoggedModelsDropdownContent","models","onRegisterClick","renderSection","sectionModels","DropdownMenu","Group","Label","model","registeredModelSummary","first","registeredModelVersionSummaries","Item","marginRight","last","path","split","HintColumn","Link","target","size","stopPropagation","endIcon","NewWindowIcon","absolutePath","status","displayedName","version","link","IconWrapper","RegisteredModelOkIcon","ModelVersionStatusIcons","Tag","registeredModels","unregisteredModels","Separator","RunViewHeaderRegisterModelButton","loggedModelPaths","useMemo","Utils","getLoggedModelsFromTags","artifactPath","orderBy","source","_model$registeredMode","parseInt","selectedModelToRegister","setSelectedModelToRegister","modelsRegistered","RegisterModel","modelPath","modelRelativePath","showButton","modalVisible","onCloseModal","Root","modal","LegacyTooltip","placement","values","registeredCount","loggedCount","Trigger","asChild","ChevronDownIcon","Content","align","singleModel","registeredModelVersionSummary","marginLeft","buttonType","RunViewHeader","hasComparedExperimentsBefore","comparedExperimentIds","experiment","runDisplayName","runParams","handleRenameRunClick","handleDeleteRunClick","breadcrumbs","_experiment$experimen","getCompareExperimentsPageRoute","numExperiments","getExperimentPageRoute","getExperimentPageLink","shouldEnableExperimentPageHeaderV2","getExperimentPageTabRoute","ExperimentPageTabName","Runs","PageHeader","OverflowMenu","menu","itemName","renderRegisterModelButton","_experiment$experimen2","RunViewStatusBox","backgroundColor","isDarkMode","colors","green800","green100","red800","red100","blue800","blue100","RunStatusIcon","color","RunViewUserLinkBox","runInfo","_runInfo$experimentId","user","getUser","searchRunsByUser","systemMetricsLabel","modelMetricsLabel","defineMessages","metricKeyMatchesFilter","toLowerCase","RunViewMetricsTableSection","metricsList","header","table","_otherColumns$find","_otherColumns$find2","column","keyColumn","otherColumns","getLeafHeaders","valueColumn","anyRowHasModels","loggedModels","isEmpty","modelColumn","TableRow","TableCell","backgroundSecondary","_runInfo$runUuid","getCanResize","getSize","Overflow","_model$info","_model$info$experimen","_model$info2","_model$info$model_id","_model$info3","_model$info4","rel","getExperimentLoggedModelDetailsPage","info","experiment_id","model_id","RunViewMetricsTable","latestMetrics","detailsPageTableStyles","detailsPageNoEntriesStyles","detailsPageNoResultsWrapperStyles","usingUnifiedDetailsLayout","useExperimentTrackingDetailsPageLayoutStyles","setFilter","loggedModelsByMetricKey","metricsWithModels","compact","flatMap","_model$data","_model$data$metrics","metrics","groupedMetrics","groupBy","mapValues","group","metricValues","metricList","metric","_loggedModelsByMetric","modelColumnDefs","accessorKey","enableResizing","columns","columnDefs","metricSegments","systemMetrics","isSystemMetricKey","modelMetrics","useReactTable","getCoreRowModel","getRowId","row","enableColumnResizing","columnResizeMode","Title","level","padding","border","borderDecorative","borderRadius","borderRadiusBase","renderTableContent","Empty","description","areAllResultsFiltered","sum","prefix","SearchIcon","placeholder","allowClear","Table","scrollable","empty","isHeader","TableHeader","setColumnSizing","isResizing","getIsResizing","flexRender","columnDef","getContext","segment","DatasetEntry","dataset","role","ExperimentViewDatasetWithContext","datasetWithTags","displayTextAsLink","RunViewDatasetBox","datasets","selectedDatasetWithRun","setSelectedDatasetWithRun","isDrawerOpen","setIsDrawerOpen","firstDataset","remainingDatasets","datasetClicked","_runInfo$runName","runData","runName","alignItems","ExperimentViewDatasetDrawer","isOpen","setIsOpen","RunViewParentRunBox","parentRunUuid","dispatch","useDispatch","parentRunInfoRedux","useSelector","entities","runInfosByUuid","parentRunInfoGraphql","useGetRunQuery","shouldEnableGraphQLRunDetailsPage","parentRunInfo","_parentRunInfoGraphql","getRunApi","ParagraphSkeleton","label","RunViewTagsBox","onTagsUpdated","sharedTaggingUIEnabled","shouldUseSharedTaggingUI","isSavingTags","setIsSavingTags","visibleTagKeys","visibleTagEntities","keys","isUserFacingTag","tagsKeyValueMap","saveRunTagsApi","EditTagsModal","showEditTagsModal","useEditKeyValueTagsModal","valueRequired","allAvailableTags","saveTagsHandler","existingTags","setRunTagsBulkApi","showEditModal","editTagsLabel","paddingTop","xs","flexWrap","KeyValueTag","enableFullViewModal","Tooltip","content","PencilIcon","Spinner","RunViewDescriptionBox","onDescriptionChanged","_tags$NOTE_CONTENT_TA","noteContent","NOTE_CONTENT_TAG","showNoteEditor","setShowNoteEditor","Hint","EditableNote","defaultMarkdown","markdown","setTagApi","handleCancelEditNote","showEditor","RunViewRegisteredModelsBox","modelSummary","queryFn","queryKey","RegisteredPromptsApi","getPromptVersionsForRun","RunViewRegisteredPromptsBox","usePromptVersionsForRunQuery","_queryResult$error","queryResult","useQuery","retry","refetch","promptVersions","model_versions","parseLinkedPromptsFromRunTags","promptVersion","getPromptDetailsPageRoute","encodeURIComponent","displayText","RunViewLoggedModelsBox","loggedModelsV3","getModelFlavorName","flavors","shouldDisplayArtifactPaths","Set","cursor","heightBase","ModelsIcon","_model$info$model_id2","getExperimentLoggedModelDetailsPageRoute","_ref3","RunViewSourceBox","search","className","_tags$MLFLOW_RUN_GIT_","_tags$Utils$gitCommit","_tags$Utils$sourceTyp","branchName","MLFLOW_RUN_GIT_SOURCE_BRANCH_TAG","commitHash","gitCommitTag","runSource","renderSource","ExperimentSourceTypeIcon","sourceType","sourceTypeTag","actionPrimaryBackgroundDefault","BranchIcon","Popover","whiteSpace","alignContent","GitCommitIcon","Arrow","CopyButton","showLabel","copyText","CopyIcon","supportedAttributeColumnKeys","ExperimentLoggedModelListPageKnownColumns","RelationshipType","Step","Name","Status","CreationTime","RegisteredModels","Dataset","RunViewLoggedModelsTable","inputs","outputs","isLoadingLoggedModels","loggedModelsError","useCombinedRunInputsOutputsModels","inputLoggedModels","_inputs$modelInputs","uniq","modelInputs","modelInput","modelId","direction","outputLoggedModels","_outputs$modelOutputs","modelOutputs","modelOutput","_outputs$modelOutputs2","_correspondingOutputE","correspondingOutputEntry","step","_uniqBy","uniqBy","loggedModel","_loggedModel$data","run_id","modelData","_modelData$info","columnVisibility","setColumnVisibility","useExperimentLoggedModelListPageTableColumns","disablePinnedColumns","disableOrderBy","ExperimentLoggedModelListPageColumnSelector","onUpdateColumns","customTrigger","ColumnsIcon","shrinks","ExperimentLoggedModelOpenDatasetDetailsContextProvider","ExperimentLoggedModelListPageTable","isLoadingMore","moreResultsAvailable","disableLoadMore","getTableTheme","displayShowExampleButton","textPrimary","actionDefaultBackgroundHover","actionDefaultBackgroundPress","backgroundPrimary","overlayOverlay","borderTop","fontSize","typography","fontSizeBase","getShadowScrollStyles","orientation","RunViewDatasetBoxV2","textAlign","iconFontSize","RunDetailsPageMetadataSections","EmptyValue","RunViewOverview","onRunDataUpdated","params","runInputs","registeredModelVersionSummariesForRun","useLocation","loggedModelsFromTags","parentRunIdTag","EXPERIMENT_PARENT_ID_TAG","containsLoggedModelsFromInputsOutputs","shouldRenderLoggedModelsBox","isRunPageLoggedModelsTableEnabled","shouldDisplayContentsOfLoggedModelsBox","modelVersions","loggedModelsV3RegisteredModels","useExperimentLoggedModelRegisteredVersions","detailsSectionsV2","useRunDetailsPageOverviewSectionsV2","_runInfo$runUuid2","detailsContent","KeyValueProperty","keyValue","startTime","formatTimestamp","NoneCell","DetailsOverviewCopyableIdBox","element","getDuration","endTime","DETAILS","DATASETS","TAGS","REGISTERED_MODELS","usingSidebarLayout","DetailsPageLayout","secondarySections","renderDetails","DetailsOverviewMetadataTable","DetailsOverviewMetadataRow","minHeight","maxHeight","lg","DetailsOverviewParamsTable","RunNotFoundView","runId","ErrorView","statusCode","subMessage","fallbackHomePageReactRoute","rootRoute","RunViewChartTooltipBody","contextData","metricsForRun","hoverData","chartData","metricKey","isHovering","_metricsForRun$metric","singleTraceHoverData","containsMultipleRunsTooltipData","hoveredDataPoint","RunsChartsTooltipMode","MultipleTracesWithScanline","RunsMultipleTracesTooltipBody","metricEntity","timestamp","metricContainsHistory","isSystemMetric","displayTimestamp","isUndefined","displayStep","valueField","textOverflow","RunViewMetricChartsImpl","metricKeys","chartUIState","updateChartsUIState","_runInfo$runUuid4","setSearch","compareRunCharts","compareRunSections","chartsSearchFilter","visibleChartCards","_compareRunCharts$fil","chart","deleted","fullScreenChart","setFullScreenChart","sampledMetricsByRunUuid","metricsByRange","metricsHistory","flat","tooltipContextValue","imagesByRunUuid","state","configuredCardConfig","setConfiguredCardConfig","reorderCharts","useReorderRunsChartsFn","insertCharts","useInsertRunsChartsFn","removeChart","useRemoveRunsChartFn","confirmChartCardConfiguration","useConfirmChartCardConfigurationFn","_runInfo$runUuid3","displayName","images","metricHistory","uuid","primary","resultChartSet","resultSectionSet","RunsChartsCardConfig","getBaseChartAndSectionConfigs","runsData","enabledSectionNames","MLFLOW_MODEL_METRIC_NAME","MLFLOW_SYSTEM_METRIC_NAME","filterMetricNames","MLFLOW_SYSTEM_METRIC_PREFIX","current","isResultUpdated","updateChartAndSectionConfigs","isAccordionReordered","isTabActive","useIsTabActive","autoRefreshEnabled","shouldEnableRunDetailsPageAutoRefresh","containsLoggedImages","LOG_IMAGE_TAG_INDICATOR","usePopulateImagesByRunUuid","runUuids","runUuidsIsActive","enabled","RunsChartsFilterInput","ToggleButton","pressed","onPressedChange","RunsChartsGlobalChartSettingsDropdown","metricKeyList","globalLineChartConfig","updateUIState","RunsChartsTooltipWrapper","component","RunsChartsDraggableCardsGridContextProvider","RunsChartsSectionAccordion","startEditChart","chartCard","addNewChartCard","metricSectionId","getEmptyChartCardByType","supportedChartTypes","RunsChartType","LINE","BAR","IMAGE","RunsChartsConfigureModal","chartRunData","paramKeyList","config","configuredCard","RunsChartsFullScreenModal","tooltipComponent","RunViewMetricCharts","persistenceIdentifier","localStore","LocalStorageUtils","getStoreForComponent","defaultChartState","xAxisKey","RunsChartsLineChartXAxisType","STEP","lineSmoothness","selectedXAxisMetricKey","persistedChartState","getItem","JSON","parse","setItem","stringify","RunsChartsUIConfigurationContextProvider","QUERY_PARAM_KEY","useCompareToRunUuid","_searchParams$get","searchParams","setSearchParams","useSearchParams","get","compareToRunId","delete","set","_ref4","_ref5","EvaluationRunCompareSelector","currentRunUuid","setCompareToRunUuid","compareToRunUuid","setCurrentRunUuid","setCurrentRunUuidProp","getRunColor","useGetExperimentRunColor","runInfos","experimentRunInfos","useGenAiExperimentRunsForComparison","currentRunOptions","compareToRunOptions","_runInfo$runName2","currentRunInfo","compareToRunInfo","defaultSetCurrentRunUuid","currentParams","URLSearchParams","window","location","newUrl","URL","origin","forEach","href","justifyContent","DialogCombobox","COMPARE_TO_RUN_DROPDOWN_COMPONENT_ID","DialogComboboxCustomButtonTriggerWrapper","fontSizeSm","RunColorPill","DialogComboboxContent","DialogComboboxOptionList","item","DialogComboboxOptionListSelectItem","checked","textPlaceholder","XCircleFillIcon","actionTertiaryTextHover","onPointerDownCapture","useRunLoggedTraceTableArtifacts","intersection","extractLoggedTablesFromRunTags","GenAiTraceEvaluationArtifactFile","Evaluations","Metrics","Assessments","SEARCH_RUNS_QUERY","gql","useSearchRunsQuery","experimentIds","_data$mlflowSearchRun","_data$mlflowSearchRun2","_data$mlflowSearchRun3","apolloError","variables","skip","mlflowSearchRuns","runs","refetchRun","apiError","getTrace","requestId","traceId","traceInfo","traceData","Promise","all","MlflowService","getExperimentTraceInfo","response","trace_info","getExperimentTraceData","RunViewEvaluationsTabArtifacts","traceTablesLoggedInRun","noEvaluationTablesLogged","makeHtmlFromMarkdown","useMarkdownConverter","compareToRunData","compareToRunDisplayName","compareToRunLoading","useGetCompareToDataWithArtifacts","LegacySkeleton","initialSelectedColumns","allColumns","col","TracesTableColumnType","ASSESSMENT","INPUT","TRACE_INFO","EXECUTION_DURATION_COLUMN_ID","STATE_COLUMN_ID","TAGS_COLUMN_ID","marginTop","overflowY","getOverviewTableComponent","componentProps","currentRunDisplayName","currentEvaluationResults","compareToEvaluationResults","GenAiTracesMarkdownConverterProvider","makeHtml","GenAiTracesTable","useGenAiTraceEvaluationArtifacts","artifacts","isNil","runDetailsLoading","getRunDisplayName","getExperimentTraceInfoV3","_response$trace","trace","RunViewEvaluationsTabInner","assessmentInfos","totalCount","isTableMetadataLoading","tableMetadataError","tableFilterOptions","useMlflowTracesTableMetadata","otherRunUuid","searchQuery","setSearchQuery","filters","setFilters","useFilters","queryClient","useQueryClient","defaultSelectedColumns","RESPONSE_COLUMN_ID","TOKENS_COLUMN_ID","selectedColumns","toggleColumns","setSelectedColumns","useSelectedColumns","tableSort","setTableSort","useTableSort","traceInfos","traceInfosLoading","traceInfosError","refetchMlflowTraces","useSearchMlflowTraces","deleteTracesMutation","useDeleteTracesMutation","useGetCompareToData","countInfo","currentCount","logCountLoading","maxAllowedCount","getEvalTabTotalTracesLimit","showEditTagsModalForTrace","useEditExperimentTraceTags","invalidateMlflowSearchTracesCache","existingTagKeys","getTracesTagKeys","useV3Apis","traceActions","deleteTracesAction","deleteTraces","traceIds","mutateAsync","traceRequestIds","exportToEvals","exportToEvalsInstanceEnabled","editTags","isTableLoading","LoadingSkeleton","GenAITracesTableProvider","GenAITracesTableToolbar","GenAITracesTableBodyContainer","currentTraceInfoV3","compareToTraceInfoV3","onTraceTagsEdit","RunViewEvaluationsTab","isArtifactCallEnabled","artifactData","isArtifactLoading","seed","RunPageLoadingState","TitleSkeleton","RunPage","_runInfo$artifactUri2","renameModalVisible","setRenameModalVisible","deleteModalVisible","setDeleteModalVisible","experimentFetchError","runFetchError","useRunDetailsPageData","modelMetricKeys","systemMetricKeys","Object","comparedExperiments","activeTab","isUsingGetLoggedModelsApi","shouldUseGetLoggedModelsBatchAPI","loggedModelsForRun","useLoggedModelsForExperimentRun","_runInputs$modelInput","_runOutputs$modelOutp","allModels","modelIds","isHookEnabled","loggedModelsData","useSearchLoggedModelsQuery","loggedModelsForRunV2","useLoggedModelsForExperimentRunV2","useGetLoggedModelsQuery","initialLoading","ErrorWrapper","getErrorCode","ErrorCodes","RESOURCE_DOES_NOT_EXIST","code","image","DangerIcon","renderActiveTab","_runInfo$artifactUri","RenameRunModal","DeleteRunModal","selectedRunIds"],"ignoreList":[],"sourceRoot":""}