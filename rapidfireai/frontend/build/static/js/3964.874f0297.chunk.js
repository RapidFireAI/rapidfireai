"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[3964],{79475:function(e,t,r){var a=r(47401);e.exports=function(e,t){for(var r=0;r<e.length;r++)e[r].i=r;a.mergeArray(t.text,e,"tx"),a.mergeArray(t.texttemplate,e,"txt"),a.mergeArray(t.hovertext,e,"htx"),a.mergeArray(t.customdata,e,"data"),a.mergeArray(t.textposition,e,"tp"),t.textfont&&(a.mergeArrayCastPositive(t.textfont.size,e,"ts"),a.mergeArray(t.textfont.color,e,"tc"),a.mergeArray(t.textfont.family,e,"tf"));var i=t.marker;if(i){a.mergeArrayCastPositive(i.size,e,"ms"),a.mergeArrayCastPositive(i.opacity,e,"mo"),a.mergeArray(i.symbol,e,"mx"),a.mergeArray(i.color,e,"mc");var o=i.line;i.line&&(a.mergeArray(o.color,e,"mlc"),a.mergeArrayCastPositive(o.width,e,"mlw"));var n=i.gradient;n&&"none"!==n.type&&(a.mergeArray(n.type,e,"mgt"),a.mergeArray(n.color,e,"mgc"))}}},47216:function(e,t,r){var a=r(20184).axisHoverFormat,i=r(4216).a,o=r(4216).r,n=r(97451),l=r(5153),s=r(34418).T,c=r(41707),p=r(20580),d=r(87241).extendFlat;function f(e){return{valType:"any",dflt:0,editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the period positioning in milliseconds or *M<n>* on the "+e+" axis.","Special values in the form of *M<n>* could be used to declare","the number of months. In this case `n` must be a positive integer."].join(" ")}}function h(e){return{valType:"any",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the base for period positioning in milliseconds or date string on the "+e+" axis.","When `"+e+"period` is round number of weeks,","the `"+e+"period0` by default would be on a Sunday i.e. 2000-01-02,","otherwise it would be at 2000-01-01."].join(" ")}}function y(e){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc",description:["Only relevant when the axis `type` is *date*.","Sets the alignment of data points on the "+e+" axis."].join(" ")}}e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the x coordinates."},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `x`.","Builds a linear space of x coordinates.","Use with `dx`","where `x0` is the starting coordinate and `dx` the step."].join(" ")},dx:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the x coordinate step.","See `x0` for more info."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0,description:"Sets the y coordinates."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0,description:["Alternate to `y`.","Builds a linear space of y coordinates.","Use with `dy`","where `y0` is the starting coordinate and `dy` the step."].join(" ")},dy:{valType:"number",dflt:1,editType:"calc",anim:!0,description:["Sets the y coordinate step.","See `y0` for more info."].join(" ")},xperiod:f("x"),yperiod:f("y"),xperiod0:h("x0"),yperiod0:h("y0"),xperiodalignment:y("x"),yperiodalignment:y("y"),xhoverformat:a("x"),yhoverformat:a("y"),stackgroup:{valType:"string",dflt:"",editType:"calc",description:["Set several scatter traces (on the same subplot) to the same","stackgroup in order to add their y values (or their x values if","`orientation` is *h*). If blank or omitted this trace will not be","stacked. Stacking also turns `fill` on by default, using *tonexty*","(*tonextx*) if `orientation` is *h* (*v*) and sets the default","`mode` to *lines* irrespective of point count.","You can only stack on a numeric (linear or log) axis.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},orientation:{valType:"enumerated",values:["v","h"],editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`orientation` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`. Sets the","stacking direction. With *v* (*h*), the y (x) values of subsequent","traces are added. Also affects the default value of `fill`."].join(" ")},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`groupnorm` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Sets the normalization for the sum of this `stackgroup`.","With *fraction*, the value of each trace at each location is","divided by the sum of all trace values at that location.","*percent* is the same but multiplied by 100 to show percentages.","If there are multiple subplots, or multiple `stackgroup`s on one","subplot, each will be normalized within its own set."].join(" ")},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc",description:["Only relevant when `stackgroup` is used, and only the first","`stackgaps` found in the `stackgroup` will be used - including","if `visible` is *legendonly* but not if it is `false`.","Determines how we handle locations at which other traces in this","group have data but this one does not.","With *infer zero* we insert a zero at these locations.","With *interpolate* we linearly interpolate between existing","values, and extrapolate a constant beyond the existing values."].join(" ")},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc",description:["Sets text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")},texttemplate:i({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style",description:["Sets hover text elements associated with each (x,y) pair.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (x,y) coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc",description:["Determines the drawing mode for this scatter trace.","If the provided `mode` includes *text* then the `text` elements","appear at the coordinates. Otherwise, the `text` elements","appear on hover.","If there are less than "+p.PTS_LINESONLY+" points","and the trace is not stacked","then the default is *lines+markers*. Otherwise, *lines*."].join(" ")},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style",description:["Do the hover effects highlight individual points (markers or","line points) or do they highlight filled regions?","If the fill is *toself* or *tonext* and there are no markers","or text, then the default is *fills*, otherwise it is *points*."].join(" ")},hovertemplate:o({},{keys:p.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0,description:"Sets the line color."},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0,description:"Sets the line width (in px)."},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","With *spline* the lines are drawn using spline interpolation.","The other available values correspond to step-wise line shapes."].join(" ")},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot",description:["Has an effect only if `shape` is set to *spline*","Sets the amount of smoothing.","*0* corresponds to no smoothing (equivalent to a *linear* shape)."].join(" ")},dash:d({},s,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot",description:["Simplifies lines by removing nearly-collinear points. When transitioning","lines, it may be desirable to disable this so that the number of points","along the resulting SVG path is unaffected."].join(" ")},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the provided data arrays are connected."].join(" ")},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot",description:["Determines whether or not markers and text nodes","are clipped about the subplot axes.","To show markers and text nodes above axis lines and tick labels,","make sure to set `xaxis.layer` and `yaxis.layer` to *below traces*."].join(" ")},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc",description:["Sets the area to fill with a solid color.","Defaults to *none* unless this trace is stacked, then it gets","*tonexty* (*tonextx*) if `orientation` is *v* (*h*)","Use with `fillcolor` if not *none*.","*tozerox* and *tozeroy* fill to x=0 and y=0 respectively.","*tonextx* and *tonexty* fill between the endpoints of this","trace and the endpoints of the trace before it, connecting those","endpoints with straight lines (to make a stacked area graph);","if there is no trace before it, they behave like *tozerox* and","*tozeroy*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other.","Traces in a `stackgroup` will only fill to (or be filled to) other","traces in the same group. With multiple `stackgroup`s or some","traces stacked and some not, if fill-linked traces are not already","consecutive, the later ones will be pushed down in the drawing order."].join(" ")},fillcolor:{valType:"color",editType:"style",anim:!0,description:["Sets the fill color.","Defaults to a half-transparent variant of the line color,","marker color, or marker line color, whichever is available."].join(" ")},marker:d({symbol:{valType:"enumerated",values:c.symbolList,dflt:"circle",arrayOk:!0,editType:"style",description:["Sets the marker symbol type.","Adding 100 is equivalent to appending *-open* to a symbol name.","Adding 200 is equivalent to appending *-dot* to a symbol name.","Adding 300 is equivalent to appending *-open-dot*","or *dot-open* to a symbol name."].join(" ")},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0,description:"Sets the marker opacity."},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0,description:"Sets the marker size (in px)."},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets a maximum number of points to be drawn on the graph.","*0* corresponds to no limit."].join(" ")},sizeref:{valType:"number",dflt:1,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the scale factor used to determine the rendered size of","marker points. Use with `sizemin` and `sizemode`."].join(" ")},sizemin:{valType:"number",min:0,dflt:0,editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the minimum size (in px) of the rendered marker points."].join(" ")},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc",description:["Has an effect only if `marker.size` is set to a numerical array.","Sets the rule for which the data in `size` is converted","to pixels."].join(" ")},line:d({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0,description:"Sets the width (in px) of the lines bounding the marker points."},editType:"calc"},n("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc",description:["Sets the type of gradient used to fill the markers"].join(" ")},color:{valType:"color",arrayOk:!0,editType:"calc",description:["Sets the final color of the gradient fill:","the center color for radial, the right for horizontal,","or the bottom for vertical."].join(" ")},editType:"calc"},editType:"calc"},n("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of selected points."},color:{valType:"color",editType:"style",description:"Sets the marker color of selected points."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of selected points."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of selected points."},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style",description:"Sets the marker opacity of unselected points, applied only when a selection exists."},color:{valType:"color",editType:"style",description:"Sets the marker color of unselected points, applied only when a selection exists."},size:{valType:"number",min:0,editType:"style",description:"Sets the marker size of unselected points, applied only when a selection exists."},editType:"style"},textfont:{color:{valType:"color",editType:"style",description:"Sets the text font color of unselected points, applied only when a selection exists."},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc",description:["Sets the positions of the `text` elements","with respects to the (x,y) coordinates."].join(" ")},textfont:l({editType:"calc",colorEditType:"style",arrayOk:!0,description:"Sets the text font."})}},28864:function(e,t,r){var a=r(83491),i=r(47401),o=r(37762),n=r(48128),l=r(9405).BADNUM,s=r(77638),c=r(54952),p=r(79475),d=r(35533);function f(e,t,r,a,i,n,l){var c=t._length,p=e._fullLayout,d=r._id,f=a._id,h=p._firstScatter[u(t)]===t.uid,y=(x(t,p,r,a)||{}).orientation,m=t.fill;r._minDtick=0,a._minDtick=0;var v={padded:!0},g={padded:!0};l&&(v.ppad=g.ppad=l);var b=c<2||i[0]!==i[c-1]||n[0]!==n[c-1];b&&("tozerox"===m||"tonextx"===m&&(h||"h"===y))?v.tozero=!0:(t.error_y||{}).visible||"tonexty"!==m&&"tozeroy"!==m&&(s.hasMarkers(t)||s.hasText(t))||(v.padded=!1,v.ppad=0),b&&("tozeroy"===m||"tonexty"===m&&(h||"v"===y))?g.tozero=!0:"tonextx"!==m&&"tozerox"!==m||(g.padded=!1),d&&(t._extremes[d]=o.findExtremes(r,i,v)),f&&(t._extremes[f]=o.findExtremes(a,n,g))}function h(e,t){if(s.hasMarkers(e)){var r,a=e.marker,n=1.6*(e.marker.sizeref||1);if(r="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/n),3)}:function(e){return Math.max((e||0)/n,3)},i.isArrayOrTypedArray(a.size)){var l={type:"linear"};o.setConvert(l);for(var c=l.makeCalcdata(e.marker,"size"),p=new Array(t),d=0;d<t;d++)p[d]=r(c[d]);return p}return r(a.size)}}function y(e,t){var r=u(t),a=e._firstScatter;a[r]||(a[r]=t.uid)}function u(e){var t=e.stackgroup;return e.xaxis+e.yaxis+e.type+(t?"-"+t:"")}function x(e,t,r,a){var i=e.stackgroup;if(i){var o=t._scatterStackOpts[r._id+a._id][i],n="v"===o.orientation?a:r;return"linear"===n.type||"log"===n.type?o:void 0}}e.exports={calc:function(e,t){var r,s,u,m,v,g,b=e._fullLayout,k=o.getFromId(e,t.xaxis||"x"),T=o.getFromId(e,t.yaxis||"y"),A=k.makeCalcdata(t,"x"),_=T.makeCalcdata(t,"y"),S=n(t,k,"x",A),w=n(t,T,"y",_),O=S.vals,N=w.vals,M=t._length,z=new Array(M),L=t.ids,j=x(t,b,k,T),I=!1;y(b,t);var P,D="x",F="y";j?(i.pushUnique(j.traceIndices,t._expandedIndex),(r="v"===j.orientation)?(F="s",P="x"):(D="s",P="y"),v="interpolate"===j.stackgaps):f(e,t,k,T,O,N,h(t,M));var E=!!t.xperiodalignment,C=!!t.yperiodalignment;for(s=0;s<M;s++){var B=z[s]={},U=a(O[s]),Y=a(N[s]);U&&Y?(B[D]=O[s],B[F]=N[s],E&&(B.orig_x=A[s],B.xEnd=S.ends[s],B.xStart=S.starts[s]),C&&(B.orig_y=_[s],B.yEnd=w.ends[s],B.yStart=w.starts[s])):j&&(r?U:Y)?(B[P]=r?O[s]:N[s],B.gap=!0,v?(B.s=l,I=!0):B.s=0):B[D]=B[F]=l,L&&(B.id=String(L[s]))}if(p(z,t),c(e,t),d(z,t),j){for(s=0;s<z.length;)z[s][P]===l?z.splice(s,1):s++;if(i.sort(z,(function(e,t){return e[P]-t[P]||e.i-t.i})),I){for(s=0;s<z.length-1&&z[s].gap;)s++;for((g=z[s].s)||(g=z[s].s=0),u=0;u<s;u++)z[u].s=g;for(m=z.length-1;m>s&&z[m].gap;)m--;for(g=z[m].s,u=z.length-1;u>m;u--)z[u].s=g;for(;s<m;)if(z[++s].gap){for(u=s+1;z[u].gap;)u++;for(var G=z[s-1][P],R=z[s-1].s,X=(z[u].s-R)/(z[u][P]-G);s<u;)z[s].s=R+(z[s][P]-G)*X,s++}}}return z},calcMarkerSize:h,calcAxisExpansion:f,setFirstScatter:y,getStackOpts:x}},35533:function(e,t,r){var a=r(47401);e.exports=function(e,t){a.isArrayOrTypedArray(t.selectedpoints)&&a.tagSelected(e,t)}},54952:function(e,t,r){var a=r(8757).hasColorscale,i=r(92171),o=r(77638);e.exports=function(e,t){o.hasLines(t)&&a(t,"line")&&i(e,t,{vals:t.line.color,containerStr:"line",cLetter:"c"}),o.hasMarkers(t)&&(a(t,"marker")&&i(e,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),a(t,"marker.line")&&i(e,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},20580:function(e){e.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},88515:function(e,t,r){var a=r(28864);function i(e,t,r,a,i,o,n){i[a]=!0;var l={i:null,gap:!0,s:0};if(l[n]=r,e.splice(t,0,l),t&&r===e[t-1][n]){var s=e[t-1];l.s=s.s,l.i=s.i,l.gap=s.gap}else o&&(l.s=function(e,t,r,a){var i=e[t-1],o=e[t+1];return o?i?i.s+(o.s-i.s)*(r-i[a])/(o[a]-i[a]):o.s:i.s}(e,t,r,n));t||(e[0].t=e[1].t,e[0].trace=e[1].trace,delete e[1].t,delete e[1].trace)}e.exports=function(e,t){var r=t.xaxis,o=t.yaxis,n=r._id+o._id,l=e._fullLayout._scatterStackOpts[n];if(l){var s,c,p,d,f,h,y,u,x,m,v,g,b,k,T,A=e.calcdata;for(var _ in l){var S=(m=l[_]).traceIndices;if(S.length){for(v="interpolate"===m.stackgaps,g=m.groupnorm,"v"===m.orientation?(b="x",k="y"):(b="y",k="x"),T=new Array(S.length),s=0;s<T.length;s++)T[s]=!1;h=A[S[0]];var w=new Array(h.length);for(s=0;s<h.length;s++)w[s]=h[s][b];for(s=1;s<S.length;s++){for(f=A[S[s]],c=p=0;c<f.length;c++){for(y=f[c][b];y>w[p]&&p<w.length;p++)i(f,c,w[p],s,T,v,b),c++;if(y!==w[p]){for(d=0;d<s;d++)i(A[S[d]],p,y,d,T,v,b);w.splice(p,0,y)}p++}for(;p<w.length;p++)i(f,c,w[p],s,T,v,b),c++}var O=w.length;for(c=0;c<h.length;c++){for(u=h[c][k]=h[c].s,s=1;s<S.length;s++)(f=A[S[s]])[0].trace._rawLength=f[0].trace._length,f[0].trace._length=O,u+=f[c].s,f[c][k]=u;if(g)for(x=("fraction"===g?u:u/100)||1,s=0;s<S.length;s++){var N=A[S[s]][c];N[k]/=x,N.sNorm=N.s/x}}for(s=0;s<S.length;s++){var M=(f=A[S[s]])[0].trace,z=a.calcMarkerSize(M,M._rawLength),L=Array.isArray(z);if(z&&T[s]||L){var j=z;for(z=new Array(O),c=0;c<O;c++)z[c]=f[c].gap?0:L?j[f[c].i]:j}var I=new Array(O),P=new Array(O);for(c=0;c<O;c++)I[c]=f[c].x,P[c]=f[c].y;a.calcAxisExpansion(e,M,r,o,I,P,z),f[0].t.orientation=m.orientation}}}}}},67780:function(e){e.exports=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("scatter"===r.type){var a=r.fill;if("none"!==a&&"toself"!==a&&(r.opacity=void 0,"tonexty"===a||"tonextx"===a))for(var i=t-1;i>=0;i--){var o=e[i];if("scatter"===o.type&&o.xaxis===r.xaxis&&o.yaxis===r.yaxis){o.opacity=void 0;break}}}}}},23335:function(e,t,r){var a=r(47401),i=r(62282),o=r(47216),n=r(20580),l=r(77638),s=r(87243),c=r(75781),p=r(71950),d=r(47008),f=r(99144),h=r(43234),y=r(60039),u=r(64498);e.exports=function(e,t,r,x){function m(r,i){return a.coerce(e,t,o,r,i)}var v=s(e,t,x,m);if(v||(t.visible=!1),t.visible){c(e,t,x,m),m("xhoverformat"),m("yhoverformat");var g=p(e,t,x,m),b=!g&&v<n.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("mode",b),l.hasLines(t)&&(f(e,t,r,x,m),h(e,t,m),m("connectgaps"),m("line.simplify")),l.hasMarkers(t)&&d(e,t,r,x,m,{gradient:!0}),l.hasText(t)&&(m("texttemplate"),y(e,t,x,m));var k=[];(l.hasMarkers(t)||l.hasText(t))&&(m("cliponaxis"),m("marker.maxdisplayed"),k.push("points")),m("fill",g?g.fillDflt:"none"),"none"!==t.fill&&(u(e,t,r,m),l.hasLines(t)||h(e,t,m));var T=(t.line||{}).color,A=(t.marker||{}).color;"tonext"!==t.fill&&"toself"!==t.fill||k.push("fills"),m("hoveron",k.join("+")||"points"),"fills"!==t.hoveron&&m("hovertemplate");var _=i.getComponentMethod("errorbars","supplyDefaults");_(e,t,T||A||r,{axis:"y"}),_(e,t,T||A||r,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(t,m)}}},64498:function(e,t,r){var a=r(31454),i=r(47401).isArrayOrTypedArray;e.exports=function(e,t,r,o){var n=!1;if(t.marker){var l=t.marker.color,s=(t.marker.line||{}).color;l&&!i(l)?n=l:s&&!i(s)&&(n=s)}o("fillcolor",a.addOpacity((t.line||{}).color||n||r,.5))}},62542:function(e,t,r){var a=r(37762);e.exports=function(e,t,r){var i={},o={_fullLayout:r},n=a.getFromTrace(o,t,"x"),l=a.getFromTrace(o,t,"y");return i.xLabel=a.tickText(n,n.c2l(e.x),!0).text,i.yLabel=a.tickText(l,l.c2l(e.y),!0).text,i}},56035:function(e,t,r){var a=r(31454),i=r(77638);e.exports=function(e,t){var r,o;if("lines"===e.mode)return(r=e.line.color)&&a.opacity(r)?r:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var n=t.mcc||(e.marker||{}).color,l=t.mlcc||((e.marker||{}).line||{}).color;return(o=n&&a.opacity(n)?n:l&&a.opacity(l)&&(t.mlw||((e.marker||{}).line||{}).width)?l:"")?a.opacity(o)<.3?a.addOpacity(o,.3):o:(r=(e.line||{}).color)&&a.opacity(r)&&i.hasLines(e)&&e.line.width?r:e.fillcolor}},62967:function(e,t,r){var a=r(47401),i=r(21661),o=r(62282),n=r(56035),l=r(31454),s=a.fillText;e.exports=function(e,t,r,c){var p=e.cd,d=p[0].trace,f=e.xa,h=e.ya,y=f.c2p(t),u=h.c2p(r),x=[y,u],m=d.hoveron||"",v=-1!==d.mode.indexOf("markers")?3:.5,g=!!d.xperiodalignment,b=!!d.yperiodalignment;if(-1!==m.indexOf("points")){var k=function(e){var t=Math.max(v,e.mrc||0),r=f.c2p(e.x)-y,a=h.c2p(e.y)-u;return Math.max(Math.sqrt(r*r+a*a)-t,1-v/t)},T=i.getDistanceFunction(c,(function(e){if(g){var t=f.c2p(e.xStart),r=f.c2p(e.xEnd);return y>=Math.min(t,r)&&y<=Math.max(t,r)?0:1/0}var a=Math.max(3,e.mrc||0),i=1-1/a,o=Math.abs(f.c2p(e.x)-y);return o<a?i*o/a:o-a+i}),(function(e){if(b){var t=h.c2p(e.yStart),r=h.c2p(e.yEnd);return u>=Math.min(t,r)&&u<=Math.max(t,r)?0:1/0}var a=Math.max(3,e.mrc||0),i=1-1/a,o=Math.abs(h.c2p(e.y)-u);return o<a?i*o/a:o-a+i}),k);if(i.getClosest(p,T,e),!1!==e.index){var A=p[e.index],_=f.c2p(A.x,!0),S=h.c2p(A.y,!0),w=A.mrc||1;e.index=A.i;var O=p[0].t.orientation,N=O&&(A.sNorm||A.s),M="h"===O?N:void 0!==A.orig_x?A.orig_x:A.x,z="v"===O?N:void 0!==A.orig_y?A.orig_y:A.y;return a.extendFlat(e,{color:n(d,A),x0:_-w,x1:_+w,xLabelVal:M,y0:S-w,y1:S+w,yLabelVal:z,spikeDistance:k(A),hovertemplate:d.hovertemplate}),s(A,d,e),o.getComponentMethod("errorbars","hoverInfo")(A,d,e),[e]}}if(-1!==m.indexOf("fills")&&d._polygons){var L,j,I,P,D,F,E,C,B,U=d._polygons,Y=[],G=!1,R=1/0,X=-1/0,q=1/0,W=-1/0;for(L=0;L<U.length;L++)(I=U[L]).contains(x)&&(G=!G,Y.push(I),q=Math.min(q,I.ymin),W=Math.max(W,I.ymax));if(G){var H=((q=Math.max(q,0))+(W=Math.min(W,h._length)))/2;for(L=0;L<Y.length;L++)for(P=Y[L].pts,j=1;j<P.length;j++)(C=P[j-1][1])>H!==(B=P[j][1])>=H&&(F=P[j-1][0],E=P[j][0],B-C&&(D=F+(E-F)*(H-C)/(B-C),R=Math.min(R,D),X=Math.max(X,D)));R=Math.max(R,0),X=Math.min(X,f._length);var Z=l.defaultLine;return l.opacity(d.fillcolor)?Z=d.fillcolor:l.opacity((d.line||{}).color)&&(Z=d.line.color),a.extendFlat(e,{distance:e.maxHoverDistance,x0:R,x1:X,y0:H,y1:H,color:Z,hovertemplate:!1}),delete e.index,d.text&&!Array.isArray(d.text)?e.text=String(d.text):e.text=d.name,[e]}}}},57005:function(e,t,r){var a=r(77638);e.exports={hasLines:a.hasLines,hasMarkers:a.hasMarkers,hasText:a.hasText,isBubble:a.isBubble,attributes:r(47216),supplyDefaults:r(23335),crossTraceDefaults:r(67780),calc:r(28864).calc,crossTraceCalc:r(88515),arraysToCalcdata:r(79475),plot:r(24498),colorbar:r(78666),formatLabels:r(62542),style:r(78608).style,styleOnSelect:r(78608).styleOnSelect,hoverPoints:r(62967),selectPoints:r(70473),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:r(66807),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{description:["The scatter trace type encompasses line charts, scatter charts, text charts, and bubble charts.","The data visualized as scatter point or lines is set in `x` and `y`.","Text (appearing either on the chart or on hover only) is via `text`.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to numerical arrays."].join(" ")}}},99144:function(e,t,r){var a=r(47401).isArrayOrTypedArray,i=r(8757).hasColorscale,o=r(94060);e.exports=function(e,t,r,n,l,s){var c=(e.marker||{}).color;(l("line.color",r),i(e,"line"))?o(e,t,n,l,{prefix:"line.",cLetter:"c"}):l("line.color",!a(c)&&c||r);l("line.width"),(s||{}).noDash||l("line.dash")}},94341:function(e,t,r){var a=r(9405),i=a.BADNUM,o=a.LOG_CLIP,n=o+.5,l=o-.5,s=r(47401),c=s.segmentsIntersect,p=s.constrain,d=r(20580);e.exports=function(e,t){var r,a,o,f,h,y,u,x,m,v,g,b,k,T,A,_,S,w,O=t.xaxis,N=t.yaxis,M="log"===O.type,z="log"===N.type,L=O._length,j=N._length,I=t.connectGaps,P=t.baseTolerance,D=t.shape,F="linear"===D,E=t.fill&&"none"!==t.fill,C=[],B=d.minTolerance,U=e.length,Y=new Array(U),G=0;function R(r){var a=e[r];if(!a)return!1;var o=t.linearized?O.l2p(a.x):O.c2p(a.x),s=t.linearized?N.l2p(a.y):N.c2p(a.y);if(o===i){if(M&&(o=O.c2p(a.x,!0)),o===i)return!1;z&&s===i&&(o*=Math.abs(O._m*j*(O._m>0?n:l)/(N._m*L*(N._m>0?n:l)))),o*=1e3}if(s===i){if(z&&(s=N.c2p(a.y,!0)),s===i)return!1;s*=1e3}return[o,s]}function X(e,t,r,a){var i=r-e,o=a-t,n=.5-e,l=.5-t,s=i*i+o*o,c=i*n+o*l;if(c>0&&c<s){var p=n*o-l*i;if(p*p<s)return!0}}function q(e,t){var r=e[0]/L,a=e[1]/j,i=Math.max(0,-r,r-1,-a,a-1);return i&&void 0!==S&&X(r,a,S,w)&&(i=0),i&&t&&X(r,a,t[0]/L,t[1]/j)&&(i=0),(1+d.toleranceGrowth*i)*P}function W(e,t){var r=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(r*r+a*a)}var H,Z,V,J,K,$,Q,ee=d.maxScreensAway,te=-L*ee,re=L*(1+ee),ae=-j*ee,ie=j*(1+ee),oe=[[te,ae,re,ae],[re,ae,re,ie],[re,ie,te,ie],[te,ie,te,ae]];function ne(e){if(e[0]<te||e[0]>re||e[1]<ae||e[1]>ie)return[p(e[0],te,re),p(e[1],ae,ie)]}function le(e,t){return e[0]===t[0]&&(e[0]===te||e[0]===re)||(e[1]===t[1]&&(e[1]===ae||e[1]===ie)||void 0)}function se(e,t,r){return function(a,i){var o=ne(a),n=ne(i),l=[];if(o&&n&&le(o,n))return l;o&&l.push(o),n&&l.push(n);var c=2*s.constrain((a[e]+i[e])/2,t,r)-((o||a)[e]+(n||i)[e]);c&&((o&&n?c>0===o[e]>n[e]?o:n:o||n)[e]+=c);return l}}function ce(e){var t=e[0],r=e[1],a=t===Y[G-1][0],i=r===Y[G-1][1];if(!a||!i)if(G>1){var o=t===Y[G-2][0],n=r===Y[G-2][1];a&&(t===te||t===re)&&o?n?G--:Y[G-1]=e:i&&(r===ae||r===ie)&&n?o?G--:Y[G-1]=e:Y[G++]=e}else Y[G++]=e}function pe(e){Y[G-1][0]!==e[0]&&Y[G-1][1]!==e[1]&&ce([V,J]),ce(e),K=null,V=J=0}function de(e){if(S=e[0]/L,w=e[1]/j,H=e[0]<te?te:e[0]>re?re:0,Z=e[1]<ae?ae:e[1]>ie?ie:0,H||Z){if(G)if(K){var t=Q(K,e);t.length>1&&(pe(t[0]),Y[G++]=t[1])}else $=Q(Y[G-1],e)[0],Y[G++]=$;else Y[G++]=[H||e[0],Z||e[1]];var r=Y[G-1];H&&Z&&(r[0]!==H||r[1]!==Z)?(K&&(V!==H&&J!==Z?ce(V&&J?function(e,t){var r=t[0]-e[0],a=(t[1]-e[1])/r;return(e[1]*t[0]-t[1]*e[0])/r>0?[a>0?te:re,ie]:[a>0?re:te,ae]}(K,e):[V||H,J||Z]):V&&J&&ce([V,J])),ce([H,Z])):V-H&&J-Z&&ce([H||V,Z||J]),K=e,V=H,J=Z}else K&&pe(Q(K,e)[0]),Y[G++]=e}for("linear"===D||"spline"===D?Q=function(e,t){for(var r=[],a=0,i=0;i<4;i++){var o=oe[i],n=c(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);n&&(!a||Math.abs(n.x-r[0][0])>1||Math.abs(n.y-r[0][1])>1)&&(n=[n.x,n.y],a&&W(n,e)<W(r[0],e)?r.unshift(n):r.push(n),a++)}return r}:"hv"===D||"vh"===D?Q=function(e,t){var r=[],a=ne(e),i=ne(t);return a&&i&&le(a,i)||(a&&r.push(a),i&&r.push(i)),r}:"hvh"===D?Q=se(0,te,re):"vhv"===D&&(Q=se(1,ae,ie)),r=0;r<U;r++)if(a=R(r)){for(G=0,K=null,de(a),r++;r<U;r++){if(!(f=R(r))){if(I)continue;break}if(F&&t.simplify){var fe=R(r+1);if(v=W(f,a),E&&(0===G||G===U-1)||!(v<q(f,fe)*B)){for(x=[(f[0]-a[0])/v,(f[1]-a[1])/v],h=a,g=v,b=T=A=0,u=!1,o=f,r++;r<e.length;r++){if(y=fe,fe=R(r+1),!y){if(I)continue;break}if(_=(m=[y[0]-a[0],y[1]-a[1]])[0]*x[1]-m[1]*x[0],T=Math.min(T,_),(A=Math.max(A,_))-T>q(y,fe))break;o=y,(k=m[0]*x[0]+m[1]*x[1])>g?(g=k,f=y,u=!1):k<b&&(b=k,h=y,u=!0)}if(u?(de(f),o!==h&&de(h)):(h!==a&&de(h),o!==f&&de(f)),de(o),r>=e.length||!y)break;de(y),a=y}}else de(f)}K&&ce([V||K[0],J||K[1]]),C.push(Y.slice(0,G))}return C}},43234:function(e){e.exports=function(e,t,r){"spline"===r("line.shape")&&r("line.smoothing")}},44906:function(e){var t={tonextx:1,tonexty:1,tonext:1};e.exports=function(e,r,a){var i,o,n,l,s,c={},p=!1,d=-1,f=0,h=-1;for(o=0;o<a.length;o++)(n=(i=a[o][0].trace).stackgroup||"")?n in c?s=c[n]:(s=c[n]=f,f++):i.fill in t&&h>=0?s=h:(s=h=f,f++),s<d&&(p=!0),i._groupIndex=d=s;var y=a.slice();p&&y.sort((function(e,t){var r=e[0].trace,a=t[0].trace;return r._groupIndex-a._groupIndex||r.index-a.index}));var u={};for(o=0;o<y.length;o++)n=(i=y[o][0].trace).stackgroup||"",!0===i.visible?(i._nexttrace=null,i.fill in t&&(l=u[n],i._prevtrace=l||null,l&&(l._nexttrace=i)),i._ownfill=i.fill&&("tozero"===i.fill.substr(0,6)||"toself"===i.fill||"to"===i.fill.substr(0,2)&&!i._prevtrace),u[n]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return y}},69407:function(e,t,r){var a=r(83491);e.exports=function(e,t){t||(t=2);var r=e.marker,i=r.sizeref||1,o=r.sizemin||0,n="area"===r.sizemode?function(e){return Math.sqrt(e/i)}:function(e){return e/i};return function(e){var r=n(e/t);return a(r)&&r>0?Math.max(r,o):0}}},78666:function(e){e.exports={container:"marker",min:"cmin",max:"cmax"}},47008:function(e,t,r){var a=r(31454),i=r(8757).hasColorscale,o=r(94060),n=r(77638);e.exports=function(e,t,r,l,s,c){var p=n.isBubble(e),d=(e.line||{}).color;(c=c||{},d&&(r=d),s("marker.symbol"),s("marker.opacity",p?.7:1),s("marker.size"),s("marker.color",r),i(e,"marker")&&o(e,t,l,s,{prefix:"marker.",cLetter:"c"}),c.noSelect||(s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size")),c.noLine||(s("marker.line.color",d&&!Array.isArray(d)&&t.marker.color!==d?d:p?a.background:a.defaultLine),i(e,"marker.line")&&o(e,t,l,s,{prefix:"marker.line.",cLetter:"c"}),s("marker.line.width",p?1:0)),p&&(s("marker.sizeref"),s("marker.sizemin"),s("marker.sizemode")),c.gradient)&&("none"!==s("marker.gradient.type")&&s("marker.gradient.color"))}},75781:function(e,t,r){var a=r(47401).dateTick0,i=r(9405).ONEWEEK;function o(e,t){return a(t,e%i===0?1:0)}e.exports=function(e,t,r,a,i){if(i||(i={x:!0,y:!0}),i.x){var n=a("xperiod");n&&(a("xperiod0",o(n,t.xcalendar)),a("xperiodalignment"))}if(i.y){var l=a("yperiod");l&&(a("yperiod0",o(l,t.ycalendar)),a("yperiodalignment"))}}},24498:function(e,t,r){var a=r(62258),i=r(62282),o=r(47401),n=o.ensureSingle,l=o.identity,s=r(41707),c=r(77638),p=r(94341),d=r(44906),f=r(78899).tester;function h(e,t,r,d,h,y,u){var x;!function(e,t,r,i,n){var l=r.xaxis,s=r.yaxis,p=a.extent(o.simpleMap(l.range,l.r2c)),d=a.extent(o.simpleMap(s.range,s.r2c)),f=i[0].trace;if(!c.hasMarkers(f))return;var h=f.marker.maxdisplayed;if(0===h)return;var y=i.filter((function(e){return e.x>=p[0]&&e.x<=p[1]&&e.y>=d[0]&&e.y<=d[1]})),u=Math.ceil(y.length/h),x=0;n.forEach((function(e,r){var a=e[0].trace;c.hasMarkers(a)&&a.marker.maxdisplayed>0&&r<t&&x++}));var m=Math.round(x*u/3+Math.floor(x/3)*u/7.1);i.forEach((function(e){delete e.vis})),y.forEach((function(e,t){0===Math.round((t+m)%u)&&(e.vis=!0)}))}(0,t,r,d,h);var m=!!u&&u.duration>0;function v(e){return m?e.transition():e}var g=r.xaxis,b=r.yaxis,k=d[0].trace,T=k.line,A=a.select(y),_=n(A,"g","errorbars"),S=n(A,"g","lines"),w=n(A,"g","points"),O=n(A,"g","text");if(i.getComponentMethod("errorbars","plot")(e,_,r,u),!0===k.visible){var N,M;v(A).style("opacity",k.opacity);var z=k.fill.charAt(k.fill.length-1);"x"!==z&&"y"!==z&&(z=""),d[0][r.isRangePlot?"nodeRangePlot3":"node3"]=A;var L,j,I="",P=[],D=k._prevtrace;D&&(I=D._prevRevpath||"",M=D._nextFill,P=D._polygons);var F,E,C,B,U,Y,G,R="",X="",q=[],W=o.noop;if(N=k._ownFill,c.hasLines(k)||"none"!==k.fill){for(M&&M.datum(d),-1!==["hv","vh","hvh","vhv"].indexOf(T.shape)?(F=s.steps(T.shape),E=s.steps(T.shape.split("").reverse().join(""))):F=E="spline"===T.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?s.smoothclosed(e.slice(1),T.smoothing):s.smoothopen(e,T.smoothing)}:function(e){return"M"+e.join("L")},C=function(e){return E(e.reverse())},q=p(d,{xaxis:g,yaxis:b,connectGaps:k.connectgaps,baseTolerance:Math.max(T.width||1,3)/4,shape:T.shape,simplify:T.simplify,fill:k.fill}),G=k._polygons=new Array(q.length),x=0;x<q.length;x++)k._polygons[x]=f(q[x]);q.length&&(B=q[0][0],Y=(U=q[q.length-1])[U.length-1]),W=function(e){return function(t){if(L=F(t),j=C(t),R?z?(R+="L"+L.substr(1),X=j+"L"+X.substr(1)):(R+="Z"+L,X=j+"Z"+X):(R=L,X=j),c.hasLines(k)&&t.length>1){var r=a.select(this);if(r.datum(d),e)v(r.style("opacity",0).attr("d",L).call(s.lineGroupStyle)).style("opacity",1);else{var i=v(r);i.attr("d",L),s.singleLineStyle(d,i)}}}}}var H=S.selectAll(".js-line").data(q);v(H.exit()).style("opacity",0).remove(),H.each(W(!1)),H.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(s.lineGroupStyle).each(W(!0)),s.setClipUrl(H,r.layerClipId,e),q.length?(N?(N.datum(d),B&&Y&&(z?("y"===z?B[1]=Y[1]=b.c2p(0,!0):"x"===z&&(B[0]=Y[0]=g.c2p(0,!0)),v(N).attr("d","M"+Y+"L"+B+"L"+R.substr(1)).call(s.singleFillStyle)):v(N).attr("d",R+"Z").call(s.singleFillStyle))):M&&("tonext"===k.fill.substr(0,6)&&R&&I?("tonext"===k.fill?v(M).attr("d",R+"Z"+I+"Z").call(s.singleFillStyle):v(M).attr("d",R+"L"+I.substr(1)+"Z").call(s.singleFillStyle),k._polygons=k._polygons.concat(P)):(V(M),k._polygons=null)),k._prevRevpath=X,k._prevPolygons=G):(N?V(N):M&&V(M),k._polygons=k._prevRevpath=k._prevPolygons=null),w.datum(d),O.datum(d),function(t,i,o){var n,p=o[0].trace,d=c.hasMarkers(p),f=c.hasText(p),h=ee(p),y=te,u=te;if(d||f){var x=l,k=p.stackgroup,T=k&&"infer zero"===e._fullLayout._scatterStackOpts[g._id+b._id][k].stackgaps;p.marker.maxdisplayed||p._needsCull?x=T?K:J:k&&!T&&(x=$),d&&(y=x),f&&(u=x)}var A,_=(n=t.selectAll("path.point").data(y,h)).enter().append("path").classed("point",!0);m&&_.call(s.pointStyle,p,e).call(s.translatePoints,g,b).style("opacity",0).transition().style("opacity",1),n.order(),d&&(A=s.makePointStyleFns(p)),n.each((function(t){var i=a.select(this),o=v(i);s.translatePoint(t,o,g,b)?(s.singlePointStyle(t,o,p,A,e),r.layerClipId&&s.hideOutsideRangePoint(t,o,g,b,p.xcalendar,p.ycalendar),p.customdata&&i.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):o.remove()})),m?n.exit().transition().style("opacity",0).remove():n.exit().remove(),(n=i.selectAll("g").data(u,h)).enter().append("g").classed("textpoint",!0).append("text"),n.order(),n.each((function(e){var t=a.select(this),i=v(t.select("text"));s.translatePoint(e,i,g,b)?r.layerClipId&&s.hideOutsideRangePoint(e,t,g,b,p.xcalendar,p.ycalendar):t.remove()})),n.selectAll("text").call(s.textPointStyle,p,e).each((function(e){var t=g.c2p(e.x),r=b.c2p(e.y);a.select(this).selectAll("tspan.line").each((function(){v(a.select(this)).attr({x:t,y:r})}))})),n.exit().remove()}(w,O,d);var Z=!1===k.cliponaxis?null:r.layerClipId;s.setClipUrl(w,Z,e),s.setClipUrl(O,Z,e)}function V(e){v(e).attr("d","M0,0Z")}function J(e){return e.filter((function(e){return!e.gap&&e.vis}))}function K(e){return e.filter((function(e){return e.vis}))}function $(e){return e.filter((function(e){return!e.gap}))}function Q(e){return e.id}function ee(e){if(e.ids)return Q}function te(){return!1}}e.exports=function(e,t,r,i,o,c){var p,f,y=!o,u=!!o&&o.duration>0,x=d(e,t,r);((p=i.selectAll("g.trace").data(x,(function(e){return e[0].trace.uid}))).enter().append("g").attr("class",(function(e){return"trace scatter trace"+e[0].trace.uid})).style("stroke-miterlimit",2),p.order(),function(e,t,r){t.each((function(t){var i=n(a.select(this),"g","fills");s.setClipUrl(i,r.layerClipId,e);var o=t[0].trace,c=[];o._ownfill&&c.push("_ownFill"),o._nexttrace&&c.push("_nextFill");var p=i.selectAll("g").data(c,l);p.enter().append("g"),p.exit().each((function(e){o[e]=null})).remove(),p.order().each((function(e){o[e]=n(a.select(this),"path","js-fill")}))}))}(e,p,t),u)?(c&&(f=c()),a.transition().duration(o.duration).ease(o.easing).each("end",(function(){f&&f()})).each("interrupt",(function(){f&&f()})).each((function(){i.selectAll("g.trace").each((function(r,a){h(e,a,t,r,x,this,o)}))}))):p.each((function(r,a){h(e,a,t,r,x,this,o)}));y&&p.exit().remove(),i.selectAll("path:not([d])").remove()}},70473:function(e,t,r){var a=r(77638);e.exports=function(e,t){var r,i,o,n,l=e.cd,s=e.xaxis,c=e.yaxis,p=[],d=l[0].trace;if(!a.hasMarkers(d)&&!a.hasText(d))return[];if(!1===t)for(r=0;r<l.length;r++)l[r].selected=0;else for(r=0;r<l.length;r++)i=l[r],o=s.c2p(i.x),n=c.c2p(i.y),null!==i.i&&t.contains([o,n],!1,r,e)?(p.push({pointNumber:i.i,x:s.c2d(i.x),y:c.c2d(i.y)}),i.selected=1):i.selected=0;return p}},71950:function(e){var t=["orientation","groupnorm","stackgaps"];e.exports=function(e,r,a,i){var o=a._scatterStackOpts,n=i("stackgroup");if(n){var l=r.xaxis+r.yaxis,s=o[l];s||(s=o[l]={});var c=s[n],p=!1;c?c.traces.push(r):(c=s[n]={traceIndices:[],traces:[r]},p=!0);for(var d={orientation:r.x&&!r.y?"h":"v"},f=0;f<t.length;f++){var h=t[f],y=h+"Found";if(!c[y]){var u=void 0!==e[h],x="orientation"===h;if((u||p)&&(c[h]=i(h,d[h]),x&&(c.fillDflt="h"===c[h]?"tonextx":"tonexty"),u&&(c[y]=!0,!p&&(delete c.traces[0][h],x))))for(var m=0;m<c.traces.length-1;m++){var v=c.traces[m];v._input.fill!==v.fill&&(v.fill=c.fillDflt)}}}return c}}},78608:function(e,t,r){var a=r(62258),i=r(41707),o=r(62282);function n(e,t,r){i.pointStyle(e.selectAll("path.point"),t,r)}function l(e,t,r){i.textPointStyle(e.selectAll("text"),t,r)}e.exports={style:function(e){var t=a.select(e).selectAll("g.trace.scatter");t.style("opacity",(function(e){return e[0].trace.opacity})),t.selectAll("g.points").each((function(t){n(a.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.text").each((function(t){l(a.select(this),t.trace||t[0].trace,e)})),t.selectAll("g.trace path.js-line").call(i.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(i.fillGroupStyle),o.getComponentMethod("errorbars","style")(t)},stylePoints:n,styleText:l,styleOnSelect:function(e,t,r){var a=t[0].trace;a.selectedpoints?(i.selectedPointStyle(r.selectAll("path.point"),a),i.selectedTextStyle(r.selectAll("text"),a)):(n(r,a,e),l(r,a,e))}}},77638:function(e,t,r){var a=r(47401);e.exports={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&(e.mode&&-1!==e.mode.indexOf("markers")||"splom"===e.type)},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return a.isPlainObject(e.marker)&&a.isArrayOrTypedArray(e.marker.size)}}},60039:function(e,t,r){var a=r(47401);e.exports=function(e,t,r,i,o){o=o||{},i("textposition"),a.coerceFont(i,"textfont",r.font),o.noSelect||(i("selected.textfont.color"),i("unselected.textfont.color"))}},87243:function(e,t,r){var a=r(47401),i=r(62282);e.exports=function(e,t,r,o){var n,l=o("x"),s=o("y");if(i.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),l){var c=a.minRowLength(l);s?n=Math.min(c,a.minRowLength(s)):(n=c,o("y0"),o("dy"))}else{if(!s)return 0;n=a.minRowLength(s),o("x0"),o("dx")}return t._length=n,n}},60285:function(e,t,r){var a=r(47216),i=r(42837),o=r(4216).r,n=r(4216).a,l=r(97451),s=r(87241).extendFlat,c=a.marker,p=a.line,d=c.line;e.exports={carpet:{valType:"string",editType:"calc",description:["An identifier for this carpet, so that `scattercarpet` and","`contourcarpet` traces can specify a carpet plot on which","they lie"].join(" ")},a:{valType:"data_array",editType:"calc",description:"Sets the a-axis coordinates."},b:{valType:"data_array",editType:"calc",description:"Sets the b-axis coordinates."},mode:s({},a.mode,{dflt:"markers"}),text:s({},a.text,{description:["Sets text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:n({editType:"plot"},{keys:["a","b","text"]}),hovertext:s({},a.hovertext,{description:["Sets hover text elements associated with each (a,b) point.","If a single string, the same string appears over","all the data points.","If an array of strings, the items are mapped in order to the","the data points in (a,b).","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),line:{color:p.color,width:p.width,dash:p.dash,shape:s({},p.shape,{values:["linear","spline"]}),smoothing:p.smoothing,editType:"calc"},connectgaps:a.connectgaps,fill:s({},a.fill,{values:["none","toself","tonext"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","scatterternary has a subset of the options available to scatter.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape.","*tonext* fills the space between two traces if one completely","encloses the other (eg consecutive contour lines), and behaves like","*toself* if there is no trace before it. *tonext* should not be","used if one trace does not enclose the other."].join(" ")}),fillcolor:a.fillcolor,marker:s({symbol:c.symbol,opacity:c.opacity,maxdisplayed:c.maxdisplayed,size:c.size,sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,line:s({width:d.width,editType:"calc"},l("marker.line")),gradient:c.gradient,editType:"calc"},l("marker")),textfont:a.textfont,textposition:a.textposition,selected:a.selected,unselected:a.unselected,hoverinfo:s({},i.hoverinfo,{flags:["a","b","text","name"]}),hoveron:a.hoveron,hovertemplate:o()}},9137:function(e,t,r){var a=r(83491),i=r(54952),o=r(79475),n=r(35533),l=r(28864).calcMarkerSize,s=r(26683);e.exports=function(e,t){var r=t._carpetTrace=s(e,t);if(r&&r.visible&&"legendonly"!==r.visible){var c;t.xaxis=r.xaxis,t.yaxis=r.yaxis;var p,d,f=t._length,h=new Array(f),y=!1;for(c=0;c<f;c++)if(p=t.a[c],d=t.b[c],a(p)&&a(d)){var u=r.ab2xy(+p,+d,!0),x=r.isVisible(+p,+d);x||(y=!0),h[c]={x:u[0],y:u[1],a:p,b:d,vis:x}}else h[c]={x:!1,y:!1};return t._needsCull=y,h[0].carpet=r,h[0].trace=t,l(t,f),i(e,t),o(h,t),n(h,t),h}}},77738:function(e,t,r){var a=r(47401),i=r(20580),o=r(77638),n=r(47008),l=r(99144),s=r(43234),c=r(60039),p=r(64498),d=r(60285);e.exports=function(e,t,r,f){function h(r,i){return a.coerce(e,t,d,r,i)}h("carpet"),t.xaxis="x",t.yaxis="y";var y=h("a"),u=h("b"),x=Math.min(y.length,u.length);if(x){t._length=x,h("text"),h("texttemplate"),h("hovertext"),h("mode",x<i.PTS_LINESONLY?"lines+markers":"lines"),o.hasLines(t)&&(l(e,t,r,f,h),s(e,t,h),h("connectgaps")),o.hasMarkers(t)&&n(e,t,r,f,h,{gradient:!0}),o.hasText(t)&&c(e,t,f,h);var m=[];(o.hasMarkers(t)||o.hasText(t))&&(h("marker.maxdisplayed"),m.push("points")),h("fill"),"none"!==t.fill&&(p(e,t,r,h),o.hasLines(t)||s(e,t,h)),"tonext"!==t.fill&&"toself"!==t.fill||m.push("fills"),"fills"!==h("hoveron",m.join("+")||"points")&&h("hovertemplate"),a.coerceSelectionMarkerOpacity(t,h)}else t.visible=!1}},3057:function(e){e.exports=function(e,t,r,a,i){var o=a[i];return e.a=o.a,e.b=o.b,e.y=o.y,e}},65589:function(e){e.exports=function(e,t){var r={},a=t._carpet,i=a.ab2ij([e.a,e.b]),o=Math.floor(i[0]),n=i[0]-o,l=Math.floor(i[1]),s=i[1]-l,c=a.evalxy([],o,l,n,s);return r.yLabel=c[1].toFixed(3),r}},58124:function(e,t,r){var a=r(62967),i=r(47401).fillText;e.exports=function(e,t,r,o){var n=a(e,t,r,o);if(n&&!1!==n[0].index){var l=n[0];if(void 0===l.index){var s=1-l.y0/e.ya._length,c=e.xa._length,p=c*s/2,d=c-p;return l.x0=Math.max(Math.min(l.x0,d),p),l.x1=Math.max(Math.min(l.x1,d),p),n}var f=l.cd[l.index];l.a=f.a,l.b=f.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var h=l.trace,y=h._carpet,u=h._module.formatLabels(f,h);l.yLabel=u.yLabel,delete l.text;var x=[];if(!h.hovertemplate){var m=(f.hi||h.hoverinfo).split("+");-1!==m.indexOf("all")&&(m=["a","b","text"]),-1!==m.indexOf("a")&&v(y.aaxis,f.a),-1!==m.indexOf("b")&&v(y.baxis,f.b),x.push("y: "+l.yLabel),-1!==m.indexOf("text")&&i(f,h,x),l.extraText=x.join("<br>")}return n}function v(e,t){var r;r=e.labelprefix&&e.labelprefix.length>0?e.labelprefix.replace(/ = $/,""):e._hovertitle,x.push(r+": "+t.toFixed(3)+e.labelsuffix)}}},80102:function(e,t,r){e.exports={attributes:r(60285),supplyDefaults:r(77738),colorbar:r(78666),formatLabels:r(65589),calc:r(9137),plot:r(47847),style:r(78608).style,styleOnSelect:r(78608).styleOnSelect,hoverPoints:r(58124),selectPoints:r(70473),eventData:r(3057),moduleType:"trace",name:"scattercarpet",basePlotModule:r(66807),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{hrName:"scatter_carpet",description:["Plots a scatter trace on either the first carpet axis or the","carpet axis with a matching `carpet` attribute."].join(" ")}}},47847:function(e,t,r){var a=r(24498),i=r(37762),o=r(41707);e.exports=function(e,t,r,n){var l,s,c,p=r[0][0].carpet,d={xaxis:i.getFromId(e,p.xaxis||"x"),yaxis:i.getFromId(e,p.yaxis||"y"),plot:t.plot};for(a(e,d,r,n),l=0;l<r.length;l++)s=r[l][0].trace,c=n.selectAll("g.trace"+s.uid+" .js-line"),o.setClipUrl(c,r[l][0].carpet._clipPathId,e)}},75805:function(e,t,r){var a=r(4216).r,i=r(4216).a,o=r(47216),n=r(42837),l=r(97451),s=r(34418).T,c=r(87241).extendFlat,p=r(17342).overrideAll,d=o.marker,f=o.line,h=d.line;e.exports=p({lon:{valType:"data_array",description:"Sets the longitude coordinates (in degrees East)."},lat:{valType:"data_array",description:"Sets the latitude coordinates (in degrees North)."},locations:{valType:"data_array",description:["Sets the coordinates via location IDs or names.","Coordinates correspond to the centroid of each location given.","See `locationmode` for more info."].join(" ")},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3",description:["Determines the set of locations used to match entries in `locations`","to regions on the map.","Values *ISO-3*, *USA-states*, *country names* correspond to features on","the base map and value *geojson-id* corresponds to features from a custom","GeoJSON linked to the `geojson` attribute."].join(" ")},geojson:{valType:"any",editType:"calc",description:["Sets optional GeoJSON data associated with this trace.","If not given, the features on the base map are used when `locations` is set.","It can be set as a valid GeoJSON object or as a URL string.","Note that we only accept GeoJSONs of type *FeatureCollection* or *Feature*","with geometries of type *Polygon* or *MultiPolygon*."].join(" ")},featureidkey:{valType:"string",editType:"calc",dflt:"id",description:["Sets the key in GeoJSON features which is used as id to match the items","included in the `locations` array.","Only has an effect when `geojson` is set.","Support nested property, for example *properties.name*."].join(" ")},mode:c({},o.mode,{dflt:"markers"}),text:c({},o.text,{description:["Sets text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","If trace `hoverinfo` contains a *text* flag and *hovertext* is not set,","these elements will be seen in the hover labels."].join(" ")}),texttemplate:i({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:c({},o.hovertext,{description:["Sets hover text elements associated with each (lon,lat) pair","or item in `locations`.","If a single string, the same string appears over","all the data points.","If an array of string, the items are mapped in order to the","this trace's (lon,lat) or `locations` coordinates.","To be seen, trace `hoverinfo` must contain a *text* flag."].join(" ")}),textfont:o.textfont,textposition:o.textposition,line:{color:f.color,width:f.width,dash:s},connectgaps:o.connectgaps,marker:c({symbol:d.symbol,opacity:d.opacity,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,colorbar:d.colorbar,line:c({width:h.width},l("marker.line")),gradient:d.gradient},l("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none",description:["Sets the area to fill with a solid color.","Use with `fillcolor` if not *none*.","*toself* connects the endpoints of the trace (or each segment","of the trace if it has gaps) into a closed shape."].join(" ")},fillcolor:o.fillcolor,selected:o.selected,unselected:o.unselected,hoverinfo:c({},n.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:a()},"calc","nested")},84945:function(e,t,r){var a=r(83491),i=r(9405).BADNUM,o=r(54952),n=r(79475),l=r(35533),s=r(47401)._;function c(e){return e&&"string"===typeof e}e.exports=function(e,t){var r,p=Array.isArray(t.locations),d=p?t.locations.length:t._length,f=new Array(d);r=t.geojson?function(e){return c(e)||a(e)}:c;for(var h=0;h<d;h++){var y=f[h]={};if(p){var u=t.locations[h];y.loc=r(u)?u:null}else{var x=t.lon[h],m=t.lat[h];a(x)&&a(m)?y.lonlat=[+x,+m]:y.lonlat=[i,i]}}return n(f,t),o(e,t),l(f,t),d&&(f[0].t={labels:{lat:s(e,"lat:")+" ",lon:s(e,"lon:")+" "}}),f}},29770:function(e,t,r){var a=r(47401),i=r(77638),o=r(47008),n=r(99144),l=r(60039),s=r(64498),c=r(75805);e.exports=function(e,t,r,p){function d(r,i){return a.coerce(e,t,c,r,i)}var f,h=d("locations");if(h&&h.length){var y,u=d("geojson");("string"===typeof u&&""!==u||a.isPlainObject(u))&&(y="geojson-id"),"geojson-id"===d("locationmode",y)&&d("featureidkey"),f=h.length}else{var x=d("lon")||[],m=d("lat")||[];f=Math.min(x.length,m.length)}f?(t._length=f,d("text"),d("hovertext"),d("hovertemplate"),d("mode"),i.hasLines(t)&&(n(e,t,r,p,d),d("connectgaps")),i.hasMarkers(t)&&o(e,t,r,p,d,{gradient:!0}),i.hasText(t)&&(d("texttemplate"),l(e,t,p,d)),d("fill"),"none"!==t.fill&&s(e,t,r,d),a.coerceSelectionMarkerOpacity(t,d)):t.visible=!1}},18577:function(e){e.exports=function(e,t,r,a,i){e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null;var o=a[i];return o.fIn&&o.fIn.properties&&(e.properties=o.fIn.properties),e}},84834:function(e,t,r){var a=r(37762);e.exports=function(e,t,r){var i={},o=r[t.geo]._subplot.mockAxis,n=e.lonlat;return i.lonLabel=a.tickText(o,o.c2l(n[0]),!0).text,i.latLabel=a.tickText(o,o.c2l(n[1]),!0).text,i}},94284:function(e,t,r){var a=r(21661),i=r(9405).BADNUM,o=r(56035),n=r(47401).fillText,l=r(75805);e.exports=function(e,t,r){var s=e.cd,c=s[0].trace,p=e.xa,d=e.ya,f=e.subplot,h=f.projection.isLonLatOverEdges,y=f.project;if(a.getClosest(s,(function(e){var a=e.lonlat;if(a[0]===i)return 1/0;if(h(a))return 1/0;var o=y(a),n=y([t,r]),l=Math.abs(o[0]-n[0]),s=Math.abs(o[1]-n[1]),c=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(l*l+s*s)-c,1-3/c)}),e),!1!==e.index){var u=s[e.index],x=u.lonlat,m=[p.c2p(x),d.c2p(x)],v=u.mrc||1;e.x0=m[0]-v,e.x1=m[0]+v,e.y0=m[1]-v,e.y1=m[1]+v,e.loc=u.loc,e.lon=x[0],e.lat=x[1];var g={};g[c.geo]={_subplot:f};var b=c._module.formatLabels(u,c,g);return e.lonLabel=b.lonLabel,e.latLabel=b.latLabel,e.color=o(c,u),e.extraText=function(e,t,r,a){if(e.hovertemplate)return;var i=t.hi||e.hoverinfo,o="all"===i?l.hoverinfo.flags:i.split("+"),s=-1!==o.indexOf("location")&&Array.isArray(e.locations),c=-1!==o.indexOf("lon"),p=-1!==o.indexOf("lat"),d=-1!==o.indexOf("text"),f=[];function h(e){return e+"\xb0"}s?f.push(t.loc):c&&p?f.push("("+h(r.latLabel)+", "+h(r.lonLabel)+")"):c?f.push(a.lon+h(r.lonLabel)):p&&f.push(a.lat+h(r.latLabel));d&&n(t,e,f);return f.join("<br>")}(c,u,e,s[0].t.labels),e.hovertemplate=c.hovertemplate,[e]}}},99910:function(e,t,r){e.exports={attributes:r(75805),supplyDefaults:r(29770),colorbar:r(78666),formatLabels:r(84834),calc:r(84945),calcGeoJSON:r(23655).calcGeoJSON,plot:r(23655).plot,style:r(53471),styleOnSelect:r(78608).styleOnSelect,hoverPoints:r(94284),eventData:r(18577),selectPoints:r(83596),moduleType:"trace",name:"scattergeo",basePlotModule:r(34024),categories:["geo","symbols","showLegend","scatter-like"],meta:{hrName:"scatter_geo",description:["The data visualized as scatter point or lines on a geographic map","is provided either by longitude/latitude pairs in `lon` and `lat`","respectively or by geographic location IDs or names in `locations`."].join(" ")}}},23655:function(e,t,r){var a=r(62258),i=r(47401),o=r(57481).getTopojsonFeatures,n=r(92380),l=r(40458),s=r(9319).findExtremes,c=r(9405).BADNUM,p=r(28864).calcMarkerSize,d=r(77638),f=r(53471);e.exports={calcGeoJSON:function(e,t){var r,a,i=e[0].trace,n=t[i.geo],d=n._subplot,f=i._length;if(Array.isArray(i.locations)){var h=i.locationmode,y="geojson-id"===h?l.extractTraceFeature(e):o(i,d.topojson);for(r=0;r<f;r++){a=e[r];var u="geojson-id"===h?a.fOut:l.locationToFeature(h,a.loc,y);a.lonlat=u?u.properties.ct:[c,c]}}var x,m,v={padded:!0};if("geojson"===n.fitbounds&&"geojson-id"===i.locationmode){var g=l.computeBbox(l.getTraceGeojson(i));x=[g[0],g[2]],m=[g[1],g[3]]}else{for(x=new Array(f),m=new Array(f),r=0;r<f;r++)a=e[r],x[r]=a.lonlat[0],m[r]=a.lonlat[1];v.ppad=p(i,f)}i._extremes.lon=s(n.lonaxis._ax,x,v),i._extremes.lat=s(n.lataxis._ax,m,v)},plot:function(e,t,r){var o=t.layers.frontplot.select(".scatterlayer"),l=i.makeTraceGroups(o,r,"trace scattergeo");function s(e,t){e.lonlat[0]===c&&a.select(t).remove()}l.selectAll("*").remove(),l.each((function(t){var r=a.select(this),o=t[0].trace;if(d.hasLines(o)||"none"!==o.fill){var l=n.calcTraceToLineCoords(t),c="none"!==o.fill?n.makePolygon(l):n.makeLine(l);r.selectAll("path.js-line").data([{geojson:c,trace:o}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}d.hasMarkers(o)&&r.selectAll("path.point").data(i.identity).enter().append("path").classed("point",!0).each((function(e){s(e,this)})),d.hasText(o)&&r.selectAll("g").data(i.identity).enter().append("g").append("text").each((function(e){s(e,this)})),f(e,t)}))}}},83596:function(e,t,r){var a=r(77638),i=r(9405).BADNUM;e.exports=function(e,t){var r,o,n,l,s,c=e.cd,p=e.xaxis,d=e.yaxis,f=[],h=c[0].trace;if(!a.hasMarkers(h)&&!a.hasText(h))return[];if(!1===t)for(s=0;s<c.length;s++)c[s].selected=0;else for(s=0;s<c.length;s++)(o=(r=c[s]).lonlat)[0]!==i&&(n=p.c2p(o),l=d.c2p(o),t.contains([n,l],null,s,e)?(f.push({pointNumber:s,lon:o[0],lat:o[1]}),r.selected=1):r.selected=0);return f}},53471:function(e,t,r){var a=r(62258),i=r(41707),o=r(31454),n=r(78608),l=n.stylePoints,s=n.styleText;e.exports=function(e,t){t&&function(e,t){var r=t[0].trace,n=t[0].node3;n.style("opacity",t[0].trace.opacity),l(n,r,e),s(n,r,e),n.selectAll("path.js-line").style("fill","none").each((function(e){var t=a.select(this),r=e.trace,n=r.line||{};t.call(o.stroke,n.color).call(i.dashLine,n.dash||"",n.width||0),"none"!==r.fill&&t.call(o.fill,r.fillcolor)}))}(e,t)}},38857:function(e,t,r){var a=r(42837),i=r(47216),o=r(20184).axisHoverFormat,n=r(97451),l=r(73314),s=r(87241).extendFlat,c=r(17342).overrideAll,p=r(47163).DASHES,d=i.line,f=i.marker,h=f.line,y=e.exports=c({x:i.x,x0:i.x0,dx:i.dx,y:i.y,y0:i.y0,dy:i.dy,xperiod:i.xperiod,yperiod:i.yperiod,xperiod0:i.xperiod0,yperiod0:i.yperiod0,xperiodalignment:i.xperiodalignment,yperiodalignment:i.yperiodalignment,xhoverformat:o("x"),yhoverformat:o("y"),text:i.text,hovertext:i.hovertext,textposition:i.textposition,textfont:i.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],description:["Determines the drawing mode for this scatter trace."].join(" ")},line:{color:d.color,width:d.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot",description:["Determines the line shape.","The values correspond to step-wise line shapes."].join(" ")},dash:{valType:"enumerated",values:l(p),dflt:"solid",description:"Sets the style of the lines."}},marker:s({},n("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:s({},n("marker.line"),{width:h.width})}),connectgaps:i.connectgaps,fill:s({},i.fill,{dflt:"none"}),fillcolor:i.fillcolor,selected:{marker:i.selected.marker,textfont:i.selected.textfont},unselected:{marker:i.unselected.marker,textfont:i.unselected.textfont},opacity:a.opacity},"calc","nested");y.x.editType=y.y.editType=y.x0.editType=y.y0.editType="calc+clearAxisTypes",y.hovertemplate=i.hovertemplate,y.texttemplate=i.texttemplate},7277:function(e,t,r){var a=r(31575),i=r(47401),o=r(77063),n=r(9319).findExtremes,l=r(48128),s=r(28864),c=s.calcMarkerSize,p=s.calcAxisExpansion,d=s.setFirstScatter,f=r(54952),h=r(60465),y=r(92240),u=r(9405).BADNUM,x=r(47163).TOO_MANY_POINTS;function m(e,t,r){var a=e._extremes[t._id],i=n(t,r._bnds,{padded:!0});a.min=a.min.concat(i.min),a.max=a.max.concat(i.max)}e.exports=function(e,t){var r,n=e._fullLayout,s=o.getFromId(e,t.xaxis),v=o.getFromId(e,t.yaxis),g=n._plots[t.xaxis+t.yaxis],b=t._length,k=b>=x,T=2*b,A={},_=s.makeCalcdata(t,"x"),S=v.makeCalcdata(t,"y"),w=l(t,s,"x",_),O=l(t,v,"y",S),N=w.vals,M=O.vals;t._x=N,t._y=M,t.xperiodalignment&&(t._origX=_,t._xStarts=w.starts,t._xEnds=w.ends),t.yperiodalignment&&(t._origY=S,t._yStarts=O.starts,t._yEnds=O.ends);var z=new Array(T),L=new Array(b);for(r=0;r<b;r++)z[2*r]=N[r]===u?NaN:N[r],z[2*r+1]=M[r]===u?NaN:M[r],L[r]=r;if("log"===s.type)for(r=0;r<T;r+=2)z[r]=s.c2l(z[r]);if("log"===v.type)for(r=1;r<T;r+=2)z[r]=v.c2l(z[r]);k&&"log"!==s.type&&"log"!==v.type?A.tree=a(z):A.ids=L,f(e,t);var j,I=function(e,t,r,a,o,n){var l=h.style(e,r);l.marker&&(l.marker.positions=a);l.line&&a.length>1&&i.extendFlat(l.line,h.linePositions(e,r,a));if(l.errorX||l.errorY){var s=h.errorBarPositions(e,r,a,o,n);l.errorX&&i.extendFlat(l.errorX,s.x),l.errorY&&i.extendFlat(l.errorY,s.y)}l.text&&(i.extendFlat(l.text,{positions:a},h.textPosition(e,r,l.text,l.marker)),i.extendFlat(l.textSel,{positions:a},h.textPosition(e,r,l.text,l.markerSel)),i.extendFlat(l.textUnsel,{positions:a},h.textPosition(e,r,l.text,l.markerUnsel)));return l}(e,0,t,z,N,M),P=y(e,g);return d(n,t),k?I.marker&&(j=I.marker.sizeAvg||Math.max(I.marker.size,3)):j=c(t,b),p(e,t,s,v,N,M,j),I.errorX&&m(t,s,I.errorX),I.errorY&&m(t,v,I.errorY),I.fill&&!P.fill2d&&(P.fill2d=!0),I.marker&&!P.scatter2d&&(P.scatter2d=!0),I.line&&!P.line2d&&(P.line2d=!0),!I.errorX&&!I.errorY||P.error2d||(P.error2d=!0),I.text&&!P.glText&&(P.glText=!0),I.marker&&(I.marker.snap=b),P.lineOptions.push(I.line),P.errorXOptions.push(I.errorX),P.errorYOptions.push(I.errorY),P.fillOptions.push(I.fill),P.markerOptions.push(I.marker),P.markerSelectedOptions.push(I.markerSel),P.markerUnselectedOptions.push(I.markerUnsel),P.textOptions.push(I.text),P.textSelectedOptions.push(I.textSel),P.textUnselectedOptions.push(I.textUnsel),P.selectBatch.push([]),P.unselectBatch.push([]),A._scene=P,A.index=P.count,A.x=N,A.y=M,A.positions=z,P.count++,[{x:!1,y:!1,t:A,trace:t}]}},47163:function(e){e.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},60465:function(e,t,r){var a=r(83491),i=r(96547),o=r(5601),n=r(62282),l=r(47401),s=r(41707),c=r(77063),p=r(63750).formatColor,d=r(77638),f=r(69407),h=r(9915),y=r(47163),u=r(49158).DESELECTDIM,x={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},m=r(14904).appendArrayPointValue;function v(e,t){var r,i=e._fullLayout,o=t._length,n=t.textfont,s=t.textposition,c=Array.isArray(s)?s:[s],p=n.color,d=n.size,f=n.family,h={},y=e._context.plotGlPixelRatio,u=t.texttemplate;if(u){h.text=[];var x=i._d3locale,v=Array.isArray(u),g=v?Math.min(u.length,o):o,b=v?function(e){return u[e]}:function(){return u};for(r=0;r<g;r++){var k={i:r},T=t._module.formatLabels(k,t,i),A={};m(A,t,r);var _=t._meta||{};h.text.push(l.texttemplateString(b(r),T,x,A,k,_))}}else Array.isArray(t.text)&&t.text.length<o?h.text=t.text.slice():h.text=t.text;if(Array.isArray(h.text))for(r=h.text.length;r<o;r++)h.text[r]="";for(h.opacity=t.opacity,h.font={},h.align=[],h.baseline=[],r=0;r<c.length;r++){var S=c[r].split(/\s+/);switch(S[1]){case"left":h.align.push("right");break;case"right":h.align.push("left");break;default:h.align.push(S[1])}switch(S[0]){case"top":h.baseline.push("bottom");break;case"bottom":h.baseline.push("top");break;default:h.baseline.push(S[0])}}if(Array.isArray(p))for(h.color=new Array(o),r=0;r<o;r++)h.color[r]=p[r];else h.color=p;if(l.isArrayOrTypedArray(d)||Array.isArray(f))for(h.font=new Array(o),r=0;r<o;r++){var w=h.font[r]={};w.size=(l.isTypedArray(d)?d[r]:Array.isArray(d)?a(d[r])?d[r]:0:d)*y,w.family=Array.isArray(f)?f[r]:f}else h.font={size:d*y,family:f};return h}function g(e){var t,r,a=e._length,i=e.marker,n={},s=l.isArrayOrTypedArray(i.symbol),c=l.isArrayOrTypedArray(i.color),d=l.isArrayOrTypedArray(i.line.color),y=l.isArrayOrTypedArray(i.opacity),u=l.isArrayOrTypedArray(i.size),x=l.isArrayOrTypedArray(i.line.width);if(s||(r=h.isOpenSymbol(i.symbol)),s||c||d||y){n.colors=new Array(a),n.borderColors=new Array(a);var m=p(i,i.opacity,a),v=p(i.line,i.opacity,a);if(!Array.isArray(v[0])){var g=v;for(v=Array(a),t=0;t<a;t++)v[t]=g}if(!Array.isArray(m[0])){var b=m;for(m=Array(a),t=0;t<a;t++)m[t]=b}for(n.colors=m,n.borderColors=v,t=0;t<a;t++){if(s){var k=i.symbol[t];r=h.isOpenSymbol(k)}r&&(v[t]=m[t].slice(),m[t]=m[t].slice(),m[t][3]=0)}n.opacity=e.opacity}else r?(n.color=o(i.color,"uint8"),n.color[3]=0,n.borderColor=o(i.color,"uint8")):(n.color=o(i.color,"uint8"),n.borderColor=o(i.line.color,"uint8")),n.opacity=e.opacity*i.opacity;if(s)for(n.markers=new Array(a),t=0;t<a;t++)n.markers[t]=N(i.symbol[t]);else n.marker=N(i.symbol);var T,A=f(e,1);if(u||x){var _,S=n.sizes=new Array(a),w=n.borderSizes=new Array(a),O=0;if(u){for(t=0;t<a;t++)S[t]=A(i.size[t]),O+=S[t];_=O/a}else for(T=A(i.size),t=0;t<a;t++)S[t]=T;if(x)for(t=0;t<a;t++)w[t]=i.line.width[t];else for(T=i.line.width,t=0;t<a;t++)w[t]=T;n.sizeAvg=_}else n.size=A(i&&i.size||10),n.borderSizes=A(i.line.width);return n}function b(e,t){var r=e.marker,a={};return t?(t.marker&&t.marker.symbol?a=g(l.extendFlat({},r,t.marker)):t.marker&&(t.marker.size&&(a.size=t.marker.size),t.marker.color&&(a.colors=t.marker.color),void 0!==t.marker.opacity&&(a.opacity=t.marker.opacity)),a):a}function k(e,t,r){var a={};if(!r)return a;if(r.textfont){var i={opacity:1,text:t.text,texttemplate:t.texttemplate,textposition:t.textposition,textfont:l.extendFlat({},t.textfont)};r.textfont&&l.extendFlat(i.textfont,r.textfont),a=v(e,i)}return a}function T(e,t,r){var a={capSize:2*t.width*r,lineWidth:t.thickness*r,color:t.color};return t.copy_ystyle&&(a=e.error_y),a}var A=y.SYMBOL_SDF_SIZE,_=y.SYMBOL_SIZE,S=y.SYMBOL_STROKE,w={},O=s.symbolFuncs[0](.05*_);function N(e){if("circle"===e)return null;var t,r,a=s.symbolNumber(e),o=s.symbolFuncs[a%100],n=!!s.symbolNoDot[a%100],l=!!s.symbolNoFill[a%100],c=h.isDotSymbol(e);return w[e]?w[e]:(t=c&&!n?o(1.1*_)+O:o(_),r=i(t,{w:A,h:A,viewBox:[-_,-_,_,_],stroke:l?S:-S}),w[e]=r,r||null)}e.exports={style:function(e,t){var r,a={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},i=e._context.plotGlPixelRatio;if(!0!==t.visible)return a;if(d.hasText(t)&&(a.text=v(e,t),a.textSel=k(e,t,t.selected),a.textUnsel=k(e,t,t.unselected)),d.hasMarkers(t)&&(a.marker=g(t),a.markerSel=b(t,t.selected),a.markerUnsel=b(t,t.unselected),!t.unselected&&l.isArrayOrTypedArray(t.marker.opacity))){var o=t.marker.opacity;for(a.markerUnsel.opacity=new Array(o.length),r=0;r<o.length;r++)a.markerUnsel.opacity[r]=u*o[r]}if(d.hasLines(t)){a.line={overlay:!0,thickness:t.line.width*i,color:t.line.color,opacity:t.opacity};var n=(y.DASHES[t.line.dash]||[1]).slice();for(r=0;r<n.length;++r)n[r]*=t.line.width*i;a.line.dashes=n}return t.error_x&&t.error_x.visible&&(a.errorX=T(t,t.error_x,i)),t.error_y&&t.error_y.visible&&(a.errorY=T(t,t.error_y,i)),t.fill&&"none"!==t.fill&&(a.fill={closed:!0,fill:t.fillcolor,thickness:0}),a},markerStyle:g,markerSelection:b,linePositions:function(e,t,r){var a,i,o=r.length,n=o/2;if(d.hasLines(t)&&n)if("hv"===t.line.shape){for(a=[],i=0;i<n-1;i++)isNaN(r[2*i])||isNaN(r[2*i+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[2*i],r[2*i+1]),isNaN(r[2*i+2])||isNaN(r[2*i+3])?a.push(NaN,NaN):a.push(r[2*i+2],r[2*i+1]));a.push(r[o-2],r[o-1])}else if("hvh"===t.line.shape){for(a=[],i=0;i<n-1;i++)if(isNaN(r[2*i])||isNaN(r[2*i+1])||isNaN(r[2*i+2])||isNaN(r[2*i+3]))isNaN(r[2*i])||isNaN(r[2*i+1])?a.push(NaN,NaN):a.push(r[2*i],r[2*i+1]),a.push(NaN,NaN);else{var l=(r[2*i]+r[2*i+2])/2;a.push(r[2*i],r[2*i+1],l,r[2*i+1],l,r[2*i+3])}a.push(r[o-2],r[o-1])}else if("vhv"===t.line.shape){for(a=[],i=0;i<n-1;i++)if(isNaN(r[2*i])||isNaN(r[2*i+1])||isNaN(r[2*i+2])||isNaN(r[2*i+3]))isNaN(r[2*i])||isNaN(r[2*i+1])?a.push(NaN,NaN):a.push(r[2*i],r[2*i+1]),a.push(NaN,NaN);else{var s=(r[2*i+1]+r[2*i+3])/2;a.push(r[2*i],r[2*i+1],r[2*i],s,r[2*i+2],s)}a.push(r[o-2],r[o-1])}else if("vh"===t.line.shape){for(a=[],i=0;i<n-1;i++)isNaN(r[2*i])||isNaN(r[2*i+1])?a.push(NaN,NaN,NaN,NaN):(a.push(r[2*i],r[2*i+1]),isNaN(r[2*i+2])||isNaN(r[2*i+3])?a.push(NaN,NaN):a.push(r[2*i],r[2*i+3]));a.push(r[o-2],r[o-1])}else a=r;var c=!1;for(i=0;i<a.length;i++)if(isNaN(a[i])){c=!0;break}var p=c||a.length>y.TOO_MANY_POINTS||d.hasMarkers(t)?"rect":"round";if(c&&t.connectgaps){var f=a[0],h=a[1];for(i=0;i<a.length;i+=2)isNaN(a[i])||isNaN(a[i+1])?(a[i]=f,a[i+1]=h):(f=a[i],h=a[i+1])}return{join:p,positions:a}},errorBarPositions:function(e,t,r,i,o){var l=n.getComponentMethod("errorbars","makeComputeError"),s=c.getFromId(e,t.xaxis),p=c.getFromId(e,t.yaxis),d=r.length/2,f={};function h(e,i){var o=i._id.charAt(0),n=t["error_"+o];if(n&&n.visible&&("linear"===i.type||"log"===i.type)){for(var s=l(n),c={x:0,y:1}[o],p={x:[0,1,2,3],y:[2,3,0,1]}[o],h=new Float64Array(4*d),y=1/0,u=-1/0,x=0,m=0;x<d;x++,m+=4){var v=e[x];if(a(v)){var g=r[2*x+c],b=s(v,x),k=b[0],T=b[1];if(a(k)&&a(T)){var A=v-k,_=v+T;h[m+p[0]]=g-i.c2l(A),h[m+p[1]]=i.c2l(_)-g,h[m+p[2]]=0,h[m+p[3]]=0,y=Math.min(y,v-k),u=Math.max(u,v+T)}}}f[o]={positions:r,errors:h,_bnds:[y,u]}}}return h(i,s),h(o,p),f},textPosition:function(e,t,r,a){var i,o=t._length,n={};if(d.hasMarkers(t)){var l=r.font,s=r.align,c=r.baseline;for(n.offset=new Array(o),i=0;i<o;i++){var p=a.sizes?a.sizes[i]:a.size,f=Array.isArray(l)?l[i].size:l.size,h=Array.isArray(s)?s.length>1?s[i]:s[0]:s,y=Array.isArray(c)?c.length>1?c[i]:c[0]:c,u=x[h],m=x[y],v=p?p/.8+1:0,g=-m*v-.5*m;n.offset[i]=[u*v/f,g/f]}}return n}}},77774:function(e,t,r){var a=r(47401),i=r(62282),o=r(9915),n=r(38857),l=r(20580),s=r(77638),c=r(87243),p=r(75781),d=r(47008),f=r(99144),h=r(64498),y=r(60039);e.exports=function(e,t,r,u){function x(r,i){return a.coerce(e,t,n,r,i)}var m=!!e.marker&&o.isOpenSymbol(e.marker.symbol),v=s.isBubble(e),g=c(e,t,u,x);if(g){p(e,t,u,x),x("xhoverformat"),x("yhoverformat");var b=g<l.PTS_LINESONLY?"lines+markers":"lines";x("text"),x("hovertext"),x("hovertemplate"),x("mode",b),s.hasLines(t)&&(x("connectgaps"),f(e,t,r,u,x),x("line.shape")),s.hasMarkers(t)&&(d(e,t,r,u,x),x("marker.line.width",m||v?1:0)),s.hasText(t)&&(x("texttemplate"),y(e,t,u,x));var k=(t.line||{}).color,T=(t.marker||{}).color;x("fill"),"none"!==t.fill&&h(e,t,r,x);var A=i.getComponentMethod("errorbars","supplyDefaults");A(e,t,k||T||r,{axis:"y"}),A(e,t,k||T||r,{axis:"x",inherit:"y"}),a.coerceSelectionMarkerOpacity(t,x)}else t.visible=!1}},48038:function(e,t,r){var a=r(47401),i=r(31454),o=r(49158).DESELECTDIM;e.exports={styleTextSelection:function(e){var t,r,n=e[0],l=n.trace,s=n.t,c=s._scene,p=s.index,d=c.selectBatch[p],f=c.unselectBatch[p],h=c.textOptions[p],y=c.textSelectedOptions[p]||{},u=c.textUnselectedOptions[p]||{},x=a.extendFlat({},h);if(d.length||f.length){var m=y.color,v=u.color,g=h.color,b=Array.isArray(g);for(x.color=new Array(l._length),t=0;t<d.length;t++)r=d[t],x.color[r]=m||(b?g[r]:g);for(t=0;t<f.length;t++){r=f[t];var k=b?g[r]:g;x.color[r]=v||(m?k:i.addOpacity(k,o))}}c.glText[p].update(x)}}},56417:function(e,t,r){var a=r(62542);e.exports=function(e,t,r){var i=e.i;return"x"in e||(e.x=t._x[i]),"y"in e||(e.y=t._y[i]),a(e,t,r)}},9915:function(e,t,r){var a=r(47163);t.isOpenSymbol=function(e){return"string"===typeof e?a.OPEN_RE.test(e):e%200>100},t.isDotSymbol=function(e){return"string"===typeof e?a.DOT_RE.test(e):e>200}},5040:function(e,t,r){var a=r(62282),i=r(47401),o=r(56035);function n(e,t,r,n){var l=e.xa,s=e.ya,c=e.distance,p=e.dxy,d=e.index,f={pointNumber:d,x:t[d],y:r[d]};f.tx=Array.isArray(n.text)?n.text[d]:n.text,f.htx=Array.isArray(n.hovertext)?n.hovertext[d]:n.hovertext,f.data=Array.isArray(n.customdata)?n.customdata[d]:n.customdata,f.tp=Array.isArray(n.textposition)?n.textposition[d]:n.textposition;var h=n.textfont;h&&(f.ts=i.isArrayOrTypedArray(h.size)?h.size[d]:h.size,f.tc=Array.isArray(h.color)?h.color[d]:h.color,f.tf=Array.isArray(h.family)?h.family[d]:h.family);var y=n.marker;y&&(f.ms=i.isArrayOrTypedArray(y.size)?y.size[d]:y.size,f.mo=i.isArrayOrTypedArray(y.opacity)?y.opacity[d]:y.opacity,f.mx=i.isArrayOrTypedArray(y.symbol)?y.symbol[d]:y.symbol,f.mc=i.isArrayOrTypedArray(y.color)?y.color[d]:y.color);var u=y&&y.line;u&&(f.mlc=Array.isArray(u.color)?u.color[d]:u.color,f.mlw=i.isArrayOrTypedArray(u.width)?u.width[d]:u.width);var x=y&&y.gradient;x&&"none"!==x.type&&(f.mgt=Array.isArray(x.type)?x.type[d]:x.type,f.mgc=Array.isArray(x.color)?x.color[d]:x.color);var m=l.c2p(f.x,!0),v=s.c2p(f.y,!0),g=f.mrc||1,b=n.hoverlabel;b&&(f.hbg=Array.isArray(b.bgcolor)?b.bgcolor[d]:b.bgcolor,f.hbc=Array.isArray(b.bordercolor)?b.bordercolor[d]:b.bordercolor,f.hts=i.isArrayOrTypedArray(b.font.size)?b.font.size[d]:b.font.size,f.htc=Array.isArray(b.font.color)?b.font.color[d]:b.font.color,f.htf=Array.isArray(b.font.family)?b.font.family[d]:b.font.family,f.hnl=i.isArrayOrTypedArray(b.namelength)?b.namelength[d]:b.namelength);var k=n.hoverinfo;k&&(f.hi=Array.isArray(k)?k[d]:k);var T=n.hovertemplate;T&&(f.ht=Array.isArray(T)?T[d]:T);var A={};A[e.index]=f;var _=n._origX,S=n._origY,w=i.extendFlat({},e,{color:o(n,f),x0:m-g,x1:m+g,xLabelVal:_?_[d]:f.x,y0:v-g,y1:v+g,yLabelVal:S?S[d]:f.y,cd:A,distance:c,spikeDistance:p,hovertemplate:f.ht});return f.htx?w.text=f.htx:f.tx?w.text=f.tx:n.text&&(w.text=n.text),i.fillText(f,n,w),a.getComponentMethod("errorbars","hoverInfo")(f,n,w),w}e.exports={hoverPoints:function(e,t,r,a){var i,o,l,s,c,p,d,f,h,y,u=e.cd,x=u[0].t,m=u[0].trace,v=e.xa,g=e.ya,b=x.x,k=x.y,T=v.c2p(t),A=g.c2p(r),_=e.distance;if(x.tree){var S=v.p2c(T-_),w=v.p2c(T+_),O=g.p2c(A-_),N=g.p2c(A+_);i="x"===a?x.tree.range(Math.min(S,w),Math.min(g._rl[0],g._rl[1]),Math.max(S,w),Math.max(g._rl[0],g._rl[1])):x.tree.range(Math.min(S,w),Math.min(O,N),Math.max(S,w),Math.max(O,N))}else i=x.ids;var M=_;if("x"===a){var z=!!m.xperiodalignment,L=!!m.yperiodalignment;for(p=0;p<i.length;p++){if(s=b[o=i[p]],d=Math.abs(v.c2p(s)-T),z){var j=v.c2p(m._xStarts[o]),I=v.c2p(m._xEnds[o]);d=T>=Math.min(j,I)&&T<=Math.max(j,I)?0:1/0}if(d<M){if(M=d,c=k[o],f=g.c2p(c)-A,L){var P=g.c2p(m._yStarts[o]),D=g.c2p(m._yEnds[o]);f=A>=Math.min(P,D)&&A<=Math.max(P,D)?0:1/0}y=Math.sqrt(d*d+f*f),l=i[p]}}}else for(p=i.length-1;p>-1;p--)s=b[o=i[p]],c=k[o],d=v.c2p(s)-T,f=g.c2p(c)-A,(h=Math.sqrt(d*d+f*f))<M&&(M=y=h,l=o);return e.index=l,e.distance=M,e.dxy=y,void 0===l?[e]:[n(e,b,k,m)]},calcHover:n}},87946:function(e,t,r){var a=r(5040);e.exports={moduleType:"trace",name:"scattergl",basePlotModule:r(66807),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:r(38857),supplyDefaults:r(77774),crossTraceDefaults:r(67780),colorbar:r(78666),formatLabels:r(56417),calc:r(7277),plot:r(72707),hoverPoints:a.hoverPoints,selectPoints:r(62496),meta:{hrName:"scatter_gl",description:["The data visualized as scatter point or lines is set in `x` and `y`","using the WebGL plotting engine.","Bubble charts are achieved by setting `marker.size` and/or `marker.color`","to a numerical arrays."].join(" ")}}},72707:function(e,t,r){var a=r(67030),i=r(5980),o=r(57176),n=r(34254),l=r(47401),s=r(42910).selectMode,c=r(43147),p=r(77638),d=r(44906),f=r(48038).styleTextSelection;function h(e,t,r,a){var i=e._size,o=e.width*a,n=e.height*a,l=i.l*a,s=i.b*a,c=i.r*a,p=i.t*a,d=i.w*a,f=i.h*a;return[l+t.domain[0]*d,s+r.domain[0]*f,o-c-(1-t.domain[1])*d,n-p-(1-r.domain[1])*f]}e.exports=function(e,t,r){if(r.length){var y,u,x=e._fullLayout,m=t._scene,v=t.xaxis,g=t.yaxis;if(m)if(c(e,["ANGLE_instanced_arrays","OES_element_index_uint"])){var b=m.count,k=x._glcanvas.data()[0].regl;if(d(e,t,r),m.dirty){if(!0===m.error2d&&(m.error2d=o(k)),!0===m.line2d&&(m.line2d=i(k)),!0===m.scatter2d&&(m.scatter2d=a(k)),!0===m.fill2d&&(m.fill2d=i(k)),!0===m.glText)for(m.glText=new Array(b),y=0;y<b;y++)m.glText[y]=new n(k);if(m.glText){if(b>m.glText.length){var T=b-m.glText.length;for(y=0;y<T;y++)m.glText.push(new n(k))}else if(b<m.glText.length){var A=m.glText.length-b;m.glText.splice(b,A).forEach((function(e){e.destroy()}))}for(y=0;y<b;y++)m.glText[y].update(m.textOptions[y])}if(m.line2d&&(m.line2d.update(m.lineOptions),m.lineOptions=m.lineOptions.map((function(e){if(e&&e.positions){for(var t=e.positions,r=0;r<t.length&&(isNaN(t[r])||isNaN(t[r+1]));)r+=2;for(var a=t.length-2;a>r&&(isNaN(t[a])||isNaN(t[a+1]));)a-=2;e.positions=t.slice(r,a+2)}return e})),m.line2d.update(m.lineOptions)),m.error2d){var _=(m.errorXOptions||[]).concat(m.errorYOptions||[]);m.error2d.update(_)}m.scatter2d&&m.scatter2d.update(m.markerOptions),m.fillOrder=l.repeat(null,b),m.fill2d&&(m.fillOptions=m.fillOptions.map((function(e,t){var a=r[t];if(e&&a&&a[0]&&a[0].trace){var i,o,n=a[0],l=n.trace,s=n.t,c=m.lineOptions[t],p=[];l._ownfill&&p.push(t),l._nexttrace&&p.push(t+1),p.length&&(m.fillOrder[t]=p);var d,f,h=[],y=c&&c.positions||s.positions;if("tozeroy"===l.fill){for(d=0;d<y.length&&isNaN(y[d+1]);)d+=2;for(f=y.length-2;f>d&&isNaN(y[f+1]);)f-=2;0!==y[d+1]&&(h=[y[d],0]),h=h.concat(y.slice(d,f+2)),0!==y[f+1]&&(h=h.concat([y[f],0]))}else if("tozerox"===l.fill){for(d=0;d<y.length&&isNaN(y[d]);)d+=2;for(f=y.length-2;f>d&&isNaN(y[f]);)f-=2;0!==y[d]&&(h=[0,y[d+1]]),h=h.concat(y.slice(d,f+2)),0!==y[f]&&(h=h.concat([0,y[f+1]]))}else if("toself"===l.fill||"tonext"===l.fill){for(h=[],i=0,e.splitNull=!0,o=0;o<y.length;o+=2)(isNaN(y[o])||isNaN(y[o+1]))&&((h=h.concat(y.slice(i,o))).push(y[i],y[i+1]),h.push(null,null),i=o+2);h=h.concat(y.slice(i)),i&&h.push(y[i],y[i+1])}else{var u=l._nexttrace;if(u){var x=m.lineOptions[t+1];if(x){var v=x.positions;if("tonexty"===l.fill){for(h=y.slice(),t=Math.floor(v.length/2);t--;){var g=v[2*t],b=v[2*t+1];isNaN(g)||isNaN(b)||h.push(g,b)}e.fill=u.fillcolor}}}}if(l._prevtrace&&"tonext"===l._prevtrace.fill){var k=m.lineOptions[t-1].positions,T=h.length/2,A=[i=T];for(o=0;o<k.length;o+=2)(isNaN(k[o])||isNaN(k[o+1]))&&(A.push(o/2+T+1),i=o+2);h=h.concat(k),e.hole=A}return e.fillmode=l.fill,e.opacity=l.opacity,e.positions=h,e}})),m.fill2d.update(m.fillOptions))}var S=x.dragmode,w=s(S),O=x.clickmode.indexOf("select")>-1;for(y=0;y<b;y++){var N=r[y][0],M=N.trace,z=N.t,L=z.index,j=M._length,I=z.x,P=z.y;if(M.selectedpoints||w||O){if(w||(w=!0),M.selectedpoints){var D=m.selectBatch[L]=l.selIndices2selPoints(M),F={};for(u=0;u<D.length;u++)F[D[u]]=1;var E=[];for(u=0;u<j;u++)F[u]||E.push(u);m.unselectBatch[L]=E}var C=z.xpx=new Array(j),B=z.ypx=new Array(j);for(u=0;u<j;u++)C[u]=v.c2p(I[u]),B[u]=g.c2p(P[u])}else z.xpx=z.ypx=null}if(w){if(m.select2d||(m.select2d=a(x._glcanvas.data()[1].regl)),m.scatter2d){var U=new Array(b);for(y=0;y<b;y++)U[y]=m.selectBatch[y].length||m.unselectBatch[y].length?m.markerUnselectedOptions[y]:{};m.scatter2d.update(U)}m.select2d&&(m.select2d.update(m.markerOptions),m.select2d.update(m.markerSelectedOptions)),m.glText&&r.forEach((function(e){var t=((e||[])[0]||{}).trace||{};p.hasText(t)&&f(e)}))}else m.scatter2d&&m.scatter2d.update(m.markerOptions);var Y={viewport:h(x,v,g,e._context.plotGlPixelRatio),range:[(v._rl||v.range)[0],(g._rl||g.range)[0],(v._rl||v.range)[1],(g._rl||g.range)[1]]},G=l.repeat(Y,m.count);m.fill2d&&m.fill2d.update(G),m.line2d&&m.line2d.update(G),m.error2d&&m.error2d.update(G.concat(G)),m.scatter2d&&m.scatter2d.update(G),m.select2d&&m.select2d.update(G),m.glText&&m.glText.forEach((function(e){e.update(Y)}))}else m.init()}}},92240:function(e,t,r){var a=r(47401);e.exports=function(e,t){var r=t._scene,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return t._scene||((r=t._scene={}).init=function(){a.extendFlat(r,o,i)},r.init(),r.update=function(e){var t=a.repeat(e,r.count);if(r.fill2d&&r.fill2d.update(t),r.scatter2d&&r.scatter2d.update(t),r.line2d&&r.line2d.update(t),r.error2d&&r.error2d.update(t.concat(t)),r.select2d&&r.select2d.update(t),r.glText)for(var i=0;i<r.count;i++)r.glText[i].update(e)},r.draw=function(){for(var e=r.count,t=r.fill2d,i=r.error2d,o=r.line2d,n=r.scatter2d,l=r.glText,s=r.select2d,c=r.selectBatch,p=r.unselectBatch,d=0;d<e;d++){if(t&&r.fillOrder[d]&&t.draw(r.fillOrder[d]),o&&r.lineOptions[d]&&o.draw(d),i&&(r.errorXOptions[d]&&i.draw(d),r.errorYOptions[d]&&i.draw(d+e)),n&&r.markerOptions[d])if(p[d].length){var f=a.repeat([],r.count);f[d]=p[d],n.draw(f)}else c[d].length||n.draw(d);l[d]&&r.textOptions[d]&&l[d].render()}s&&s.draw(c),r.dirty=!1},r.destroy=function(){r.fill2d&&r.fill2d.destroy&&r.fill2d.destroy(),r.scatter2d&&r.scatter2d.destroy&&r.scatter2d.destroy(),r.error2d&&r.error2d.destroy&&r.error2d.destroy(),r.line2d&&r.line2d.destroy&&r.line2d.destroy(),r.select2d&&r.select2d.destroy&&r.select2d.destroy(),r.glText&&r.glText.forEach((function(e){e.destroy&&e.destroy()})),r.lineOptions=null,r.fillOptions=null,r.markerOptions=null,r.markerSelectedOptions=null,r.markerUnselectedOptions=null,r.errorXOptions=null,r.errorYOptions=null,r.textOptions=null,r.textSelectedOptions=null,r.textUnselectedOptions=null,r.selectBatch=null,r.unselectBatch=null,t._scene=null}),r.dirty||a.extendFlat(r,i),r}},62496:function(e,t,r){var a=r(77638),i=r(48038).styleTextSelection;e.exports=function(e,t){var r=e.cd,o=e.xaxis,n=e.yaxis,l=[],s=r[0].trace,c=r[0].t,p=s._length,d=c.x,f=c.y,h=c._scene,y=c.index;if(!h)return l;var u=a.hasText(s),x=a.hasMarkers(s),m=!x&&!u;if(!0!==s.visible||m)return l;var v=[],g=[];if(!1!==t&&!t.degenerate)for(var b=0;b<p;b++)t.contains([c.xpx[b],c.ypx[b]],!1,b,e)?(v.push(b),l.push({pointNumber:b,x:o.c2d(d[b]),y:n.c2d(f[b])})):g.push(b);if(x){var k=h.scatter2d;if(v.length||g.length){if(!h.selectBatch[y].length&&!h.unselectBatch[y].length){var T=new Array(h.count);T[y]=h.markerUnselectedOptions[y],k.update.apply(k,T)}}else{var A=new Array(h.count);A[y]=h.markerOptions[y],k.update.apply(k,A)}}return h.selectBatch[y]=v,h.unselectBatch[y]=g,u&&i(r),l}}}]);