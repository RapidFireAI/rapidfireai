"use strict";(self.webpackChunk_mlflow_mlflow=self.webpackChunk_mlflow_mlflow||[]).push([[4297],{5738:function(e,t,a){var n=a(47216),i=a(42837),r=a(20184).axisHoverFormat,o=a(4216).r,s=a(97451),l=a(87241).extendFlat;e.exports=l({z:{valType:"data_array",editType:"calc",description:"Sets the z data."},x:l({},n.x,{impliedEdits:{xtype:"array"}}),x0:l({},n.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},n.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},n.y,{impliedEdits:{ytype:"array"}}),y0:l({},n.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},n.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},n.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},n.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},n.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},n.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},n.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},n.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"calc",description:"Same as `text`."},transpose:{valType:"boolean",dflt:!1,editType:"calc",description:"Transposes the z data."},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's x coordinates are given by *x*","(the default behavior when `x` is provided).","If *scaled*, the heatmap's x coordinates are given by *x0* and *dx*","(the default behavior when `x` is not provided)."].join(" ")},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes",description:["If *array*, the heatmap's y coordinates are given by *y*","(the default behavior when `y` is provided)","If *scaled*, the heatmap's y coordinates are given by *y0* and *dy*","(the default behavior when `y` is not provided)"].join(" ")},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc",description:["Picks a smoothing algorithm use to smooth `z` data."].join(" ")},hoverongaps:{valType:"boolean",dflt:!0,editType:"none",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data have hover labels associated with them."].join(" ")},connectgaps:{valType:"boolean",editType:"calc",description:["Determines whether or not gaps","(i.e. {nan} or missing values)","in the `z` data are filled in.","It is defaulted to true if `z` is a","one dimensional array and `zsmooth` is not false;","otherwise it is defaulted to false."].join(" ")},xgap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the horizontal gap (in pixels) between bricks."},ygap:{valType:"number",dflt:0,min:0,editType:"plot",description:"Sets the vertical gap (in pixels) between bricks."},xhoverformat:r("x"),yhoverformat:r("y"),zhoverformat:r("z",1),hovertemplate:o(),showlegend:l({},i.showlegend,{dflt:!1})},{transforms:void 0},s("",{cLetter:"z",autoColorDflt:!1}))},63846:function(e,t,a){var n=a(62282),i=a(47401),r=a(37762),o=a(48128),s=a(89834),l=a(92171),c=a(48877),d=a(21605),u=a(82335),h=a(93290),p=a(59756),f=a(9405).BADNUM;function m(e){for(var t=[],a=e.length,n=0;n<a;n++){var i=e[n];i!==f&&t.push(i)}return t}e.exports=function(e,t){var a,g,y,v,x,b,T,_,w,z,k,M=r.getFromId(e,t.xaxis||"x"),A=r.getFromId(e,t.yaxis||"y"),S=n.traceIs(t,"contour"),I=n.traceIs(t,"histogram"),D=n.traceIs(t,"gl2d"),L=S?"best":t.zsmooth;if(M._minDtick=0,A._minDtick=0,I)v=(k=s(e,t)).orig_x,a=k.x,g=k.x0,y=k.dx,_=k.orig_y,x=k.y,b=k.y0,T=k.dy,w=k.z;else{var N=t.z;i.isArray1D(N)?(c(t,M,A,"x","y",["z"]),a=t._x,x=t._y,N=t._z):(v=t.x?M.makeCalcdata(t,"x"):[],_=t.y?A.makeCalcdata(t,"y"):[],a=o(t,M,"x",v).vals,x=o(t,A,"y",_).vals,t._x=a,t._y=x),g=t.x0,y=t.dx,b=t.y0,T=t.dy,w=d(N,t,M,A)}function j(e){L=t._input.zsmooth=t.zsmooth=!1,i.warn('cannot use zsmooth: "fast": '+e)}if((M.rangebreaks||A.rangebreaks)&&(w=function(e,t,a){for(var n=[],i=-1,r=0;r<a.length;r++)if(t[r]!==f){n[++i]=[];for(var o=0;o<a[r].length;o++)e[o]!==f&&n[i].push(a[r][o])}return n}(a,x,w),I||(a=m(a),x=m(x),t._x=a,t._y=x)),I||!S&&!t.connectgaps||(t._emptypoints=h(w),u(w,t._emptypoints)),"fast"===L)if("log"===M.type||"log"===A.type)j("log axis found");else if(!I){if(a.length){var F=(a[a.length-1]-a[0])/(a.length-1),O=Math.abs(F/100);for(z=0;z<a.length-1;z++)if(Math.abs(a[z+1]-a[z]-F)>O){j("x scale is not linear");break}}if(x.length&&"fast"===L){var C=(x[x.length-1]-x[0])/(x.length-1),E=Math.abs(C/100);for(z=0;z<x.length-1;z++)if(Math.abs(x[z+1]-x[z]-C)>E){j("y scale is not linear");break}}}var B=i.maxRowLength(w),P="scaled"===t.xtype?"":a,R=p(t,P,g,y,B,M),V="scaled"===t.ytype?"":x,G=p(t,V,b,T,w.length,A);D||(t._extremes[M._id]=r.findExtremes(M,R),t._extremes[A._id]=r.findExtremes(A,G));var U={x:R,y:G,z:w,text:t._text||t.text,hovertext:t._hovertext||t.hovertext};if(t.xperiodalignment&&v&&(U.orig_x=v),t.yperiodalignment&&_&&(U.orig_y=_),P&&P.length===R.length-1&&(U.xCenter=P),V&&V.length===G.length-1&&(U.yCenter=V),I&&(U.xRanges=k.xRanges,U.yRanges=k.yRanges,U.pts=k.pts),S||l(e,t,{vals:w,cLetter:"z"}),S&&t.contours&&"heatmap"===t.contours.coloring){var H={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};U.xfill=p(H,P,g,y,B,M),U.yfill=p(H,V,b,T,w.length,A)}return[U]}},21605:function(e,t,a){var n=a(83491),i=a(47401),r=a(9405).BADNUM;e.exports=function(e,t,a,o){var s,l,c,d,u,h;function p(e){if(n(e))return+e}if(t&&t.transpose){for(s=0,u=0;u<e.length;u++)s=Math.max(s,e[u].length);if(0===s)return!1;c=function(e){return e.length},d=function(e,t,a){return(e[a]||[])[t]}}else s=e.length,c=function(e,t){return e[t].length},d=function(e,t,a){return(e[t]||[])[a]};var f=function(e,t,a){return t===r||a===r?r:d(e,t,a)};function m(e){if(t&&"carpet"!==t.type&&"contourcarpet"!==t.type&&e&&"category"===e.type&&t["_"+e._id.charAt(0)].length){var a=e._id.charAt(0),n={},o=t["_"+a+"CategoryMap"]||t[a];for(u=0;u<o.length;u++)n[o[u]]=u;return function(t){var a=n[e._categories[t]];return a+1?a:r}}return i.identity}var g=m(a),y=m(o);o&&"category"===o.type&&(s=o._categories.length);var v=new Array(s);for(u=0;u<s;u++)for(l=a&&"category"===a.type?a._categories.length:c(e,u),v[u]=new Array(l),h=0;h<l;h++)v[u][h]=p(f(e,y(u),g(h)));return v}},17439:function(e){e.exports={min:"zmin",max:"zmax"}},48877:function(e,t,a){var n=a(47401),i=a(9405).BADNUM,r=a(48128);e.exports=function(e,t,a,o,s,l){var c=e._length,d=t.makeCalcdata(e,o),u=a.makeCalcdata(e,s);d=r(e,t,o,d).vals,u=r(e,a,s,u).vals;var h,p,f,m,g=e.text,y=void 0!==g&&n.isArray1D(g),v=e.hovertext,x=void 0!==v&&n.isArray1D(v),b=n.distinctVals(d),T=b.vals,_=n.distinctVals(u),w=_.vals,z=[],k=w.length,M=T.length;for(h=0;h<l.length;h++)z[h]=n.init2dArray(k,M);y&&(f=n.init2dArray(k,M)),x&&(m=n.init2dArray(k,M));var A=n.init2dArray(k,M);for(h=0;h<c;h++)if(d[h]!==i&&u[h]!==i){var S=n.findBin(d[h]+b.minDiff/2,T),I=n.findBin(u[h]+_.minDiff/2,w);for(p=0;p<l.length;p++){var D=e[l[p]];z[p][I][S]=D[h],A[I][S]=h}y&&(f[I][S]=g[h]),x&&(m[I][S]=v[h])}for(e["_"+o]=T,e["_"+s]=w,p=0;p<l.length;p++)e["_"+l[p]]=z[p];y&&(e._text=f),x&&(e._hovertext=m),t&&"category"===t.type&&(e["_"+o+"CategoryMap"]=T.map((function(e){return t._categories[e]}))),a&&"category"===a.type&&(e["_"+s+"CategoryMap"]=w.map((function(e){return a._categories[e]}))),e._after2before=A}},24349:function(e,t,a){var n=a(47401),i=a(7497),r=a(75781),o=a(2815),s=a(94060),l=a(5738);e.exports=function(e,t,a,c){function d(a,i){return n.coerce(e,t,l,a,i)}i(e,t,d,c)?(r(e,t,c,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hovertemplate"),o(e,t,d,c),d("hoverongaps"),d("connectgaps",n.isArray1D(t.z)&&!1!==t.zsmooth),s(e,t,c,d,{prefix:"",cLetter:"z"})):t.visible=!1}},93290:function(e,t,a){var n=a(47401).maxRowLength;e.exports=function(e){var t,a,i,r,o,s,l,c,d=[],u={},h=[],p=e[0],f=[],m=[0,0,0],g=n(e);for(a=0;a<e.length;a++)for(t=f,f=p,p=e[a+1]||[],i=0;i<g;i++)void 0===f[i]&&((s=(void 0!==f[i-1]?1:0)+(void 0!==f[i+1]?1:0)+(void 0!==t[i]?1:0)+(void 0!==p[i]?1:0))?(0===a&&s++,0===i&&s++,a===e.length-1&&s++,i===f.length-1&&s++,s<4&&(u[[a,i]]=[a,i,s]),d.push([a,i,s])):h.push([a,i]));for(;h.length;){for(l={},c=!1,o=h.length-1;o>=0;o--)(s=((u[[(a=(r=h[o])[0])-1,i=r[1]]]||m)[2]+(u[[a+1,i]]||m)[2]+(u[[a,i-1]]||m)[2]+(u[[a,i+1]]||m)[2])/20)&&(l[r]=[a,i,s],h.splice(o,1),c=!0);if(!c)throw"findEmpties iterated with no new neighbors";for(r in l)u[r]=l[r],d.push(l[r])}return d.sort((function(e,t){return t[2]-e[2]}))}},77301:function(e,t,a){var n=a(21661),i=a(47401),r=a(37762),o=a(47624).extractOpts;e.exports=function(e,t,a,s,l){l||(l={});var c,d,u,h,p=l.isContour,f=e.cd[0],m=f.trace,g=e.xa,y=e.ya,v=f.x,x=f.y,b=f.z,T=f.xCenter,_=f.yCenter,w=f.zmask,z=m.zhoverformat,k=v,M=x;if(!1!==e.index){try{u=Math.round(e.index[1]),h=Math.round(e.index[0])}catch(P){return void i.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(u<0||u>=b[0].length||h<0||h>b.length)return}else{if(n.inbox(t-v[0],t-v[v.length-1],0)>0||n.inbox(a-x[0],a-x[x.length-1],0)>0)return;if(p){var A;for(k=[2*v[0]-v[1]],A=1;A<v.length;A++)k.push((v[A]+v[A-1])/2);for(k.push([2*v[v.length-1]-v[v.length-2]]),M=[2*x[0]-x[1]],A=1;A<x.length;A++)M.push((x[A]+x[A-1])/2);M.push([2*x[x.length-1]-x[x.length-2]])}u=Math.max(0,Math.min(k.length-2,i.findBin(t,k))),h=Math.max(0,Math.min(M.length-2,i.findBin(a,M)))}var S,I,D=g.c2p(v[u]),L=g.c2p(v[u+1]),N=y.c2p(x[h]),j=y.c2p(x[h+1]);p?(S=f.orig_x||v,I=f.orig_y||x,L=D,c=S[u],j=N,d=I[h]):(S=f.orig_x||T||v,I=f.orig_y||_||x,c=T?S[u]:(S[u]+S[u+1])/2,d=_?I[h]:(I[h]+I[h+1])/2,g&&"category"===g.type&&(c=v[u]),y&&"category"===y.type&&(d=x[h]),m.zsmooth&&(D=L=g.c2p(c),N=j=y.c2p(d)));var F=b[h][u];if(w&&!w[h][u]&&(F=void 0),void 0!==F||m.hoverongaps){var O;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[h])?O=f.hovertext[h][u]:Array.isArray(f.text)&&Array.isArray(f.text[h])&&(O=f.text[h][u]);var C=o(m),E={type:"linear",range:[C.min,C.max],hoverformat:z,_separators:g._separators,_numFormat:g._numFormat},B=r.tickText(E,F,"hover").text;return[i.extendFlat(e,{index:m._after2before?m._after2before[h][u]:[h,u],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:D,x1:L,y0:N,y1:j,xLabelVal:c,yLabelVal:d,zLabelVal:F,zLabel:B,text:O})]}}},28755:function(e,t,a){e.exports={attributes:a(5738),supplyDefaults:a(24349),calc:a(63846),plot:a(45396),colorbar:a(17439),style:a(24246),hoverPoints:a(77301),moduleType:"trace",name:"heatmap",basePlotModule:a(66807),categories:["cartesian","svg","2dMap","showLegend"],meta:{description:["The data that describes the heatmap value-to-color mapping","is set in `z`.","Data in `z` can either be a {2D array} of values (ragged or not)","or a 1D array of values.","In the case where `z` is a {2D array},","say that `z` has N rows and M columns.","Then, by default, the resulting heatmap will have N partitions along","the y axis and M partitions along the x axis.","In other words, the i-th row/ j-th column cell in `z`","is mapped to the i-th partition of the y axis","(starting from the bottom of the plot) and the j-th partition","of the x-axis (starting from the left of the plot).","This behavior can be flipped by using `transpose`.","Moreover, `x` (`y`) can be provided with M or M+1 (N or N+1) elements.","If M (N), then the coordinates correspond to the center of the","heatmap cells and the cells have equal width.","If M+1 (N+1), then the coordinates correspond to the edges of the","heatmap cells.","In the case where `z` is a 1D {array}, the x and y coordinates must be","provided in `x` and `y` respectively to form data triplets."].join(" ")}}},82335:function(e,t,a){var n=a(47401),i=[[-1,0],[1,0],[0,-1],[0,1]];function r(e){return.5-.25*Math.min(1,.5*e)}function o(e,t,a){var n,r,o,s,l,c,d,u,h,p,f,m,g,y=0;for(s=0;s<t.length;s++){for(r=(n=t[s])[0],o=n[1],f=e[r][o],p=0,h=0,l=0;l<4;l++)(d=e[r+(c=i[l])[0]])&&void 0!==(u=d[o+c[1]])&&(0===p?m=g=u:(m=Math.min(m,u),g=Math.max(g,u)),h++,p+=u);if(0===h)throw"iterateInterp2d order is wrong: no defined neighbors";e[r][o]=p/h,void 0===f?h<4&&(y=1):(e[r][o]=(1+a)*e[r][o]-a*f,g>m&&(y=Math.max(y,Math.abs(e[r][o]-f)/(g-m))))}return y}e.exports=function(e,t){var a,i=1;for(o(e,t),a=0;a<t.length&&!(t[a][2]<4);a++);for(t=t.slice(a),a=0;a<100&&i>.01;a++)i=o(e,t,r(i));return i>.01&&n.log("interp2d didn't converge quickly",i),e}},59756:function(e,t,a){var n=a(62282),i=a(47401).isArrayOrTypedArray;e.exports=function(e,t,a,r,o,s){var l,c,d,u=[],h=n.traceIs(e,"contour"),p=n.traceIs(e,"histogram"),f=n.traceIs(e,"gl2d");if(i(t)&&t.length>1&&!p&&"category"!==s.type){var m=t.length;if(!(m<=o))return h?t.slice(0,o):t.slice(0,o+1);if(h||f)u=t.slice(0,o);else if(1===o)u=[t[0]-.5,t[0]+.5];else{for(u=[1.5*t[0]-.5*t[1]],d=1;d<m;d++)u.push(.5*(t[d-1]+t[d]));u.push(1.5*t[m-1]-.5*t[m-2])}if(m<o){var g=u[u.length-1],y=g-u[u.length-2];for(d=m;d<o;d++)g+=y,u.push(g)}}else{var v=e[s._id.charAt(0)+"calendar"];if(p)l=s.r2c(a,0,v);else if(i(t)&&1===t.length)l=t[0];else if(void 0===a)l=0;else{l=("log"===s.type?s.d2c:s.r2c)(a,0,v)}for(c=r||1,d=h||f?0:-.5;d<o;d++)u.push(l+c*d)}return u}},45396:function(e,t,a){var n=a(62258),i=a(91771),r=a(62282),o=a(47401),s=a(47624).makeColorScaleFuncFromTrace,l=a(6412);function c(e,t){var a=t.length-2,n=o.constrain(o.findBin(e,t),0,a),i=t[n],r=t[n+1],s=o.constrain(n+(e-i)/(r-i)-.5,0,a),l=Math.round(s),c=Math.abs(s-l);return s&&s!==a&&c?{bin0:l,frac:c,bin1:Math.round(l+c/(s-l))}:{bin0:l,bin1:l,frac:0}}function d(e,t){var a=t.length-1,n=o.constrain(o.findBin(e,t),0,a),i=t[n],r=(e-i)/(t[n+1]-i)||0;return r<=0?{bin0:n,bin1:n,frac:0}:r<.5?{bin0:n,bin1:n+1,frac:r}:{bin0:n+1,bin1:n,frac:1-r}}function u(e,t,a){e[t]=a[0],e[t+1]=a[1],e[t+2]=a[2],e[t+3]=Math.round(255*a[3])}e.exports=function(e,t,a,h){var p=t.xaxis,f=t.yaxis;o.makeTraceGroups(h,a,"hm").each((function(t){var a,h,m,g,y,v,x=n.select(this),b=t[0],T=b.trace,_=b.z,w=b.x,z=b.y,k=b.xCenter,M=b.yCenter,A=r.traceIs(T,"contour"),S=A?"best":T.zsmooth,I=_.length,D=o.maxRowLength(_),L=!1,N=!1;for(v=0;void 0===a&&v<w.length-1;)a=p.c2p(w[v]),v++;for(v=w.length-1;void 0===h&&v>0;)h=p.c2p(w[v]),v--;for(h<a&&(m=h,h=a,a=m,L=!0),v=0;void 0===g&&v<z.length-1;)g=f.c2p(z[v]),v++;for(v=z.length-1;void 0===y&&v>0;)y=f.c2p(z[v]),v--;if(y<g&&(m=g,g=y,y=m,N=!0),A&&(k=w,M=z,w=b.xfill,z=b.yfill),"fast"!==S){var j="best"===S?0:.5;a=Math.max(-j*p._length,a),h=Math.min((1+j)*p._length,h),g=Math.max(-j*f._length,g),y=Math.min((1+j)*f._length,y)}var F=Math.round(h-a),O=Math.round(y-g);if(F<=0||O<=0){x.selectAll("image").data([]).exit().remove()}else{var C,E;"fast"===S?(C=D,E=I):(C=F,E=O);var B=document.createElement("canvas");B.width=C,B.height=E;var P,R,V=B.getContext("2d"),G=s(T,{noNumericCheck:!0,returnArray:!0});"fast"===S?(P=L?function(e){return D-1-e}:o.identity,R=N?function(e){return I-1-e}:o.identity):(P=function(e){return o.constrain(Math.round(p.c2p(w[e])-a),0,F)},R=function(e){return o.constrain(Math.round(f.c2p(z[e])-g),0,O)});var U,H,Y,X,Z,K=R(0),q=[K,K],W=L?0:1,$=N?0:1,J=0,Q=0,ee=0,te=0;if(S){var ae,ne=0;try{ae=new Uint8Array(F*O*4)}catch(ke){ae=new Array(F*O*4)}if("best"===S){var ie,re,oe,se=k||w,le=M||z,ce=new Array(se.length),de=new Array(le.length),ue=new Array(F),he=k?d:c,pe=M?d:c;for(v=0;v<se.length;v++)ce[v]=Math.round(p.c2p(se[v])-a);for(v=0;v<le.length;v++)de[v]=Math.round(f.c2p(le[v])-g);for(v=0;v<F;v++)ue[v]=he(v,ce);for(H=0;H<O;H++)for(re=_[(ie=pe(H,de)).bin0],oe=_[ie.bin1],v=0;v<F;v++,ne+=4)u(ae,ne,Z=ze(re,oe,ue[v],ie))}else for(H=0;H<I;H++)for(X=_[H],q=R(H),v=0;v<F;v++)Z=we(X[v],1),u(ae,ne=4*(q*F+P(v)),Z);var fe=V.createImageData(F,O);try{fe.data.set(ae)}catch(ke){var me=fe.data,ge=me.length;for(H=0;H<ge;H++)me[H]=ae[H]}V.putImageData(fe,0,0)}else{var ye=T.xgap,ve=T.ygap,xe=Math.floor(ye/2),be=Math.floor(ve/2);for(H=0;H<I;H++)if(X=_[H],q.reverse(),q[$]=R(H+1),q[0]!==q[1]&&void 0!==q[0]&&void 0!==q[1])for(U=[Y=P(0),Y],v=0;v<D;v++)U.reverse(),U[W]=P(v+1),U[0]!==U[1]&&void 0!==U[0]&&void 0!==U[1]&&(Z=we(X[v],(U[1]-U[0])*(q[1]-q[0])),V.fillStyle="rgba("+Z.join(",")+")",V.fillRect(U[0]+xe,q[0]+be,U[1]-U[0]-ye,q[1]-q[0]-ve))}Q=Math.round(Q/J),ee=Math.round(ee/J),te=Math.round(te/J);var Te=i("rgb("+Q+","+ee+","+te+")");e._hmpixcount=(e._hmpixcount||0)+J,e._hmlumcount=(e._hmlumcount||0)+J*Te.getLuminance();var _e=x.selectAll("image").data(t);_e.enter().append("svg:image").attr({xmlns:l.svg,preserveAspectRatio:"none"}),_e.attr({height:O,width:F,x:a,y:g,"xlink:href":B.toDataURL("image/png")})}function we(e,t){if(void 0!==e){var a=G(e);return a[0]=Math.round(a[0]),a[1]=Math.round(a[1]),a[2]=Math.round(a[2]),J+=t,Q+=a[0]*t,ee+=a[1]*t,te+=a[2]*t,a}return[0,0,0,0]}function ze(e,t,a,n){var i=e[a.bin0];if(void 0===i)return we(void 0,1);var r,o=e[a.bin1],s=t[a.bin0],l=t[a.bin1],c=o-i||0,d=s-i||0;return r=void 0===o?void 0===l?0:void 0===s?2*(l-i):2*(2*l-s-i)/3:void 0===l?void 0===s?0:2*(2*i-o-s)/3:void 0===s?2*(2*l-o-i)/3:l+i-o-s,we(i+a.frac*c+n.frac*(d+a.frac*r))}}))}},24246:function(e,t,a){var n=a(62258);e.exports=function(e){n.select(e).selectAll(".hm image").style("opacity",(function(e){return e.trace.opacity}))}},2815:function(e){e.exports=function(e,t,a){!1===a("zsmooth")&&(a("xgap"),a("ygap")),a("zhoverformat")}},7497:function(e,t,a){var n=a(83491),i=a(47401),r=a(62282);function o(e,t){var a=t(e);return"scaled"===(a?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),a}e.exports=function(e,t,a,s,l,c){var d,u,h=a("z");if(l=l||"x",c=c||"y",void 0===h||!h.length)return 0;if(i.isArray1D(e.z)){d=a(l),u=a(c);var p=i.minRowLength(d),f=i.minRowLength(u);if(0===p||0===f)return 0;t._length=Math.min(p,f,h.length)}else{if(d=o(l,a),u=o(c,a),!function(e){for(var t,a=!0,r=!1,o=!1,s=0;s<e.length;s++){if(t=e[s],!i.isArrayOrTypedArray(t)){a=!1;break}t.length>0&&(r=!0);for(var l=0;l<t.length;l++)if(n(t[l])){o=!0;break}}return a&&r&&o}(h))return 0;a("transpose"),t._length=null}return"heatmapgl"===e.type||r.getComponentMethod("calendars","handleTraceDefaults")(e,t,[l,c],s),!0}},81191:function(e,t,a){for(var n=a(5738),i=a(97451),r=a(87241).extendFlat,o=a(17342).overrideAll,s=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],l={},c=0;c<s.length;c++){var d=s[c];l[d]=n[d]}l.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc",description:"Picks a smoothing algorithm use to smooth `z` data."},r(l,i("",{cLetter:"z",autoColorDflt:!1})),e.exports=o(l,"calc","nested")},38739:function(e,t,a){var n=a(6695),i=a(37762),r=a(42770);function o(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=n(e.glplot,this.options),this.heatmap._trace=this}var s=o.prototype;s.handlePick=function(e){var t=this.options,a=t.shape,n=e.pointId,i=n%a[0],r=Math.floor(n/a[0]),o=n;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[i],t.y[r],t.z[o]],textLabel:this.textLabels[n],name:this.name,pointIndex:[r,i],hoverinfo:this.hoverinfo}},s.update=function(e,t){var a=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var n=a.z;this.options.z=[].concat.apply([],n);var o=n[0].length,s=n.length;this.options.shape=[o,s],this.options.x=a.x,this.options.y=a.y,this.options.zsmooth=e.zsmooth;var l=function(e){for(var t=e.colorscale,a=e.zmin,n=e.zmax,i=t.length,o=new Array(i),s=new Array(4*i),l=0;l<i;l++){var c=t[l],d=r(c[1]);o[l]=a+c[0]*(n-a);for(var u=0;u<4;u++)s[4*l+u]=d[u]}return{colorLevels:o,colorValues:s}}(e);this.options.colorLevels=l.colorLevels,this.options.colorValues=l.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options);var c,d,u=this.scene.xaxis,h=this.scene.yaxis;!1===e.zsmooth&&(c={ppad:a.x[1]-a.x[0]},d={ppad:a.y[1]-a.y[0]}),e._extremes[u._id]=i.findExtremes(u,a.x,c),e._extremes[h._id]=i.findExtremes(h,a.y,d)},s.dispose=function(){this.heatmap.dispose()},e.exports=function(e,t,a){var n=new o(e,t.uid);return n.update(t,a),n}},96352:function(e,t,a){var n=a(47401),i=a(7497),r=a(94060),o=a(81191);e.exports=function(e,t,a,s){function l(a,i){return n.coerce(e,t,o,a,i)}i(e,t,l,s)?(l("text"),l("zsmooth"),r(e,t,s,l,{prefix:"",cLetter:"z"})):t.visible=!1}},42156:function(e,t,a){var n=["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" ");e.exports={attributes:a(81191),supplyDefaults:a(96352),colorbar:a(17439),calc:a(63846),plot:a(38739),moduleType:"trace",name:"heatmapgl",basePlotModule:a(92198),categories:["gl","gl2d","2dMap"],meta:{description:[n,"WebGL version of the heatmap trace type."].join(" ")}}},7536:function(e,t,a){var n=a(66905),i=a(20184).axisHoverFormat,r=a(4216).r,o=a(30350),s=a(75223),l=a(87241).extendFlat;e.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the x axis."].join(" ")},y:{valType:"data_array",editType:"calc+clearAxisTypes",description:["Sets the sample data to be binned on the y axis."].join(" ")},xhoverformat:i("x"),yhoverformat:i("y"),text:l({},n.text,{description:["Sets hover text elements associated with each bar.","If a single string, the same string appears over all bars.","If an array of string, the items are mapped in order to the","this trace's coordinates."].join(" ")}),hovertext:l({},n.hovertext,{description:"Same as `text`."}),orientation:n.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc",description:["Specifies the binning function used for this histogram trace.","If *count*, the histogram values are computed by counting the","number of values lying inside each bin.","If *sum*, *avg*, *min*, *max*,","the histogram values are computed using","the sum, the average, the minimum or the maximum","of the values lying inside each bin respectively."].join(" ")},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc",description:["Specifies the type of normalization used for this histogram trace.","If **, the span of each bar corresponds to the number of","occurrences (i.e. the number of data points lying inside the bins).","If *percent* / *probability*, the span of each bar corresponds to","the percentage / fraction of occurrences with respect to the total","number of sample points","(here, the sum of all bin HEIGHTS equals 100% / 1).","If *density*, the span of each bar corresponds to the number of","occurrences in a bin divided by the size of the bin interval","(here, the sum of all bin AREAS equals the","total number of sample points).","If *probability density*, the area of each bar corresponds to the","probability that an event will fall into the corresponding bin","(here, the sum of all bin AREAS equals 1)."].join(" ")},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc",description:["If true, display the cumulative distribution by summing the","binned values. Use the `direction` and `centralbin` attributes","to tune the accumulation method.","Note: in this mode, the *density* `histnorm` settings behave","the same as their equivalents without *density*:","** and *density* both rise to the number of data points, and","*probability* and *probability density* both rise to the","number of sample points."].join(" ")},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc",description:["Only applies if cumulative is enabled.","If *increasing* (default) we sum all prior bins, so the result","increases from left to right. If *decreasing* we sum later bins","so the result decreases from left to right."].join(" ")},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc",description:["Only applies if cumulative is enabled.","Sets whether the current bin is included, excluded, or has half","of its value included in the current cumulative value.","*include* is the default for compatibility with various other","tools, however it introduces a half-bin bias to the results.","*exclude* makes the opposite half-bin bias, and *half* removes","it."].join(" ")},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `xbins.size` is provided."].join(" ")},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc",description:["Specifies the maximum number of desired bins. This value will be used","in an algorithm that will decide the optimal bin size such that the","histogram best visualizes the distribution of the data.","Ignored if `ybins.size` is provided."].join(" ")},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobinx` is not needed. However, we accept","`autobinx: true` or `false` and will update `xbins` accordingly","before deleting `autobinx` from the trace."].join(" ")},autobiny:{valType:"boolean",dflt:null,editType:"calc",description:["Obsolete: since v1.42 each bin attribute is auto-determined","separately and `autobiny` is not needed. However, we accept","`autobiny: true` or `false` and will update `ybins` accordingly","before deleting `autobiny` from the trace."].join(" ")},bingroup:{valType:"string",dflt:"",editType:"calc",description:["Set a group of histogram traces which will have compatible bin settings.","Note that traces on the same subplot and with the same *orientation*","under `barmode` *stack*, *relative* and *group* are forced into the same bingroup,","Using `bingroup`, traces under `barmode` *overlay* and on different axes","(of the same axis type) can have compatible bin settings.","Note that histogram and histogram2d* trace can share the same `bingroup`"].join(" ")},hovertemplate:r({},{keys:s.eventDataKeys}),marker:n.marker,offsetgroup:n.offsetgroup,alignmentgroup:n.alignmentgroup,selected:n.selected,unselected:n.unselected,_deprecated:{bardir:n._deprecated.bardir}}},27350:function(e){e.exports=function(e,t){for(var a=e.length,n=0,i=0;i<a;i++)t[i]?(e[i]/=t[i],n+=e[i]):e[i]=null;return n}},30350:function(e){e.exports=function(e,t){return{start:{valType:"any",editType:"calc",description:["Sets the starting value for the",e,"axis bins. Defaults to the minimum data value,","shifted down if necessary to make nice round values","and to remove ambiguous bin edges. For example, if most of the","data is integers we shift the bin edges 0.5 down, so a `size`","of 5 would have a default `start` of -0.5, so it is clear","that 0-4 are in the first bin, 5-9 in the second, but","continuous data gets a start of 0 and bins [0,5), [5,10) etc.","Dates behave similarly, and `start` should be a date string.","For category data, `start` is based on the category serial","numbers, and defaults to -0.5.",t?"If multiple non-overlaying histograms share a subplot, the first explicit `start` is used exactly and all others are shifted down (if necessary) to differ from that one by an integer number of bins.":""].join(" ")},end:{valType:"any",editType:"calc",description:["Sets the end value for the",e,"axis bins. The last bin may not end exactly at this value,","we increment the bin edge by `size` from `start` until we","reach or exceed `end`. Defaults to the maximum data value.","Like `start`, for dates use a date string, and for category","data `end` is based on the category serial numbers."].join(" ")},size:{valType:"any",editType:"calc",description:["Sets the size of each",e,"axis bin.","Default behavior: If `nbins"+e+"` is 0 or omitted,","we choose a nice round bin size such that the number of bins","is about the same as the typical number of samples in each bin.","If `nbins"+e+"` is provided, we choose a nice round","bin size giving no more than that many bins.","For date data, use milliseconds or *M<n>* for months, as in","`axis.dtick`. For category data, the number of categories to","bin together (always defaults to 1).",t?"If multiple non-overlaying histograms share a subplot, the first explicit `size` is used and all others discarded. If no `size` is provided,the sample data from all traces is combined to determine `size` as described above.":""].join(" ")},editType:"calc"}}},86150:function(e,t,a){var n=a(83491);e.exports={count:function(e,t,a){return a[e]++,1},sum:function(e,t,a,i){var r=i[t];return n(r)?(r=Number(r),a[e]+=r,r):0},avg:function(e,t,a,i,r){var o=i[t];return n(o)&&(o=Number(o),a[e]+=o,r[e]++),0},min:function(e,t,a,i){var r=i[t];if(n(r)){if(r=Number(r),!n(a[e]))return a[e]=r,r;if(a[e]>r){var o=r-a[e];return a[e]=r,o}}return 0},max:function(e,t,a,i){var r=i[t];if(n(r)){if(r=Number(r),!n(a[e]))return a[e]=r,r;if(a[e]<r){var o=r-a[e];return a[e]=r,o}}return 0}}},76964:function(e,t,a){var n=a(9405),i=n.ONEAVGYEAR,r=n.ONEAVGMONTH,o=n.ONEDAY,s=n.ONEHOUR,l=n.ONEMIN,c=n.ONESEC,d=a(37762).tickIncrement;function u(e,t,a,n){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),r="date"===a.type,o=h(i,r),s=0;s<10;s++){var l=h(80*o,r);if(o===l)break;if(!p(l,e,t,r,a,n))break;o=l}return o}function h(e,t){return t&&e>c?e>o?e>1.1*i?i:e>1.1*r?r:o:e>s?s:e>l?l:c:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function p(e,t,a,n,r,s){if(n&&e>o){var l=f(t,r,s),c=f(a,r,s),d=e===i?0:1;return l[d]!==c[d]}return Math.floor(a/e)-Math.floor(t/e)>.1}function f(e,t,a){var n=t.c2d(e,i,a).split("-");return""===n[0]&&(n.unshift(),n[0]="-"+n[0]),n}e.exports=function(e,t,a,n,r){var s,l,c=-1.1*t,h=-.1*t,p=e-h,f=a[0],m=a[1],g=Math.min(u(f+h,f+p,n,r),u(m+h,m+p,n,r)),y=Math.min(u(f+c,f+h,n,r),u(m+c,m+h,n,r));if(g>y&&y<Math.abs(m-f)/4e3?(s=g,l=!1):(s=Math.min(g,y),l=!0),"date"===n.type&&s>o){var v=s===i?1:6,x=s===i?"M12":"M1";return function(t,a){var o=n.c2d(t,i,r),s=o.indexOf("-",v);s>0&&(o=o.substr(0,s));var c=n.d2c(o,0,r);if(c<t){var u=d(c,x,!1,r);(c+u)/2<t+e&&(c=u)}return a&&l?d(c,x,!0,r):c}}return function(t,a){var n=s*Math.round(t/s);return n+s/10<t&&n+.9*s<t+e&&(n+=s),a&&l&&(n-=s),n}}},69184:function(e,t,a){var n=a(83491),i=a(47401),r=a(62282),o=a(37762),s=a(54846),l=a(86150),c=a(17817),d=a(27350),u=a(76964);function h(e,t,a,s,l){var c,d,u,p,f,m,g,y=s+"bins",v=e._fullLayout,x=t["_"+s+"bingroup"],b=v._histogramBinOpts[x],T="overlay"===v.barmode,_=function(e){return a.r2c(e,0,p)},w=function(e){return a.c2r(e,0,p)},z="date"===a.type?function(e){return e||0===e?i.cleanDate(e,null,p):null}:function(e){return n(e)?Number(e):null};function k(e,t,a){t[e+"Found"]?(t[e]=z(t[e]),null===t[e]&&(t[e]=a[e])):(m[e]=t[e]=a[e],i.nestedProperty(d[0],y+"."+e).set(a[e]))}if(t["_"+s+"autoBinFinished"])delete t["_"+s+"autoBinFinished"];else{d=b.traces;var M=[],A=!0,S=!1,I=!1;for(c=0;c<d.length;c++)if((u=d[c]).visible){var D=b.dirs[c];f=u["_"+D+"pos0"]=a.makeCalcdata(u,D),M=i.concat(M,f),delete u["_"+s+"autoBinFinished"],!0===t.visible&&(A?A=!1:(delete u._autoBin,u["_"+s+"autoBinFinished"]=1),r.traceIs(u,"2dMap")&&(S=!0),"histogram2dcontour"===u.type&&(I=!0))}p=d[0][s+"calendar"];var L=o.autoBin(M,a,b.nbins,S,p,b.sizeFound&&b.size),N=d[0]._autoBin={};if(m=N[b.dirs[0]]={},I&&(b.size||(L.start=w(o.tickIncrement(_(L.start),L.size,!0,p))),void 0===b.end&&(L.end=w(o.tickIncrement(_(L.end),L.size,!1,p)))),T&&!r.traceIs(t,"2dMap")&&0===L._dataSpan&&"category"!==a.type&&"multicategory"!==a.type){if(l)return[L,f,!0];L=function(e,t,a,n,r){var o,s,l,c=e._fullLayout,d=function(e,t){for(var a=t.xaxis,n=t.yaxis,i=t.orientation,r=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&!0===l.visible&&l.orientation===i&&l.xaxis===a&&l.yaxis===n&&r.push(l)}return r}(e,t),u=!1,p=1/0,f=[t];for(o=0;o<d.length;o++)if((s=d[o])===t)u=!0;else if(u){var m=h(e,s,a,n,!0),g=m[0],y=m[2];s["_"+n+"autoBinFinished"]=1,s["_"+n+"pos0"]=m[1],y?f.push(s):p=Math.min(p,g.size)}else l=c._histogramBinOpts[s["_"+n+"bingroup"]],p=Math.min(p,l.size||s[r].size);var v=new Array(f.length);for(o=0;o<f.length;o++)for(var x=f[o]["_"+n+"pos0"],b=0;b<x.length;b++)if(void 0!==x[b]){v[o]=x[b];break}isFinite(p)||(p=i.distinctVals(v).minDiff);for(o=0;o<f.length;o++){var T=(s=f[o])[n+"calendar"],_={start:a.c2r(v[o]-p/2,0,T),end:a.c2r(v[o]+p/2,0,T),size:p};s._input[r]=s[r]=_,(l=c._histogramBinOpts[s["_"+n+"bingroup"]])&&i.extendFlat(l,_)}return t[r]}(e,t,a,s,y)}(g=u.cumulative||{}).enabled&&"include"!==g.currentbin&&("decreasing"===g.direction?L.start=w(o.tickIncrement(_(L.start),L.size,!0,p)):L.end=w(o.tickIncrement(_(L.end),L.size,!1,p))),b.size=L.size,b.sizeFound||(m.size=L.size,i.nestedProperty(d[0],y+".size").set(L.size)),k("start",b,L),k("end",b,L)}f=t["_"+s+"pos0"],delete t["_"+s+"pos0"];var j=t._input[y]||{},F=i.extendFlat({},b),O=b.start,C=a.r2l(j.start),E=void 0!==C;if((b.startFound||E)&&C!==a.r2l(O)){var B=E?C:i.aggNums(Math.min,null,f),P={type:"category"===a.type||"multicategory"===a.type?"linear":a.type,r2l:a.r2l,dtick:b.size,tick0:O,calendar:p,range:[B,o.tickIncrement(B,b.size,!1,p)].map(a.l2r)},R=o.tickFirst(P);R>a.r2l(B)&&(R=o.tickIncrement(R,b.size,!0,p)),F.start=a.l2r(R),E||i.nestedProperty(t,y+".start").set(F.start)}var V=b.end,G=a.r2l(j.end),U=void 0!==G;if((b.endFound||U)&&G!==a.r2l(V)){var H=U?G:i.aggNums(Math.max,null,f);F.end=a.l2r(H),U||i.nestedProperty(t,y+".start").set(F.end)}var Y="autobin"+s;return!1===t._input[Y]&&(t._input[y]=i.extendFlat({},t[y]||{}),delete t._input[Y],delete t[Y]),[F,f]}e.exports={calc:function(e,t){var a,r,p,f,m=[],g=[],y=o.getFromId(e,"h"===t.orientation?t.yaxis:t.xaxis),v="h"===t.orientation?"y":"x",x={x:"y",y:"x"}[v],b=t[v+"calendar"],T=t.cumulative,_=h(e,t,y,v),w=_[0],z=_[1],k="string"===typeof w.size,M=[],A=k?M:w,S=[],I=[],D=[],L=0,N=t.histnorm,j=t.histfunc,F=-1!==N.indexOf("density");T.enabled&&F&&(N=N.replace(/ ?density$/,""),F=!1);var O,C="max"===j||"min"===j?null:0,E=l.count,B=c[N],P=!1,R=function(e){return y.r2c(e,0,b)};for(i.isArrayOrTypedArray(t[x])&&"count"!==j&&(O=t[x],P="avg"===j,E=l[j]),a=R(w.start),p=R(w.end)+(a-o.tickIncrement(a,w.size,!1,b))/1e6;a<p&&m.length<1e6&&(r=o.tickIncrement(a,w.size,!1,b),m.push((a+r)/2),g.push(C),D.push([]),M.push(a),F&&S.push(1/(r-a)),P&&I.push(0),!(r<=a));)a=r;M.push(a),k||"date"!==y.type||(A={start:R(A.start),end:R(A.end),size:A.size}),e._fullLayout._roundFnOpts||(e._fullLayout._roundFnOpts={});var V=t["_"+v+"bingroup"],G={leftGap:1/0,rightGap:1/0};V&&(e._fullLayout._roundFnOpts[V]||(e._fullLayout._roundFnOpts[V]=G),G=e._fullLayout._roundFnOpts[V]);var U,H=g.length,Y=!0,X=G.leftGap,Z=G.rightGap,K={};for(a=0;a<z.length;a++){var q=z[a];(f=i.findBin(q,A))>=0&&f<H&&(L+=E(f,a,g,O,I),Y&&D[f].length&&q!==z[D[f][0]]&&(Y=!1),D[f].push(a),K[a]=f,X=Math.min(X,q-M[f]),Z=Math.min(Z,M[f+1]-q))}G.leftGap=X,G.rightGap=Z,Y||(U=function(t,a){return function(){var n=e._fullLayout._roundFnOpts[V];return u(n.leftGap,n.rightGap,M,y,b)(t,a)}}),P&&(L=d(g,I)),B&&B(g,L,S),T.enabled&&function(e,t,a){var n,i,r;function o(t){r=e[t],e[t]/=2}function s(t){i=e[t],e[t]=r+i/2,r+=i}if("half"===a)if("increasing"===t)for(o(0),n=1;n<e.length;n++)s(n);else for(o(e.length-1),n=e.length-2;n>=0;n--)s(n);else if("increasing"===t){for(n=1;n<e.length;n++)e[n]+=e[n-1];"exclude"===a&&(e.unshift(0),e.pop())}else{for(n=e.length-2;n>=0;n--)e[n]+=e[n+1];"exclude"===a&&(e.push(0),e.shift())}}(g,T.direction,T.currentbin);var W=Math.min(m.length,g.length),$=[],J=0,Q=W-1;for(a=0;a<W;a++)if(g[a]){J=a;break}for(a=W-1;a>=J;a--)if(g[a]){Q=a;break}for(a=J;a<=Q;a++)if(n(m[a])&&n(g[a])){var ee={p:m[a],s:g[a],b:0};T.enabled||(ee.pts=D[a],Y?ee.ph0=ee.ph1=D[a].length?z[D[a][0]]:m[a]:(t._computePh=!0,ee.ph0=U(M[a]),ee.ph1=U(M[a+1],!0))),$.push(ee)}return 1===$.length&&($[0].width1=o.tickIncrement($[0].p,w.size,!1,b)-$[0].p),s($,t),i.isArrayOrTypedArray(t.selectedpoints)&&i.tagSelected($,t,K),$},calcAllAutoBins:h}},75223:function(e){e.exports={eventDataKeys:["binNumber"]}},69764:function(e,t,a){var n=a(47401),i=a(77063),r=a(62282).traceIs,o=a(18878).handleGroupingDefaults,s=n.nestedProperty,l=a(30807).getAxisGroup,c=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],d=["x","y"];e.exports=function(e,t){var a,u,h,p,f,m,g,y=t._histogramBinOpts={},v=[],x={},b=[];function T(e,t){return n.coerce(a._input,a,a._module.attributes,e,t)}function _(e){return"v"===e.orientation?"x":"y"}function w(e,a,r){var o=e.uid+"__"+r;a||(a=o);var s=function(e,a){return i.getFromTrace({_fullLayout:t},e,a).type}(e,r),l=e[r+"calendar"]||"",c=y[a],d=!0;c&&(s===c.axType&&l===c.calendar?(d=!1,c.traces.push(e),c.dirs.push(r)):(a=o,s!==c.axType&&n.warn(["Attempted to group the bins of trace",e.index,"set on a","type:"+s,"axis","with bins on","type:"+c.axType,"axis."].join(" ")),l!==c.calendar&&n.warn(["Attempted to group the bins of trace",e.index,"set with a",l,"calendar","with bins",c.calendar?"on a "+c.calendar+" calendar":"w/o a set calendar"].join(" ")))),d&&(y[a]={traces:[e],dirs:[r],axType:s,calendar:e[r+"calendar"]||""}),e["_"+r+"bingroup"]=a}for(f=0;f<e.length;f++)a=e[f],r(a,"histogram")&&(v.push(a),delete a._xautoBinFinished,delete a._yautoBinFinished,r(a,"2dMap")||o(a._input,a,t,T));var z=t._alignmentOpts||{};for(f=0;f<v.length;f++){if(a=v[f],h="",!r(a,"2dMap")){if(p=_(a),"group"===t.barmode&&a.alignmentgroup){var k=a[p+"axis"],M=l(t,k)+a.orientation;(z[M]||{})[a.alignmentgroup]&&(h=M)}h||"overlay"===t.barmode||(h=l(t,a.xaxis)+l(t,a.yaxis)+_(a))}h?(x[h]||(x[h]=[]),x[h].push(a)):b.push(a)}for(h in x)if(1!==(u=x[h]).length){var A=!1;for(u.length&&(a=u[0],A=T("bingroup")),h=A||h,f=0;f<u.length;f++){var S=(a=u[f])._input.bingroup;S&&S!==h&&n.warn(["Trace",a.index,"must match","within bingroup",h+".","Ignoring its bingroup:",S,"setting."].join(" ")),a.bingroup=h,w(a,h,_(a))}}else b.push(u[0]);for(f=0;f<b.length;f++){a=b[f];var I=T("bingroup");if(r(a,"2dMap"))for(g=0;g<2;g++){var D=T((p=d[g])+"bingroup",I?I+"__"+p:null);w(a,D,p)}else w(a,I,_(a))}for(h in y){var L=y[h];for(u=L.traces,m=0;m<c.length;m++){var N,j,F=c[m],O=F.name;if("nbins"!==O||!L.sizeFound){for(f=0;f<u.length;f++){if(a=u[f],p=L.dirs[f],N=F.aStr[p],void 0!==s(a._input,N).get()){L[O]=T(N),L[O+"Found"]=!0;break}(j=(a._autoBin||{})[p]||{})[O]&&s(a,N).set(j[O])}if("start"===O||"end"===O)for(;f<u.length;f++)(a=u[f])["_"+p+"bingroup"]&&T(N,(j=(a._autoBin||{})[p]||{})[O]);"nbins"!==O||L.sizeFound||L.nbinsFound||(a=u[0],L[O]=T(N))}}}}},14407:function(e,t,a){var n=a(62282),i=a(47401),r=a(31454),o=a(58048),s=a(7536);e.exports=function(e,t,a,l){function c(a,n){return i.coerce(e,t,s,a,n)}var d=c("x"),u=c("y");c("cumulative.enabled")&&(c("cumulative.direction"),c("cumulative.currentbin")),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat");var h=c("orientation",u&&!d?"h":"v"),p="v"===h?"x":"y",f="v"===h?"y":"x",m=d&&u?Math.min(i.minRowLength(d)&&i.minRowLength(u)):i.minRowLength(t[p]||[]);if(m){t._length=m,n.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],l),t[f]&&c("histfunc"),c("histnorm"),c("autobin"+p),o(e,t,c,a,l),i.coerceSelectionMarkerOpacity(t,c);var g=(t.marker.line||{}).color,y=n.getComponentMethod("errorbars","supplyDefaults");y(e,t,g||r.defaultLine,{axis:"y"}),y(e,t,g||r.defaultLine,{axis:"x",inherit:"y"})}else t.visible=!1}},22044:function(e){e.exports=function(e,t,a,n,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,"zLabelVal"in t&&(e.z=t.zLabelVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(a.cumulative||{}).enabled){var r,o=Array.isArray(i)?n[0].pts[i[0]][i[1]]:n[i].pts;if(e.pointNumbers=o,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex,a._indexToPoints){r=[];for(var s=0;s<o.length;s++)r=r.concat(a._indexToPoints[o[s]])}else r=o;e.pointIndices=r}return e}},23319:function(e,t,a){var n=a(16032).hoverPoints,i=a(37762).hoverLabelText;e.exports=function(e,t,a,r,o){var s=n(e,t,a,r,o);if(s){var l=(e=s[0]).cd[e.index],c=e.cd[0].trace;if(!c.cumulative.enabled){var d="h"===c.orientation?"y":"x";e[d+"Label"]=i(e[d+"a"],[l.ph0,l.ph1],c[d+"hoverformat"])}return s}}},84909:function(e,t,a){e.exports={attributes:a(7536),layoutAttributes:a(21044),supplyDefaults:a(14407),crossTraceDefaults:a(69764),supplyLayoutDefaults:a(13603),calc:a(69184).calc,crossTraceCalc:a(11262).crossTraceCalc,plot:a(74835).plot,layerName:"barlayer",style:a(49651).style,styleOnSelect:a(49651).styleOnSelect,colorbar:a(78666),hoverPoints:a(23319),selectPoints:a(76304),eventData:a(22044),moduleType:"trace",name:"histogram",basePlotModule:a(66807),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{description:["The sample data from which statistics are computed is set in `x`","for vertically spanning histograms and","in `y` for horizontally spanning histograms.","Binning options are set `xbins` and `ybins` respectively","if no aggregation data is provided."].join(" ")}}},17817:function(e){e.exports={percent:function(e,t){for(var a=e.length,n=100/t,i=0;i<a;i++)e[i]*=n},probability:function(e,t){for(var a=e.length,n=0;n<a;n++)e[n]/=t},density:function(e,t,a,n){var i=e.length;n=n||1;for(var r=0;r<i;r++)e[r]*=a[r]*n},"probability density":function(e,t,a,n){var i=e.length;n&&(t/=n);for(var r=0;r<i;r++)e[r]*=a[r]/t}}},31534:function(e,t,a){var n=a(7536),i=a(30350),r=a(5738),o=a(42837),s=a(20184).axisHoverFormat,l=a(4216).r,c=a(97451),d=a(87241).extendFlat;e.exports=d({x:n.x,y:n.y,z:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},marker:{color:{valType:"data_array",editType:"calc",description:"Sets the aggregation data."},editType:"calc"},histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:i("x"),nbinsy:n.nbinsy,ybins:i("y"),autobinx:n.autobinx,autobiny:n.autobiny,bingroup:d({},n.bingroup,{description:["Set the `xbingroup` and `ybingroup` default prefix","For example, setting a `bingroup` of *1* on two histogram2d traces","will make them their x-bins and y-bins match separately."].join(" ")}),xbingroup:d({},n.bingroup,{description:["Set a group of histogram traces which will have compatible x-bin settings.","Using `xbingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible x-bin settings.","Note that the same `xbingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),ybingroup:d({},n.bingroup,{description:["Set a group of histogram traces which will have compatible y-bin settings.","Using `ybingroup`, histogram2d and histogram2dcontour traces ","(on axes of the same axis type) can have compatible y-bin settings.","Note that the same `ybingroup` value can be used to set (1D) histogram `bingroup`"].join(" ")}),xgap:r.xgap,ygap:r.ygap,zsmooth:r.zsmooth,xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z",1),hovertemplate:l({},{keys:"z"}),showlegend:d({},o.showlegend,{dflt:!1})},c("",{cLetter:"z",autoColorDflt:!1}))},89834:function(e,t,a){var n=a(47401),i=a(37762),r=a(86150),o=a(17817),s=a(27350),l=a(76964),c=a(69184).calcAllAutoBins;function d(e,t,a,n){var i,r=new Array(e);if(n)for(i=0;i<e;i++)r[i]=1/(t[i+1]-t[i]);else{var o=1/a;for(i=0;i<e;i++)r[i]=o}return r}function u(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function h(e,t,a,n,i,r){var o,s=e.length-1,c=new Array(s),d=l(a,n,e,i,r);for(o=0;o<s;o++){var u=(t||[])[o];c[o]=void 0===u?[d(e[o]),d(e[o+1],!0)]:[u,u]}return c}e.exports=function(e,t){var a,l,p,f,m=i.getFromId(e,t.xaxis),g=i.getFromId(e,t.yaxis),y=t.xcalendar,v=t.ycalendar,x=function(e){return m.r2c(e,0,y)},b=function(e){return g.r2c(e,0,v)},T=c(e,t,m,"x"),_=T[0],w=T[1],z=c(e,t,g,"y"),k=z[0],M=z[1],A=t._length;w.length>A&&w.splice(A,w.length-A),M.length>A&&M.splice(A,M.length-A);var S=[],I=[],D=[],L="string"===typeof _.size,N="string"===typeof k.size,j=[],F=[],O=L?j:_,C=N?F:k,E=0,B=[],P=[],R=t.histnorm,V=t.histfunc,G=-1!==R.indexOf("density"),U="max"===V||"min"===V?null:0,H=r.count,Y=o[R],X=!1,Z=[],K=[],q="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";q&&"count"!==V&&(X="avg"===V,H=r[V]);var W=_.size,$=x(_.start),J=x(_.end)+($-i.tickIncrement($,W,!1,y))/1e6;for(a=$;a<J;a=i.tickIncrement(a,W,!1,y))I.push(U),j.push(a),X&&D.push(0);j.push(a);var Q,ee=I.length,te=(a-$)/ee,ae=(Q=$+te/2,m.c2r(Q,0,y)),ne=k.size,ie=b(k.start),re=b(k.end)+(ie-i.tickIncrement(ie,ne,!1,v))/1e6;for(a=ie;a<re;a=i.tickIncrement(a,ne,!1,v)){S.push(I.slice()),F.push(a);var oe=new Array(ee);for(l=0;l<ee;l++)oe[l]=[];P.push(oe),X&&B.push(D.slice())}F.push(a);var se=S.length,le=(a-ie)/se,ce=function(e){return g.c2r(e,0,v)}(ie+le/2);G&&(Z=d(I.length,O,te,L),K=d(S.length,C,le,N)),L||"date"!==m.type||(O=u(x,O)),N||"date"!==g.type||(C=u(b,C));var de=!0,ue=!0,he=new Array(ee),pe=new Array(se),fe=1/0,me=1/0,ge=1/0,ye=1/0;for(a=0;a<A;a++){var ve=w[a],xe=M[a];p=n.findBin(ve,O),f=n.findBin(xe,C),p>=0&&p<ee&&f>=0&&f<se&&(E+=H(p,a,S[f],q,B[f]),P[f][p].push(a),de&&(void 0===he[p]?he[p]=ve:he[p]!==ve&&(de=!1)),ue&&(void 0===pe[f]?pe[f]=xe:pe[f]!==xe&&(ue=!1)),fe=Math.min(fe,ve-j[p]),me=Math.min(me,j[p+1]-ve),ge=Math.min(ge,xe-F[f]),ye=Math.min(ye,F[f+1]-xe))}if(X)for(f=0;f<se;f++)E+=s(S[f],B[f]);if(Y)for(f=0;f<se;f++)Y(S[f],E,Z,K[f]);return{x:w,xRanges:h(j,de&&he,fe,me,m,y),x0:ae,dx:te,y:M,yRanges:h(F,ue&&pe,ge,ye,g,v),y0:ce,dy:le,z:S,pts:P}}},11225:function(e,t,a){var n=a(47401),i=a(35934),r=a(2815),o=a(94060),s=a(31534);e.exports=function(e,t,a,l){function c(a,i){return n.coerce(e,t,s,a,i)}i(e,t,c,l),!1!==t.visible&&(r(e,t,c,l),o(e,t,l,c,{prefix:"",cLetter:"z"}),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},47009:function(e,t,a){var n=a(77301),i=a(37762).hoverLabelText;e.exports=function(e,t,a,r,o){var s=n(e,t,a,r,o);if(s){var l=(e=s[0]).index,c=l[0],d=l[1],u=e.cd[0],h=u.trace,p=u.xRanges[d],f=u.yRanges[c];return e.xLabel=i(e.xa,[p[0],p[1]],h.xhoverformat),e.yLabel=i(e.ya,[f[0],f[1]],h.yhoverformat),s}}},35311:function(e,t,a){e.exports={attributes:a(31534),supplyDefaults:a(11225),crossTraceDefaults:a(69764),calc:a(63846),plot:a(45396),layerName:"heatmaplayer",colorbar:a(17439),style:a(24246),hoverPoints:a(47009),eventData:a(22044),moduleType:"trace",name:"histogram2d",basePlotModule:a(66807),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{hrName:"histogram_2d",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a heatmap."].join(" ")}}},35934:function(e,t,a){var n=a(62282),i=a(47401);e.exports=function(e,t,a,r){var o=a("x"),s=a("y"),l=i.minRowLength(o),c=i.minRowLength(s);l&&c?(t._length=Math.min(l,c),n.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),(a("z")||a("marker.color"))&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")):t.visible=!1}},14570:function(e,t,a){var n=a(31534),i=a(52416),r=a(97451),o=a(20184).axisHoverFormat,s=a(87241).extendFlat;e.exports=s({x:n.x,y:n.y,z:n.z,marker:n.marker,histnorm:n.histnorm,histfunc:n.histfunc,nbinsx:n.nbinsx,xbins:n.xbins,nbinsy:n.nbinsy,ybins:n.ybins,autobinx:n.autobinx,autobiny:n.autobiny,bingroup:n.bingroup,xbingroup:n.xbingroup,ybingroup:n.ybingroup,autocontour:i.autocontour,ncontours:i.ncontours,contours:i.contours,line:{color:i.line.color,width:s({},i.line.width,{dflt:.5,description:"Sets the contour line width in (in px)"}),dash:i.line.dash,smoothing:i.line.smoothing,editType:"plot"},xhoverformat:o("x"),yhoverformat:o("y"),zhoverformat:o("z",1),hovertemplate:n.hovertemplate},r("",{cLetter:"z",editTypeOverride:"calc"}))},9213:function(e,t,a){var n=a(47401),i=a(35934),r=a(20567),o=a(67137),s=a(14570);e.exports=function(e,t,a,l){function c(a,i){return n.coerce(e,t,s,a,i)}i(e,t,c,l),!1!==t.visible&&(r(e,t,c,(function(a){return n.coerce2(e,t,s,a)})),o(e,t,c,l),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"))}},20627:function(e,t,a){e.exports={attributes:a(14570),supplyDefaults:a(9213),crossTraceDefaults:a(69764),calc:a(56240),plot:a(22818).plot,layerName:"contourlayer",style:a(72960),colorbar:a(68201),hoverPoints:a(51303),moduleType:"trace",name:"histogram2dcontour",basePlotModule:a(66807),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{hrName:"histogram_2d_contour",description:["The sample data from which statistics are computed is set in `x`","and `y` (where `x` and `y` represent marginal distributions,","binning is set in `xbins` and `ybins` in this case)","or `z` (where `z` represent the 2D distribution and binning set,","binning is set by `x` and `y` in this case).","The resulting distribution is visualized as a contour plot."].join(" ")}}},61481:function(e,t,a){var n=a(4216).r,i=a(4216).a,r=a(97451),o=a(16688).u,s=a(86692),l=a(44244),c=a(98048),d=a(22740),u=a(87241).extendFlat;e.exports={labels:l.labels,parents:l.parents,values:l.values,branchvalues:l.branchvalues,count:l.count,level:l.level,maxdepth:l.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot",description:["When set in conjunction with `tiling.flip`, determines on","which side the root nodes are drawn in the chart. If","`tiling.orientation` is *v* and `tiling.flip` is **, the root","nodes appear at the top. If `tiling.orientation` is *v* and","`tiling.flip` is *y*, the root nodes appear at the bottom. If","`tiling.orientation` is *h* and `tiling.flip` is **, the","root nodes appear at the left. If `tiling.orientation` is *h*","and `tiling.flip` is *x*, the root nodes appear at the right."].join(" ")},flip:c.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the inner padding (in px)."].join(" ")},editType:"calc"},marker:u({colors:l.marker.colors,line:l.marker.line,editType:"calc"},r("marker",{colorAttr:"colors",anim:!1})),leaf:l.leaf,pathbar:c.pathbar,text:s.text,textinfo:l.textinfo,texttemplate:i({editType:"plot"},{keys:d.eventDataKeys.concat(["label","value"])}),hovertext:s.hovertext,hoverinfo:l.hoverinfo,hovertemplate:n({},{keys:d.eventDataKeys}),textfont:s.textfont,insidetextfont:s.insidetextfont,outsidetextfont:c.outsidetextfont,textposition:c.textposition,sort:s.sort,root:l.root,domain:o({name:"icicle",trace:!0,editType:"calc"})}},43723:function(e,t,a){var n=a(35722);t.name="icicle",t.plot=function(e,a,i,r){n.plotBasePlot(t.name,e,a,i,r)},t.clean=function(e,a,i,r){n.cleanBasePlot(t.name,e,a,i,r)}},8781:function(e,t,a){var n=a(23348);t._=function(e,t){return n.calc(e,t)},t.t=function(e){return n._runCrossTraceCalc("icicle",e)}},69134:function(e,t,a){var n=a(47401),i=a(61481),r=a(31454),o=a(16688).N,s=a(18878).handleText,l=a(33419).TEXTPAD,c=a(47624),d=c.hasColorscale,u=c.handleDefaults;e.exports=function(e,t,a,c){function h(a,r){return n.coerce(e,t,i,a,r)}var p=h("labels"),f=h("parents");if(p&&p.length&&f&&f.length){var m=h("values");m&&m.length?h("branchvalues"):h("count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var g=h("text");h("texttemplate"),t.texttemplate||h("textinfo",Array.isArray(g)?"text+label":"label"),h("hovertext"),h("hovertemplate");var y=h("pathbar.visible");s(e,t,c,h,"auto",{hasPathbar:y,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),h("marker.line.width")&&h("marker.line.color",c.paper_bgcolor),h("marker.colors");var v=t._hasColorscale=d(e,"marker","colors")||(e.marker||{}).coloraxis;v&&u(e,t,c,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",v?1:.7),t._hovered={marker:{line:{width:2,color:r.contrast(c.paper_bgcolor)}}},y&&(h("pathbar.thickness",t.pathbar.textfont.size+2*l),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),o(t,c,h),t._length=null}else t.visible=!1}},80409:function(e,t,a){var n=a(62258),i=a(47401),r=a(41707),o=a(43995),s=a(73044),l=a(70947).styleOne,c=a(22740),d=a(94276),u=a(21379),h=a(48662).formatSliceLabel,p=!1;e.exports=function(e,t,a,f,m){var g=m.width,y=m.height,v=m.viewX,x=m.viewY,b=m.pathSlice,T=m.toMoveInsideSlice,_=m.strTransform,w=m.hasTransition,z=m.handleSlicesExit,k=m.makeUpdateSliceInterpolator,M=m.makeUpdateTextInterpolator,A=m.prevEntry,S=e._fullLayout,I=t[0].trace,D=-1!==I.textposition.indexOf("left"),L=-1!==I.textposition.indexOf("right"),N=-1!==I.textposition.indexOf("bottom"),j=s(a,[g,y],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),F=1/0,O=-1/0;j.forEach((function(e){var t=e.depth;t>=I._maxDepth?(e.x0=e.x1=(e.x0+e.x1)/2,e.y0=e.y1=(e.y0+e.y1)/2):(F=Math.min(F,t),O=Math.max(O,t))})),f=f.data(j,d.getPtId),I._maxVisibleLayers=isFinite(O)?O-F+1:0,f.enter().append("g").classed("slice",!0),z(f,p,{},[g,y],b),f.order();var C=null;if(w&&A){var E=d.getPtId(A);f.each((function(e){null===C&&d.getPtId(e)===E&&(C={x0:e.x0,x1:e.x1,y0:e.y0,y1:e.y1})}))}var B=function(){return C||{x0:0,x1:g,y0:0,y1:y}},P=f;return w&&(P=P.transition().each("end",(function(){var t=n.select(this);d.setSliceCursor(t,e,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})}))),P.each((function(s){s._x0=v(s.x0),s._x1=v(s.x1),s._y0=x(s.y0),s._y1=x(s.y1),s._hoverX=v(s.x1-I.tiling.pad),s._hoverY=x(N?s.y1-I.tiling.pad/2:s.y0+I.tiling.pad/2);var f=n.select(this),m=i.ensureSingle(f,"path","surface",(function(e){e.style("pointer-events","all")}));w?m.transition().attrTween("d",(function(e){var t=k(e,p,B(),[g,y],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(e){return b(t(e))}})):m.attr("d",b),f.call(u,a,e,t,{styleOne:l,eventDataKeys:c.eventDataKeys,transitionTime:c.CLICK_TRANSITION_TIME,transitionEasing:c.CLICK_TRANSITION_EASING}).call(d.setSliceCursor,e,{isTransitioning:e._transitioning}),m.call(l,s,I,{hovered:!1}),s.x0===s.x1||s.y0===s.y1?s._text="":s._text=h(s,a,I,t,S)||"";var z=i.ensureSingle(f,"g","slicetext"),A=i.ensureSingle(z,"text","",(function(e){e.attr("data-notex",1)})),j=i.ensureUniformFontSize(e,d.determineTextFont(I,s,S.font));A.text(s._text||" ").classed("slicetext",!0).attr("text-anchor",L?"end":D?"start":"middle").call(r.font,j).call(o.convertToTspans,e),s.textBB=r.bBox(A.node()),s.transform=T(s,{fontSize:j.size}),s.transform.fontSize=j.size,w?A.transition().attrTween("transform",(function(e){var t=M(e,p,B(),[g,y]);return function(e){return _(t(e))}})):A.attr("transform",_(s))})),C}},38666:function(e,t,a){e.exports={moduleType:"trace",name:"icicle",basePlotModule:a(43723),categories:[],animatable:!0,attributes:a(61481),layoutAttributes:a(86500),supplyDefaults:a(69134),supplyLayoutDefaults:a(54579),calc:a(8781)._,crossTraceCalc:a(8781).t,plot:a(74211),style:a(70947).style,colorbar:a(78666),meta:{description:["Visualize hierarchal data from leaves (and/or outer branches) towards root","with rectangles. The icicle sectors are determined by the entries in","*labels* or *ids* and in *parents*."].join(" ")}}},86500:function(e){e.exports={iciclecolorway:{valType:"colorlist",editType:"calc",description:["Sets the default icicle slice colors. Defaults to the main","`colorway` used for trace colors. If you specify a new","list here it can still be extended with lighter and darker","colors, see `extendiciclecolors`."].join(" ")},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc",description:["If `true`, the icicle slice colors (whether given by `iciclecolorway` or","inherited from `colorway`) will be extended to three times its","original length by first repeating every color 20% lighter then","each color 20% darker. This is intended to reduce the likelihood","of reusing the same color when you have many slices, but you can","set `false` to disable.","Colors provided in the trace, using `marker.colors`, are never","extended."].join(" ")}}},54579:function(e,t,a){var n=a(47401),i=a(86500);e.exports=function(e,t){function a(a,r){return n.coerce(e,t,i,a,r)}a("iciclecolorway",t.colorway),a("extendiciclecolors")}},73044:function(e,t,a){var n=a(43566),i=a(43357);e.exports=function(e,t,a){var r=a.flipX,o=a.flipY,s="h"===a.orientation,l=a.maxDepth,c=t[0],d=t[1];l&&(c=(e.height+1)*t[0]/Math.min(e.height+1,l),d=(e.height+1)*t[1]/Math.min(e.height+1,l));var u=n.partition().padding(a.pad.inner).size(s?[t[1],c]:[t[0],d])(e);return(s||r||o)&&i(u,t,{swapXY:s,flipX:r,flipY:o}),u}},74211:function(e,t,a){var n=a(23343),i=a(80409);e.exports=function(e,t,a,r){return n(e,t,a,r,{type:"icicle",drawDescendants:i})}},70947:function(e,t,a){var n=a(62258),i=a(31454),r=a(47401),o=a(77846).resizeText;function s(e,t,a){var n=t.data.data,o=!t.children,s=n.i,l=r.castOption(a,s,"marker.line.color")||i.defaultLine,c=r.castOption(a,s,"marker.line.width")||0;e.style("stroke-width",c).call(i.fill,n.color).call(i.stroke,l).style("opacity",o?a.leaf.opacity:null)}e.exports={style:function(e){var t=e._fullLayout._iciclelayer.selectAll(".trace");o(e,t,"icicle"),t.each((function(e){var t=n.select(this),a=e[0].trace;t.style("opacity",a.opacity),t.selectAll("path.surface").each((function(e){n.select(this).call(s,e,a)}))}))},styleOne:s}},95225:function(e,t,a){for(var n=a(42837),i=a(4216).r,r=a(87241).extendFlat,o=a(2859).colormodel,s=["rgb","rgba","rgba256","hsl","hsla"],l=[],c=[],d=0;d<s.length;d++){var u=o[s[d]];l.push("For the `"+s[d]+"` colormodel, it is ["+(u.zminDflt||u.min).join(", ")+"]."),c.push("For the `"+s[d]+"` colormodel, it is ["+(u.zmaxDflt||u.max).join(", ")+"].")}e.exports=r({source:{valType:"string",editType:"calc",description:["Specifies the data URI of the image to be visualized.",'The URI consists of "data:image/[<media subtype>][;base64],<data>"'].join(" ")},z:{valType:"data_array",editType:"calc",description:["A 2-dimensional array in which each element is an array of 3 or 4 numbers representing a color."].join(" ")},colormodel:{valType:"enumerated",values:s,editType:"calc",description:["Color model used to map the numerical color components described in `z` into colors.","If `source` is specified, this attribute will be set to `rgba256`","otherwise it defaults to `rgb`."].join(" ")},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot",description:["Picks a smoothing algorithm used to smooth `z` data.","This only applies for image traces that use the `source` attribute."].join(" ")},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the lower bound for each color component.","Note that the default value will depend on the colormodel.",l.join(" ")].join(" ")},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc",description:["Array defining the higher bound for each color component.","Note that the default value will depend on the colormodel.",c.join(" ")].join(" ")},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's x position."},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",description:"Set the image's y position."},dx:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's horizontal size."},dy:{valType:"number",dflt:1,editType:"calc",description:"Set the pixel's vertical size"},text:{valType:"data_array",editType:"plot",description:"Sets the text elements associated with each z value."},hovertext:{valType:"data_array",editType:"plot",description:"Same as `text`."},hoverinfo:r({},n.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:i({},{keys:["z","color","colormodel"]}),transforms:void 0})},77629:function(e,t,a){var n=a(47401),i=a(2859),r=a(83491),o=a(37762),s=a(47401).maxRowLength,l=a(80331).p;function c(e,t,a,i){return function(r){return n.constrain((r-e)*t,a,i)}}function d(e,t){return function(a){return n.constrain(a,e,t)}}e.exports=function(e,t){var a,n;if(t._hasZ)a=t.z.length,n=s(t.z);else if(t._hasSource){var u=l(t.source);a=u.height,n=u.width}var h,p=o.getFromId(e,t.xaxis||"x"),f=o.getFromId(e,t.yaxis||"y"),m=p.d2c(t.x0)-t.dx/2,g=f.d2c(t.y0)-t.dy/2,y=[m,m+n*t.dx],v=[g,g+a*t.dy];if(p&&"log"===p.type)for(h=0;h<n;h++)y.push(m+h*t.dx);if(f&&"log"===f.type)for(h=0;h<a;h++)v.push(g+h*t.dy);return t._extremes[p._id]=o.findExtremes(p,y),t._extremes[f._id]=o.findExtremes(f,v),t._scaler=function(e){var t=i.colormodel[e.colormodel],a=t.colormodel||e.colormodel,n=a.length;e._sArray=[];for(var o=0;o<n;o++)t.min[o]!==e.zmin[o]||t.max[o]!==e.zmax[o]?e._sArray.push(c(e.zmin[o],(t.max[o]-t.min[o])/(e.zmax[o]-e.zmin[o]),t.min[o],t.max[o])):e._sArray.push(d(t.min[o],t.max[o]));return function(t){for(var a=t.slice(0,n),i=0;i<n;i++){var o=a[i];if(!r(o))return!1;a[i]=e._sArray[i](o)}return a}}(t),[{x0:m,y0:g,z:t.z,w:n,h:a}]}},2859:function(e){e.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(e){return e.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(e){return e.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(e){var t=e.slice(0,3);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(e){var t=e.slice(0,4);return t[1]=t[1]+"%",t[2]=t[2]+"%",t},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},69502:function(e,t,a){var n=a(47401),i=a(95225),r=a(2859),o=a(4475).IMAGE_URL_PREFIX;e.exports=function(e,t){function a(a,r){return n.coerce(e,t,i,a,r)}a("source"),t.source&&!t.source.match(o)&&delete t.source,t._hasSource=!!t.source;var s,l=a("z");(t._hasZ=!(void 0===l||!l.length||!l[0]||!l[0].length),t._hasZ||t._hasSource)?(a("x0"),a("y0"),a("dx"),a("dy"),t._hasZ?(a("colormodel","rgb"),a("zmin",(s=r.colormodel[t.colormodel]).zminDflt||s.min),a("zmax",s.zmaxDflt||s.max)):t._hasSource&&(t.colormodel="rgba256",s=r.colormodel[t.colormodel],t.zmin=s.zminDflt,t.zmax=s.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),t._length=null):t.visible=!1}},83941:function(e){e.exports=function(e,t){return"xVal"in t&&(e.x=t.xVal),"yVal"in t&&(e.y=t.yVal),t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),e.color=t.color,e.colormodel=t.trace.colormodel,e.z||(e.z=t.color),e}},80331:function(e,t,a){var n=a(13976),i=a(4475).IMAGE_URL_PREFIX,r=a(47397).Buffer;t.p=function(e){var t=e.replace(i,""),a=new r(t,"base64");return n(a)}},44864:function(e,t,a){var n=a(21661),i=a(47401),r=a(2859);e.exports=function(e,t,a){var o=e.cd[0],s=o.trace,l=e.xa,c=e.ya;if(!(n.inbox(t-o.x0,t-(o.x0+o.w*s.dx),0)>0||n.inbox(a-o.y0,a-(o.y0+o.h*s.dy),0)>0)){var d,u=Math.floor((t-o.x0)/s.dx),h=Math.floor(Math.abs(a-o.y0)/s.dy);if(s._hasZ?d=o.z[h][u]:s._hasSource&&(d=s._canvas.el.getContext("2d").getImageData(u,h,1,1).data),d){var p,f=o.hi||s.hoverinfo;if(f){var m=f.split("+");-1!==m.indexOf("all")&&(m=["color"]),-1!==m.indexOf("color")&&(p=!0)}var g,y=r.colormodel[s.colormodel],v=y.colormodel||s.colormodel,x=v.length,b=s._scaler(d),T=y.suffix,_=[];(s.hovertemplate||p)&&(_.push("["+[b[0]+T[0],b[1]+T[1],b[2]+T[2]].join(", ")),4===x&&_.push(", "+b[3]+T[3]),_.push("]"),_=_.join(""),e.extraText=v.toUpperCase()+": "+_),Array.isArray(s.hovertext)&&Array.isArray(s.hovertext[h])?g=s.hovertext[h][u]:Array.isArray(s.text)&&Array.isArray(s.text[h])&&(g=s.text[h][u]);var w=c.c2p(o.y0+(h+.5)*s.dy),z=o.x0+(u+.5)*s.dx,k=o.y0+(h+.5)*s.dy,M="["+d.slice(0,s.colormodel.length).join(", ")+"]";return[i.extendFlat(e,{index:[h,u],x0:l.c2p(o.x0+u*s.dx),x1:l.c2p(o.x0+(u+1)*s.dx),y0:w,y1:w,color:b,xVal:z,xLabelVal:z,yVal:k,yLabelVal:k,zLabelVal:M,text:g,hovertemplateLabels:{zLabel:M,colorLabel:_,"color[0]Label":b[0]+T[0],"color[1]Label":b[1]+T[1],"color[2]Label":b[2]+T[2],"color[3]Label":b[3]+T[3]}})]}}}},10714:function(e,t,a){e.exports={attributes:a(95225),supplyDefaults:a(69502),calc:a(77629),plot:a(21683),style:a(78483),hoverPoints:a(44864),eventData:a(83941),moduleType:"trace",name:"image",basePlotModule:a(66807),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{description:["Display an image, i.e. data on a 2D regular raster.","By default, when an image is displayed in a subplot,","its y axis will be reversed (ie. `autorange: 'reversed'`),","constrained to the domain (ie. `constrain: 'domain'`)","and it will have the same scale as its x axis (ie. `scaleanchor: 'x,`)","in order for pixels to be rendered as squares."].join(" ")}}},21683:function(e,t,a){var n=a(62258),i=a(47401),r=i.strTranslate,o=a(6412),s=a(2859),l=i.isIOS()||i.isSafari()||i.isIE();e.exports=function(e,t,a,c){var d=t.xaxis,u=t.yaxis,h=!(l||e._context._exportedPlot);i.makeTraceGroups(c,a,"im").each((function(t){var a=n.select(this),l=t[0],c=l.trace,p=("fast"===c.zsmooth||!1===c.zsmooth&&h)&&!c._hasZ&&c._hasSource&&"linear"===d.type&&"linear"===u.type;c._realImage=p;var f,m,g,y,v,x,b=l.z,T=l.x0,_=l.y0,w=l.w,z=l.h,k=c.dx,M=c.dy;for(x=0;void 0===f&&x<w;)f=d.c2p(T+x*k),x++;for(x=w;void 0===m&&x>0;)m=d.c2p(T+x*k),x--;for(x=0;void 0===y&&x<z;)y=u.c2p(_+x*M),x++;for(x=z;void 0===v&&x>0;)v=u.c2p(_+x*M),x--;if(m<f&&(g=m,m=f,f=g),v<y&&(g=y,y=v,v=g),!p){f=Math.max(-.5*d._length,f),m=Math.min(1.5*d._length,m),y=Math.max(-.5*u._length,y),v=Math.min(1.5*u._length,v)}var A=Math.round(m-f),S=Math.round(v-y);if(A<=0||S<=0){a.selectAll("image").data([]).exit().remove()}else{var I=a.selectAll("image").data([t]);I.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),I.exit().remove();var D=!1===c.zsmooth?s.pixelatedStyle:"";if(p){var L=i.simpleMap(d.range,d.r2l),N=i.simpleMap(u.range,u.r2l),j=L[1]<L[0],F=N[1]>N[0];if(j||F){var O=f+A/2,C=y+S/2;D+="transform:"+r(O+"px",C+"px")+"scale("+(j?-1:1)+","+(F?-1:1)+")"+r(-O+"px",-C+"px")+";"}}I.attr("style",D);var E=new Promise((function(e){if(c._hasZ)e();else if(c._hasSource)if(c._canvas&&c._canvas.el.width===w&&c._canvas.el.height===z&&c._canvas.source===c.source)e();else{var t=document.createElement("canvas");t.width=w,t.height=z;var a=t.getContext("2d");c._image=c._image||new Image;var n=c._image;n.onload=function(){a.drawImage(n,0,0),c._canvas={el:t,source:c.source},e()},n.setAttribute("src",c.source)}})).then((function(){var e,t;if(c._hasZ)t=B((function(e,t){return b[t][e]})),e=t.toDataURL("image/png");else if(c._hasSource)if(p)e=c.source;else{var a=c._canvas.el.getContext("2d").getImageData(0,0,w,z).data;t=B((function(e,t){var n=4*(t*w+e);return[a[n],a[n+1],a[n+2],a[n+3]]})),e=t.toDataURL("image/png")}I.attr({"xlink:href":e,height:S,width:A,x:f,y:y})}));e._promises.push(E)}function B(e){var t=document.createElement("canvas");t.width=A,t.height=S;var a,n=t.getContext("2d"),r=function(e){return i.constrain(Math.round(d.c2p(T+e*k)-f),0,A)},o=function(e){return i.constrain(Math.round(u.c2p(_+e*M)-y),0,S)},h=s.colormodel[c.colormodel],p=h.colormodel||c.colormodel,m=h.fmt;for(x=0;x<l.w;x++){var g=r(x),v=r(x+1);if(v!==g&&!isNaN(v)&&!isNaN(g))for(var b=0;b<l.h;b++){var w=o(b),z=o(b+1);z===w||isNaN(z)||isNaN(w)||!e(x,b)||(a=c._scaler(e(x,b)),n.fillStyle=a?p+"("+m(a).join(",")+")":"rgba(0,0,0,0)",n.fillRect(g,w,v-g,z-w))}}return t}}))}},78483:function(e,t,a){var n=a(62258);e.exports=function(e){n.select(e).selectAll(".im image").style("opacity",(function(e){return e[0].trace.opacity}))}},42029:function(e,t,a){var n=a(87241).extendFlat,i=a(87241).extendDeep,r=a(17342).overrideAll,o=a(5153),s=a(62405),l=a(16688).u,c=a(33333),d=a(92704).templatedArray,u=a(7677),h=a(20184).descriptionOnlyNumbers,p=o({editType:"plot",colorEditType:"plot"}),f={color:{valType:"color",editType:"plot",description:["Sets the background color of the arc."].join(" ")},line:{color:{valType:"color",dflt:s.defaultLine,editType:"plot",description:["Sets the color of the line enclosing each sector."].join(" ")},width:{valType:"number",min:0,dflt:0,editType:"plot",description:["Sets the width (in px) of the line enclosing each sector."].join(" ")},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot",description:["Sets the thickness of the bar as a fraction of the total thickness of the gauge."].join(" ")},editType:"calc"},m={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot",description:["Sets the range of this axis."].join(" ")},g=d("step",i({},f,{range:m}));e.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number",description:["Determines how the value is displayed on the graph.","`number` displays the value numerically in text.","`delta` displays the difference to a reference value in text.","Finally, `gauge` displays the value graphically on an axis."].join(" ")},value:{valType:"number",editType:"calc",anim:!0,description:["Sets the number to be displayed."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the `text` within the box.","Note that this attribute has no effect if an angular gauge is displayed:","in this case, it is always centered"].join(" ")},domain:l({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot",description:["Sets the title of this indicator."].join(" ")},align:{valType:"enumerated",values:["left","center","right"],editType:"plot",description:["Sets the horizontal alignment of the title.","It defaults to `center` except for bullet charts","for which it defaults to right."].join(" ")},font:n({},p,{description:["Set the font used to display the title"].join(" ")}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:h("value")},font:n({},p,{description:["Set the font used to display main number"].join(" ")}),prefix:{valType:"string",dflt:"",editType:"plot",description:["Sets a prefix appearing before the number."].join(" ")},suffix:{valType:"string",dflt:"",editType:"plot",description:["Sets a suffix appearing next to the number."].join(" ")},editType:"plot"},delta:{reference:{valType:"number",editType:"calc",description:["Sets the reference value to compute the delta.","By default, it is set to the current value."].join(" ")},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot",description:["Sets the position of delta with respect to the number."].join(" ")},relative:{valType:"boolean",editType:"plot",dflt:!1,description:["Show relative change"].join(" ")},valueformat:{valType:"string",editType:"plot",description:h("value")},increasing:{symbol:{valType:"string",dflt:u.INCREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:u.INCREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:u.DECREASING.SYMBOL,editType:"plot",description:["Sets the symbol to display for increasing value"].join(" ")},color:{valType:"color",dflt:u.DECREASING.COLOR,editType:"plot",description:["Sets the color for increasing value."].join(" ")},editType:"plot"},font:n({},p,{description:["Set the font used to display the delta"].join(" ")}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"],description:["Set the shape of the gauge"].join(" ")},bar:i({},f,{color:{dflt:"green"},description:["Set the appearance of the gauge's value"].join(" ")}),bgcolor:{valType:"color",editType:"plot",description:"Sets the gauge background color."},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot",description:"Sets the color of the border enclosing the gauge."},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot",description:"Sets the width (in px) of the border enclosing the gauge."},axis:r({range:m,visible:n({},c.visible,{dflt:!0}),tickmode:c.tickmode,nticks:c.nticks,tick0:c.tick0,dtick:c.dtick,tickvals:c.tickvals,ticktext:c.ticktext,ticks:n({},c.ticks,{dflt:"outside"}),ticklen:c.ticklen,tickwidth:c.tickwidth,tickcolor:c.tickcolor,showticklabels:c.showticklabels,tickfont:o({description:"Sets the color bar's tick label font"}),tickangle:c.tickangle,tickformat:c.tickformat,tickformatstops:c.tickformatstops,tickprefix:c.tickprefix,showtickprefix:c.showtickprefix,ticksuffix:c.ticksuffix,showticksuffix:c.showticksuffix,separatethousands:c.separatethousands,exponentformat:c.exponentformat,minexponent:c.minexponent,showexponent:c.showexponent,editType:"plot"},"plot"),steps:g,threshold:{line:{color:n({},f.line.color,{description:["Sets the color of the threshold line."].join(" ")}),width:n({},f.line.width,{dflt:1,description:["Sets the width (in px) of the threshold line."].join(" ")}),editType:"plot"},thickness:n({},f.thickness,{dflt:.85,description:["Sets the thickness of the threshold line as a fraction of the thickness of the gauge."].join(" ")}),value:{valType:"number",editType:"calc",dflt:!1,description:["Sets a treshold value drawn as a line."].join(" ")},editType:"plot"},description:"The gauge of the Indicator plot.",editType:"plot"}}},75799:function(e,t,a){var n=a(35722);t.name="indicator",t.plot=function(e,a,i,r){n.plotBasePlot(t.name,e,a,i,r)},t.clean=function(e,a,i,r){n.cleanBasePlot(t.name,e,a,i,r)}},38209:function(e){e.exports={calc:function(e,t){var a=[],n=t.value;"number"!==typeof t._lastValue&&(t._lastValue=t.value);var i=t._lastValue,r=i;return t._hasDelta&&"number"===typeof t.delta.reference&&(r=t.delta.reference),a[0]={y:n,lastY:i,delta:n-r,relativeDelta:(n-r)/r},a}}},52327:function(e){e.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},40762:function(e,t,a){var n=a(47401),i=a(42029),r=a(16688).N,o=a(92704),s=a(26800),l=a(52327),c=a(37801),d=a(49593),u=a(51860);function h(e,t){function a(a,r){return n.coerce(e,t,i.gauge.steps,a,r)}a("color"),a("line.color"),a("line.width"),a("range"),a("thickness")}e.exports={supplyDefaults:function(e,t,a,p){function f(a,r){return n.coerce(e,t,i,a,r)}r(t,p,f),f("mode"),t._hasNumber=-1!==t.mode.indexOf("number"),t._hasDelta=-1!==t.mode.indexOf("delta"),t._hasGauge=-1!==t.mode.indexOf("gauge");var m=f("value");t._range=[0,"number"===typeof m?1.5*m:1];var g,y,v,x,b,T,_=new Array(2);function w(e,t){return n.coerce(v,x,i.gauge,e,t)}function z(e,t){return n.coerce(b,T,i.gauge.axis,e,t)}if(t._hasNumber&&(f("number.valueformat"),f("number.font.color",p.font.color),f("number.font.family",p.font.family),f("number.font.size"),void 0===t.number.font.size&&(t.number.font.size=l.defaultNumberFontSize,_[0]=!0),f("number.prefix"),f("number.suffix"),g=t.number.font.size),t._hasDelta&&(f("delta.font.color",p.font.color),f("delta.font.family",p.font.family),f("delta.font.size"),void 0===t.delta.font.size&&(t.delta.font.size=(t._hasNumber?.5:1)*(g||l.defaultNumberFontSize),_[1]=!0),f("delta.reference",t.value),f("delta.relative"),f("delta.valueformat",t.delta.relative?"2%":""),f("delta.increasing.symbol"),f("delta.increasing.color"),f("delta.decreasing.symbol"),f("delta.decreasing.color"),f("delta.position"),y=t.delta.font.size),t._scaleNumbers=(!t._hasNumber||_[0])&&(!t._hasDelta||_[1])||!1,f("title.font.color",p.font.color),f("title.font.family",p.font.family),f("title.font.size",.25*(g||y||l.defaultNumberFontSize)),f("title.text"),t._hasGauge){(v=e.gauge)||(v={}),x=o.newContainer(t,"gauge"),w("shape"),(t._isBullet="bullet"===t.gauge.shape)||f("title.align","center"),(t._isAngular="angular"===t.gauge.shape)||f("align","center"),w("bgcolor",p.paper_bgcolor),w("borderwidth"),w("bordercolor"),w("bar.color"),w("bar.line.color"),w("bar.line.width"),w("bar.thickness",l.valueThickness*("bullet"===t.gauge.shape?.5:1)),s(v,x,{name:"steps",handleItemDefaults:h}),w("threshold.value"),w("threshold.thickness"),w("threshold.line.width"),w("threshold.line.color"),b={},v&&(b=v.axis||{}),T=o.newContainer(x,"axis"),z("visible"),t._range=z("range",t._range);var k={outerTicks:!0};c(b,T,z,"linear"),u(b,T,z,"linear",k),d(b,T,z,k)}else f("title.align","center"),f("align","center"),t._isAngular=t._isBullet=!1;t._length=null}}},61814:function(e,t,a){e.exports={moduleType:"trace",name:"indicator",basePlotModule:a(75799),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:a(42029),supplyDefaults:a(40762).supplyDefaults,calc:a(38209).calc,plot:a(11447),meta:{description:["An indicator is used to visualize a single `value` along with some","contextual information such as `steps` or a `threshold`, using a","combination of three visual elements: a number, a delta, and/or a gauge.","Deltas are taken with respect to a `reference`.","Gauges can be either angular or bullet (aka linear) gauges."].join(" ")}}},11447:function(e,t,a){var n=a(62258),i=a(87717).GW,r=a(87717).Dj,o=a(47401),s=o.strScale,l=o.strTranslate,c=o.rad2deg,d=a(60482).MID_SHIFT,u=a(41707),h=a(52327),p=a(43995),f=a(37762),m=a(90407),g=a(84269),y=a(33333),v=a(31454),x={left:"start",center:"middle",right:"end"},b={left:0,center:.5,right:1},T=/[yzafpn\xb5mkMGTPEZY]/;function _(e){return e&&e.duration>0}function w(e){e.each((function(e){v.stroke(n.select(this),e.line.color)})).each((function(e){v.fill(n.select(this),e.color)})).style("stroke-width",(function(e){return e.line.width}))}function z(e,t,a){var n=e._fullLayout,i=o.extendFlat({type:"linear",ticks:"outside",range:a,showline:!0},t),r={type:"linear",_id:"x"+t._id},s={letter:"x",font:n.font,noHover:!0,noTickson:!0};function l(e,t){return o.coerce(i,r,y,e,t)}return m(i,r,l,s,n),g(i,r,l,s),r}function k(e,t,a){return[Math.min(t/e.width,a/e.height),e,t+"x"+a]}function M(e,t,a,i){var r=document.createElementNS("http://www.w3.org/2000/svg","text"),o=n.select(r);return o.text(e).attr("x",0).attr("y",0).attr("text-anchor",a).attr("data-unformatted",e).call(p.convertToTspans,i).call(u.font,t),u.bBox(o.node())}function A(e,t,a,n,i,r){var s="_cache"+t;e[s]&&e[s].key===i||(e[s]={key:i,value:a});var l=o.aggNums(r,null,[e[s].value,n],2);return e[s].value=l,l}e.exports=function(e,t,a,m){var g,y=e._fullLayout;_(a)&&m&&(g=m()),o.makeTraceGroups(y._indicatorlayer,t,"trace").each((function(t){var m,S,I,D,L,N=t[0].trace,j=n.select(this),F=N._hasGauge,O=N._isAngular,C=N._isBullet,E=N.domain,B={w:y._size.w*(E.x[1]-E.x[0]),h:y._size.h*(E.y[1]-E.y[0]),l:y._size.l+y._size.w*E.x[0],r:y._size.r+y._size.w*(1-E.x[1]),t:y._size.t+y._size.h*(1-E.y[1]),b:y._size.b+y._size.h*E.y[0]},P=B.l+B.w/2,R=B.t+B.h/2,V=Math.min(B.w/2,B.h),G=h.innerRadius*V,U=N.align||"center";if(S=R,F){if(O&&(m=P,S=R+V/2,I=function(e){return function(e,t){var a=Math.sqrt(e.width/2*(e.width/2)+e.height*e.height),n=t/a;return[n,e,t]}(e,.9*G)}),C){var H=h.bulletPadding,Y=1-h.bulletNumberDomainSize+H;m=B.l+(Y+(1-Y)*b[U])*B.w,I=function(e){return k(e,(h.bulletNumberDomainSize-H)*B.w,B.h)}}}else m=B.l+b[U]*B.w,I=function(e){return k(e,B.w,B.h)};!function(e,t,a,i){var c,d,h,m=a[0].trace,g=i.numbersX,y=i.numbersY,w=m.align||"center",k=x[w],S=i.transitionOpts,I=i.onComplete,D=o.ensureSingle(t,"g","numbers"),L=[];m._hasNumber&&L.push("number");m._hasDelta&&(L.push("delta"),"left"===m.delta.position&&L.reverse());var N=D.selectAll("text").data(L);function j(t,a,n,i){if(!t.match("s")||n>=0===i>=0||a(n).slice(-1).match(T)||a(i).slice(-1).match(T))return a;var r=t.slice().replace("s","f").replace(/\d+/,(function(e){return parseInt(e)-1})),o=z(e,{tickformat:r});return function(e){return Math.abs(e)<1?f.tickText(o,e).text:a(e)}}function F(){var t=z(e,{tickformat:m.number.valueformat},m._range);t.setScale(),f.prepTicks(t);var i=function(e){return f.tickText(t,e).text},o=m.number.suffix,s=m.number.prefix,l=D.select("text.number");function d(){var t="number"===typeof a[0].y?s+i(a[0].y)+o:"-";l.text(t).call(u.font,m.number.font).call(p.convertToTspans,e)}return _(S)?l.transition().duration(S.duration).ease(S.easing).each("end",(function(){d(),I&&I()})).each("interrupt",(function(){d(),I&&I()})).attrTween("text",(function(){var e=n.select(this),t=r(a[0].lastY,a[0].y);m._lastValue=a[0].y;var l=j(m.number.valueformat,i,a[0].lastY,a[0].y);return function(a){e.text(s+l(t(a))+o)}})):d(),c=M(s+i(a[0].y)+o,m.number.font,k,e),l}function O(){var t=z(e,{tickformat:m.delta.valueformat},m._range);t.setScale(),f.prepTicks(t);var i=function(e){return f.tickText(t,e).text},o=function(e){return m.delta.relative?e.relativeDelta:e.delta},s=function(e,t){return 0===e||"number"!==typeof e||isNaN(e)?"-":(e>0?m.delta.increasing.symbol:m.delta.decreasing.symbol)+t(e)},l=function(e){return e.delta>=0?m.delta.increasing.color:m.delta.decreasing.color};void 0===m._deltaLastValue&&(m._deltaLastValue=o(a[0]));var c=D.select("text.delta");function h(){c.text(s(o(a[0]),i)).call(v.fill,l(a[0])).call(p.convertToTspans,e)}return c.call(u.font,m.delta.font).call(v.fill,l({delta:m._deltaLastValue})),_(S)?c.transition().duration(S.duration).ease(S.easing).tween("text",(function(){var e=n.select(this),t=o(a[0]),c=m._deltaLastValue,d=j(m.delta.valueformat,i,c,t),u=r(c,t);return m._deltaLastValue=t,function(t){e.text(s(u(t),d)),e.call(v.fill,l({delta:u(t)}))}})).each("end",(function(){h(),I&&I()})).each("interrupt",(function(){h(),I&&I()})):h(),d=M(s(o(a[0]),i),m.delta.font,k,e),c}N.enter().append("text"),N.attr("text-anchor",(function(){return k})).attr("class",(function(e){return e})).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),N.exit().remove();var C,E=m.mode+m.align;m._hasDelta&&(C=O(),E+=m.delta.position+m.delta.font.size+m.delta.font.family+m.delta.valueformat,E+=m.delta.increasing.symbol+m.delta.decreasing.symbol,h=d);m._hasNumber&&(F(),E+=m.number.font.size+m.number.font.family+m.number.valueformat+m.number.suffix+m.number.prefix,h=c);if(m._hasDelta&&m._hasNumber){var B,P,R=[(c.left+c.right)/2,(c.top+c.bottom)/2],V=[(d.left+d.right)/2,(d.top+d.bottom)/2],G=.75*m.delta.font.size;"left"===m.delta.position&&(B=A(m,"deltaPos",0,-1*(c.width*b[m.align]+d.width*(1-b[m.align])+G),E,Math.min),P=R[1]-V[1],h={width:c.width+d.width+G,height:Math.max(c.height,d.height),left:d.left+B,right:c.right,top:Math.min(c.top,d.top+P),bottom:Math.max(c.bottom,d.bottom+P)}),"right"===m.delta.position&&(B=A(m,"deltaPos",0,c.width*(1-b[m.align])+d.width*b[m.align]+G,E,Math.max),P=R[1]-V[1],h={width:c.width+d.width+G,height:Math.max(c.height,d.height),left:c.left,right:d.right+B,top:Math.min(c.top,d.top+P),bottom:Math.max(c.bottom,d.bottom+P)}),"bottom"===m.delta.position&&(B=null,P=d.height,h={width:Math.max(c.width,d.width),height:c.height+d.height,left:Math.min(c.left,d.left),right:Math.max(c.right,d.right),top:c.bottom-c.height,bottom:c.bottom+d.height}),"top"===m.delta.position&&(B=null,P=c.top,h={width:Math.max(c.width,d.width),height:c.height+d.height,left:Math.min(c.left,d.left),right:Math.max(c.right,d.right),top:c.bottom-c.height-d.height,bottom:c.bottom}),C.attr({dx:B,dy:P})}(m._hasNumber||m._hasDelta)&&D.attr("transform",(function(){var e=i.numbersScaler(h);E+=e[2];var t,a=A(m,"numbersScale",1,e[0],E,Math.min);m._scaleNumbers||(a=1),t=m._isAngular?y-a*h.bottom:y-a*(h.top+h.bottom)/2,m._numbersTop=a*h.top+t;var n=h[w];"center"===w&&(n=(h.left+h.right)/2);var r=g-a*n;return r=A(m,"numbersTranslate",0,r,E,Math.max),l(r,t)+s(a)}))}(e,j,t,{numbersX:m,numbersY:S,numbersScaler:I,transitionOpts:a,onComplete:g}),F&&(D={range:N.gauge.axis.range,color:N.gauge.bgcolor,line:{color:N.gauge.bordercolor,width:0},thickness:1},L={range:N.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:N.gauge.bordercolor,width:N.gauge.borderwidth},thickness:1});var X=j.selectAll("g.angular").data(O?t:[]);X.exit().remove();var Z=j.selectAll("g.angularaxis").data(O?t:[]);Z.exit().remove(),O&&function(e,t,a,r){var o,s,u,h,p=a[0].trace,m=r.size,g=r.radius,y=r.innerRadius,v=r.gaugeBg,x=r.gaugeOutline,b=[m.l+m.w/2,m.t+m.h/2+g/2],T=r.gauge,k=r.layer,M=r.transitionOpts,A=r.onComplete,S=Math.PI/2;function I(e){var t=p.gauge.axis.range[0],a=(e-t)/(p.gauge.axis.range[1]-t)*Math.PI-S;return a<-S?-S:a>S?S:a}function D(e){return n.svg.arc().innerRadius((y+g)/2-e/2*(g-y)).outerRadius((y+g)/2+e/2*(g-y)).startAngle(-S)}function L(e){e.attr("d",(function(e){return D(e.thickness).startAngle(I(e.range[0])).endAngle(I(e.range[1]))()}))}T.enter().append("g").classed("angular",!0),T.attr("transform",l(b[0],b[1])),k.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),k.selectAll("g.xangularaxistick,path,text").remove(),o=z(e,p.gauge.axis),o.type="linear",o.range=p.gauge.axis.range,o._id="xangularaxis",o.ticklabeloverflow="allow",o.setScale();var N=function(e){return(o.range[0]-e.x)/(o.range[1]-o.range[0])*Math.PI+Math.PI},j={},F=f.makeLabelFns(o,0).labelStandoff;j.xFn=function(e){var t=N(e);return Math.cos(t)*F},j.yFn=function(e){var t=N(e),a=Math.sin(t)>0?.2:1;return-Math.sin(t)*(F+e.fontSize*a)+Math.abs(Math.cos(t))*(e.fontSize*d)},j.anchorFn=function(e){var t=N(e),a=Math.cos(t);return Math.abs(a)<.1?"middle":a>0?"start":"end"},j.heightFn=function(e,t,a){var n=N(e);return-.5*(1+Math.sin(n))*a};var O=function(e){return l(b[0]+g*Math.cos(e),b[1]-g*Math.sin(e))};u=function(e){return O(N(e))};var C=function(e){var t=N(e);return O(t)+"rotate("+-c(t)+")"};if(s=f.calcTicks(o),h=f.getTickSigns(o)[2],o.visible){h="inside"===o.ticks?-1:1;var E=(o.linewidth||1)/2;f.drawTicks(e,o,{vals:s,layer:k,path:"M"+h*E+",0h"+h*o.ticklen,transFn:C}),f.drawLabels(e,o,{vals:s,layer:k,transFn:u,labelFns:j})}var B=[v].concat(p.gauge.steps),P=T.selectAll("g.bg-arc").data(B);P.enter().append("g").classed("bg-arc",!0).append("path"),P.select("path").call(L).call(w),P.exit().remove();var R=D(p.gauge.bar.thickness),V=T.selectAll("g.value-arc").data([p.gauge.bar]);V.enter().append("g").classed("value-arc",!0).append("path");var G=V.select("path");_(M)?(G.transition().duration(M.duration).ease(M.easing).each("end",(function(){A&&A()})).each("interrupt",(function(){A&&A()})).attrTween("d",(U=R,H=I(a[0].lastY),Y=I(a[0].y),function(){var e=i(H,Y);return function(t){return U.endAngle(e(t))()}})),p._lastValue=a[0].y):G.attr("d","number"===typeof a[0].y?R.endAngle(I(a[0].y)):"M0,0Z");var U,H,Y;G.call(w),V.exit().remove(),B=[];var X=p.gauge.threshold.value;(X||0===X)&&B.push({range:[X,X],color:p.gauge.threshold.color,line:{color:p.gauge.threshold.line.color,width:p.gauge.threshold.line.width},thickness:p.gauge.threshold.thickness});var Z=T.selectAll("g.threshold-arc").data(B);Z.enter().append("g").classed("threshold-arc",!0).append("path"),Z.select("path").call(L).call(w),Z.exit().remove();var K=T.selectAll("g.gauge-outline").data([x]);K.enter().append("g").classed("gauge-outline",!0).append("path"),K.select("path").call(L).call(w),K.exit().remove()}(e,0,t,{radius:V,innerRadius:G,gauge:X,layer:Z,size:B,gaugeBg:D,gaugeOutline:L,transitionOpts:a,onComplete:g});var K=j.selectAll("g.bullet").data(C?t:[]);K.exit().remove();var q=j.selectAll("g.bulletaxis").data(C?t:[]);q.exit().remove(),C&&function(e,t,a,n){var i,r,o,s,c,d=a[0].trace,u=n.gauge,p=n.layer,m=n.gaugeBg,g=n.gaugeOutline,y=n.size,x=d.domain,b=n.transitionOpts,T=n.onComplete;u.enter().append("g").classed("bullet",!0),u.attr("transform",l(y.l,y.t)),p.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),p.selectAll("g.xbulletaxistick,path,text").remove();var k=y.h,M=d.gauge.bar.thickness*k,A=x.x[0],S=x.x[0]+(x.x[1]-x.x[0])*(d._hasNumber||d._hasDelta?1-h.bulletNumberDomainSize:1);i=z(e,d.gauge.axis),i._id="xbulletaxis",i.domain=[A,S],i.setScale(),r=f.calcTicks(i),o=f.makeTransTickFn(i),s=f.getTickSigns(i)[2],c=y.t+y.h,i.visible&&(f.drawTicks(e,i,{vals:"inside"===i.ticks?f.clipEnds(i,r):r,layer:p,path:f.makeTickPath(i,c,s),transFn:o}),f.drawLabels(e,i,{vals:r,layer:p,transFn:o,labelFns:f.makeLabelFns(i,c)}));function I(e){e.attr("width",(function(e){return Math.max(0,i.c2p(e.range[1])-i.c2p(e.range[0]))})).attr("x",(function(e){return i.c2p(e.range[0])})).attr("y",(function(e){return.5*(1-e.thickness)*k})).attr("height",(function(e){return e.thickness*k}))}var D=[m].concat(d.gauge.steps),L=u.selectAll("g.bg-bullet").data(D);L.enter().append("g").classed("bg-bullet",!0).append("rect"),L.select("rect").call(I).call(w),L.exit().remove();var N=u.selectAll("g.value-bullet").data([d.gauge.bar]);N.enter().append("g").classed("value-bullet",!0).append("rect"),N.select("rect").attr("height",M).attr("y",(k-M)/2).call(w),_(b)?N.select("rect").transition().duration(b.duration).ease(b.easing).each("end",(function(){T&&T()})).each("interrupt",(function(){T&&T()})).attr("width",Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y)))):N.select("rect").attr("width","number"===typeof a[0].y?Math.max(0,i.c2p(Math.min(d.gauge.axis.range[1],a[0].y))):0);N.exit().remove();var j=a.filter((function(){return d.gauge.threshold.value||0===d.gauge.threshold.value})),F=u.selectAll("g.threshold-bullet").data(j);F.enter().append("g").classed("threshold-bullet",!0).append("line"),F.select("line").attr("x1",i.c2p(d.gauge.threshold.value)).attr("x2",i.c2p(d.gauge.threshold.value)).attr("y1",(1-d.gauge.threshold.thickness)/2*k).attr("y2",(1-(1-d.gauge.threshold.thickness)/2)*k).call(v.stroke,d.gauge.threshold.line.color).style("stroke-width",d.gauge.threshold.line.width),F.exit().remove();var O=u.selectAll("g.gauge-outline").data([g]);O.enter().append("g").classed("gauge-outline",!0).append("rect"),O.select("rect").call(I).call(w),O.exit().remove()}(e,0,t,{gauge:K,layer:q,size:B,gaugeBg:D,gaugeOutline:L,transitionOpts:a,onComplete:g});var W=j.selectAll("text.title").data(t);W.exit().remove(),W.enter().append("text").classed("title",!0),W.attr("text-anchor",(function(){return C?x.right:x[N.title.align]})).text(N.title.text).call(u.font,N.title.font).call(p.convertToTspans,e),W.attr("transform",(function(){var e,t=B.l+B.w*b[N.title.align],a=h.titlePadding,n=u.bBox(W.node());if(F){if(O)if(N.gauge.axis.visible)e=u.bBox(Z.node()).top-a-n.bottom;else e=B.t+B.h/2-V/2-n.bottom-a;C&&(e=S-(n.top+n.bottom)/2,t=B.l-h.bulletPadding*B.w)}else e=N._numbersTop-a-n.bottom;return l(t,e)}))}))}}}]);